if (self.CavalryLogger) { CavalryLogger.start_js(["5Zfdv"]); }

__d("ComposerXContextConfig",[],(function a(b,c,d,e,f,g){f.exports={propertyNames:{actorID:"ACTOR_ID",postID:"POST_ID"},propertyValues:{ACTOR_ID:"actorID",POST_ID:"postID"}}}),null);
__d("PrivacyBaseFilterConst",[],(function a(b,c,d,e,f,g){f.exports={FRIEND_LIST:129,FRIENDS_PLUS_GAMER_FRIENDS:128,FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,CUSTOM:111,EVERYONE:80,EVERYONE_MINOR_DEPRECATED:75,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,MUTUAL_FRIENDS_DEPRECATED:35,SELF:10,NOBODY:0}}),null);
__d("ComposerXAttachmentBootstrap",["csx","cx","CSS","Form","FormSubmit","Parent","URI"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=[],k={bootstrap:function l(m){k.load(c("Parent").byTag(m,"form"),m.getAttribute("data-endpoint"))},load:function l(m,n,o){var p=new(c("URI"))(n).addQueryData({composerurihash:k.getURIHash(n)});c("CSS").conditionClass(m,"_fu",o);var q=c("Parent").bySelector(m,"._2_4");c("CSS").removeClass(q,"async_saving");c("Form").setDisabled(m,false);m.action=p.toString();c("FormSubmit").send(m)},getURIHash:function l(m){if(m==="initial")return"initial";var n=j.indexOf(m);if(n!==-1)return n+"";else{n=j.length;j[n]=m;return n+""}}};f.exports=k}),null);
__d("ComposerXContext",["invariant","ComposerXContextConfig"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=function i(k){return c("ComposerXContextConfig").propertyNames[k]};function j(k){"use strict";this.$ComposerXContext1={};for(var l in k)this.setProperty(l,k[l])}j.prototype.getProperty=function(k){"use strict";i(k)||h(0);return this.$ComposerXContext1[k]};j.prototype.setProperty=function(k,l){"use strict";i(k)||h(0);this.$ComposerXContext1[k]=l;return this};j.PROPERTIES=c("ComposerXContextConfig").propertyValues;f.exports=j}),null);
__d("ComposerTargetType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SELF_USER:"feed",OTHER_USER:"wall",GROUP:"group",PAGE:"page",EVENT:"event",RECOMMENDATION:"recommendation",FUNDRAISER:"fundraiser",EXAMPLE:"example",MARKETPLACE:"marketplace",ALBUM:"album",OTHER:"other"})}),null);
__d("ComposerType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({STATUS:"status",RESHARE:"reshare",UNKNOWN:"unknown",PHOTO:"photo",VIDEO:"video",INLINE:"inline",ADVANCED:"advanced"})}),null);
__d("ComposerWaterfallEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COMPOSER_CANCEL:"composer_cancel",COMPOSER_CANCEL_INTENT:"intent_composer_cancel",COMPOSER_ENTRY:"composer_entry",COMPOSER_NOT_RENDERED:"composer_not_renderer",COMPOSER_POST:"composer_post",COMPOSER_POST_CANCEL:"composer_post_cancel",COMPOSER_POST_FAILURE:"composer_post_failure",COMPOSER_POST_FAILURE_FATAL:"composer_post_fatal_failure",COMPOSER_POST_FAILURE_GIVEUP:"composer_post_giveup_failure",COMPOSER_POST_SUCCESS:"composer_post_success",COMPOSER_POST_COMPLETED:"composer_post_completed",COMPOSER_WRITTEN:"composer_written",ALBUM_ADD:"add_album",ALBUM_CANCEL:"cancel_album",ALBUM_INTENT:"intent_album",ALBUM_REMOVE:"remove_album",FRIEND_TAG_ADD:"add_friend_tag",FRIEND_TAG_CANCEL:"cancel_friend_tag",FRIEND_TAG_INTENT:"intent_friend_tag",FRIEND_TAG_REMOVE:"remove_friend_tag",FRIEND_TAG_SEARCH:"search_friend_tag",FRIEND_SHOW_MORE:"show_more_friend_tag",LOCATION_ADD:"add_location",LOCATION_CANCEL:"cancel_location",LOCATION_INTENT:"intent_location",LOCATION_REMOVE:"remove_location",LOCATION_SCROLL:"scroll_location",LOCATION_SEARCH:"search_location",MINUTIAE_ADD:"add_minutiae",MINUTIAE_CANCEL:"cancel_minutiae",MINUTIAE_CHANGE_ICON:"change_icon_minutiae",MINUTIAE_CHANGE_ICON_CANCEL:"change_icon_cancel_minutiae",MINUTIAE_CHANGE_ICON_INTENT:"change_icon_intent_minutiae",MINUTIAE_CHANGE_ICON_SEARCH:"change_icon_search_minutiae",MINUTIAE_INTENT:"intent_minutiae",MINUTIAE_REMOVE:"remove_minutiae",MINUTIAE_SCROLL:"scroll_minutiae",MINUTIAE_SEARCH:"search_minutiae",MINUTIAE_TYPE_CLICK:"type_click_minutiae",MINUTIAE_SEE_MORE:"see_more_minutiae",MINUTIAE_CHAIN_SKIP:"skip_chain_minutiae",MINUTIAE_CHAIN_SUGGEST:"suggest_chain_minutiae",MINUTIAE_ICONPICKER_QUERY:"minutiae_iconpicker_query",MINUTIAE_ICONPICKER_BOOTSTRAP:"minutiae_iconpicker_bootstrap",MINUTIAE_ICONPICKER_SELECT:"minutiae_iconpicker_select",MARKDOWN_INTENT:"markdown_intent",MEDIA_INTENT:"intent_media",MEDIA_CANCEL:"cancel_media",NAVIGATE_AWAY:"navigate_away",PHOTO_ADD:"add_photo",PHOTO_ADD_FAILURE:"add_photo_failure",PHOTO_ADD_SUCCESS:"add_photo_success",PHOTO_REMOVE:"remove_photo",PRIVACY_ADD:"add_privacy",PRIVACY_CANCEL:"cancel_privacy",VOICE_SWITCHER_CANCEL:"cancel_voice_switcher",PRIVACY_INTENT:"intent_privacy",PRIVACY_SCROLL:"scroll_privacy",PRIVACY_SEE_ALL_LISTS:"see_all_lists_privacy",SELECT_FRIEND_TIMELINE_INTENT:"intent_select_friend_timeline",SELECT_FRIEND_TIMELINE_ADD:"add_select_friend_timeline",SELECT_FRIEND_TIMELINE_CANCEL:"cancel_select_friend_timeline",SERVER_POST_BEGIN:"server_composer_post_begin",SERVER_POST_FAILURE:"server_composer_post_failure",SERVER_POST_SUCCESS:"server_composer_post_succeeded",POST_POST_WITH_TAG_BEGIN:"post_post_with_tag_begin",POST_POST_WITH_TAG_FAILURE:"post_post_with_tag_failure",POST_POST_WITH_TAG_SUCCESS:"post_post_with_tag_success",TARGET_SELECTOR_INTENT:"intent_target_selector",TARGET_SELECTOR_CANCEL:"cancel_target_selector",VIDEO_ADD:"add_video",VIDEO_ADD_FAILURE:"add_video_failure",VIDEO_ADD_SUCCESS:"add_video_success",VIDEO_REMOVE:"remove_video",FEATURE_INTENT:"composer_feature_intent",FEATURE_UPDATE:"composer_feature_update",FEATURE_CANCEL:"composer_feature_cancel",FEATURE_DONE:"composer_feature_done",SPROUTS_SCROLL:"inline_sprouts_scrolled_in_full_screen",SPROUTS_INITIAL:"inline_sprouts_initial_state",SPROUTS_STATE_CHANGE:"inline_sprouts_state_changed"})}),null);
__d("ComposerXSessionIDs",["cx","DOM","uuid"],(function a(b,c,d,e,f,g,h){var i={},j={getSessionID:function k(l){return i[l]},resetSessionID:function k(l){i[l]=c("uuid")()},createSessionIDInput:function k(l){return c("DOM").create("input",{type:"hidden",name:"composer_session_id",className:"_5r_b",value:l})}};f.exports=j}),null);
__d("ComposerXMarauderLogger",["Event","ComposerTargetType","ComposerType","ComposerWaterfallEvent","ComposerXSessionIDs","MarauderLogger","ShareModeConst"],(function a(b,c,d,e,f,g){__p&&__p();var h={},i=c("ComposerType").STATUS,j={logEvent:function k(l,m,n){__p&&__p();if(!n)n={};var o=h[m],p=c("ComposerXSessionIDs").getSessionID(m);if(!o||!p)return;if(n.logOncePerSession){if(!o.loggedEventTypes[p])o.loggedEventTypes[p]={};if(o.loggedEventTypes[p][l])return;o.loggedEventTypes[p][l]=true}var q=o.composerType?o.composerType:i,r=babelHelpers["extends"]({},n.extraData,{composer_type:q,target_type:o.targetType,target_id:o.targetID,ref:o.entryPointRef,composer_source_surface:o.composerSourceSurface,is_edit_composer:o.isEditComposer===true});c("MarauderLogger").log(l,"composer",r,undefined,undefined,p)},registerComposer:function k(l,m,n){h[l.id]=Object.assign({targetID:m,loggedEventTypes:{}},n)},getInstance:function k(l){return h[l]},listenForPostEvents:function k(l,m){if(!m)return[];return[c("Event").listen(m,"submit",function(){j.logPost(l)}),c("Event").listen(m,"success",function(){j.logPostSuccess(l)}),c("Event").listen(m,"error",function(event){j.logPostFailure(l,{error_info:{error_code:event.data.response.error,error_description:event.data.response.errorDescription,error_summary:event.data.response.errorSummary}})})]},setShareMode:function k(l,m){__p&&__p();var n=h[l];if(!n)return;switch(m){case c("ShareModeConst").SELF_POST:n.targetType=c("ComposerTargetType").SELF_USER;break;case c("ShareModeConst").FRIEND:n.targetType=c("ComposerTargetType").OTHER_USER;break;case c("ShareModeConst").PAGE:case c("ShareModeConst").SELF_PAGE:n.targetType=c("ComposerTargetType").PAGE;break;case c("ShareModeConst").GROUP:n.targetType=c("ComposerTargetType").GROUP;break;default:n.targetType=c("ComposerTargetType").OTHER}},logEntry:function k(l,m){j.logEvent(c("ComposerWaterfallEvent").COMPOSER_ENTRY,l,{logOncePerSession:true,extraData:m})},logCompleted:function k(l,m){j.logEvent(c("ComposerWaterfallEvent").COMPOSER_POST_COMPLETED,l,{extraData:m})},logPost:function k(l,m){j.logEvent(c("ComposerWaterfallEvent").COMPOSER_POST,l,{extraData:m})},logPostSuccess:function k(l,m){j.logEvent(c("ComposerWaterfallEvent").COMPOSER_POST_SUCCESS,l,{extraData:m})},logPostFailure:function k(l,m){j.logEvent(c("ComposerWaterfallEvent").COMPOSER_POST_FAILURE,l,{extraData:m})}};f.exports=j}),null);
__d("ComposerXSessionIDInserter",["csx","cx","ComposerXSessionIDs","DOM","DOMQuery","Event","Parent","onEnclosingPageletDestroy"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j={init:function k(l){var m=c("Event").listen(l,"submit",j._onSubmit);c("onEnclosingPageletDestroy")(l,function(){m.remove()})},_onSubmit:function k(l){j.insertSessionInput(l.getTarget())},insertSessionInput:function k(l){__p&&__p();var m=c("Parent").bySelector(l,"._119");if(!m)return;var n=c("ComposerXSessionIDs").getSessionID(m.id);if(!n)return;var o=c("DOMQuery").scry(l,"._5r_b")[0];if(!o)c("DOM").prependContent(l,c("ComposerXSessionIDs").createSessionIDInput(n));else o.value=n}};f.exports=j}),null);
__d("ComposerXStore",["Arbiter","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h={};function i(k,l){return"ComposerX/"+k+"/"+l}var j={set:function k(l,m,n){if(!h[l])h[l]={};h[l][m]=n;c("Arbiter").inform(i(l,m),{},c("Arbiter").BEHAVIOR_STATE)},get:function k(l,m){if(h[l])return h[l][m];return null},getAllForComposer:function k(l){return h[l]||{}},waitForComponents:function k(l,m,n){c("Arbiter").registerCallback(n,m.map(i.bind(null,l)))}};c("Arbiter").subscribe("page_transition",function(){for(var k in h)if(!c("ge")(k))delete h[k]});f.exports=j}),null);
__d("AudienceSelectorTags",[],(function a(b,c,d,e,f,g){var h={},i={hasTags:function j(k){return Object.prototype.hasOwnProperty.call(h,k)},setHasTags:function j(k){if(k)h[k]=true}};f.exports=i}),null);
__d("DynamicIconSelector",["Button","CSS","DOM","SelectorDeprecated"],(function a(b,c,d,e,f,g){__p&&__p();var h={swapIcon:function i(j){var k=c("SelectorDeprecated").getSelectedOptions(j)[0],l=k&&c("DOM").scry(k,".itemIcon")[0],m=c("SelectorDeprecated").getSelectorButton(j);if(l)c("Button").setIcon(m,l.cloneNode(true));else{var n=c("DOM").scry(m,".img")[0];n&&c("DOM").remove(n)}c("CSS").conditionClass(m,"uiSelectorChevronOnly",!l)}};c("SelectorDeprecated").subscribe("change",function(i,j){var k=j.selector;if(c("CSS").hasClass(k,"dynamicIconSelector"))h.swapIcon(k)});f.exports=h}),null);
__d("PrivacySelectorOption",["csx","fbt","Arbiter","AudienceSelectorTags","CSS","CurrentUser","DOM","DynamicIconSelector","Parent","PrivacyBaseFilterConst","PrivacyConst","SelectorDeprecated","intlList"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l){__p&&__p();if(!k)throw new Error("there's no DOM option. Config data: ",l);this._elem=k;this._selector=c("Parent").byClass(this._elem,"audienceSelector");if(!this._selector)return;this._priv_base_val=l.priv_base_val;this._audienceCount="";this._hasRestricted=l.has_restricted||false;this._isCustom=l.is_custom||false;this._includedAudience=l.included||"";this._excludedAudience=l.excluded||{};this._excludedTaggees={};this._tagExpansionBehavior=l.tag_expansion_behavior||c("PrivacyConst").TagExpansion.NONE;this._plusLabel=c("DOM").scry(k,".plusLabel")[0];this._audienceCountLabel=c("DOM").scry(k,".audienceCountLabel")[0];this._taggedIDs=[];this._tags=[];this._recalculateTooltipAndLabel();this._updateOptionCountLabel();this._updateSelector();c("Arbiter").subscribe("Composer/changedtags",function(m,n){__p&&__p();var o=c("CSS").hasClass(this._selector,"composerAudienceSelector");if(!this._getChangedData()||!o)return;this._tags=[];this._taggedIDs=[];for(var p=0;p<n.withTags.length;p++){var q=n.withTags[p].info;if(q.uid!=c("CurrentUser").getID()){this._tags.push(q.text);this._taggedIDs.push(q.uid)}}for(var r in n.mention)if(n.mention[r].type=="user"&&n.mention[r].uid!=c("CurrentUser").getID()){this._tags.push(n.mention[r].text);this._taggedIDs.push(n.mention[r].uid)}var s=c("DOM").scry(document.body,"._5l7q")[0];s&&!!this._taggedIDs.length&&c("CSS").hide(s);this._updateOptionCountLabel();var t=this._recalculateTooltipAndLabel();if(t&&c("SelectorDeprecated").isOptionSelected(this._elem)){this._updateSelector();c("Arbiter").inform("SelectedPrivacyOption/changed",this._getChangedData())}}.bind(this));c("SelectorDeprecated").listen(this._selector,"change",this._updateSelector.bind(this))}Object.assign(j.prototype,{updateOption:function k(l,m,n,o,p){this._priv_base_val=l;this._includedAudience=m;this._excludedAudience=n;this._tagExpansionBehavior=o;this._audienceCount=p;this._recalculateTooltipAndLabel();this._updateOptionCountLabel();return{label:this._label,tooltip:this._tooltip}},_recalculateTooltipAndLabel:function k(){var l=this._label;this._label=this._getNewSelectorLabel();var m=this._tooltip;this._tooltip=this._getNewTooltip();return m!=this._tooltip||l!=this._label},_getNewTooltip:function k(){if(this._isCustom)return this._recalcCustomTooltip();switch(this._priv_base_val){case c("PrivacyBaseFilterConst").ALL_FRIENDS:return this._recalcFriendsTooltip();case c("PrivacyBaseFilterConst").FRIENDS_MINUS_ACQUAINTANCES:return this._recalcFriendsMinusTooltip();case c("PrivacyBaseFilterConst").SELF:var l=this._getTagExpansionText();return l?l:this._getIncludedAudience();default:return this._recalcCustomTooltip()}},_getNewSelectorLabel:function k(){var l=this._elem.getAttribute("data-label").replace(/\(.*\)/,"");if(this._showAudienceCount()){var m=" ("+this._audienceCount+")";l+=m}if(this._isTagExpanded())l+=" (+)";return l},_updateOptionCountLabel:function k(){if(this._audienceCountLabel){if(this._showAudienceCount()){var l=" ("+this._audienceCount+")";c("DOM").setContent(this._audienceCountLabel,l)}c("CSS").conditionShow(this._audienceCountLabel,this._showAudienceCount())}this._plusLabel&&c("CSS").conditionShow(this._plusLabel,this._isTagExpanded())},_getChangedData:function k(){return{tags:this._taggedIDs,privacy:this._priv_base_val}},_showAudienceCount:function k(){return this._audienceCountLabel&&this._audienceCount&&this._audienceCount.length>0},_isTagExpanded:function k(){var l=this._getTagExpansionBehavior(),m=!!this._taggedIDs.length||this._alreadyHasTags();return m&&l!=c("PrivacyConst").TagExpansion.NONE},_alreadyHasTags:function k(){var l=c("DOM").scry(this._selector,"*[data-oid]")[0];l=l&&l.getAttribute("data-oid");return l&&c("AudienceSelectorTags").hasTags(l)},_updateSelector:function k(){if(!this._isSharedAlbum()&&c("SelectorDeprecated").isOptionSelected(this._elem)){var l=c("CSS").hasClass(this._selector,"composerAudienceSelector");l&&c("SelectorDeprecated").setButtonLabel(this._selector,this._label);c("SelectorDeprecated").setButtonTooltip(this._selector,this._tooltip);c("DynamicIconSelector").swapIcon(this._selector);return false}return true},_isSharedAlbum:function k(){var l=c("DOM").scry(this._selector,"*[data-shared-album]")[0];return l&&l.getAttribute("data-shared-album")},_getTagExpansionBehavior:function k(){if(this._tagExpansionBehavior)return this._tagExpansionBehavior;var l=this._priv_base_val===c("PrivacyConst").FriendsValue.SELF,m=this._priv_base_val===c("PrivacyConst").FriendsValue.EVERYONE;if(l&&this._isSharedAlbum()||m)return c("PrivacyConst").TagExpansion.NONE;else if(this._priv_base_val<c("PrivacyConst").FriendsValue.ALL_FRIENDS)return c("PrivacyConst").TagExpansion.TAGGEES;return c("PrivacyConst").TagExpansion.FRIENDS_OF_TAGGEES},_getTagExpansionText:function k(){var l=this._getTagExpansionBehavior();if(!!this._taggedIDs.length||this._alreadyHasTags()){if(l==c("PrivacyConst").TagExpansion.FRIENDS_OF_TAGGEES)return i._("friends of anyone tagged");else if(l==c("PrivacyConst").TagExpansion.TAGGEES)return i._("Anyone tagged");return""}return""},_getIncludedAudience:function k(){if(this._includedAudience)return this._includedAudience;var l=this._priv_base_val===c("PrivacyConst").FriendsValue.SELF;if(l&&!this._isSharedAlbum())return i._("Only Me");return this._elem.getAttribute("data-label")},_getCombinedSentence:function k(l,m){if(!m)return l;return i._("{list of people who can see this}; Except: {list of people who cannot see this}",[i.param("list of people who can see this",l),i.param("list of people who cannot see this",m)])},_recalcFriendsTooltip:function k(){__p&&__p();var l=this._tags.length;if(l>2)return this._hasRestricted?i._("Your friends and friends of anyone tagged; Except: Restricted"):i._("Your friends and friends of anyone tagged");else if(l==2)if(this._hasRestricted)return i._("Your friends, {user}'s friends and {user2}'s friends; Except: Restricted",[i.param("user",this._tags[0]),i.param("user2",this._tags[1])]);else return i._("Your friends, {user}'s friends and {user2}'s friends",[i.param("user",this._tags[0]),i.param("user2",this._tags[1])]);else if(l==1)if(this._hasRestricted)return i._("Your friends and {user}'s friends; Except: Restricted",[i.param("user",this._tags[0])]);else return i._("Your friends and {user}'s friends",[i.param("user",this._tags[0])]);else return this._hasRestricted?i._("Your friends; Except: Restricted"):i._("Your friends")},_recalcFriendsMinusTooltip:function k(){__p&&__p();var l=this._tags.length;if(l>0||this._alreadyHasTags()){var m=i._("friends of anyone tagged"),n=i._("{people who can see this}, {list of more people who can see this}",[i.param("people who can see this",i._("Your friends")),i.param("list of more people who can see this",m)]),o=i._("Acquaintances");if(this._hasRestricted)o=i._("{Name of Acquaintances friend list}, {restricted}",[i.param("Name of Acquaintances friend list",o),i.param("restricted",i._("Restricted"))]);return this._getCombinedSentence(n,o)}else{if(this._hasRestricted)return i._("Friends; Except: Acquaintances, Restricted");return i._("Friends except Acquaintances")}},_recalcCustomTooltip:function k(){__p&&__p();var l=this._getIncludedAudience(),m=this._getTagExpansionText();if(m)l=i._("{list of people who can see this}, {list of additional people who can see this}",[i.param("list of people who can see this",l),i.param("list of additional people who can see this",m)]);for(var n=0;n<this._taggedIDs.length;n++){var o=this._taggedIDs[n];if(o in this._excludedAudience){delete this._excludedAudience[o];this._excludedTaggees[o]=this._tags[n];break}}for(var p in this._excludedTaggees)if(Object.prototype.hasOwnProperty.call(this._excludedTaggees,p))if(this._taggedIDs.indexOf(p)===-1){this._excludedAudience[p]=this._excludedTaggees[p];delete this._excludedTaggees[p];break}var q=[];for(var r in this._excludedAudience)if(Object.prototype.hasOwnProperty.call(this._excludedAudience,r))q.push(this._excludedAudience[r]);return this._getCombinedSentence(l,c("intlList")(q))}});f.exports=j}),null);
__d("CustomPrivacyOptionController",["Arbiter","AsyncDialog","AsyncRequest","DOM","Event","Form","Parent","PrivacyConst","PrivacySelectorOption","SelectorDeprecated","XPrivacyCustomDialogController"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){__p&&__p();if(!i)return;setTimeout(function(){__p&&__p();this._selector=c("Parent").byClass(i,"audienceSelector");if(!this._selector)return;this.initCustomState(i,j.option_id,j.id);var k={priv_base_val:j.base_audience_value,audience_count:j.audience_count,is_custom:true,included:j.included_audience,excluded:j.excluded_audience,tag_expansion_behavior:j.tag_expansion_behavior};this._optionJSInstance=new(c("PrivacySelectorOption"))(i,k);c("Event").listen(i,"click",function(event){this.openCustomDialog(event,j.option_id,j.explain_tags,j.autosave,j.limit_community,j.limit_facebook,j.limit_fof,j.limit_tagexpand,j.source)}.bind(this));c("SelectorDeprecated").listen(this._selector,"select",function(l){if(l.option._id!=this._id)this.clearCustomState()}.bind(this))}.bind(this),0)}Object.assign(h,{_instances:{},update:function i(j,k,l,m,n,o,p,q,r){var s=h._instances[j];s._update(k,l)._updateOption(l,n,o,p,q,r);c("Arbiter").inform("Form/change",{node:s._container})},getData:function i(j){var k=h._instances[j];return k&&k._privacyData},setPrivacyData:function i(j,k,l){h._instances[j]._update(k,l)}});Object.assign(h.prototype,{_updateOption:function i(j,k,l,m,n,o){var p=c("SelectorDeprecated").getOption(this._selector,j)||c("SelectorDeprecated").getOption(this._selector,c("PrivacyConst").BaseValue.CUSTOM+""),q=this._optionJSInstance.updateOption(k,l,m,n,o);c("Arbiter").inform("CustomPrivacyOptionController/update",{selector:this._selector,option:p,tooltip:q.tooltip,label:q.label});return this},_update:function i(j,k){var l=k==c("PrivacyConst").BaseValue.CUSTOM||!c("SelectorDeprecated").getOption(this._selector,k),m=this._selector.getAttribute("data-name");this.updateCustomState(j,l,m);return this},initCustomState:function i(j,k,l){h._instances[k]=this;this._container=c("DOM").find(j,".customPrivacyInputs");this._id=l;this._privacyData={};var m=c("Form").serialize(this._container);if(m.audience)this._privacyData=m.audience[l];return j},openCustomDialog:function i(event,j,k,l,m,n,o,p,q){var r=c("XPrivacyCustomDialogController").getURIBuilder().setString("option_id",j).setString("id",this._id).setString("privacy_data",JSON.stringify(this._privacyData)).setBool("explain_tags",k).setBool("autosave",l).setBool("limit_community",m).setBool("limit_facebook",n).setBool("limit_fof",o).setBool("limit_tagexpand",p).setBool("is_new_privacy_selector",false).setString("source",q).getURI(),s=new(c("AsyncRequest"))(r);s.setRelativeTo(event.getTarget());c("AsyncDialog").send(s,function(t){t.subscribe("cancel",function(){c("Arbiter").inform("CustomPrivacyOptionController/cancel",{selector:this._selector})}.bind(this))}.bind(this))},updateCustomState:function i(j,k,l){this.clearCustomState();this._privacyData=babelHelpers["extends"]({},j);if(k)if(l){l=l.slice(0,-"[value]".length);var m={};m[l]=j;c("Form").createHiddenInputs(m,this._container,{},true)}},clearCustomState:function i(){this._privacyData={};c("DOM").empty(this._container)}});f.exports=h}),null);
__d("OldPrivacySelectorEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RENDER_SELECTOR:"render_selector",OPEN_MENU:"open_menu",CLOSE_MENU:"close_menu",SELECT_EVERYONE:"select_everyone",SELECT_FRIENDS_OF_FRIENDS:"select_friends_of_friends",SELECT_FRIENDS:"select_friends",SELECT_FRIENDS_EXCEPT_ACQUIANTANCES:"select_friends_except_acquaintances",SELECT_ONLY_ME:"select_only_me",SELECT_CUSTOM:"select_custom",CUSTOM_SAVE:"custom_save",CUSTOM_CANCEL:"custom_cancel",SELECT_FB_ONLY:"select_fb_only",SELECT_FRIENDLIST:"select_friendlist",SELECT_OTHER:"select_other",SELECT_SEE_ALL_LISTS:"select_see_all_lists",SELECT_RETURN:"select_return"})}),null);
__d("OldPrivacySelectorTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:OldPrivacySelectorLoggerConfig",this.$OldPrivacySelectorTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:OldPrivacySelectorLoggerConfig",this.$OldPrivacySelectorTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$OldPrivacySelectorTypedLogger1={};return this};h.prototype.updateData=function(j){this.$OldPrivacySelectorTypedLogger1=babelHelpers["extends"]({},this.$OldPrivacySelectorTypedLogger1,j);return this};h.prototype.setAdamaRenderLocation=function(j){this.$OldPrivacySelectorTypedLogger1.adama_render_location=j;return this};h.prototype.setEvent=function(j){this.$OldPrivacySelectorTypedLogger1.event=j;return this};h.prototype.setFbid=function(j){this.$OldPrivacySelectorTypedLogger1.fbid=j;return this};h.prototype.setVC=function(j){this.$OldPrivacySelectorTypedLogger1.vc=j;return this};var i={adama_render_location:true,event:true,fbid:true,vc:true};f.exports=h}),null);
__d("AudienceSelector",["Arbiter","AsyncRequest","AudienceSelectorTags","CSS","CustomPrivacyOptionController","DOM","DOMQuery","DynamicIconSelector","OldPrivacySelectorEvent","OldPrivacySelectorTypedLogger","PrivacyConst","SelectorDeprecated"],(function a(b,c,d,e,f,g){__p&&__p();var h={};c("SelectorDeprecated").subscribe("select",function(m,n){__p&&__p();if(!c("CSS").hasClass(n.selector,"audienceSelector"))return;var o=c("SelectorDeprecated").getOptionValue(n.option);n.value=o;c("Arbiter").inform("AudienceSelector/changed",n);if(o==c("PrivacyConst").BaseValue.CUSTOM&&!c("CSS").hasClass(n.option,"noDialog")){c("SelectorDeprecated").toggle(n.selector);return false}c("Arbiter").inform("AudienceSelector/changedNonCustomDialogButton",n);if(c("CSS").hasClass(n.selector,"dataTooltip")){var p=c("DOM").find(n.option,".itemAnchor").getAttribute("data-tooltip");c("SelectorDeprecated").setButtonTooltip(n.selector,p||null)}if(!c("CSS").hasClass(n.option,"specialOption"))return;var q=c("DOM").find(n.option,"a").getAttribute("data-type");if(c("CSS").hasClass(n.option,"moreOption")){c("CSS").addClass(n.selector,q);c("CSS").addClass(n.selector,"showSecondaryOptions");return false}else if(c("CSS").hasClass(n.option,"returnOption")){c("CSS").removeClass(n.selector,"showSecondaryOptions");c("CSS").removeClass(n.selector,"friendList");return false}});var i=function i(m,event){var n=j(m,"data-fbid-for-logging"),o=j(m,"data-adama-render-location");new(c("OldPrivacySelectorTypedLogger"))().setEvent(event).setFbid(n).setAdamaRenderLocation(o).log()},j=function j(m,n){var o=m.getAttribute(n);if(o)return o;var p=c("DOMQuery").scry(m,".uiSelectorButton")[0];return p?p.getAttribute(n):null};function k(m){var n=document.documentElement,o=m.getBoundingClientRect();return o.top>=0&&o.bottom<=(window.innerHeight||n.clientHeight)&&o.left>=0&&o.right<=(window.innerWidth||n.clientWidth)}c("SelectorDeprecated").subscribe(["open","close"],function(event,m){if(!c("CSS").hasClass(m.selector,"audienceSelector"))return;var n=c("DOMQuery").scry(m.selector,".uiSelectorMenuWrapper");if(n.length>0){var o=n[0];c("CSS").conditionClass(o,"audienceSelectorUpwards",!k(o))}var p=event==="open"?c("OldPrivacySelectorEvent").OPEN_MENU:c("OldPrivacySelectorEvent").CLOSE_MENU;i(m.selector,p)});var l={keepSynchronized:function m(n,o){h[n]||(h[n]={});h[n][o.id]=o},setHasTags:function m(n){c("AudienceSelectorTags").setHasTags(n)},getComposerInstance:function m(){var n=h["PrivacyLiteNav/audience"];if(n){var o;for(var p in n){o=n[p];return o}}return null},forceAndKeepSynchronized:function m(n,o){l.keepSynchronized(n,o);c("Arbiter").inform("AudienceSelector/update",{option:c("SelectorDeprecated").getSelectedOptions(o)[0],selector:o})},get:function m(n){if(c("CSS").hasClass(n,"audienceSelector"))return n;var o=c("DOM").scry(n,"div.audienceSelector");if(o.length!=1)return;return o[0]},setAudience:function m(n,o){var p=l.get(n);c("SelectorDeprecated").loadMenu(p,function(q){c("SelectorDeprecated").setSelected(p,o.toString());c("DynamicIconSelector").swapIcon(p);var r=c("SelectorDeprecated").getSelectedOptions(p),s=r[0]&&c("DOM").find(r[0],"a");if(s&&s.getAttribute("ajaxify"))c("AsyncRequest").bootstrap(s.getAttribute("ajaxify"),s,true);c("Arbiter").inform("AudienceSelector/changed",{option:r[0],selector:p})})}};c("Arbiter").subscribe("CustomPrivacyOptionController/update",function(m,n){__p&&__p();if(!c("CSS").hasClass(n.selector,"audienceSelector"))return;c("SelectorDeprecated").setSelected(n.selector,c("SelectorDeprecated").getOptionValue(n.option));c("DynamicIconSelector").swapIcon(n.selector);var o=c("CSS").hasClass(n.selector,"composerAudienceSelector");if(o)c("SelectorDeprecated").setButtonLabel(n.selector,n.label);c("SelectorDeprecated").setButtonTooltip(n.selector,n.tooltip);i(n.selector,c("OldPrivacySelectorEvent").CUSTOM_SAVE);c("Arbiter").inform("AudienceSelector/update",n)});c("Arbiter").subscribe("CustomPrivacyOptionController/cancel",function(m,n){if(!c("CSS").hasClass(n.selector,"audienceSelector"))return;i(n.selector,c("OldPrivacySelectorEvent").CUSTOM_CANCEL)});c("Arbiter").subscribe(["AudienceSelector/changed","AudienceSelector/update"],function(event,m){__p&&__p();var n=c("SelectorDeprecated").getOptionValue(m.option),o=null;if(n==c("PrivacyConst").BaseValue.EVERYONE)o=c("OldPrivacySelectorEvent").SELECT_EVERYONE;else if(n==c("PrivacyConst").BaseValue.FRIENDS_OF_FRIENDS)o=c("OldPrivacySelectorEvent").SELECT_FRIENDS_OF_FRIENDS;else if(n==c("PrivacyConst").BaseValue.ALL_FRIENDS)o=c("OldPrivacySelectorEvent").SELECT_FRIENDS;else if(n==c("PrivacyConst").BaseValue.FRIENDS_MINUS_ACQUAINTANCES)o=c("OldPrivacySelectorEvent").SELECT_FRIENDS_EXCEPT_ACQUIANTANCES;else if(n==c("PrivacyConst").BaseValue.SELF)o=c("OldPrivacySelectorEvent").SELECT_ONLY_ME;else if(n==c("PrivacyConst").BaseValue.CUSTOM){if(event==="AudienceSelector/changed")o=c("OldPrivacySelectorEvent").SELECT_CUSTOM}else if(n==c("PrivacyConst").BaseValue.FACEBOOK_EMPLOYEES)o=c("OldPrivacySelectorEvent").SELECT_FB_ONLY;else if(c("CSS").hasClass(m.option,"friendListOption"))o=c("OldPrivacySelectorEvent").SELECT_FRIENDLIST;else if(c("CSS").hasClass(m.option,"moreOption"))o=c("OldPrivacySelectorEvent").SELECT_SEE_ALL_LISTS;else if(c("CSS").hasClass(m.option,"returnOption"))o=c("OldPrivacySelectorEvent").SELECT_RETURN;else o=c("OldPrivacySelectorEvent").SELECT_OTHER;if(o!=null)i(m.selector,o);var p={};if(n==c("PrivacyConst").BaseValue.CUSTOM){if(event=="AudienceSelector/changed")return;p=c("CustomPrivacyOptionController").getData(m.option.id);if(!p)return}for(var q in h){var r=h[q];if(r[m.selector.id]){c("Arbiter").inform("AudienceSelector/syncNonSelectorIcon",{category:q});for(var s in r){var t=r[s];if(!t||m.selector===t)continue;if(c("SelectorDeprecated").getValue(t)!==n){c("SelectorDeprecated").setSelected(t,n);c("DynamicIconSelector").swapIcon(t)}if(n==c("PrivacyConst").BaseValue.CUSTOM){var u=c("SelectorDeprecated").getOption(t,c("PrivacyConst").BaseValue.CUSTOM+"");if(u){c("CustomPrivacyOptionController").setPrivacyData(u.id,p,n);c("SelectorDeprecated").setButtonTooltip(t,m.tooltip)}}}}}});f.exports=l}),null);
__d("XStickyComposerChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/sticky_composer/change/",{privacyx:{type:"String"},logging_source:{type:"String"}})}),null);
__d("PrivacySelector",["csx","Promise","regeneratorRuntime","Arbiter","ArbiterMixin","AsyncRequest","AudienceSelector","CSS","DOM","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","Run","SelectorDeprecated","SubscriptionsHandler","XStickyComposerChangeController","mixin"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));j=i&&i.prototype;function k(l){"use strict";__p&&__p();j.constructor.call(this);if(l instanceof HTMLElement)this.$PrivacySelector3=l;else this.$PrivacySelector1=l;this.$PrivacySelector7=null;this.$PrivacySelector6=new(c("SubscriptionsHandler"))();this.$PrivacySelector5=new(c("SubscriptionsHandler"))();if(this.$PrivacySelector1!=null)this.$PrivacySelector8();else this.$PrivacySelector9();c("Run").onLeave(this.cleanup.bind(this))}k.prototype.select=function(l,m,n){"use strict";__p&&__p();if(l==null||m==null)throw new Error("PrivacySelector.select: you must pass in privacyParam and privacyBase");if(this.$PrivacySelector1!=null){var o=this.$PrivacySelector1;n&&this.$PrivacySelector6.addSubscriptions(o.subscribeOnce("changed",function(p,q){n&&n("changed",{post_param:q.post_param})}));o.selectOption(l)}else{n&&this.$PrivacySelector5.addSubscriptions(c("Arbiter").subscribe("AudienceSelector/changed",function(p,q){if(this.$PrivacySelector10(q.selector)){var r=c("SelectorDeprecated").getOptionValue(q.option);n&&n("changed",{privacy_base:r})}}.bind(this)));c("AudienceSelector").setAudience(this.$PrivacySelector3,m)}};k.prototype.expandFull=function(l){"use strict";if(this.$PrivacySelector1!=null)this.$PrivacySelector1.openSelectorExpanded(l);else this.expand(l)};k.prototype.expandFullAndShowFlyout=function(l){"use strict";this.expandFull(this.showFlyoutOnMenu.bind(this,l))};k.prototype.expand=function(l){"use strict";__p&&__p();if(this.$PrivacySelector1!=null)this.$PrivacySelector1.openSelector(l);else{var m=c("SelectorDeprecated").getSelectorMenu(this.$PrivacySelector3);if(!m)c("SelectorDeprecated").loadMenu(this.$PrivacySelector3,function(){l&&l()});else this.$PrivacySelector5.addSubscriptions(c("SelectorDeprecated").listen(this.$PrivacySelector3,"open",function(){l&&l();this.$PrivacySelector10(this.$PrivacySelector3)}.bind(this)));c("SelectorDeprecated").toggle(this.$PrivacySelector3,l)}};k.prototype.showFlyoutOnMenu=function(l){"use strict";__p&&__p();this.$PrivacySelector2&&this.$PrivacySelector2.hide();this.$PrivacySelector2=l;var m=void 0;if(this.$PrivacySelector1!=null){m=this.$PrivacySelector1.getMenuElement();l.setOffsetY(85)}else{m=c("DOM").scry(this.$PrivacySelector3,"div.uiSelectorMenuWrapper")[0];l.setOffsetY(13)}l.setContext(m);l.show()};k.prototype.setOnClose=function(l){"use strict";this.$PrivacySelector7=l};k.prototype.cleanup=function(){"use strict";this.$PrivacySelector6.release();this.$PrivacySelector6=new(c("SubscriptionsHandler"))();this.$PrivacySelector5.release();this.$PrivacySelector5=new(c("SubscriptionsHandler"))();this.$PrivacySelector2&&this.$PrivacySelector2.hide();this.$PrivacySelector2=null;this.$PrivacySelector7=null};k.prototype.disable=function(){"use strict";if(this.$PrivacySelector1!=null)this.$PrivacySelector1.disable();else c("SelectorDeprecated").setEnabled(this.$PrivacySelector3,false)};k.prototype.enable=function(){"use strict";if(this.$PrivacySelector1!=null)this.$PrivacySelector1.enable();else c("SelectorDeprecated").setEnabled(this.$PrivacySelector3,true)};k.get=function(l){"use strict";if(!l)return null;var m=k.getAdamaSelectorInstance(l);if(m)return new k(m);return new k(l)};k.genAndThen=function(l,m){"use strict";__p&&__p();var n=k.getViableIDsForSelectorFetch(l);if(!n.length)return;var o=k.$PrivacySelector12(n),p=o.then(function(q){var r=q[0],s=q[1];m(r);return[r,s]});p.done(function(q){var r=q[0],s=q[1];k.$PrivacySelector11[s]=p})};k.getViableIDsForSelectorFetch=function(l){"use strict";var m=[];if(l.id)m.push(l.id);var n=k.getDOMFromStory(l);if(n&&n.id)m.push(n.id);return m};k.$PrivacySelector12=function(l){"use strict";__p&&__p();for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=k.$PrivacySelector11[q];if(r!=null)return r}return new(c("Promise"))(function s(t){__p&&__p();var u;return c("regeneratorRuntime").async(function v(w){__p&&__p();while(1)switch(w.prev=w.next){case 0:u=null;case 1:if(u=k.$PrivacySelector13(l)){w.next=6;break}w.next=4;return c("regeneratorRuntime").awrap(new(c("Promise"))(function(t){return setTimeout(t,500)}));case 4:w.next=1;break;case 6:t(u);case 7:case"end":return w.stop()}},null,this)})};k.$PrivacySelector13=function(l){"use strict";__p&&__p();for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=c("DataStore").get(q,"selector");if(r)return[r,q]}return null};k.getAdamaSelectorInstance=function(l){"use strict";return k.$PrivacySelector14(l)||k.$PrivacySelector14(k.getDOMFromStory(l))};k.$PrivacySelector14=function(l){"use strict";var m=l&&l.id;if(!m)return null;return c("DataStore").get(m,"selector")};k.getDOMFromStory=function(l){"use strict";if(!l)return null;var m=c("DOM").scry(l,"._43_1")[0];if(m)return m;return c("AudienceSelector").get(l)};k.getIconFromSelectorDOM=function(l){"use strict";return c("DOM").scry(l,"i.img")[0]};k.setComposerPrivacy=function(l,m,n){"use strict";var o=c("XStickyComposerChangeController").getURIBuilder().setString("privacyx",l).setString("logging_source",n);new(c("AsyncRequest"))(o.getURI()).send();c("PrivacySelectorNewDispatcher").handleUpdateFromSelector({selector_type:c("PrivacyConst").PrivacyField.CURRENT_COMPOSER,post_param:l,unique_value:"_updateStickyComposerPrivacy"});var p=c("AudienceSelector").getComposerInstance(m);if(p)c("AudienceSelector").setAudience(p,m)};k.isFakeOrUneditableSelector=function(l){"use strict";return c("CSS").matchesSelector(l,"._2qwi")||c("CSS").matchesSelector(l,"._29ee")||c("CSS").matchesSelector(l,"._jl")||c("DOM").scry(l,"._2qwi")[0]||c("DOM").scry(l,"._29ee")[0]||c("DOM").scry(l,"._jl")[0]};k.prototype.$PrivacySelector8=function(){"use strict";var l=this.$PrivacySelector1;if(!l)return;this.$PrivacySelector6.addSubscriptions(l.subscribe("changed",function(m,n){return this.inform("changed",{post_param:n.post_param})}.bind(this)),l.subscribe("selectorFinished",function(){return this.$PrivacySelector7&&this.$PrivacySelector7()}.bind(this)))};k.prototype.$PrivacySelector9=function(){"use strict";__p&&__p();this.$PrivacySelector6.addSubscriptions(c("Arbiter").subscribe("AudienceSelector/update",function(l,m){if(this.$PrivacySelector3!==m.selector)return;var n=c("SelectorDeprecated").getOptionValue(m.option);this.inform("changed",{privacy_base:n})}.bind(this)),c("Arbiter").subscribe("AudienceSelector/changed",function(l,m){if(this.$PrivacySelector3!==m.selector)return;if(c("CSS").hasClass(m.option,"moreOption")||c("CSS").hasClass(m.option,"returnOption"))return;if(m.value!=c("PrivacyConst").BaseValue.CUSTOM)this.inform("changed",{privacy_base:m.value});else if(m.value==c("PrivacyConst").BaseValue.CUSTOM)this.$PrivacySelector4=true}.bind(this)),c("SelectorDeprecated").listen(this.$PrivacySelector3,"close",function(){if(this.$PrivacySelector4){this.$PrivacySelector4=false;return}this.$PrivacySelector7&&this.$PrivacySelector7()}.bind(this)),c("Arbiter").subscribe("CustomPrivacyOptionController/cancel",function(l,m){if(this.$PrivacySelector3!==m.selector)return;this.$PrivacySelector7&&this.$PrivacySelector7()}.bind(this)))};k.prototype.$PrivacySelector10=function(l){"use strict";if(l!=this.$PrivacySelector3)return false;this.$PrivacySelector5.release();this.$PrivacySelector5=new(c("SubscriptionsHandler"))();return true};k.$PrivacySelector11={};f.exports=k}),null);
__d("ComposerX",["csx","cx","ActorURI","Arbiter","ComposerXAttachmentBootstrap","ComposerXContext","ComposerXMarauderLogger","ComposerXSessionIDs","ComposerXSessionIDInserter","ComposerXStore","CSS","DOM","DOMQuery","PrivacyConst","PrivacySelector","PrivacySelectorNewDispatcher","URI","SubscriptionsHandler","getObjectValues","removeFromArray"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j="any";function k(l){"use strict";__p&&__p();this._root=l;this._composerID=l.id;this._attachments={};this._context=new(c("ComposerXContext"))({});c("ComposerXSessionIDs").resetSessionID(this._composerID);c("ComposerXSessionIDInserter").init(this._root);this._subscriptionsHandler=new(c("SubscriptionsHandler"))();this._subscriptionsHandler.addSubscriptions(c("Arbiter").subscribe(["composer/publish","composer/close"],function(m,n){if(n.composer_id===this._composerID){this.reset();var o=c("DOMQuery").scry(l,".hidden_target_specs");if(o&&o.length)o.forEach(c("DOM").remove);c("Arbiter").inform("composer/publishDone",n)}}.bind(this)));this._subscriptionsHandler.addSubscriptions.apply(this._subscriptionsHandler,c("ComposerXMarauderLogger").listenForPostEvents(this._composerID,this._getContent()));this._attachmentFetchForm=c("DOMQuery").find(l,"._2_4");c("Arbiter").inform("composer/ready",{},c("Arbiter").BEHAVIOR_STATE)}k.prototype.getAttachment=function(l,m,n,o){"use strict";l=this._augmentURI(l);var p=c("ComposerXAttachmentBootstrap").getURIHash(l);this._endpointHashToShow=p;var q=this._attachments[p];if(q&&!o)this._showAttachmentAfterComponentsLoaded(p,n);else this.fetchAttachmentData(l,m,o)};k.prototype.fetchAttachmentData=function(l,m,n){"use strict";l=this._augmentURI(l);var o=c("ComposerXAttachmentBootstrap").getURIHash(l);if(this._attachments[o]&&!n)return;if(!this._currentFetchEndpoints.includes(o)){c("ComposerXAttachmentBootstrap").load(this._attachmentFetchForm,l,m);this._currentFetchEndpoints.push(o)}};k.prototype.setAttachment=function(l,m,n,o){"use strict";c("removeFromArray")(this._currentFetchEndpoints,l);this._setupAttachment(l,m,n,o);this._showAttachmentAfterComponentsLoaded(l,false)};k.prototype.setInitialAttachment=function(l,m,n,o,p){"use strict";if(p)this._context=p;l=this._augmentURI(l);var q=c("ComposerXAttachmentBootstrap").getURIHash(l);this._setupAttachment(q,m,n,o);this._initialAttachmentEndpoint=l;if(!this._currentInstance)this._showAttachmentAfterComponentsLoaded(q,true)};k.prototype.setComponent=function(l,m){"use strict";if(!c("ComposerXStore").get(this._composerID,l)){c("ComposerXStore").set(this._composerID,l,m);c("DOM").appendContent(this._attachmentFetchForm,c("DOM").create("input",{type:"hidden",name:"loaded_components[]",value:l}))}};k.prototype.reset=function(){"use strict";__p&&__p();if(this._currentInstance){this._currentInstance.cleanup();this._currentInstance=null}c("ComposerXSessionIDs").resetSessionID(this._composerID);for(var l in this._attachments)this._attachments[l].instance.reset();var m=c("ComposerXStore").getAllForComposer(this._composerID);c("getObjectValues")(m).forEach(function(q){if(q.reset)q.reset(q)});var n=c("PrivacySelector").getAdamaSelectorInstance(c("DOM").scry(this._root,"div._1lo2")[0]),o=c("ComposerXStore").get(this._composerID,"mainprivacywidget"),p=o&&o.instance&&o.instance.getInstance();if(n)p.setInstance(n);else n=p&&p.getInstance();if(n&&n.shouldReplaceOnPost())c("PrivacySelectorNewDispatcher").handleUpdateFromSelector({selector_type:c("PrivacyConst").PrivacyField.CURRENT_COMPOSER.toString(),post_param:"",unique_id:"_reloadStickySelectors",reload:true});this.getAttachment(this._initialAttachmentEndpoint,false,true);c("Arbiter").inform("composer/reset")};k.prototype.destroy=function(){"use strict";this._subscriptionsHandler.release()};k.prototype.addPlaceholders=function(l,m){"use strict";__p&&__p();var n;for(var o in this._attachments){n=this._attachments[o];if(n.instance===l){m.forEach(function(p){n.placeholders.push(p);n.required_components.push(p.component_name)});break}}if(this._currentInstance===l)this._fillPlaceholders(m)};k.prototype.hasAttachmentWithClassName=function(l){"use strict";return c("DOMQuery").scry(this._root,"."+l).length>0};k.prototype.showAttachmentThrobber=function(){"use strict";c("CSS").addClass(this._attachmentFetchForm,"async_saving")};k.prototype.hideAttachmentThrobber=function(){"use strict";c("CSS").removeClass(this._attachmentFetchForm,"async_saving")};k.prototype.getContext=function(){"use strict";return this._context};k.prototype.getID=function(){"use strict";return this._composerID};k.prototype._setupAttachment=function(l,m,n,o){"use strict";m.setComposerID(this._composerID);this._attachments[l]={instance:m,placeholders:n,required_components:o};var p=this._getContent(),q=m.getRoot();if(q.parentNode!==p){c("CSS").hide(q);c("DOM").appendContent(p,q)}};k.prototype._getContent=function(){"use strict";return c("DOMQuery").find(this._root,"div._55d0")};k.prototype._showAttachment=function(l,m,n,o){"use strict";__p&&__p();if(this._currentInstance===l)return;if(this._endpointHashToShow===j)this._endpointHashToShow=null;else if(this._endpointHashToShow!==m)return;if(this._currentInstance){if(!this._currentInstance.canSwitchAway())return;this._currentInstance.cleanup()}this._currentInstance=l;var p=this._getContent().childNodes,q=l.getRoot();for(var r=0;r<p.length;r++)if(p[r]!==q)c("CSS").hide(p[r]);c("CSS").show(q);this._fillPlaceholders(n);l.initWithComponents(o);this._setAttachmentSelectedClass(l.attachmentClassName);c("Arbiter").inform("composer/initializedAttachment",{composerRoot:this._root,isInitial:o})};k.prototype._showAttachmentAfterComponentsLoaded=function(l,m){"use strict";var n=this._attachments[l];c("ComposerXStore").waitForComponents(this._composerID,n.required_components,this._showAttachment.bind(this,n.instance,l,n.placeholders,m))};k.prototype._fillPlaceholders=function(l){"use strict";l.forEach(function(m){var n=c("ComposerXStore").get(this._composerID,m.component_name);if(n.element&&m.element!==n.element.parentNode)c("DOM").setContent(m.element,n.element)}.bind(this))};k.prototype._setAttachmentSelectedClass=function(l){"use strict";__p&&__p();var m=c("DOMQuery").scry(this._root,"._519b")[0],n;if(m){c("CSS").removeClass(m,"_519b");n=c("DOMQuery").scry(m,'*[aria-pressed="true"]')[0];if(n)n.setAttribute("aria-pressed","false")}if(l){var o=c("DOMQuery").scry(this._root,"."+l)[0];if(o){c("CSS").addClass(o,"_519b");n=c("DOMQuery").scry(o,'*[aria-pressed="false"]')[0];if(n)n.setAttribute("aria-pressed","true")}}};k.prototype._augmentURI=function(l){"use strict";var m=this._context.getProperty(c("ComposerXContext").PROPERTIES.ACTOR_ID),n=m?c("ActorURI").create(l,m):new(c("URI"))(l),o=this._context.getProperty(c("ComposerXContext").PROPERTIES.POST_ID);if(o)n.addQueryData("post_id",o);return n.toString()};Object.assign(k.prototype,{_endpointHashToShow:j,_currentFetchEndpoints:[],_initialAttachmentEndpoint:""});f.exports=k}),null);
__d("ComposerXAttachment",["ComposerXStore"],(function a(b,c,d,e,f,g){__p&&__p();function h(){"use strict"}h.prototype.getRoot=function(){"use strict"};h.prototype.initWithComponents=function(i){"use strict"};h.prototype.cleanup=function(){"use strict"};h.prototype.reset=function(){"use strict"};h.prototype.getComponent=function(i){"use strict";return c("ComposerXStore").get(this._composerID,i)};h.prototype.getComponentInstance=function(i){"use strict";var j=c("ComposerXStore").get(this._composerID,i);return j&&j.instance};h.prototype.canSwitchAway=function(){"use strict";return true};h.prototype.setComposerID=function(i){"use strict";this._composerID=i};h.prototype.getComposerID=function(){"use strict";return this._composerID};h.prototype.allowOGTagPreview=function(){"use strict";return false};Object.assign(h.prototype,{attachmentClassName:""});f.exports=h}),null);
__d("registerForLeaveWarning",["fbt","Run","URI","createCancelableFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(k){var l=c("URI").getNextURI(),m=c("createCancelableFunction")(k);c("Run").onBeforeUnload(function(){return j(m,l)});return m}function j(k,l){__p&&__p();var m=c("URI").getMostRecentURI(),n=c("URI").getNextURI(),o=Object.prototype.hasOwnProperty.call(m.getQueryData(),"theater")&&l.path===n.path,p=Object.prototype.hasOwnProperty.call(n.getQueryData(),"theater"),q=b.DialogNavigationStack&&b.DialogNavigationStack.isActiveURI(n);if(o||p||q){c("Run").onAfterLoad(function(){c("Run").onBeforeUnload(function(){return j(k,l)})});return}if(b.Dialog&&b.Dialog.getCurrent())return;if(k())return h._("You haven't finished your post yet. Do you want to leave without finishing?")}f.exports=i}),null);
__d("ComposerXController",["csx","cx","invariant","ActorURI","Arbiter","ComposerX","ComposerXAttachmentBootstrap","ComposerXContext","ComposerXMarauderLogger","Event","Parent","$","emptyFunction","ge","registerForLeaveWarning"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k={},l={},m={};function n(r){var s=c("ge")(r);if(!s)return null;var t=c("Parent").bySelector(c("$")(r),"._119"),u=t.id;if(!m[u])m[u]=new(c("ComposerX"))(t);return m[u]}function o(r){var s=n(r);s!==null||j(0);return s}function p(r){if(!l[r])return;l[r].forEach(function(s){return s.cancel()});delete l[r]}var q={registerConditionForComposerCancel:function r(s,t){var u=o(s).getID();if(!(u in k))k[u]=[];k[u].push(t);if(!(u in l))l[u]=[];l[u].push(c("registerForLeaveWarning")(t))},hasChanges:function r(s){var t=k[s];if(!t)return false;return t.some(function(u){return u()})},getAttachment:function r(s,t,u,v){var w=o(s);w.getAttachment(t,u,null,v)},fetchAttachmentData:function r(s,t,u){o(s).fetchAttachmentData(t,u)},setAttachment:function r(s,t,u,v,w){var x=n(s);if(x)x.setAttachment(t,u,v,w)},setInitialAttachment:function r(s,t,u,v,w,x){var y=o(s);y.setInitialAttachment(t,u,v,w,x)},setComponent:function r(s,t,u){var v=n(s);if(v)v.setComponent(t,u)},reset:function r(s){var t=o(s);t.reset()},holdTheMarkup:c("emptyFunction"),getEndpoint:function r(s,t,u){var v=o(s),w=v.getContext();t=c("ActorURI").create(t,w.getProperty(c("ComposerXContext").PROPERTIES.ACTOR_ID)).toString();c("ComposerXAttachmentBootstrap").load(v._attachmentFetchForm,t,u)},addPlaceholders:function r(s,t,u){var v=o(s);v.addPlaceholders(t,u)},hasAttachmentWithClassName:function r(s,t){var u=o(s);return u.hasAttachmentWithClassName(t)},showAttachmentThrobber:function r(s){var t=o(s);t.showAttachmentThrobber()},hideAttachmentThrobber:function r(s){var t=o(s);t.hideAttachmentThrobber()},logEventForElement:function r(s,t){c("Event").listen(s,"click",function(){var u=q.getComposerID(s);c("ComposerXMarauderLogger").logEvent(t,u)})},getComposerID:function r(s){return o(s).getID()},destroyComposer:function r(s){if(!(s in m))return;m[s].destroy();delete m[s];delete k[s];p(s)}};c("ComposerXAttachmentBootstrap").bootstrap=function(r){q.getAttachment(r,r.getAttribute("data-endpoint"))};c("Arbiter").subscribe("page_transition",function(){for(var r in m)if(!c("ge")(r))q.destroyComposer(r)});f.exports=q}),null);
__d("ComposerXAttachmentButtonBarState",["csx","cx","CSS","DOMQuery"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j={trackCityChanges:function k(l){var m=l.getComponent("citysharericon");if(m)return m.instance.subscribe("change",function(){j.updateMessageBoxBarState(l)})},updateMessageBoxBarState:function k(l){var m=l.getComponent("citysharericon");if(m){var n=c("DOMQuery").find(l.getRoot(),"._1dsp");c("CSS").conditionClass(n,"_icv",!!m.instance.getValue())}}};f.exports=j}),null);
__d("ComposerXAttachmentPrefillMixin",["Event","InputSelection"],(function a(b,c,d,e,f,g){__p&&__p();var h={_initPrefill:function i(j,k){this._textArea=j;this._didInitialFocus=false;this._prefill=k;if(this._prefill)this._focusListener=c("Event").listen(this._textArea,"focus",this._prefillOnFocus.bind(this))},_resetPrefill:function i(){this._didInitialFocus=false},_prefillOnFocus:function i(){if(!this._didInitialFocus&&this._prefill&&this._textArea.value===""){this._textArea.value=this._prefill;c("InputSelection").set(this._textArea,0,0)}this._didInitialFocus=true}};f.exports=h}),null);
__d("ComposerXAttachmentUtils",["csx","BrowserSupport","Button","ComposerXController","DataStore","DOMQuery","Event","Focus","Keys","Run","StickyPlaceholderInput","UserAgent_DEPRECATED","debounce"],(function a(b,c,d,e,f,g,h){__p&&__p();var i="composer_fixed_placeholder";function j(l,m){if(!c("DataStore").get(l.element,i,false))l.instance.setPlaceholder(m)}var k={initMentions:function l(m,n,o,p){j(m,n.toString());if(!p||!p.dontFocusMentions)k.focusMentions(m);this.registerMentionsForComposerCancel(m,o)},focusMentions:function l(m){var n=c("DOMQuery").find(m.element,"textarea.input");c("Focus").set(n)},registerMentionsForComposerCancel:function l(m,n){c("ComposerXController").registerConditionForComposerCancel(n,m.instance.hasChanges.bind(m.instance))},setValueForMentions:function l(m,n){var o=c("DOMQuery").find(m.element,"textarea.input");o.value=n},setStickyPlaceholderForMentions:function l(m,n){j(m,n)},setPlaceholderIsFixed:function l(m,n){c("DataStore").set(m.element,i,!!n)},setStickyPlaceholderForTypeahead:function l(m,n){var o=c("DOMQuery").find(m,".textInput");c("StickyPlaceholderInput").setPlaceholderText(o,n.toString())},listenForPostSubmission:function l(m){c("Event").listen(m,"keydown",function(event){var n=event.getModifiers(),o=c("UserAgent_DEPRECATED").osx()?n.meta:n.control,p=c("DOMQuery").find(m.form,'._11b[type="submit"]');if(event.keyCode===c("Keys").RETURN&&o&&c("Button").isEnabled(p)){m.blur();if(c("Event").fire(p,"click"))c("Event").fire(m.form,"submit");event.preventDefault()}})}};f.exports=k}),null);
__d("AggregatedGroupStoryComposerTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:AggregatedGroupStoryComposerLoggerConfig",this.$AggregatedGroupStoryComposerTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:AggregatedGroupStoryComposerLoggerConfig",this.$AggregatedGroupStoryComposerTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$AggregatedGroupStoryComposerTypedLogger1={};return this};h.prototype.updateData=function(j){this.$AggregatedGroupStoryComposerTypedLogger1=babelHelpers["extends"]({},this.$AggregatedGroupStoryComposerTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$AggregatedGroupStoryComposerTypedLogger1.event=j;return this};h.prototype.setVC=function(j){this.$AggregatedGroupStoryComposerTypedLogger1.vc=j;return this};var i={event:true,vc:true};f.exports=h}),null);
__d("ComposerXAjaxEndpoint",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADS_MEDIA_UPLOAD:"/ajax/ads/create/composerx/attachment/media/upload/",ADS_ATTACHMENT_STATUS:"/ajax/ads/create/composerx/attachment/status/",MEDIA_UPLOAD:"/ajax/composerx/attachment/media/upload/",VIDEO_UPLOAD:"/ajax/composerx/attachment/video/upload/"})}),null);
__d("isAnimatedGif",["Promise"],(function a(b,c,d,e,f,g){__p&&__p();var h=1e6;function i(m){return m[0]===71&&m[1]===73&&m[2]===70}function j(m,n){return m[n]===0&&m[n+1]===33&&m[n+2]===249&&m[n+3]===4&&m[n+8]===0&&(m[n+9]===44||m[n+9]===33)}function k(m){__p&&__p();if(!i(m))return false;var n=0;for(var o=0;o+9<m.length;++o){if(j(m,o))n++;if(n>1)return true}return false}function l(m){__p&&__p();return new(c("Promise"))(function(n){__p&&__p();var o=new FileReader();o.onloadend=function(r){if(r.target.readyState==FileReader.DONE){var s=new Uint8Array(r.target.result);if(k(s))n(true);else n(false)}};o.onerror=function(r){n(false)};var p=Math.min(h,m.size),q=m.slice(0,p);o.readAsArrayBuffer(q)})}f.exports=l}),null);
__d("ComposerXMediaUploadHandler",["fbt","Arbiter","AsyncRequest","ComposerXAjaxEndpoint","ComposerXController","CSS","Dialog","ImageExtensions","QE","ReloadPage","SubscriptionsHandler","URI","VideoUploadConfig","VideoUploadFile","isAnimatedGif"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("ComposerXAjaxEndpoint").MEDIA_UPLOAD,j="/ajax/composerx/attachment/video/upload/",k=0;function l(m,n){"use strict";this.$ComposerXMediaUploadHandler1=m;this.$ComposerXMediaUploadHandler2=n}l.prototype.fetchAttachments=function(){"use strict";[this.getPhotoUploadAttachmentEndpoint(),j].forEach(function(m){c("ComposerXController").fetchAttachmentData(this.$ComposerXMediaUploadHandler1,m)}.bind(this))};l.prototype.handleFileSelected=function(m){"use strict";var n=this;l.isVideoOrAnimatedGifAsync(m,function(o){if(o)n.handleVideoSelected(m);else n.handlePhotoSelected(m)})};l.canUploadAnimatedGIF=function(){"use strict";return c("ImageExtensions").GIF in c("VideoUploadConfig").videoExtensions};l.isVideoOrAnimatedGifAsync=function(m,n){"use strict";var o=c("VideoUploadFile").getExtensionFromFileInput(m.getInput());if(l.canUploadAnimatedGIF()&&o===c("ImageExtensions").GIF)c("isAnimatedGif")(m.getInput().files[0]).then(n);else if(c("VideoUploadConfig").videoExtensions[o])n(true);else n(false)};l.prototype.handleVideoSelected=function(m){"use strict";__p&&__p();if(this.$ComposerXMediaUploadHandler2&&this.$ComposerXMediaUploadHandler2.imagesOnly){var n=new(c("Dialog"))().setModal(true).setButtons([c("Dialog").OK]);if(this.$ComposerXMediaUploadHandler2.isEditComposer)n.setTitle(h._("Can't add video")).setBody(h._("Sorry, you can't add a video to a post you're editing."));else n.setTitle(h._("Invalid Image File")).setBody(h._("Please upload a valid image file."));n.show();return}c("ComposerXController").getAttachment(this.$ComposerXMediaUploadHandler1,j);c("Arbiter").inform("ComposerXFilesStore/filesAdded/"+this.$ComposerXMediaUploadHandler1+"/videoupload",{fileInput:m},c("Arbiter").BEHAVIOR_PERSISTENT)};l.prototype.handlePhotoSelected=function(m){"use strict";c("ComposerXController").getAttachment(this.$ComposerXMediaUploadHandler1,this.getPhotoUploadAttachmentEndpoint());l.$ComposerXMediaUploadHandler3(this.$ComposerXMediaUploadHandler1,m)};l.isVideoFile=function(m){"use strict";var n=c("VideoUploadFile").getExtensionFromFileInput(m.getInput());return!!c("VideoUploadConfig").videoExtensions[n]};l.prototype.$ComposerXMediaUploadHandler4=function(){"use strict";return this.$ComposerXMediaUploadHandler2?this.$ComposerXMediaUploadHandler2.photoUploadOverrideEndpoint:null};l.prototype.getPhotoUploadAttachmentEndpoint=function(){"use strict";var m=this.$ComposerXMediaUploadHandler4();return m?m:i};l.$ComposerXMediaUploadHandler3=function(m,n){"use strict";c("Arbiter").inform("ComposerXFilesStore/filesAdded/"+m+"/mediaupload",{fileInput:n,receivedBySubscriber:false},c("Arbiter").BEHAVIOR_PERSISTENT)};l.setupFileUploadToComposerDialog=function(m,n,o,p){"use strict";__p&&__p();var q="composerxmediauploadhandler"+k++,r=function r(u){c("CSS").conditionClass(m.getControl(),o,u);m.getInput().disabled=u},s=new(c("URI"))(n),t=s.getQueryData();t.client_ref=q;s.setQueryData(t);n=s.toString();m.subscribe("change",function(){new(c("AsyncRequest"))().setURI(n).setErrorHandler(function(){m.clear();r(false)}).send();r(true)});c("Arbiter").subscribe("composer/dialog/"+q+"/new",function(u,v){this.$ComposerXMediaUploadHandler3(v.composerID,m);var w=new(c("SubscriptionsHandler"))();w.addSubscriptions(c("Arbiter").subscribe("composer/publish",function(event,x){if(p&&v.composerID===x.composer_id)c("ReloadPage").now()}),v.dialog.subscribe("hide",function(){w.release();m.clear();r(false)}))}.bind(this))};f.exports=l}),null);
__d("PagesComposerActionsLogger",["Banzai"],(function a(b,c,d,e,f,g){var h="pages_composer_actions",i="actions";function j(l){return{log:function m(n,o){o=o?o:i;c("Banzai").post(h+":"+o,n,l)},create:null}}var k=j();k.create=j;f.exports=k}),null);
__d("PagesComposerPostActionsLoggerEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PUBLISH:"publish",SCRAPED:"scraped",UPLOAD:"upload",IMAGE_SELECT:"image_select",IMAGE_UNSELECT_ON_UPLOAD_BAR:"image_unselect_on_upload_bar",IMAGE_UNSELECT_ON_CAROUSEL_CARD:"image_unselect_on_carousel_card",IMAGE_UNSELECT_ON_LPP_CARD:"image_unselect_on_carousel_card",IMAGE_CHANGE_LEFT_RIGHT:"image_change_left_right",IMAGE_DRAG:"image_drag",LPP_DESCRIPTION_EDIT:"lpp_description_edit",CAROUSEL_DESCRIPTION_EDIT:"carousel_description_edit",LPP_TITLE_EDIT:"lpp_title_edit",CAROUSEL_TITLE_EDIT:"carousel_title_edit",CHILD_IMAGES_NUM_INCONSISTENT:"child_images_num_inconsistent",CHILD_IMAGES_LINK_INCONSISTENT:"child_images_link_inconsistent",ATTACHMENT_STYLE_INVALID:"attachment_style_invalid",EDIT_URL:"edit_url",CLICK_UPLOAD_PHOTO_IN_PHOTO_TAB:"click_upload_photo_in_photo_tab",CLICK_UPLOAD_BUTTON_IN_TOOLBAR:"click_upload_button_in_toolbar",DRAG_PHOTO_TO_COMPOSER:"drag_photo_to_composer",CLICK_PHOTO_CAROUSEL_CREATE_TAB:"click_photo_carousel_create_tab",CLICK_CAROUSEL_CAMERA_ICON:"click_carousel_camera_icon",CLICK_SLIDESHOW_CREATE_TAB:"click_slideshow_create_tab",CLICK_CANVAS_CREATE_TAB:"click_canvas_create_tab",CLICK_COLLECTION_CREATE_TAB:"click_collection_create_tab",SHOW_PHOTO_CAROUSEL_CREATE_TAB:"show_photo_carousel_create_tab",REMOVE_PHOTO_CAROUSEL_URL_INPUT:"remove_photo_carousel_url_input",CLICK_UPLOAD_PHOTO_OPTION:"click_upload_photo_option",CLICK_PHOTO_ALBUM_OPTION:"click_photo_album_option",PREFILL_SCRAPE_URL:"prefill_scrape_url",EDIT_URL_APPLY_ALL:"edit_url_apply_all",UPLOAD_CANVAS_VIDEO:"upload_canvas_video",CLICK_CANVAS_UPLOAD_BUTTON:"click_canvas_upload_button",UNKNOWN:"unknown"})}),null);
__d("FirstPhotoUploadLogger",["csx","DOM","Event","PagesComposerPostActionsLoggerEvent","PagesComposerActionsLogger"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={log:function j(event,k,l){if(!k||!l)return;var m=c("DOM").scry(l,"._yr");if(m.length!==0&&event!==c("PagesComposerPostActionsLoggerEvent").DRAG_PHOTO_TO_COMPOSER)return;c("PagesComposerActionsLogger").log({event:event,target_id:k})},bindClickUpload:function j(k,l,m){c("Event").listen(l,"click",function(){this.log(c("PagesComposerPostActionsLoggerEvent").CLICK_UPLOAD_PHOTO_IN_PHOTO_TAB,m,k)}.bind(this))}};f.exports=i}),null);
__d("ComposerXDragDrop",["fbt","Promise","Arbiter","ClipboardPhotoUploader","ComposerXAjaxEndpoint","ComposerXController","ComposerXDragDropUtils","ComposerXMediaUploadHandler","DragDropTarget","ErrorDialog","Event","FirstPhotoUploadLogger","PagesComposerPostActionsLoggerEvent","PUWMethods","URI","isAnimatedGif"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("ComposerXAjaxEndpoint").MEDIA_UPLOAD,j=c("ComposerXAjaxEndpoint").VIDEO_UPLOAD,k="/ajax/composerx/attachment/link/scraper/",l=function l(n){n()};function m(n,o,p,q){"use strict";__p&&__p();this._root=n;this._composerID=o;this._targetID=p;q=q||l;this._activatePasteHandler();this._dragdrop=new(c("DragDropTarget"))(n).setOnFilesDropCallback(function(r){q(this._dropFiles.bind(this,r))}.bind(this)).setFileFilter(c("ComposerXDragDropUtils").filterImages).enable();c("ComposerXDragDropUtils").handleDragEnterAndLeave(n);c("Arbiter").subscribe("composer/deactivateDragdrop",function(){this.deactivate()}.bind(this));c("Arbiter").subscribe("composer/reactivateDragdrop",function(){this.reactivate()}.bind(this))}m.prototype.enableURLDropping=function(){"use strict";this._dragdrop.setOnURLDropCallback(this._onURLDrop.bind(this))};m.prototype.deactivate=function(){"use strict";this._dragdrop.disable();this._deactivatePasteHandler()};m.prototype.reactivate=function(){"use strict";this._activatePasteHandler();this._dragdrop.enable()};m.prototype._activatePasteHandler=function(){"use strict";if(this._pasteHandler)return;this._pasteHandler=c("Event").listen(this._root,"paste",function(event){var n=c("ClipboardPhotoUploader").getImages(event);if(!n.length)return;this._uploadFiles(n,c("PUWMethods").COPYPASTE)}.bind(this))};m.prototype._deactivatePasteHandler=function(){"use strict";if(!this._pasteHandler)return;this._pasteHandler.remove();delete this._pasteHandler};m.prototype._uploadFiles=function(n,o,p){"use strict";if(p){c("ComposerXController").getAttachment(this._root,j);c("Arbiter").inform("ComposerXFilesStore/filesDropped/"+this._composerID+"/videoupload",{files:n},c("Arbiter").BEHAVIOR_PERSISTENT)}else{c("ComposerXController").getAttachment(this._root,i);c("Arbiter").inform("ComposerXFilesStore/filesDropped/"+this._composerID+"/mediaupload",{files:n,method:o},c("Arbiter").BEHAVIOR_PERSISTENT)}};m.prototype._dropFiles=function(n){"use strict";__p&&__p();var o=n.map(function(q){return new(c("Promise"))(function(r){if(q.type==="image/gif"&&c("ComposerXMediaUploadHandler").canUploadAnimatedGIF())r(c("isAnimatedGif")(q));else if(q.type.match("video/*"))r(true);else r(false)})});for(var p=0;p<o.length;p++)if(o[p]._value===false){c("FirstPhotoUploadLogger").log(c("PagesComposerPostActionsLoggerEvent").DRAG_PHOTO_TO_COMPOSER,this._targetID,this._root);break}c("Promise").all(o).then(function(q){if(this.validateMediaTypes(q))this._uploadFiles(n,c("PUWMethods").DRAGDROP,q[0])}.bind(this))};m.prototype._onURLDrop=function(n){"use strict";var o=new(c("URI"))(k);o.addQueryData({scrape_url:encodeURIComponent(n)});c("ComposerXController").getAttachment(this._root,o.toString())};m.prototype.validateMediaTypes=function(n){"use strict";__p&&__p();if(n.length>1){var o=false,p=false;for(var q=0;q<n.length;q++)if(n[q])o=true;else p=true;if(o&&p){c("ErrorDialog").show(h._("Can't upload both videos and images"),h._("Please select either one video or one or more images."));return false}}return true};f.exports=m}),null);
__d("PagesComposerEntryLogger",["Event","PagesEventObserver"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$PagesComposerEntryLogger1=i}h.prototype.registerForContentEntryEvents=function(i){"use strict";var j=function j(){var k={page_id:this.$PagesComposerEntryLogger1,event_name:"composer_content_entry",pages_composer:1,target_id:this.$PagesComposerEntryLogger1};c("PagesEventObserver").logData_DEPRECATED(k,c("PagesEventObserver").VITAL_WAIT);this.unregister()};this.$PagesComposerEntryLogger2=c("Event").listen(i,{paste:j.bind(this),keydown:j.bind(this)})};h.prototype.unregister=function(){"use strict";if(!this.$PagesComposerEntryLogger2)return;for(var event in this.$PagesComposerEntryLogger2)this.$PagesComposerEntryLogger2[event].remove();this.$PagesComposerEntryLogger2=null};f.exports=h}),null);
__d("PrivacyRemindersLoggingTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"})}),null);
__d("SuggestionConfig",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GROUP_POST_COMPOSER:"grouppostcomposer",OG_SUGGESTION_BY_INPUT:"ogsuggestionbyinput",COMPOSER_ENTRY_BOOTSTRAP:"composerentrybootstrap",MTOUCH_COMPOSER_ENTRY_BOOTSTRAP:"mtouchcomposerentrybootstrap",MTOUCH_COMPOSER_LOAD_VERBS:"mtouchcomposerloadverbs"})}),null);
__d("SuggestionUIPresentation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLYOUT:1,TAGGER_BADGE:2,ADD_TAG:3,SEMI_INLINE:4,TOP_OF_VERBS:5})}),null);
__d("XPrivacyRemindersDismissController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/reminders/dismiss/",{type:{type:"String",required:true},log_plite:{type:"Bool",defaultValue:false}})}),null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/privacy/reminders/log_imp/",{type:{type:"String",required:true}})}),null);
__d("ComposerXBootloadStatusAttachment",["csx","cx","fbt","requireWeak","AggregatedGroupStoryComposerTypedLogger","Arbiter","AsyncRequest","Bootloader","ComposerEntryPointRef","ComposerXAttachment","ComposerXAttachmentButtonBarState","ComposerXAttachmentPrefillMixin","ComposerXAttachmentUtils","ComposerXController","ComposerXDragDrop","ComposerXDragDropUtils","ComposerXMarauderLogger","ComposerXStore","CSS","DOM","DOMQuery","Event","Focus","NoNewerStoryInsertionWhileComposingGK","PageTransitions","PagesComposerEntryLogger","Parent","FocusListener","PrivacyConst","PrivacyRemindersLoggingTypes","ProductionPromptConfig","SelectorDeprecated","SubscriptionsHandler","SuggestionConfig","SuggestionUIPresentation","URI","XUIError","$","classWithMixins","createCancelableFunction","getActiveElement","mixin","requestAnimationFrame","XPrivacyRemindersDismissController","XPrivacyRemindersImpressionLoggingController","XReactComposerLoggingODSController"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m;c("requireWeak")("LitestandStoryInsertionStatus",function(q){m=q});var n={only_me:{PRIVACY_CONSTANT:[c("PrivacyConst").BaseValue.SELF],LOG_IMPRESSION:c("PrivacyRemindersLoggingTypes").ONLY_ME_IMPRESSION,LOG_CONVERSION:c("PrivacyRemindersLoggingTypes").ONLY_ME_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone:{PRIVACY_CONSTANT:[c("PrivacyConst").BaseValue.EVERYONE],LOG_IMPRESSION:c("PrivacyRemindersLoggingTypes").EVERYONE_IMPRESSION,LOG_CONVERSION:c("PrivacyRemindersLoggingTypes").EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone_tests:{PRIVACY_CONSTANT:[c("PrivacyConst").BaseValue.EVERYONE],LOG_IMPRESSION:c("PrivacyRemindersLoggingTypes").EVERYONE_TESTS_IMPRESSION,LOG_CONVERSION:c("PrivacyRemindersLoggingTypes").EVERYONE_TESTS_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},public_posting_filter_nux:{PRIVACY_CONSTANT:[c("PrivacyConst").BaseValue.EVERYONE],LOG_IMPRESSION:c("PrivacyRemindersLoggingTypes").PUBLIC_POSTING_FILTER_NUX_IMPRESSION,LOG_CONVERSION:c("PrivacyRemindersLoggingTypes").PUBLIC_POSTING_FILTER_NUX_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true}},o={};k=babelHelpers.inherits(p,c("classWithMixins")(c("ComposerXAttachment"),c("mixin")(c("ComposerXAttachmentPrefillMixin"))));l=k&&k.prototype;function p(q,r){"use strict";__p&&__p();l.constructor.call(this);this._onSelectorChange=function(s,t){if(!this.getComponent("mainprivacywidget"))return;if(this._newPrivacyWidgetInstance||t.selector===this._privacyWidgetElement.firstChild)setTimeout(function(){Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this)}.bind(this))}.bind(this);this._root=q;this._config=r;this._privacyReminders={};if(m&&c("NoNewerStoryInsertionWhileComposingGK").no_insertion_while_composing)m.registerBlocker(function(){return this._isFocused()}.bind(this))}p.prototype.getRoot=function(){"use strict";return this._root};p.prototype.getPrivacyInstance=function(){"use strict";return this._newPrivacyWidgetInstance};p.prototype._getTextArea=function(){"use strict";return c("DOMQuery").find(this.getComponent("maininput").element,"textarea.input")};p.prototype.initWithComponents=function(q){"use strict";__p&&__p();o[this._composerID]=this;this._attachmentIsActive=true;var r=this._getTextArea(),s=c("DOMQuery").scry(c("Parent").bySelector(this.getRoot(),"._119"),"li."+this.attachmentClassName)[0];this._focusListener=c("Event").listen(r,"focus",this._onFocus.bind(this,"area_focus"));if(this._config.prefill_text)this._initPrefill(r,this._config.prefill_text);if(q&&this._config.targetIsPage){this._pagesComposerEntryLogger=new(c("PagesComposerEntryLogger"))(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(r)}if(this._fullVersion)this._fullInitWithComponents();else if(!this._bootloading)if(this._isFocused())this._onFocus("is_focused");else if(s)this._clickListener=c("Event").listen(s,"click",function(){c("Focus").set(r)}.bind(this));this._dragEnterHandler=c("Arbiter").subscribe("dragenter",function(t,u){__p&&__p();if(u.element==this._root){c("Arbiter").inform("composerprivacy/aborteducation");var v=u.event.dataTransfer.items,w;if(v)w=c("ComposerXDragDropUtils").filterImages(v);if(w&&w.length>0)c("Focus").set(r);else{var x=c("Parent").byClass(this._root,"focus_target");c("FocusListener").expandInput(x);this._onFocus("drag_focus")}}}.bind(this));this.getComponent("maininput").instance.setPlaceholder(this._config.mentionsPlaceholder);if(!q)c("Focus").set(r);this._dragdrop=new(c("ComposerXDragDrop"))(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();this._initPrivacyWidgetInstance();if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent("pabhiddeninputs").instance);c("PageTransitions").registerHandler(this.cleanup.bind(this))};p.prototype._initPrivacyWidgetInstance=function(){"use strict";__p&&__p();var q=this.getComponent("mainprivacywidget");if(!q)return;this._privacyWidgetElement=q.element;this._newPrivacyWidgetInstance=q.instance&&q.instance.getInstance().getInstance();if(this._newPrivacyWidgetInstance){var r=this.getComponent("maininput").instance&&this.getComponent("maininput").instance.getMentions(),s=this.getComponent("tagExpansionButton");s&&s.instance&&s.instance.listenToPrivacy(this._newPrivacyWidgetInstance,r)}};p.prototype._fullInitWithComponents=function(q){"use strict";__p&&__p();this._bootloadCallback=c("createCancelableFunction")(this._bootloadModules.bind(this));c("Bootloader").loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper"],this._bootloadCallback,"ComposerXBootloadStatusAttachment");Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);if(this._setEveryonePrivacyImpression)this._showPrivacyReminder("everyone");if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.subscribe("changed",this._onSelectorChange);else c("SelectorDeprecated").subscribe("select",this._onSelectorChange);c("Arbiter").inform("ComposerXBootloadStatusAttachment/mutate")};p.prototype._bootloadModules=function(q,r,s){"use strict";__p&&__p();this._modulesAreBootloaded=true;this._tagger.init(this);this._privacyWidgetTags=new q(this);c("ComposerXAttachmentButtonBarState").trackCityChanges(this);var t=c("DOMQuery").find(this.getComponent("maininput").element,"textarea.input");if(!this._scraper){this._scraper=new r(t);this._scraper.subscribe("match",function(x,y){var z=this._getScraperEndpoint();z.addQueryData({scrape_url:encodeURIComponent(y.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});var A=this._config.isCarouselComposer;c("ComposerXController").getAttachment(this._root,z.toString(),null,A)}.bind(this))}this._scraper.enable();this._scraper.check();var u=c("DOM").scry(this._root,"._4-jj"),v=this.getComposerID();if(this._config.stream_context==="home"&&u&&u.length&&this._tagger&&v){if(!this._suggestionScraper){this._suggestionScraper=new s(this._tagger,u[0],[c("SuggestionUIPresentation").SEMI_INLINE,c("SuggestionUIPresentation").TAGGER_BADGE,c("SuggestionUIPresentation").TOP_OF_VERBS],v);this._suggestionScraper.setBootloadTriggerConfig(c("SuggestionConfig").COMPOSER_ENTRY_BOOTSTRAP)}if(c("ProductionPromptConfig").gk){var w=c("DOM").scry(this._root,"#bootloadSemiinlineRoot")[0];if(w)c("CSS").hide(w)}}};p.prototype._showPrivacyReminder=function(q){"use strict";__p&&__p();var r=this,s=this._privacyReminders[q],t=n[q],u=null;if(this._newPrivacyWidgetInstance)u=this._newPrivacyWidgetInstance.getSelectedBaseValue();else u=parseInt(c("SelectorDeprecated").getValue(this._privacyWidgetElement),10);if(!s||!s.dialog||s.shown){if(u===c("PrivacyConst").BaseValue.EVERYONE&&this._setEveryonePrivacyImpression){this._sendSetEveryonePrivacyImpression();this._setEveryonePrivacyImpression=false}return}if(t.PRIVACY_CONSTANT.indexOf(u)===-1)return;s.dialog.setContext(this._privacyWidgetElement).show();s.shown=true;this._privacyReminderShown=true;if(t.LOG_IMPRESSION){var v=c("XPrivacyRemindersImpressionLoggingController").getURIBuilder().setString("type",t.LOG_IMPRESSION).getURI();new(c("AsyncRequest"))(v).send()}if(t.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(q==="only_me"){var w=c("XPrivacyRemindersDismissController").getURIBuilder().setString("type",q).getURI();new(c("AsyncRequest"))(w).send()}else new(c("AsyncRequest"))("/ajax/privacy/reminders/dismiss").setData({type:q,dismiss_type:"impression"}).send();var x=function(event){__p&&__p();var y=c("CSS").hasClass(event.target,"layerConfirm")||c("DOMQuery").scry(event.target,"^.layerConfirm").length===1,z=c("CSS").hasClass(event.target,"layerButton")||c("DOMQuery").scry(event.target,"^.layerButton").length===1;if(y&&q!=="public_posting_filter_nux"){if(q==="only_me"){var v=c("XPrivacyRemindersImpressionLoggingController").getURIBuilder().setString("type",c("PrivacyRemindersLoggingTypes").DELTA_EVERYONE_OK_BUTTON_CLICKED).getURI();new(c("AsyncRequest"))(v).send()}return}if(q==="only_me"){var w=c("XPrivacyRemindersDismissController").getURIBuilder().setString("type",q).getURI();new(c("AsyncRequest"))(w).send()}else new(c("AsyncRequest"))("/ajax/privacy/reminders/dismiss").setData({type:q,hide:z}).send();s.events.forEach(function(A){A.remove()});s.events=[];s.dialog.hide();this._privacyReminderShown=false;if(z)c("requestAnimationFrame")(function(){if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.openSelector();else c("SelectorDeprecated").toggle(c("DOMQuery").scry(r.getComponent("mainprivacywidget").element,".uiSelector")[0])}.bind(this))}.bind(this);if(this._newPrivacyWidgetInstance)s.conversionListener=this._newPrivacyWidgetInstance.subscribe("changed",function(y,z){var u=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(s,t,u)}.bind(this));else s.conversionListener=c("SelectorDeprecated").subscribe("select",function(y,z){if(z.selector==this._privacyWidgetElement.firstChild){var u=parseInt(c("SelectorDeprecated").getValue(z.option),10);this._logPrivacyReminderConversion(s,t,u)}}.bind(this));s.events=[c("Event").listen(s.dialog.getContent(),"click",x),c("Event").listen(s.dialog.getContext(),"click",x)]};p.prototype._logPrivacyReminderConversion=function(q,r,s){"use strict";__p&&__p();if(r.PRIVACY_CONSTANT.indexOf(s)===-1){if(r.LOG_CONVERSION){var t=c("XPrivacyRemindersImpressionLoggingController").getURIBuilder().setString("type",r.LOG_CONVERSION).getURI();new(c("AsyncRequest"))(t).send()}if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.unsubscribe(q.conversionListener);else c("SelectorDeprecated").unsubscribe(q.conversionListener);q.conversionListener=null}};p.prototype.cleanup=function(){"use strict";__p&&__p();this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null}if(this._clickListener){this._clickListener.remove();this._clickListener=null}Object.keys(n).forEach(function(q){__p&&__p();var r=this._privacyReminders[q];if(r&&r.dialog&&r.shown){r.dialog.hide();r.events.forEach(function(s){s.remove()});r.events=[];if(r.conversionListener)if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.unsubscribe(r.conversionListener);else c("SelectorDeprecated").unsubscribe(r.conversionListener);r.conversionListener=null}}.bind(this));if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null}if(this._modulesAreBootloaded){this._tagger.cleanup();if(this._privacyWidgetTags){this._privacyWidgetTags.destroy();this._privacyWidgetTags=null}this._scraper.disable()}if(this._bootloadCallback){this._bootloadCallback.cancel();this._bootloadCallback=null}if(this._dragEnterHandler){this._dragEnterHandler.unsubscribe();this._dragEnterHandler=null}if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister()};p.prototype.reset=function(){"use strict";__p&&__p();var q=c("Parent").bySelector(this._root,".child_was_focused");if(q)c("CSS").removeClass(q,"child_was_focused");if(this._tagger)this._tagger.reset();if(this._scraper)this._scraper.reset();if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent("maininput").instance.setPlaceholder(this._config.mentionsPlaceholder);if(this._config.prefill_text)this._resetPrefill();if(c("ProductionPromptConfig").gk)this._config.mentionsPlaceholder=j._("What's on your mind?")};p.prototype.canSwitchAway=function(){"use strict";return!c("Parent").byClass(this._root,"async_saving")};p.prototype.bootloadAttachments=function(){"use strict";if(this._bootloading)return;this._bootloading=true;c("ComposerXController").getEndpoint(this._root,"/ajax/composerx/attachment/status/bootload/",true)};p.prototype.setBootloadedContent=function(q){"use strict";__p&&__p();this._bootloading=false;this._setEveryonePrivacyImpression=!!q.set_everyone_privacy_impression;Object.keys(n).forEach(function(v){var w=q[v+"_privacy_reminder"];if(w)this._privacyReminders[v]={dialog:w}}.bind(this));if(q.markup.privacy_widget){var r=c("DOMQuery").find(this._root,"._etn");c("DOM").setContent(r,q.markup.privacy_widget);var s=c("DOMQuery").find(this._root,"._1dwm");if(s){s.disabled=false;c("CSS").removeClass(s,"_42fr")}}var t=q.placeholders.map(function(v){return v.component_name});c("ComposerXStore").waitForComponents(this._composerID,t,function(){__p&&__p();var v=c("DOMQuery").find(this._root,"._3-6"),w=c("DOMQuery").find(this._root,"._3-7");c("DOM").setContent(v,q.markup.tagger_content);c("DOM").setContent(w,q.markup.tagger_icons);if(q.markup.privacy_widget)this._initPrivacyWidgetInstance();c("ComposerXController").addPlaceholders(this._root,this,q.placeholders);this._tagger=q.tagger;c("ComposerXAttachmentButtonBarState").updateMessageBoxBarState(this);this._fullVersion=true;if(this._attachmentIsActive)this._fullInitWithComponents(q);c("ComposerXAttachmentUtils").registerMentionsForComposerCancel(this.getComponent("maininput"),this.getComposerID())}.bind(this));var u=c("XReactComposerLoggingODSController").getURIBuilder().setString("event","bootload_done").setEnum("composer_type",c("ComposerEntryPointRef").LEGACY_FEED).getURI();new(c("AsyncRequest"))(u).send()};p.prototype._getScraperEndpoint=function(){"use strict";return new(c("URI"))("/ajax/composerx/attachment/link/scraper/")};p.prototype._isFocused=function(){"use strict";return c("DOMQuery").contains(this._root,c("getActiveElement")())};p.prototype._isEditing=function(){"use strict";return this._isFocused()||this.getComponent("maininput").instance.hasChanges()};p.prototype._onFocus=function(q){"use strict";__p&&__p();if(this._config.is_group_aggregated_story&&q==="area_focus")new(c("AggregatedGroupStoryComposerTypedLogger"))().setEvent("click").log();c("ComposerXMarauderLogger").logEntry(this._composerID);var r=c("DOM").scry(this._root,"._180_")[0];if(c("ProductionPromptConfig").gk&&this._config.stream_context==="home"&&r){c("CSS").hide(c("$")("bootloadComposerPromptPlaceholder"));c("CSS").hide(c("$")("bootloadComposerPromptIcon"));var s=c("$")("mentionsInput");c("DOM").find(s,"textarea.mentionsTextarea").placeholder=j._("What's on your mind?")}this._prefillOnFocus();if(this._fullVersion||this._bootloading)return;c("Arbiter").inform("composer/focus",this._composerID);c("Arbiter").inform("composer/render_pab_nux");this.bootloadAttachments()};p.prototype.allowOGTagPreview=function(){"use strict";return true};p.prototype._sendSetEveryonePrivacyImpression=function(){"use strict";new(c("AsyncRequest"))("/ajax/privacy/reminders/set_everyone_privacy_impression").send()};p.prototype.onEmptyStatusCallback=function(){"use strict";var q=this._getTextArea();c("Focus").set(q);c("XUIError").set({target:q,message:j._("This status update appears to be blank. Please write something or attach a link or photo to update your status."),position:"below",alignh:"left"});new(c("SubscriptionsHandler"))().addSubscriptions(c("Event").listen(this.getRoot(),"success",function(){c("XUIError").clear(this._getTextArea())}.bind(this)),c("Arbiter").subscribe("composer/publish",function(event,r){if(r.composer_id!=this.getComposerID())return;c("XUIError").clear(this._getTextArea())}.bind(this)))};p.setBootloadedContent=function(q,r){"use strict";var s=o[q];if(s)s.setBootloadedContent.call(s,r)};p.onEmptyStatusListener=function(q){"use strict";var r=o[q];if(r)r.onEmptyStatusCallback.call(r)};Object.assign(p.prototype,{_attachmentIsActive:false,_bootloading:false,_modulesAreBootloaded:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_bootloadCallback:null,attachmentClassName:"_4j"});f.exports=p}),null);
__d("ComposerXMentionsInputReset",["DOMQuery","Input"],(function a(b,c,d,e,f,g){function h(i){var j=c("DOMQuery").scry(i.element,"textarea.input")[0];i.instance.reset();c("Input").reset(j)}f.exports=h}),null);
__d("ComposerXOGTaggerIconReset",["cx","CSS"],(function a(b,c,d,e,f,g,h){function i(j){c("CSS").removeClass(j.element,"_4-jh");c("CSS").removeClass(j.element,"_509o")}f.exports=i}),null);
__d("ComposerXTaggerIconReset",["cx","CSS"],(function a(b,c,d,e,f,g,h){function i(j){c("CSS").removeClass(j.element,"_1dsa");c("CSS").removeClass(j.element,"_1dsb");c("CSS").removeClass(j.element,"_509o")}f.exports=i}),null);
__d("ComposerXPostSubmitButtonActions",["cx","Arbiter","CSS"],(function a(b,c,d,e,f,g,h){function i(j){"use strict";c("Arbiter").subscribe("composer/disablePostButton",function(event,k){if(k.disabled)c("CSS").addClass(j,"_2dha");else c("CSS").removeClass(j,"_2dha")})}f.exports=i}),null);
__d("ReactComposerAudienceActionTypes",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({SET_AUDIENCE:null,SET_AUDIENCE_ELEMENT:null,SET_AUDIENCE_INSTANCE:null,SET_PRIVACYX_NULL_DANGEROUS:null,SET_COLLECTION:null},"ReactComposerAudienceActionTypes")}),null);
__d("ReactComposerAudienceStore",["csx","invariant","DOM","ReactComposerActionStore","ReactComposerAudienceActionTypes","$"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("ReactComposerActionStore"));k=j&&j.prototype;function l(){"use strict";__p&&__p();var m=void 0;k.constructor.call(this,function(){return{audience:null,audienceElement:null,audienceInstance:null,legacyAudience:null,privacyxNullDangerous:false,collectionID:null,privacyLabel:null}},function(n){__p&&__p();switch(n.type){case c("ReactComposerAudienceActionTypes").SET_AUDIENCE:m&&m.$ReactComposerAudienceStore1(n);break;case c("ReactComposerAudienceActionTypes").SET_AUDIENCE_ELEMENT:m&&m.$ReactComposerAudienceStore2(n);break;case c("ReactComposerAudienceActionTypes").SET_AUDIENCE_INSTANCE:m&&m.$ReactComposerAudienceStore3(n);break;case c("ReactComposerAudienceActionTypes").SET_PRIVACYX_NULL_DANGEROUS:m&&m.$ReactComposerAudienceStore4(n);break;case c("ReactComposerAudienceActionTypes").SET_COLLECTION:m&&m.$ReactComposerAudienceStore5(n);break}});m=this}l.prototype.getAudience=function(m){"use strict";__p&&__p();if(this.getPrivacyxNullDangerous(m))return null;try{var n=c("DOM").scry(c("$")(m),"._5dd8");n.length<2||i(0);var o=n[0];if(o){var p=c("DOM").scry(o,'input[name="privacyx"]');p.length<2||i(0);if(p.length===1)return p[0].value}}catch(q){}return this.getComposerData(m).audience};l.prototype.getLegacyAudience=function(m){"use strict";return this.getComposerData(m).legacyAudience};l.prototype.getAudienceElement=function(m){"use strict";return this.getComposerData(m).audienceElement};l.prototype.getAudienceInstance=function(m){"use strict";return this.getComposerData(m).audienceInstance};l.prototype.getPrivacyxNullDangerous=function(m){"use strict";return this.getComposerData(m).privacyxNullDangerous};l.prototype.getCollectionID=function(m){"use strict";return this.getComposerData(m).collectionID};l.prototype.getPrivacyLabel=function(m){"use strict";return this.getComposerData(m).privacyLabel};l.prototype.$ReactComposerAudienceStore1=function(m){"use strict";var n=this.validateAction(m,"composerID"),o=this.getComposerData(n);o.audience=m.audience;o.legacyAudience=m.legacyAudience;this.emitChange(n)};l.prototype.$ReactComposerAudienceStore2=function(m){"use strict";var n=this.validateAction(m,["composerID","audienceElement"]),o=n[0],p=n[1],q=this.getComposerData(o);q.audienceElement=p;this.emitChange(o)};l.prototype.$ReactComposerAudienceStore3=function(m){"use strict";var n=this.validateAction(m,"composerID"),o=this.getComposerData(n);o.audienceInstance=m.audienceInstance;this.emitChange(n)};l.prototype.$ReactComposerAudienceStore4=function(m){"use strict";var n=this.validateAction(m,"composerID"),o=this.getComposerData(n);o.privacyxNullDangerous=m.privacyxNullDangerous;this.emitChange(n)};l.prototype.$ReactComposerAudienceStore5=function(m){"use strict";var n=this.validateAction(m,["composerID","collectionID"]),o=n[0],p=n[1],q=this.getComposerData(o);q.collectionID=p;q.privacyLabel=m.privacyLabel;this.emitChange(o)};f.exports=new l()}),null);
__d("ReactComposerCollectionsActionTypes",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({SHOW_COLLECTION_SELECTOR:null,HIDE_COLLECTION_SELECTOR:null,SHOW_CREATION_LAYER:null,HIDE_CREATION_LAYER:null,SHOW_SHARING_SPACE_CREATION_LAYER:null,HIDE_SHARING_SPACE_CREATION_LAYER:null,SPACE_SELECTOR_LOADED:null},"ReactComposerCollectionsActionTypes")}),null);
__d("XFamilyMentionsNUXDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/family_mentions/nux_dialog/",{__asyncDialog:{type:"Int"}})}),null);
__d("FamilyRelationshipMentions",["AsyncDialog","AsyncRequest","FamilyMentionsData","XFamilyMentionsNUXDialogController"],(function a(b,c,d,e,f,g){__p&&__p();var h=function(){__p&&__p();var i={},j=false;i.shouldShowNUX=function(k){if(c("FamilyMentionsData").hasAcceptedNUX||j)return false;var l=k.family_names;if(l==undefined)return false;for(var m=0;m<l.length;m++)if(l[m]==k.text)return true;return false};i.showNUX=function(k,l){__p&&__p();var m=c("XFamilyMentionsNUXDialogController").getURIBuilder().getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(m),function(n){n.subscribe("cancel",function(){k.text=k.default_name;new(c("AsyncRequest"))().setURI("/ajax/family_mentions/deny_nux").send();l(k)});n.subscribe("confirm",function(){j=true;new(c("AsyncRequest"))().setURI("/ajax/family_mentions/confirm_nux").send();l(k);n.finishHide()})})};return i}();f.exports=h}),null);
__d("MentionsTypeaheadAreaView",["ContextualTypeaheadView","FamilyRelationshipMentions","Parent"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ContextualTypeaheadView"));i=h&&h.prototype;j.prototype.getContext=function(){"use strict";return c("Parent").byClass(this.element,"uiMentionsInput")};j.prototype.shouldValidateTypeaheadSelection=function(k){"use strict";return c("FamilyRelationshipMentions").shouldShowNUX(k)};j.prototype.validateTypeaheadSelection=function(k,l){"use strict";c("FamilyRelationshipMentions").showNUX(k,l)};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);