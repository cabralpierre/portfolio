if (self.CavalryLogger) { CavalryLogger.start_js(["8NAX4"]); }

__d("FileFormResetOnSubmit",["DOMQuery","Event","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k){var l=c("Event").listen(j,"change",c("emptyFunction").thatReturnsFalse,c("Event").Priority.URGENT);try{k()}catch(m){throw m}finally{l.remove()}}function i(j){"use strict";this._form=j}i.prototype.enable=function(){"use strict";var j=this._reset.bind(this);this._subscription=this._form.subscribe("submit",function(){setTimeout(j,0)})};i.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null};i.prototype._reset=function(){"use strict";var j=this._form.getRoot();h(j,function(){var k=c("DOMQuery").scry(j,'input[type="file"]');k.forEach(function(l){l.value=""})})};f.exports=i}),null);
__d("TimelineProfilePicConfig",["fbt"],(function a(b,c,d,e,f,g,h){var i={loading:"timeline/profile_pic/loading",success:"timeline/profile_pic/success",leavingMessage:h._("Your profile picture is still uploading, are you sure you want to leave?")};f.exports=i}),null);
__d("ProfilePicForm",["csx","cx","CSS","DOM","Event","Parent","Run","TimelineProfilePicConfig","$","tidyEvent"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=false,k=void 0;function l(n){j=n;c("CSS").conditionClass(document.documentElement,"profilePicLoading",n)}function m(n,o){"use strict";__p&&__p();this.reset();this.$ProfilePicForm1=n;if(!o)return;var p=c("$")(o);c("tidyEvent")(c("Event").listen(n.getRoot(),"click",function(q){k=q;q.stopPropagation()}));this.subscriptions=[n.subscribe("submit",function(){l(true);if(k){c("Event").fire(n.getRoot().parentNode,"click",k);k=null}}),n.subscribe("success",function(q,r){l(false);var s=c("Parent").bySelector(p,"._1ro1");if(!s)s=p.parentElement;c("DOM").replace(s,r.response.payload)}),n.subscribe("failure",l.bind(null,false))];c("Run").onBeforeUnload(function(){if(j)return c("TimelineProfilePicConfig").leavingMessage});c("Run").onLeave(this.reset.bind(this))}m.prototype.getFileForm=function(){"use strict";return this.$ProfilePicForm1};m.prototype.reset=function(){"use strict";this.subscriptions&&this.subscriptions.forEach(function(n){n.unsubscribe()});this.subscriptions=[];k=null;l(false)};f.exports=m}),null);
__d("ProfilePhotoActionLogger",["Banzai"],(function a(b,c,d,e,f,g){var h={EVENT_SELECT_METHOD:"select_method",EVENT_CAMERA_PERMISSION_PROVIDED:"permission_provided",EVENT_CAMERA_PERMISSION_DENIED:"permission_denied",EVENT_CAMERA_NO_WEBCAM:"permission_denied",EVENT_CAMERA_UNKNOWN_MEDIASTREAM_ERROR:"unknown_mediastream_error",EVENT_CAMERA_TAKE_PHOTO:"take_photo",EVENT_CAMERA_RETAKE_PHOTO:"retake_photo",EVENT_CAMERA_UPLOAD_ATTEMPT:"upload_attempt",EVENT_CAMERA_UPLOAD_ERROR:"upload_error",EVENT_CAMERA_UPLOAD_SUCCESS:"upload_success",SOURCE_SUGGESTIONS:"suggestions",SOURCE_TIMELINE:"timeline",SOURCE_NUX:"nux",METHOD_EXISTING:"existing",METHOD_UPLOAD:"upload",METHOD_CAMERA:"camera",log:function i(j,k,l){c("Banzai").post("profile_photo_action",{event:j,source:k,method:l})}};f.exports=h}),null);
__d("ProfilePictureUploader",["CSS","DOM","HTML","Arbiter","Event","Dialog","tidyEvent","ProfilePhotoActionLogger","$","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h={_hadProfilePicture:false,_hasPreview:false,_optionsToHide:null,_spinner:null,init:function i(j,k,l,m,n,o,p){__p&&__p();var q=k.getFileForm(),r=c("ge")("remove_profile_picture_link");this._spinner=m;if(l&&m)this._hasPreview=true;if(p)this._optionsToHide=p;c("tidyEvent")([c("Arbiter").subscribe("timeline/profile_pic/success",function(s,t){__p&&__p();if(o){goURI(window.location);return}var u=t.newPic;if(!u)return;var v=c("Dialog").getCurrent();if(v)v.hide();if(this._hasPreview)c("DOM").setContent(l,typeof u==="string"?c("HTML")(u):u);if(r)c("CSS").show(r);h.updateIcons(t.headerPicURL,j);c("Arbiter").inform("profile_picture/"+n+"/success")}.bind(this)),c("Event").listen(q._form,"click",function(s){if(!s.clientX)return;c("ProfilePhotoActionLogger").log(c("ProfilePhotoActionLogger").EVENT_SELECT_METHOD,n,c("ProfilePhotoActionLogger").METHOD_UPLOAD)}),q.subscribe("submit",function(){if(!this._hasPreview){c("CSS").addClass(document.documentElement,"profilePicLoading");return}if(r){this._hadProfilePicture=!c("CSS").hasClass(r,"hidden_elem");c("CSS").hide(r)}c("CSS").hide(l)}.bind(this)),q.subscribe("success",function(event,s){__p&&__p();if(o){goURI(window.location.href);return}if(this._hasPreview){c("DOM").setContent(l,s.response.payload);c("CSS").show(l);if(r)c("CSS").show(r)}else c("CSS").removeClass(document.documentElement,"profilePicLoading");var t=c("DOM").create("div",null,s.response.payload).getElementsByTagName("img")[0].src;h.updateIcons(t,j);c("Arbiter").inform("profile_picture/"+n+"/success")}.bind(this)),q.subscribe("failure",function(s,t){if(!this._hasPreview){c("CSS").removeClass(document.documentElement,"profilePicLoading");return}c("CSS").show(l);c("CSS").conditionShow(c("$")("remove_profile_picture_link"),this._hadProfilePicture)}.bind(this))])},updateIcons:function i(j,k){__p&&__p();var l=c("ge")("profile_pic_header_"+k),m=c("ge")("profile_pic_welcome_"+k);if(l)l.src=j;if(m){m.src=j;c("CSS").addClass(m,"_8zq")}if(this._optionsToHide){c("DOM").remove(this._optionsToHide);this._optionsToHide=null;if(this._spinner)c("CSS").hide(this._spinner)}}};f.exports=h}),null);
__d("FormSubmitOnChange",["Event","submitForm"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this._form=i}h.prototype.enable=function(){"use strict";this._listener=c("Event").listen(this._form.getRoot(),"change",this._submit.bind(this))};h.prototype.disable=function(){"use strict";this._listener.remove();this._listener=null};h.prototype._submit=function(){"use strict";c("submitForm")(this._form.getRoot())};Object.assign(h.prototype,{_listener:null});f.exports=h}),null);