if (self.CavalryLogger) { CavalryLogger.start_js(["B5l6h"]); }

__d("FacebookWebNotificationsSubscription",["invariant","BaseGraphQLSubscription","CurrentUser","FacebookWebNotificationsSubscriptionWebGraphQLSubscription","SubscriptionsHandler","uuid"],(function a(b,c,d,e,f,g,h){__p&&__p();var i="WEB_DESKTOP",j=[],k=void 0,l=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function n(o){return"gqls/"+this._getSubscriptionCallName()+"/actor_id_"+o.actorID+"_environment_"+i},_getQueryID:function n(){return c("FacebookWebNotificationsSubscriptionWebGraphQLSubscription").getDocID()},_getQueryParameters:function n(o){return{input:JSON.stringify({client_subscription_id:c("uuid")(),environment:i})}},_getSubscriptionCallName:function n(){return"web_notification_receive_subscribe"}});function m(n){var o=n.web_notification_receive_subscribe.pinned_conversation;j.forEach(function(p){switch(p.event){case"NEW_PINNED_CONVERSATION":if(o!=null)p.callback(o);break}})}f.exports={subscribe:function n(o){__p&&__p();j.push(o);if(k==null){k=new(c("SubscriptionsHandler"))();k.addSubscriptions(l.subscribe({actorID:c("CurrentUser").getID()},m))}var p=false;return{remove:function q(){if(p===true)return;k!=null||h(0);p=true;j.splice(j.indexOf(o),1);if(j.length===0){k.release();k=null}}}}}}),null);