if (self.CavalryLogger) { CavalryLogger.start_js(["f4o++"]); }

__d("MNCommercePageSetting",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}}),null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","SubscriptionsHandler","TypingStates","createObjectFrom","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){this._input=i;this._ignoreKeys={};this._getValueFn=j}Object.assign(h.prototype,c("ArbiterMixin"),{_timeout:7e3,_currentState:c("TypingStates").INACTIVE,init:function i(){this.init=c("emptyFunction");this.reset();this._subscriptions=new(c("SubscriptionsHandler"))();this._subscriptions.addSubscriptions(c("Event").listen(this._input,"keyup",this._update.bind(this)),c("Run").onUnload(this._onunload.bind(this)))},reset:function i(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=c("TypingStates").INACTIVE},setIgnoreKeys:function i(j){this._ignoreKeys=c("createObjectFrom")(j)},destroy:function i(){this._subscriptions.release()},_onunload:function i(){if(this._currentState==c("TypingStates").TYPING)this._transition(c("TypingStates").QUITTING)},_update:function i(event){__p&&__p();var j=c("Event").getKeyCode(event),k=this._currentState;if(!this._ignoreKeys[j]){var l=this._getValueFn?this._getValueFn():c("Input").getValue(this._input);if(l.trim().length===0){if(k==c("TypingStates").TYPING)this._transition(c("TypingStates").INACTIVE)}else if(k==c("TypingStates").TYPING)this._recordKeystroke();else if(k==c("TypingStates").INACTIVE){this._transition(c("TypingStates").TYPING);this._recordKeystroke()}}},_transition:function i(j){this.reset();this._currentState=j;this.inform("change",j)},_recordKeystroke:function i(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout)},_checkTyping:function i(){var j=this._lastKeystrokeTime+this._timeout,k=Date.now();if(k>j)this._transition(c("TypingStates").INACTIVE);else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),j-k+10)}}});f.exports=h}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","Keys","MercuryServerRequestsConfig","TypingDetector","TypingStates","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="/ajax/messaging/typ.php";function i(j,k,l,m,n,o,p){__p&&__p();this.userID=j;this.input=k;this.source=l;this.threadID=n;this.pageID=p;this.remoteState=c("TypingStates").INACTIVE;this.notifyTimer=null;m=m||{};this.notifyDelay=m.notifyDelay||this.notifyDelay;this._typingDetector=new(c("TypingDetector"))(k,o);this._typingDetector.init(m);this._typingDetector.subscribe("change",this._stateChange.bind(this))}i.prototype.setUserAndThread=function(j,k){if(this.userID!==j||this.threadID!==k){this.resetState();this.userID=j;this.threadID=k}};i.prototype.setIgnoreEnter=function(j){var k=j?[c("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(k)};i.prototype.resetState=function(){this._notifyState(c("TypingStates").INACTIVE);this.remoteState=c("TypingStates").INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null};i.prototype.destroy=function(){this.resetState();this._typingDetector.destroy()};i.prototype._stateChange=function(j,k){if(k!=c("TypingStates").QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=c("setTimeoutAcrossTransitions")(c("shield")(this._notifyState,this,k),this.notifyDelay)}else this._notifyState(k,true)};i.prototype._notifyState=function(j,k){if(!this.userID&&!this.threadID||!c("ChatVisibility").isOnline()||j===this.remoteState||c("ifRequired")("ChannelConnection",function(l){return l.disconnected()},function(){return true}))return;this._sendRequest(j,this.userID,k)};i.prototype._sendRequest=function(j,k,l){this.remoteState=j;var m={typ:j,to:k,source:this.source,thread:this.threadID},n=this.pageID?c("ActorURI").create(h,this.pageID):h,o=new(c("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,k)).setErrorHandler(c("emptyFunction")).setData(m).setURI(n).setAllowCrossPageTransition(true).setOption("asynchronous_DEPRECATED",!l);if(c("MercuryServerRequestsConfig").msgrRegion)o.setRequestHeader("X-MSGR-Region",c("MercuryServerRequestsConfig").msgrRegion);o.send()};i.prototype._onTypResponse=function(j,k){var l=k.getPayload()||{};if(l.offline)c("AvailableList").set(j,c("AvailableListConstants").OFFLINE,"typing_response")};Object.assign(i.prototype,{notifyDelay:1e3});f.exports=i}),null);
__d("EmployeeLinkMatcher",["CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new RegExp("^[\\s.,:]"),i=new RegExp("(?:\\b)(([BDFTPSXJN]|(AIP))\\d{4,})(?:\\b)","im"),j=new RegExp("(?:\\b)(designpack://.+)(?:\\b)","im"),k=function k(n){if(!c("CurrentUser").isEmployee())return null;var o=i.exec(n)||j.exec(n);if(o===null)return null;return{lnk:o[1],idx:o.index+(h.exec(o[0])?1:0)}},l=function l(n){var o=c("CurrentUser").isEmployee()&&(i.exec(n)!==null||j.exec(n)!==null);return o},m={match:k,isMatch:l};f.exports=m}),null);
__d("EmployeeLinkRanges",["EmployeeLinkMatcher","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={PHABRICATOR_PREFIX:"https://phabricator.intern.facebook.com/",TASKS_PREFIX:"https://our.intern.facebook.com/intern/tasks/?t=",BUSINESS_PREFIX:"https://our.intern.facebook.com/intern/business/?q=",SEV_PREFIX:"https://our.intern.facebook.com/intern/sevmanager/view/s/",CHRONOS_PREFIX:"https://our.intern.facebook.com/intern/chronos/lucky/?query=",ADS_PARTNER_PREFIX:"https://our.intern.facebook.com/intern/ads/partner_projects/projects/",SRT_JOB_PREFIX:"https://our.intern.facebook.com/intern/bunny/?srt+",ANALYTICS_NOTEBOOKS_PREFIX:"https://our.intern.facebook.com/intern/bunny/?anp+",FBLEARNER_RUN_PREFIX:"https://our.intern.facebook.com/intern/fblearner/details/",get:function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c("EmployeeLinkMatcher").match(l);if(!m)return[];var n=m.lnk,o=m.idx,p=c("UnicodeUtils").strlen(l.substr(0,o));k+=p;var q="";if(n.substr(0,3).toLowerCase()==="aip")q=this.ADS_PARTNER_PREFIX+n.substr(3);else switch(n[0].toLowerCase()){case"d":if(n.indexOf("designpack://")===0)q=n;else q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case"p":q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case"t":q=this.TASKS_PREFIX+n.substr(1);break;case"b":q=this.BUSINESS_PREFIX+n.substr(1);break;case"s":q=this.SEV_PREFIX+n.substr(1);break;case"x":q=this.CHRONOS_PREFIX+n.substr(1);break;case"j":q=this.SRT_JOB_PREFIX+n.substr(1);break;case"n":q=this.ANALYTICS_NOTEBOOKS_PREFIX+n.substr(1);break;case"f":q=this.FBLEARNER_RUN_PREFIX+n.substr(1);break;default:return[]}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r))}};f.exports=h}),null);
__d("EventReminderDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("EventReminderActions",["EventReminderDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null}),i={Types:h,updateEventReminder:function j(k,event,l){c("EventReminderDispatcher").dispatch({type:i.Types.UPDATE_EVENT_REMINDER,threadID:k,event:event,participantsEventStatus:l})},deleteEventReminder:function j(k){c("EventReminderDispatcher").dispatch({type:i.Types.DELETE_EVENT_REMINDER,threadID:k})}};f.exports=i}),null);
__d("EventReminderMembersMap",["CurrentUser","EventReminderConstants","Map","MercuryIDs","MercuryParticipants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("EventReminderConstants").EventGuestStates,i=c("EventReminderConstants").GuestStates;function j(k){this.$EventReminderMembersMap1=k;this.$EventReminderMembersMap2=new(c("Map"))();this.$EventReminderMembersMap3=new(c("Map"))();this.$EventReminderMembersMap4=new(c("Map"))();this.$EventReminderMembersMap5=new(c("Map"))();this.$EventReminderMembersMap6=new(c("Map"))();this.$EventReminderMembersMap7=new(c("Map"))()}j.prototype.setAllMembers=function(k,l){__p&&__p();if(!k)return;this.$EventReminderMembersMap2.set(l,i.INVITED);var m=[],n=[],o=[],p=[];for(var q in k){m.push(c("MercuryIDs").getParticipantIDFromUserID(q));var r=k[q];if(q===c("CurrentUser").getID())this.$EventReminderMembersMap2.set(l,r);var s={fbid:q,guestState:r,imageSrc:""};if(r===i.GOING)n.push(s);else if(r===i.DECLINED)o.push(s);else p.push(s)}var t=n.concat(o,p);this.$EventReminderMembersMap3.set(l,t);this.$EventReminderMembersMap4.set(l,n);this.$EventReminderMembersMap7.set(l,false);this.$EventReminderMembersMap8(l,m,t)};j.prototype.setAllMembersOfAssociatedEvent=function(k,l){__p&&__p();if(!k)return;this.$EventReminderMembersMap2.set(l,h.INITIAL);var m=[],n=[],o=[],p=[];k.map(function(r){__p&&__p();m.push(c("MercuryIDs").getParticipantIDFromUserID(r.participant_id));var s=r.participant_id.toString(),t=r.event_status||h.INITIAL;if(s===c("CurrentUser").getID())this.$EventReminderMembersMap2.set(l,t);var u={fbid:s,guestState:t,imageSrc:""};if(t===h.GOING)n.push(u);else if(t===h.WATCHED)o.push(u);else p.push(u)},this);var q=n.concat(o,p);this.$EventReminderMembersMap3.set(l,q);this.$EventReminderMembersMap4.set(l,n);this.$EventReminderMembersMap5.set(l,o);this.$EventReminderMembersMap6.set(l,p);this.$EventReminderMembersMap7.set(l,false);this.$EventReminderMembersMap8(l,m,q)};j.prototype.clearMembers=function(k){this.$EventReminderMembersMap2["delete"](k);this.$EventReminderMembersMap3["delete"](k);this.$EventReminderMembersMap4["delete"](k);this.$EventReminderMembersMap5["delete"](k);this.$EventReminderMembersMap6["delete"](k)};j.prototype.getAllMembers=function(k){return this.$EventReminderMembersMap3.get(k)};j.prototype.getGoingMembers=function(k){return this.$EventReminderMembersMap4.get(k)};j.prototype.getInterestedMembers=function(k){return this.$EventReminderMembersMap5.get(k)};j.prototype.getSelfGuestState=function(k){if(!this.$EventReminderMembersMap2.has(k))return i.INVITED;return this.$EventReminderMembersMap2.get(k)};j.prototype.getProfileImagesLoaded=function(k){return!!this.$EventReminderMembersMap7.get(k)};j.prototype.$EventReminderMembersMap8=function(k,l,m){c("MercuryParticipants").getBigImageMulti(l,function(n){for(var o=0;o<m.length;o++)if(m[o].fbid)m[o].imageSrc=n[c("MercuryIDs").getParticipantIDFromUserID(m[o].fbid)];this.$EventReminderMembersMap7.set(k,true);this.$EventReminderMembersMap1.__emitChange()}.bind(this))};f.exports=j}),null);
__d("EventReminderStateStore",["EventReminderActions","EventReminderConstants","EventReminderDispatcher","EventReminderMembersMap","EventRemindersGating","FluxStore","Map"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("EventReminderConstants").EventPlanType,k=36e5;h=babelHelpers.inherits(l,c("FluxStore"));i=h&&h.prototype;function l(){i.constructor.call(this,c("EventReminderDispatcher"));this.$EventReminderStateStore1={};this.$EventReminderStateStore2=new(c("EventReminderMembersMap"))(this);this.$EventReminderStateStore3=new(c("Map"))()}l.prototype.getEvent=function(m){return this.$EventReminderStateStore1[m]};l.prototype.getEventMembers=function(m){return this.$EventReminderStateStore2.getAllMembers(m)};l.prototype.getSelfGuestState=function(m){return this.$EventReminderStateStore2.getSelfGuestState(m)};l.prototype.getNumOfGoingMembers=function(m){var n=this.$EventReminderStateStore2.getGoingMembers(m);return n?n.length:0};l.prototype.getNumOfInterestedMembers=function(m){var n=this.$EventReminderStateStore2.getInterestedMembers(m);return n?n.length:0};l.prototype.getProfileImagesLoaded=function(m){return this.$EventReminderStateStore2.getProfileImagesLoaded(m)};l.prototype.shouldShowCTA=function(m,n){var o=this.getEvent(m),p=Date.now(),q=this.$EventReminderStateStore3.get(m);if((!o||!o.exist)&&n>c("EventRemindersGating").eventPlanCTAThreashold&&(!q||p-q>k)&&c("EventRemindersGating").shouldShowCTA){this.$EventReminderStateStore3.set(m,p);return true}else return false};l.prototype.clearEventMembers=function(m){this.$EventReminderStateStore2.clearMembers(m)};l.prototype.getTransformedEvent=function(event){if(event.room_type==="EVENT"){var m=event.event_place&&event.event_place.name,n=event.event_place&&event.event_place.address&&event.event_place.address.single_line_full_address;return{allowRSVP:true,eventDate:event.start_timestamp,eventName:event.name,eventLocationName:m,eventLocationAddress:n,eventID:event.id.toString(),eventType:j.ASSOCIATED_EVENT,exists:true}}return{allowRSVP:!!event.track_rsvp,eventDate:event.event_time,eventName:event.title,eventLocationName:event.location_name,eventLocationAddress:event.location_address,eventID:event.oid.toString(),eventType:event.event_type,exists:true}};l.prototype.__onDispatch=function(m){__p&&__p();var n=c("EventReminderActions").Types,o=m.threadID;switch(m.type){case n.UPDATE_EVENT_REMINDER:var event=m.event;this.$EventReminderStateStore1[o]=this.getTransformedEvent(event);if(this.$EventReminderStateStore1[o].allowRSVP)if(event.room_type==="EVENT")this.$EventReminderStateStore2.setAllMembersOfAssociatedEvent(m.participantsEventStatus,o);else this.$EventReminderStateStore2.setAllMembers(event.event_members,o);break;case n.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[o].exists=false;this.clearEventMembers(o);break}this.__emitChange()};f.exports=new l()}),null);
__d("MercuryMessageRenderLocations",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({CHAT:"chat",MESSENGER:"messenger",PAGES:"pages"});f.exports=h}),null);
__d("MessengerFormattingUtils",["React","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p){return{offset:p[1].length,length:c("UnicodeUtils").strlen(p[2])+2,innerOffset:1,innerText:p[2]}}var i={pattern:/([\s_~\'\"(]|^)\*(\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s_~\'\"(]|^)\*(?:\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/,formatter:function p(q){return c("React").createElement("b",null,q)},getRangeInMatch:h,recursivelyFormat:true},j={pattern:/([\s*~\'\"(]|^)_(\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*~\'\"(]|^)_(?:\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/,formatter:function p(q){return c("React").createElement("i",null,q)},getRangeInMatch:h,recursivelyFormat:true},k={pattern:/([\s*_\'\"(]|^)~(\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_\'\"(]|^)~(?:\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/,formatter:function p(q){return c("React").createElement("s",null,q)},getRangeInMatch:h,recursivelyFormat:true},l={pattern:/([\s*_~\'\"(]|^)`(\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_~\'\"(]|^)`(?:\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/,formatter:function p(q){return c("React").createElement("code",null,q)},getRangeInMatch:h,recursivelyFormat:false},m=[i,j,k,l];function n(p){var q=arguments.length<=1||arguments[1]===undefined?m:arguments[1];for(var r=0;r<q.length;r++){var s=q[r].nonCapturingPattern;if(s.test(p))return true}return false}function o(p){__p&&__p();var q=arguments.length<=1||arguments[1]===undefined?m:arguments[1],r=[];for(var s=0;s<q.length;s++){var t=q[s];t.pattern.lastIndex=0;var u=void 0;while((u=t.pattern.exec(p))!=null){var v=t.getRangeInMatch(u),w=p.substr(0,u.index+v.offset),x=c("UnicodeUtils").strlen(w);r.push({offset:x,length:v.length,innerText:v.innerText,innerOffset:x+v.innerOffset,formatter:t.formatter,recursivelyFormat:t.recursivelyFormat})}}return r}f.exports={defaultFormatConfigs:m,hasMatch:n,getRanges:o,formatConfigs:{bold:i,italic:j,strikethrough:k,code:l}}}),null);
__d("MessengerMathUtils",["UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=2,i=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,j=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function k(p){return i.test(p)}function l(p){return p.substring(h,p.length-h)}function m(p){j.lastIndex=0;return j.test(p)}function n(p){var q=arguments.length<=1||arguments[1]===undefined?0:arguments[1],r=[];j.lastIndex=0;var s=void 0;while((s=j.exec(p))!==null){var t=p.substring(0,s.index),u=c("UnicodeUtils").strlen(t);r.push({offset:u,length:c("UnicodeUtils").strlen(s[0]),math:true})}return r}function o(p){__p&&__p();var q=p.length,r=0,s=0;for(var t=0;t<q;t++)if(p[t]==="\\")if(p.slice(t,t+6)==="\\begin"){r+=2;s=Math.max(s,r)}else if(p.slice(t,t+4)==="\\end")r-=2;else t++;else if(p[t]==="{"){r++;s=Math.max(s,r)}else if(p[t]==="}")r--;return s}f.exports={MATH_DELIMITER_LENGTH:h,isMathBlock:k,hasInlineMath:m,getInlineMathRanges:n,getMathBlockInner:l,getMaxBraceDepth:o}}),null);
__d("MessengerSupportedEmojiUtils",["cx","EmojiImageURL","EmojiLikeConstants","EmojiRenderer","EmoticonEmojiList","Image.react","MessengerSupportedEmoji","React","Utf16","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=65039,j="_fe0f",k=new RegExp("(\r\n|[ \r\n]|s)"),l={getSupportedEmojiKey:function m(n){__p&&__p();if(!n)return null;var o=null,p=this.parse(n);if(p.length===1&&p[0].length===n.length){var q=p[0].emoji.map(function(r){return c("Utf16").decode(r)});q[q.length-1]===i&&q.pop();o=q.map(function(r){return r.toString(16)}).join("_")}return this.isSupportedEmojiKey(o)?o:null},isSupportedEmoji:function m(n){return!!this.getSupportedEmojiKey(n)},isSupportedEmojiKey:function m(n){return!!c("MessengerSupportedEmoji").emoji[n]},getSupportedEmojiCodesArray:function m(n){__p&&__p();if(!n)return null;var o=this.parse(n);if(o.length===1&&o[0].length===n.length){var p=o[0].emoji.map(function(r){return c("Utf16").decode(r)});p[p.length-1]===i&&p.pop();var q=p.map(function(r){return r.toString(16)}).join("_");if(c("MessengerSupportedEmoji").emoji[q])return p}return null},getEmojiKeyFromCodes:function m(n){return n.map(function(o){return o.toString(16)}).join("_")},getClassSizeMap:function m(){var n,o=c("EmojiLikeConstants").size;return n={},n[o.XSMALL]="_2560",n[o.SMALL]="_1ifu",n[o.MEDIUM]="_19_r",n[o.LARGE]="_19_s",n},getEmojiMatchObj:function m(n){__p&&__p();var o=this.parse(n,1);if(o.length!==1)return null;var p=o[0].emoji,q=p.map(function(s){return c("Utf16").decode(s)});if(q[q.length-1]===i)q.pop();var r=q.map(function(s){return s.toString(16)}).join("_");return{emoji_key:r,emoji_str:p.join(""),is_supported:this.isSupportedEmojiKey(r),offset:o[0].offset,length:o[0].length}},getNewEmojiData:function m(n,o){__p&&__p();if(!n)return null;var p=this.getSupportedEmojiKey(n);if(!p)return null;var q=this.getClassSizeMap();o=this.transferSize(o);if(!c("EmojiLikeConstants").sizeMap[o])o=c("EmojiLikeConstants").size.XSMALL;var r=c("joinClasses")(q[o],"_1ift"),s=c("EmojiImageURL").getMessengerURL(p,c("EmojiLikeConstants").sizeMap[o]);return{emoji:c("React").createElement(c("Image.react"),{className:r,src:s}),emoji_key:p,url:s}},getEmojiOnlyContents:function m(n){__p&&__p();var o=n||"",p=[];while(o.length>0&&o.trim().length>0){var q=k.exec(o),r="";while(q&&q.length&&q.index===0){r+=q[0];o=o.replace(k,"");q=k.exec(o)}if(r.length>0)p.push({text:r});var s=c("EmoticonEmojiList").noncapturingRegexp.exec(o);if(s&&s.index===0){var t=c("EmoticonEmojiList").names[s[1]],u=c("EmoticonEmojiList").emote2emojis[t];p.push({emojiKey:u,text:s[1]});o=o.replace(s[1],"")}else{s=this.getEmojiMatchObj(o);if(s&&s.is_supported){p.push({emojiKey:s.emoji_key,text:s.emoji_str});o=o.replace(s.emoji_str,"")}else return null}}return p},getUrl:function m(n,o){if(n.endsWith(j))n=n.replace(j,"");if(!c("MessengerSupportedEmoji").emoji[n])return null;o=this.transferSize(o);return c("EmojiImageURL").getMessengerURL(n,c("EmojiLikeConstants").sizeMap[o])},containsEmoji:function m(n){return this.parse(n,1).length===1},parse:function m(n,o){return c("EmojiRenderer").parse(n,o)},transferSize:function m(n){return c("EmojiLikeConstants").sizeMapTransfer[n]||n}};f.exports=l}),null);
__d("MessengerTextWithEntities.react",["Link.react","React","BaseTextWithEntities.react","MessengerTextWithEmoticons.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;function j(l){return l.replace(/<3\b|&hearts;/g,"\u2665")}h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessengerTextWithEntities1=function(q){if(this.props.renderEmoticons||this.props.renderEmoji)return c("React").createElement(c("MessengerTextWithEmoticons.react"),{text:q,customSize:this.props.customSize,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji});else return j(q)}.bind(this),this.$MessengerTextWithEntities2=function(q,r){if(this.props.interpolator)return this.props.interpolator(q,r);else return c("React").createElement(c("Link.react"),{href:r.entity},q)}.bind(this),m}k.prototype.render=function(){return c("React").createElement(c("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{aggregatedRanges:this.props.aggregatedRanges,imageRanges:this.props.imageRanges,metaRanges:this.props.metaRanges,rangeRenderer:this.$MessengerTextWithEntities2,ranges:this.props.ranges,text:this.props.text,textRenderer:this.$MessengerTextWithEntities1}))};f.exports=k}),null);
__d("P2PTriggersUtils",["P2PGKValues"],(function a(b,c,d,e,f,g){var h=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,i={canSeeTriggers:function j(k){if(!c("P2PGKValues").P2PEnabled)return false;return true},getMatches:function j(k){return k.match(h)}};f.exports=i}),null);
__d("RedditLinkMatcher",[],(function a(b,c,d,e,f,g){"use strict";var h=new RegExp("(^|\\s)(\\/[ru]\\/\\w{1,21})(?:\\b)","i"),i=function i(l){var m=h.exec(l);if(m===null)return null;return{lnk:m[2],idx:m.index+m[1].length}},j=function j(l){return h.exec(l)!==null},k={match:i,isMatch:j};f.exports=k}),null);
__d("RedditLinkRanges",["RedditLinkMatcher","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={REDDIT_PREFIX:"https://reddit.com",get:function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c("RedditLinkMatcher").match(l);if(!m)return[];var n=m.lnk,o=m.idx,p=c("UnicodeUtils").strlen(l.substr(0,o));k+=p;var q="";switch(n[1].toLowerCase()){case"r":q=this.REDDIT_PREFIX+n;break;case"u":q=this.REDDIT_PREFIX+n;break;default:return[]}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r))}};f.exports=h}),null);
__d("TextWithEntitiesMetadataType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:0,CONCEPT:1,INTENT:2})}),null);
__d("messengerContactActionsRe",[],(function a(b,c,d,e,f,g){"use strict";var h={ADD_OWNER:"ADD_OWNER",FREE_CALL:"FREE_CALL",MESSAGE:"MESSAGE",PROFILE:"PROFILE",REMOVE:"REMOVE",REMOVE_OWNER:"REMOVE_OWNER",SELECT:"SELECT"};g.actions=h}),null);
__d("shouldAddMRefParam",["isFacebookURI"],(function a(b,c,d,e,f,g){var h=function h(i){if(!c("isFacebookURI")(i)||i.getFragment())return false;if(/^\/events\//.test(i.getPath()))return true;return false};f.exports=h}),null);
__d("MercuryMessageBody.react",["cx","fbt","BootloadedComponent.react","DateConsts","EmojiRenderer","EmoticonsList","EmoticonEmojiList","EmployeeLinkMatcher","EmployeeLinkRanges","EventReminderStateStore","EventRemindersGating","RedditLinkMatcher","RedditLinkRanges","JSResource","Link.react","MercuryIDs","MercuryMessageRenderLocations","messengerContactActionsRe","MessengerMathUtils","MessengerFormattingUtils","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","P2PTriggersUtils","React","TextWithEntities.react","TextWithEntitiesMetadataType","UnicodeUtils","URI","URLMatcher","emptyFunction","getURLRanges","gkx","ifRequired","requireWeak","shouldAddMRefParam"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerContactActionsRe").actions,m=c("React").PropTypes,n=function p(){n=c("emptyFunction");c("ifRequired")("ChatAppActions",function(q){q.setInitialDisplayDone()})};j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;function o(p){__p&&__p();k.constructor.call(this,p);this.interpolator=function(q,r){__p&&__p();var s,t=this;if(r.className)return c("React").createElement("span",{className:r.className},q);if(r.math)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,inline:true,stripDelimiters:true,className:"_1e4d _1e4e"});if(r.id){var s=function(){__p&&__p();var y={};if(!t.props.isFromViewer&&t.props.threadCustomColor)y.color=t.props.threadCustomColor;var z=t.props.onContactSelect,A=t.props.threadID?c("MercuryIDs").getThreadFBIDFromThreadID(t.props.threadID)===r.id:false,B=c("React").createElement(c("Link.react"),{className:"_ih-",href:A?"#":r.url,style:y,onClick:z&&!A?function(C){this.$MercuryMessageBody3(z,r,C)}.bind(t):c("emptyFunction")},q);if(c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")&&!A&&z){if(typeof q==="string")r.contactName=q&&q.replace("@","");B=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerAvatarActions.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:B,avatar:B,contact:r,showSendMessageItem:true,onAction:t.props.onContactSelect})}return{v:B}}();if(typeof s==="object")return s.v}if(r.formatter)if(r.recursivelyFormat){var u=this.renderBody(r.innerText,true,r.innerOffset);return r.formatter(u)}else return r.formatter(r.innerText);if(r.entity&&r.entity.url){var v=new(c("URI"))(r.entity.url.replace(/#+$/,""));if(c("shouldAddMRefParam")(v))v.addQueryData({__mref:"mb"});var w=v.toString();if(c("URI").isValidURI(w))return c("React").createElement(c("Link.react"),{href:{url:w,shimhash:r.entity.shimhash},s:r.entity.s,target:"_blank"},q);else return q}if(!r.entity){var x=typeof r.type==="number"?r.type:c("TextWithEntitiesMetadataType")[r.type];switch(x){case c("TextWithEntitiesMetadataType").NONE:return c("React").createElement("span",{className:"_2y9",title:JSON.stringify(r.data)},q);case c("TextWithEntitiesMetadataType").CONCEPT:return this.renderConceptMetadata(q,r.data);case c("TextWithEntitiesMetadataType").INTENT:return this.renderIntentMetadata(q,r.data);default:return q}}return q}.bind(this);this.state=this.parseMessageBody(p)}o.prototype.componentWillReceiveProps=function(p){if(this.props.body!==p.body||this.props.metaRanges!==p.metaRanges||this.props.ranges!==p.ranges)this.setState(this.parseMessageBody(p))};o.prototype.parseMessageBody=function(p){__p&&__p();var q=(p.body||"").replace(/\s+$/,""),r=this.$MercuryMessageBody1(p.metaRanges||[]),s={normalizedBody:q,isEncrypted:false,isMathBlock:false,isRichText:false,ranges:[],filteredMetaRanges:r};if(q.length===0)return s;if(q.startsWith("?OTR")){s.isEncrypted=true;return s}if(c("MessengerMathUtils").isMathBlock(q)){s.isMathBlock=true;return s}var t=p.ranges,u=p.metaRanges,v=t&&t.length||u&&u.length||c("EmoticonsList").noncapturingRegexp.test(q)||c("EmojiRenderer").containsEmoji(q)||c("URLMatcher").match(q)||c("EmployeeLinkMatcher").isMatch(q)||c("RedditLinkMatcher").isMatch(q)||this.$MercuryMessageBody2(q,p)||c("MessengerSupportedEmojiUtils").containsEmoji(q)||c("EmoticonEmojiList").noncapturingRegexp.test(q)||c("MessengerFormattingUtils").hasMatch(q)||c("MessengerMathUtils").hasInlineMath(q);if(!v)return s;s.isRichText=true;if(t&&t.length===1&&t[0].className==="__in")t=c("getURLRanges")(q).concat(t);t=t||[];t=t.concat(c("getURLRanges")(q),c("EmployeeLinkRanges").get(q));if(c("gkx")("AT68T0-RBZ3ruYC2iw6PwwKUATJNpftRrkhHfnHZxEdm_s8ILK529f2x1yRSuxO4JhNEQa2oesAXWdtnF6SM8ow_"))t=t.concat(c("RedditLinkRanges").get(q));t=t.concat(c("MessengerFormattingUtils").getRanges(q));t=t.concat(c("MessengerMathUtils").getInlineMathRanges(q));s.ranges=t.filter(function(w){return w!=undefined});return s};o.prototype.hasFormatting=function(){return this.state.isRichText||this.state.isMathBlock||this.state.isEncrypted};o.prototype.$MercuryMessageBody3=function(p,q,r){c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")?r.preventDefault():p(l.MESSAGE,q,r)};o.prototype.$MercuryMessageBody4=function(p){if(this.props.isFromViewer)return"\\color{#fff}{"+c("MessengerMathUtils").getMathBlockInner(p)+"}";else return c("MessengerMathUtils").getMathBlockInner(p)};o.prototype.renderConceptMetadata=function(p,q){if(!q)return p;if(q.intent_name||q.name)return this.renderIntentMetadata(p,q);return p};o.prototype.renderIntentMetadata=function(p,q){__p&&__p();if(!q)return p;var r=q.intent_name||q.name;switch(r){case"request_time":return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ServicesVerticalRequestTimeTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});case"timestamp":if(this.$MercuryMessageBody5(q.value)&&c("EventRemindersGating").shouldShowTriggerWords)if(this.props.renderLocation===c("MercuryMessageRenderLocations").CHAT)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});else if(this.props.renderLocation===c("MercuryMessageRenderLocations").MESSENGER)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});return p;default:return p}};o.prototype.renderIntentCTA=function(p){__p&&__p();if(p){var q=p.intent_name||p.name;switch(q){case"request_time":return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ServicesRequestTimeIntentCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,isFromViewer:this.props.isFromViewer,threadID:this.props.threadID});case"create_event":c("requireWeak")("EventReminderActionsLogger",function(t){t.logTriggerOnTriggerCTA()});var r=this.props.threadID,s=r&&this.$MercuryMessageBody5(p.timestamp)&&c("EventReminderStateStore").shouldShowCTA(r,p.confidence);if(!s)return null;if(this.props.renderLocation===c("MercuryMessageRenderLocations").CHAT)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,threadID:r});else if(this.props.renderLocation===c("MercuryMessageRenderLocations").MESSENGER)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,threadID:r})}}return null};o.prototype.renderCTAs=function(p){var q=null;if(p.length>0){var r=p[0]||{},s=typeof r.type==="number"?r.type:c("TextWithEntitiesMetadataType")[r.type];switch(s){case c("TextWithEntitiesMetadataType").CONCEPT:case c("TextWithEntitiesMetadataType").INTENT:q=this.renderIntentCTA(r.data);break}}return q};o.prototype.renderBody=function(p){__p&&__p();var q=arguments.length<=1||arguments[1]===undefined?false:arguments[1],r=arguments.length<=2||arguments[2]===undefined?0:arguments[2],s=this.state,t=s.isRichText,u=s.ranges,v=s.filteredMetaRanges,w=c("UnicodeUtils").strlen(p);if(!t)return c("React").createElement("span",{className:this.props.className},p);if(q){u=u.filter(function(B){return B.offset>=r&&B.offset+B.length<=r+w}).map(function(B){return babelHelpers["extends"]({},B,{offset:B.offset-r})});v=v.filter(function(B){return B.offset>=r&&B.offset+B.length<=r+w}).map(function(B){return babelHelpers["extends"]({},B,{offset:B.offset-r})})}var x={className:this.props.className,interpolator:this.interpolator,metaRanges:v,ranges:u,renderEmoji:true,renderEmoticons:true,text:p};if(this.$MercuryMessageBody2(p)){var y=c("React").createElement(c("TextWithEntities.react"),x);return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:y,bootloadLoader:c("JSResource")("TextWithEntitiesAndP2P.react").__setRef("MercuryMessageBody.react")},x,{getMessengerEmote:this.$MercuryMessageBody6,isSupportedEmoji:this.$MercuryMessageBody7,threadID:this.props.threadID}))}var z=c("React").createElement(c("MessengerTextWithEntities.react"),x);if(q)return z;var A=this.renderCTAs(this.props.metaRanges||[]);if(!A)return z;return c("React").createElement("span",null,z,A)};o.prototype.render=function(){__p&&__p();var p=this.state,q=p.normalizedBody,r=p.isEncrypted,s=p.isMathBlock;if(q.length===0)return null;n();if(this.props.plainText)return c("React").createElement("span",null,q);else if(r)return c("React").createElement("span",{className:"_89h"},i._("[encrypted message]"));else if(s)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("div",null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,stripDelimiters:true,className:"_1e4d"});else return this.renderBody(q)};o.prototype.$MercuryMessageBody7=function(p){return c("MessengerSupportedEmojiUtils").isSupportedEmojiKey(p)};o.prototype.$MercuryMessageBody6=function(p){var q=c("EmoticonEmojiList").emote2emojis[p];return c("MessengerSupportedEmojiUtils").isSupportedEmojiKey(q)?q:null};o.prototype.$MercuryMessageBody5=function(p){var q=new Date(p*c("DateConsts").MS_PER_SEC),r=new Date(Date.now()+5*c("DateConsts").MS_PER_MIN),s=new Date(new Date().setFullYear(new Date().getFullYear()+1));return q>r&&q<s};o.prototype.$MercuryMessageBody1=function(p){var q=p.filter(function(r){return r.data&&(r.data.intent_name==="create_event"||r.data.name==="create_event")});return q.length!==0?q:p};o.prototype.$MercuryMessageBody2=function(p){var q=arguments.length<=1||arguments[1]===undefined?this.props:arguments[1];return!!(q.threadID&&c("P2PTriggersUtils").canSeeTriggers(q.threadID)&&c("P2PTriggersUtils").getMatches(p))};o.propTypes={body:m.string,customLike:m.object,isFromViewer:m.bool,metaRanges:m.array,ranges:m.array,threadCustomColor:m.string,threadID:m.string,onContactSelect:m.func,renderLocation:m.oneOf([c("MercuryMessageRenderLocations").CHAT,c("MercuryMessageRenderLocations").MESSENGER,c("MercuryMessageRenderLocations").PAGES])};f.exports=o}),null);
__d("MercuryMessageDeliveryState",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});f.exports=h}),null);
__d("MercuryMessageInfo",["MercuryActionStatus","MercuryMessageDeliveryState","MercuryViewer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={isOutbound:function i(j){return j.author===c("MercuryViewer").getID()},isInbound:function i(j){return!h.isOutbound(j)},isSending:function i(j){return j.status===c("MercuryActionStatus").UNSENT||j.status===c("MercuryActionStatus").UNCONFIRMED||j.status===c("MercuryActionStatus").UNABLE_TO_CONFIRM||j.status===c("MercuryActionStatus").RESENDING},isSent:function i(j){return j.status===undefined||j.status===c("MercuryActionStatus").SUCCESS},hasError:function i(j){return j.status===c("MercuryActionStatus").FAILED_UNKNOWN_REASON||j.status===c("MercuryActionStatus").UNABLE_TO_CONFIRM||j.status===c("MercuryActionStatus").ERROR},getDeliveryState:function i(j,k){__p&&__p();if(this.hasError(j))return c("MercuryMessageDeliveryState").ERROR;if(this.isSending(j))return c("MercuryMessageDeliveryState").SENDING;if(this.isSent(j)){if(j.timestamp<=k)return c("MercuryMessageDeliveryState").DELIVERED;return c("MercuryMessageDeliveryState").SENT}return c("MercuryMessageDeliveryState").UNKNOWN}};f.exports=h}),null);
__d("MercuryErrorInfo",["fbt","MercuryErrorType","MercuryMessageInfo"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={getMessage:function j(k){__p&&__p();var l="";if(i.isConnectionError(k)){l=h._("This message didn't send.");if(i.isTransient(k))l=h._("{message} Check your internet connection and click to try again.",[h.param("message",l)])}else{if(k&&k.description)l=k.description;else l=h._("This message failed to send.");if(i.isTransient(k))l=h._("{message} Click to send again.",[h.param("message",l)])}return l},isConnectionError:function j(k){if(k&&k.type==c("MercuryErrorType").TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false},isTransient:function j(k){return k&&k.is_transient},isPermanent:function j(k){return k?!this.isTransient(k):false},hasErrorStatus:function j(k){return c("MercuryMessageInfo").hasError(k)}};f.exports=i}),null);
__d("MercuryMessageError.react",["cx","CurrentUser","ImmutableObject","Link.react","MercuryErrorInfo","MercuryMessageActions","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.messageResend=function(r){r.preventDefault();var s=this.props.message,t=s.error_data;if(c("MercuryErrorInfo").isTransient(t))c("MercuryMessageActions").getForFBID(this.props.authorFBID).resend(this.props.message)}.bind(this),n}l.prototype.render=function(){var m=this.props.message,n=m.error_data;return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},this.props,{href:"#",className:c("joinClasses")(this.props.className,this.$MercuryMessageError1(m)),tabIndex:c("MercuryErrorInfo").isTransient(n)?0:null,onClick:this.messageResend}),c("React").createElement("i",{className:"_2fs1"}),c("React").createElement("span",{className:"_61ag",dangerouslySetInnerHTML:{__html:this.$MercuryMessageError2(m)}}))};l.prototype.$MercuryMessageError1=function(m){if(c("MercuryErrorInfo").hasErrorStatus(m))return"_2fs2 _2fs3"+(c("MercuryErrorInfo").isTransient(m.error_data)?" _2fs4":"")+(c("MercuryErrorInfo").isPermanent(m.error_data)?" _2fs5":"");else return"_2fs6 _2fs2"};l.prototype.$MercuryMessageError2=function(m){var n="",o=m.error_data;if(c("MercuryErrorInfo").hasErrorStatus(m)){var p=c("MercuryErrorInfo").getMessage(o);if(p)n=p.toString()}if(typeof n==="object"&&n.__html)n=n.__html;return n};l.propTypes={authorFBID:k.string,message:k.instanceOf(c("ImmutableObject")).isRequired};l.defaultProps={authorFBID:c("CurrentUser").getID()};f.exports=l}),null);
__d("EventPlanExperiment",["EventRemindersGating","QE2Logger"],(function a(b,c,d,e,f,g){"use strict";var h="event_plan_entry_point_nux",i={shouldShowEntryPointNuxWithExposure:function j(){c("QE2Logger").logExposureForUser(h);return c("EventRemindersGating").shouldShowEntryPointNux}};f.exports=i}),null);
__d("EventReminderActionsLogger",["EventsActionsLogger"],(function a(b,c,d,e,f,g){f.exports={logTriggerOnTriggerCTA:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.TRIGGER,target:c("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logViewOnChatTabSheet:function h(i){c("EventsActionsLogger").log(i,{type:c("EventsActionsLogger").Type.VIEW,target:c("EventsActionsLogger").Target.REMINDER_BANNER,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_BANNER}]}})},logViewOnTriggerWord:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.VIEW,target:c("EventsActionsLogger").Target.TRIGGER_WORD,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logViewOnTriggerCTA:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.VIEW,target:c("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logClickOnChatTabSheet:function h(i){c("EventsActionsLogger").log(i,{type:c("EventsActionsLogger").Type.CLICK,target:c("EventsActionsLogger").Target.REMINDER_BANNER,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_BANNER}]}})},logClickOnEntryPoint:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.CLICK,target:c("EventsActionsLogger").Target.REMINDER_ENTRYPOINT,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.MESSENGER_COMPOSER}]}})},logClickOnTriggerWord:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.CLICK,target:c("EventsActionsLogger").Target.TRIGGER_WORD,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})},logClickOnTriggerCTA:function h(){c("EventsActionsLogger").log(null,{type:c("EventsActionsLogger").Type.CLICK,target:c("EventsActionsLogger").Target.TRIGGER_CTA,acontext:{action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.REMINDER_WORD}]}})}}}),null);
__d("XEventReminderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/eventreminder/",{event_reminder_id:{type:"Int",required:true}})}),null);
__d("EventReminderRequestHelper",["AsyncRequest","EventReminderActions","XEventReminderController"],(function a(b,c,d,e,f,g){"use strict";var h={fetchEventReminder:function i(j,k,l){var m=c("XEventReminderController").getURIBuilder().setInt("event_reminder_id",k);new(c("AsyncRequest"))(m.getURI()).setHandler(function(n){if(n.payload){c("EventReminderActions").updateEventReminder(j,n.payload);l()}}).send()}};f.exports=h}),null);
__d("MessengerBotsWebTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$MessengerBotsWebTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$MessengerBotsWebTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerBotsWebTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerBotsWebTypedLogger1=babelHelpers["extends"]({},this.$MessengerBotsWebTypedLogger1,j);return this};h.prototype.setCount=function(j){this.$MessengerBotsWebTypedLogger1.count=j;return this};h.prototype.setEvent=function(j){this.$MessengerBotsWebTypedLogger1.event=j;return this};h.prototype.setIndex=function(j){this.$MessengerBotsWebTypedLogger1.index=j;return this};h.prototype.setPageID=function(j){this.$MessengerBotsWebTypedLogger1.page_id=j;return this};h.prototype.setPayload=function(j){this.$MessengerBotsWebTypedLogger1.payload=j;return this};h.prototype.setQrContentType=function(j){this.$MessengerBotsWebTypedLogger1.qr_content_type=j;return this};h.prototype.setTitle=function(j){this.$MessengerBotsWebTypedLogger1.title=j;return this};h.prototype.setTitles=function(j){this.$MessengerBotsWebTypedLogger1.titles=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setType=function(j){this.$MessengerBotsWebTypedLogger1.type=j;return this};h.prototype.setURL=function(j){this.$MessengerBotsWebTypedLogger1.url=j;return this};h.prototype.setVC=function(j){this.$MessengerBotsWebTypedLogger1.vc=j;return this};var i={count:true,event:true,index:true,page_id:true,payload:true,qr_content_type:true,title:true,titles:true,type:true,url:true,vc:true};f.exports=h}),null);
__d("MessengerMessageActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerMessageActionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerMessageActionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1,j);return this};h.prototype.setAction=function(j){this.$MessengerMessageActionsTypedLogger1.action=j;return this};h.prototype.setAppID=function(j){this.$MessengerMessageActionsTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$MessengerMessageActionsTypedLogger1.appversion=j;return this};h.prototype.setClienttime=function(j){this.$MessengerMessageActionsTypedLogger1.clienttime=j;return this};h.prototype.setContainermodule=function(j){this.$MessengerMessageActionsTypedLogger1.containermodule=j;return this};h.prototype.setCountry=function(j){this.$MessengerMessageActionsTypedLogger1.country=j;return this};h.prototype.setEntryPoint=function(j){this.$MessengerMessageActionsTypedLogger1.entry_point=j;return this};h.prototype.setErrorText=function(j){this.$MessengerMessageActionsTypedLogger1.error_text=j;return this};h.prototype.setGroupSize=function(j){this.$MessengerMessageActionsTypedLogger1.group_size=j;return this};h.prototype.setMessageType=function(j){this.$MessengerMessageActionsTypedLogger1.message_type=j;return this};h.prototype.setMid=function(j){this.$MessengerMessageActionsTypedLogger1.mid=j;return this};h.prototype.setName=function(j){this.$MessengerMessageActionsTypedLogger1.name=j;return this};h.prototype.setOfflineThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.offline_threadid=j;return this};h.prototype.setPreviousReaction=function(j){this.$MessengerMessageActionsTypedLogger1.previous_reaction=j;return this};h.prototype.setReaction=function(j){this.$MessengerMessageActionsTypedLogger1.reaction=j;return this};h.prototype.setRecipientID=function(j){this.$MessengerMessageActionsTypedLogger1.recipient_id=j;return this};h.prototype.setThreadType=function(j){this.$MessengerMessageActionsTypedLogger1.thread_type=j;return this};h.prototype.setThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.threadid=j;return this};h.prototype.setVC=function(j){this.$MessengerMessageActionsTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$MessengerMessageActionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={action:true,appid:true,appversion:true,clienttime:true,containermodule:true,country:true,entry_point:true,error_text:true,group_size:true,message_type:true,mid:true,name:true,offline_threadid:true,previous_reaction:true,reaction:true,recipient_id:true,thread_type:true,threadid:true,vc:true};f.exports=h}),null);
__d("MessengerWebViewReactionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerWebViewReactionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerWebViewReactionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerWebViewReactionsTypedLogger1,j);return this};h.prototype.setEmojiGroup=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group=j;return this};h.prototype.setEmojiGroupCount=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group_count=j;return this};h.prototype.setEvent=function(j){this.$MessengerWebViewReactionsTypedLogger1.event=j;return this};h.prototype.setMid=function(j){this.$MessengerWebViewReactionsTypedLogger1.mid=j;return this};h.prototype.setSenderID=function(j){this.$MessengerWebViewReactionsTypedLogger1.sender_id=j;return this};h.prototype.setVC=function(j){this.$MessengerWebViewReactionsTypedLogger1.vc=j;return this};var i={emoji_group:true,emoji_group_count:true,event:true,mid:true,sender_id:true,vc:true};f.exports=h}),null);
__d("StickersTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$StickersTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$StickersTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$StickersTypedLogger1={};return this};h.prototype.updateData=function(j){this.$StickersTypedLogger1=babelHelpers["extends"]({},this.$StickersTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$StickersTypedLogger1.event=j;return this};h.prototype.setNumsearchresults=function(j){this.$StickersTypedLogger1.numsearchresults=j;return this};h.prototype.setPackid=function(j){this.$StickersTypedLogger1.packid=j;return this};h.prototype.setPackids=function(j){this.$StickersTypedLogger1.packids=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setSearchtoken=function(j){this.$StickersTypedLogger1.searchtoken=j;return this};h.prototype.setStickerid=function(j){this.$StickersTypedLogger1.stickerid=j;return this};h.prototype.setTagid=function(j){this.$StickersTypedLogger1.tagid=j;return this};h.prototype.setTriggeredword=function(j){this.$StickersTypedLogger1.triggeredword=j;return this};h.prototype.setTriggerused=function(j){this.$StickersTypedLogger1.triggerused=j;return this};var i={event:true,numsearchresults:true,packid:true,packids:true,searchtoken:true,stickerid:true,tagid:true,triggeredword:true,triggerused:true};f.exports=h}),null);
__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessagesViewer",["AsyncRequest","DOM","MessagesViewerSetID","PhotoStore","React","ReactDOM","emptyFunction","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h={renderSpotlight:function j(k,l,m,n){__p&&__p();var o=k.setID;if(!o)o=c("MessagesViewerSetID").MESSAGES;i(c("React").createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c("PhotoStore").hasBeenCreated(o)&&k.endpoint){var p=new(c("AsyncRequest"))(k.endpoint);if(l)p.setRelativeTo(l);p.send()}},renderVideo:function j(k){i(k)}};function i(j){var k=c("ge")("messages_viewer");if(!k){k=c("DOM").create("div",{id:"messages_viewer"});document.body.appendChild(k)}c("ReactDOM").render(j,k,function(){this.subscribeOnce("close",function(){c("ReactDOM").unmountComponentAtNode(k)})})}f.exports=h}),null);
__d("MercuryAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";var h={renderVideo:function i(j){c("Bootloader").loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(k,l){c("MessagesViewer").renderVideo(c("React").createElement(k,babelHelpers["extends"]({},j,{forwardDialogComponent:l})))},"MercuryAttachmentViewer")},bootstrapWithConfig:function i(j,k){c("Bootloader").loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(l,m){c("MessagesViewer").renderSpotlight(j,k,l,m)},"MercuryAttachmentViewer")},preload:function i(){c("Run").onAfterLoad(function(){c("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],c("emptyFunction"),"MercuryAttachmentViewer")})}};f.exports=h}),null);
__d("ChatAnimatedGifs",["URI"],(function a(b,c,d,e,f,g){__p&&__p();var h={shouldHideBody:function i(j){__p&&__p();if(!j.has_attachment)return false;for(var k=0;k<j.attachments.length;k++){var l=j.attachments[k];if(l.preview_url){var m=h.getRawUrlFromSafeUrl(l.preview_url);if(j.body==m)return true}}return false},getRawUrlFromSafeUrl:function i(j){return new(c("URI"))(j).getQueryData().url}};f.exports=h}),null);
__d("EmojiOnlyMessage.react",["cx","EmojiImageURL","EmojiLikeConstants","Image.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m="_1ift _1ifu",n=0,o=this.props.contents.map(function(p){n++;if(p.emojiKey){var q=c("EmojiImageURL").getMessengerURL(p.emojiKey,c("EmojiLikeConstants").sizeMap.dp32);return c("React").createElement(c("Image.react"),{alt:p.text,className:m,key:n,src:q})}else return c("React").createElement("span",{key:n},p.text)});return c("React").createElement("div",{tabIndex:"0"},o)};function l(){i.apply(this,arguments)}l.propTypes={contents:k.arrayOf(k.shape({emojiKey:k.string,text:k.string.isRequired})).isRequired};f.exports=l}),null);
__d("MessagingGiftWrap.react",["cx","MessengerEnvironment","React","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap()}.bind(this),n}l.prototype.render=function(){var m=c("MessengerEnvironment").messengerui;return c("React").createElement("div",{className:"_4p0m"+(this.state.unwrapped?" _4p0o":"")+(m?" _mxz":"")+(m?" _4br2":"")+(!m?" _3_om":"")+(this.props.isSticker?" _52vq":""),onClick:this.$MessagingGiftWrap1,role:"presentation"},c("React").createElement("div",{className:"_4p0r"}),c("React").createElement("div",{className:"_4p0s _4p0t"}),c("React").createElement("div",{className:"_4p0s _4p0u"}))};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c("emptyFunction")};f.exports=l}),null);
__d("messengerCustomColorUtils",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j=j||{};j.backgroundColor=i;return j}f.exports={customBubbleStyle:h}}),null);
__d("ChatBubble.react",["cx","DOMDimensions","EmojiOnlyMessage.react","MercuryMessageBody.react","MercuryMessageRenderLocations","MessagingGiftWrap.react","MessengerMathUtils","MessengerSupportedEmojiUtils","React","ReactDOM","joinClasses","messengerCustomColorUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=2,k=c("React").createClass({displayName:"ChatBubble",_boxWidth:0,propTypes:{insideDecorators:i.arrayOf(i.object),attachments:i.node,body:i.string,className:i.string,customColor:i.string,customLike:i.object,isEmojiLike:i.bool,isFromViewer:i.bool,isGiftWrapped:i.bool,maxWidth:i.number.isRequired,message:i.object,metaRanges:i.array,onUnwrap:i.func,ranges:i.array,threadCustomColor:i.string,threadID:i.string},getInitialState:function l(){return{emojis:undefined,bubbleWidth:null}},componentDidMount:function l(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var m=this.props.body||"",n=c("MessengerSupportedEmojiUtils").getEmojiOnlyContents(m);if(n&&n.length)this.setState({emojis:n})}this._restyleBubble(this.props)},componentDidUpdate:function l(m){if(m.maxWidth!==this.props.maxWidth||m.body!==this.props.body||!m.attachments&&this.props.attachments)this._restyleBubble(m)},render:function l(){__p&&__p();var m=this.props,n=m.attachments,o=m.body,p=o===undefined?"":o,q=m.className,r=m.insideDecorators,s=m.maxWidth,t=babelHelpers.objectWithoutProperties(m,["attachments","body","className","insideDecorators","maxWidth"]),u=Object.assign({},t);delete u.customColor;delete u.customLike;delete u.isEmojiLike;delete u.isFromViewer;delete u.message;delete u.metaRanges;delete u.ranges;delete u.threadCustomColor;delete u.threadID;return c("React").createElement("div",babelHelpers["extends"]({},u,{className:c("joinClasses")("_5w1r"+(!this.state.emojis?" _3_om":"")+(!!this.state.emojis?" _31xx":""),q),ref:"bubble",style:{maxWidth:s,width:this.state.emojis?null:this.state.bubbleWidth,wordWrap:p.length>=15?"break-word":"inherit"}}),c("React").createElement("div",{className:"_4gx_",ref:"inner"},this._renderContent(),n),r,this.props.isGiftWrapped?c("React").createElement(c("MessagingGiftWrap.react"),{onUnwrap:this.props.onUnwrap}):null)},_renderContent:function l(){__p&&__p();if(!this.props.body||this.props.isEmojiLike)return null;var m={},n=null;if(this.state.emojis)n=c("React").createElement(c("EmojiOnlyMessage.react"),{contents:this.state.emojis});else{n=c("React").createElement(c("MercuryMessageBody.react"),{body:this.props.body,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,renderLocation:c("MercuryMessageRenderLocations").CHAT});if(this.props.customColor)m=c("messengerCustomColorUtils").customBubbleStyle(this.props.customColor,m)}return c("React").createElement("div",{className:"_d97"+(!!this.state.emojis?" _31xy":""),ref:"contentWrapper",style:m},c("React").createElement("span",{className:"_5yl5",ref:"content"},n))},_restyleBubble:function l(m){__p&&__p();if(this.props.attachments||this.props.body!=null&&c("MessengerMathUtils").isMathBlock(this.props.body.trim())){this.setState({bubbleWidth:null});return}var n=c("ReactDOM").findDOMNode(this.refs.bubble);if(m.maxWidth!==this.props.maxWidth||c("DOMDimensions").getElementDimensions(n).width>this.props.maxWidth){var o=this.props.maxWidth;this.setState({bubbleWidth:o},this._shrinkBubble);return}this._shrinkBubble()},_shrinkBubble:function l(){var m=c("ReactDOM").findDOMNode(this.refs.bubble),n=c("DOMDimensions").getElementDimensions(m).width,o=c("ReactDOM").findDOMNode(this.refs.content),p=o?c("DOMDimensions").getElementDimensions(o).width+c("DOMDimensions").measureElementBox(c("ReactDOM").findDOMNode(this.refs.contentWrapper),"width",true,false,false):0,q=p+j;if(p>0&&q<this.props.maxWidth&&n-q-this.getBoxWidth()>0)this.setState({bubbleWidth:q})},contentWraps:function l(){var m=c("ReactDOM").findDOMNode(this.refs.content);if(!m)return false;var n=m.getClientRects(),o=c("DOMDimensions").getElementDimensions(m).height;return n&&n.length>1&&n[0].height<o},getBoxWidth:function l(){if(!this._boxWidth)this._boxWidth=c("DOMDimensions").measureElementBox(c("ReactDOM").findDOMNode(this.refs.bubble),"width",true,true,false);return this._boxWidth}});f.exports=k}),null);
__d("ChatCodePasteUtils",["cx","BanzaiODS","ChatBubble.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=/`{3,}/;function j(l){return!!(l&&i.test(l)&&l.split("\n").length>1)}function k(l,m,n,o,p){__p&&__p();var q=l.split(i),r=[];for(var s=0;s<q.length;s+=2){var t=q[s].trim();if(t)r.push(c("React").createElement("div",{key:s,className:"_5wde _n4o"},c("React").createElement(c("ChatBubble.react"),{body:t,customColor:p||undefined,className:"clearfix _5wdf",maxWidth:m,ranges:n||undefined,threadID:o||undefined})));if(s+1<q.length&&q[s+1]){var u=q[s+1].split("\n"),v=u[0].replace(/[^a-zA-Z]+/g,""),w=u.slice(1).join("\n");c("BanzaiODS").bumpEntityKey("chat_code_paste","render_bubble");r.push(c("React").createElement("div",{key:s+1,className:"_5wde _n4o"},c("React").createElement("div",{ref:"bubble",className:"_3_om _4yng _5wdf"},c("React").createElement("div",{ref:"syntaxTarget"+s,className:"language-"+v},w))))}}return r}f.exports={containsCodeBlock:j,getCodeAndMessageBubbles:k}}),null);
__d("ChatTabBlinking",["cx","CSS","setIntervalAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=600,j="highlightTitle",k={_blinkMap:{},_interval:null,_isHighlighting:false,blinkTab:function l(m,n){if(!this._blinkMap[m])this._blinkMap[m]={view:n,elem:n.getTabElem()};this.checkInterval()},unblinkTab:function l(m){if(this._blinkMap[m]){var n=this._blinkMap[m].elem;if(n)c("CSS").removeClass(n,j);delete this._blinkMap[m]}this.checkInterval()},checkInterval:function l(){var m=Object.keys(this._blinkMap).length;if(m>0){if(!this._interval)this._interval=c("setIntervalAcrossTransitions")(this._toggleBlinkHighlight.bind(this),i)}else if(this._interval){clearInterval(this._interval);this._interval=null}},_toggleBlinkHighlight:function l(){this._isHighlighting=!this._isHighlighting;for(var m in this._blinkMap)if(Object.prototype.hasOwnProperty.call(this._blinkMap,m)){var n=this._blinkMap[m],o=n.elem,p=n.view;if(o&&o.parentNode&&!p.isFocused()&&!p.isHovered())c("CSS").conditionClass(o,j,this._isHighlighting);else this.unblinkTab(m)}}};f.exports=k}),null);
__d("ChatCloseButton.react",["cx","fbt","Link.react","React","TrackingNodes","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.CLOSE_BUTTON),o=i._("Press Esc to close"),p=i._("Close tab"),q="_4vu4";return c("React").createElement(c("Link.react"),{"aria-label":this.props.active?o:p,className:c("joinClasses")(this.props.className,"close","button",q),"data-ft":n,"data-hover":"tooltip","data-tooltip-content":this.props.active?o:p,"data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown})};function m(){j.apply(this,arguments)}m.propTypes={onClick:l.func,onKeyUp:l.func,onMouseDown:l.func,active:l.bool};m.defaultProps={active:false};f.exports=m}),null);
__d("ChatCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={collapsed:true},n}l.prototype.render=function(){var m=i._("See Latest Activity"),n=i._("See Less Activity");return c("React").createElement("div",{className:"_5w0o"},c("React").createElement(c("Link.react"),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed})}.bind(this)},this.state.collapsed?m:n),!this.state.collapsed?c("React").createElement("div",null,c("React").createElement("div",{className:"_2zsu"}),this.props.children,c("React").createElement("div",{className:"_2zsu"})):null)};f.exports=l}),null);
__d("BootloadOnInteraction.react",["BootloadOnRender.react","React"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this,k);this.$BootloadOnInteraction1=function(){this.setState({hadUserInteraction:true})}.bind(this);this.state={hadUserInteraction:false}}j.prototype.render=function(){"use strict";if(!this.state.hadUserInteraction)return c("React").cloneElement(this.props.placeholder,{onFocus:this.$BootloadOnInteraction1,onMouseOver:this.$BootloadOnInteraction1,onClick:this.$BootloadOnInteraction1});var k=this.props,l=k.loader,m=k.component,n=k.placeholder;return c("React").createElement(c("BootloadOnRender.react"),{placeholder:n,loader:l,component:m})};f.exports=j}),null);
__d("ChatComposerFlyoutButtonBootLoader.react",["BootloadOnInteraction.react","JSResource","JSResourceReference","LazyComponent.react","Link.react","React"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){return c("React").createElement("li",{className:i.interactionClassName},c("React").createElement(c("BootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),babelHelpers["extends"]({},i,{className:i.iconClassName})),loader:c("JSResource")("MessengerComposerFlyoutButton.react").__setRef("ChatComposerFlyoutButtonBootLoader.react"),placeholder:c("React").createElement(c("Link.react"),{label:"flyout button",className:i.iconClassName})}))};f.exports=h}),null);
__d("ChatDateBreak.react",["cx","React","formatDate","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){"use strict";return this.props.date.getTime()!==m.date.getTime()};l.prototype.render=function(){"use strict";var m=c("formatDate")(this.props.date,{today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return c("React").createElement("time",{className:c("joinClasses")(this.props.className,"_5w-5")},c("React").createElement("span",{className:"_5w-6"},m))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={date:k.instanceOf(Date).isRequired};f.exports=l}),null);
__d("MessageBorderType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLOWERS:"flowers"})}),null);
__d("MessageCustomizationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BORDER:"border"})}),null);
__d("MessagingFlowerCornerArrangements",["invariant","ix","Random","randomShuffle"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=Object.freeze({TOP_LEFT:"topLeft",BOTTOM_RIGHT:"bottomRight"}),k=Object.freeze({PINK:"pink",PURPLE:"purple",YELLOW:"yellow"}),l=Object.freeze({ROUND:"round",POINTY:"pointy"}),m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c("Random").random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c("Random").random()>=.5?l.ROUND:l.POINTY];c("randomShuffle")(t);c("randomShuffle")(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]))}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i("86995");case k.PURPLE:return i("86997");case k.YELLOW:default:return i("86999")}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i("86996");case k.PURPLE:return i("86998");case k.YELLOW:default:return i("87000")}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r)};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop()};n.prototype.flower=function(r){var s=c("Random").random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y})};n.prototype.leaf=function(r){return this.$ElementProducer9(i("86994"),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y})};n.prototype.$ElementProducer9=function(r,s){__p&&__p();var t=s.pivot*100+"%",u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,A=void 0,B=void 0,C=void 0;if(this.$ElementProducer2){var D=u;u=v;v=D;y=-y}if(this.$ElementProducer1===j.BOTTOM_RIGHT){C=this.$ElementProducer4+u+"px";A=this.$ElementProducer4+v+"px";w=100+w;y+=180}else if(this.$ElementProducer1===j.TOP_LEFT){B=this.$ElementProducer4+u+"px";z=this.$ElementProducer4+v+"px"}else h(0);var E=[];if(w!==0)E.push("translate("+w+"%, "+w+"%)");E.push("scale("+x+")");if(y!==0)E.push("rotate("+y+"deg)");return{style:{bottom:A,left:B,position:"absolute",right:C,top:z,transform:E.join(" "),transformOrigin:t+" "+t},image:r}};function o(r){return[r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})]}function p(r){return[r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})]}function q(r,s){var t=new n(r,s);return c("Random").random()<.5?o(t):p(t)}f.exports={createFlowers:q,corners:j}}),null);
__d("MessagingFlowerBorder.react",["Image.react","MessagingFlowerCornerArrangements","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.TOP_LEFT,this.props.offset).concat(c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.BOTTOM_RIGHT,this.props.offset))}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m}k.prototype.render=function(){return c("React").createElement("div",null,this.state.elements.map(function(l,m){return c("React").createElement(c("Image.react"),{key:m,style:l.style,src:l.image})}))};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1491398900900362"};j.getQueryID=function(){"use strict";return"254517288326467"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("ReactLayer").createClass(c("ReactAbstractContextualDialog").createSpec({addedBehaviors:[c("ContextualLayerAutoFlipHorizontal"),c("ContextualLayerHideOnScrollOut"),c("ContextualLayerUpdateOnScroll"),c("LayerHideOnEscape"),c("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:false,theme:{wrapperClassName:"_4owc"}}));f.exports=i}),null);
__d("EmojiFormat",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l){return l.split("_").map(function(m){return parseInt(m,16)})}function i(l){return l.map(function(m){return m.toString(16)}).join("_")}function j(l){var m="";for(var n=0;n<l.length;n++)m+=String.fromCodePoint(l[n]);return m}function k(l){var m=this.codeStringToCodeArray(l);return this.codeArrayToUnicode(m)}f.exports={codeArrayToCodeString:i,codeArrayToUnicode:j,codeStringToCodeArray:h,codeStringToUnicode:k}}),null);
__d("MessengerReactionsUtil",["EmojiFormat"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]],i={};h.forEach(function(j,k){i[c("EmojiFormat").codeArrayToUnicode(j)]=k+1});f.exports={sortFunction:function j(k,l){if(!i[k]&&!i[l])return 0;else if(!i[k])return 1;else if(!i[l])return-1;return i[k]-i[l]},defaultReactions:h.map(c("EmojiFormat").codeArrayToUnicode)}}),null);
__d("getThreadTypeNameFromThreadType",["MessagingThreadType"],(function a(b,c,d,e,f,g){"use strict";function h(i){for(var j in c("MessagingThreadType"))if(c("MessagingThreadType")[j]===i)return j;return""}f.exports=h}),null);
__d("MessengerReactionsMenu.react",["cx","Promise","Bootloader","CurrentUser","CSS","DOM","DOMContainer.react","MercuryIDs","MercuryMessages","MercuryThreads","MessengerMessageActionsTypedLogger","MessengerReactionsContextualDialog.react","MessengerTextWithEmoticons.react","MessengerReactionsWebConfig","MessengerReactionsUtil","MessageReactionMutationWebGraphQLMutation","React","XAsyncRequest","createCancelableFunction","getThreadTypeNameFromThreadType","gkx","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={animations:{},reactions:c("MessengerReactionsUtil").defaultReactions.slice()},this.$MessengerReactionsMenu7=function(q){!q&&this.props.onHide()}.bind(this),m}k.prototype.componentDidMount=function(){if(c("gkx")("AT7dFvDvstgBLQPTzIVQ-K_BRNJQyn38FQ8LsrhoWHNPhYTHpIiylBssyGU3E_0HnxERJO-whPUbuICbRNRkf3gv")){this.$MessengerReactionsMenu1=c("createCancelableFunction")(function(l){return this.setState({animations:l})}.bind(this));this.loadAnimations().done(this.$MessengerReactionsMenu1)}this.$MessengerReactionsMenu2()};k.prototype.componentWillReceiveProps=function(l){this.$MessengerReactionsMenu2()};k.prototype.componentWillUnmount=function(){this.$MessengerReactionsMenu1&&this.$MessengerReactionsMenu1.cancel()};k.prototype.$MessengerReactionsMenu2=function(){if(c("gkx")("AT6A1OO2lJlnHHdkzHOPkllgq2YBSZ42wJAnMnfeaJEnCNUkgcLE__VIZKrcnnkybvVMYEfu3rwvCBYOLMeSgn0B")){var l,m=c("MessengerReactionsUtil").defaultReactions.slice(),n=c("MercuryThreads").get().getThreadMetaNow(this.props.message.thread_id),o=(l=n)!=null?(l=l.custom_like_icon)!=null?l.emoji:l:l;if(o!=null&&!m.includes(o))m.push(o);this.setState({reactions:m})}};k.prototype.$MessengerReactionsMenu3=function(l,m){var n=c("DOM").create("span");l.loadAnimation({wrapper:n,animationData:m,renderer:"svg",loop:true,autoplay:true});return n};k.prototype.$MessengerReactionsMenu4=function(){__p&&__p();return new(c("Promise"))(function(l){c("Bootloader").loadModules(["bodymovin","MessengerReactionEmojiLove","MessengerReactionEmojiHaha","MessengerReactionEmojiWow","MessengerReactionEmojiSad","MessengerReactionEmojiAngry","MessengerReactionEmojiThumbsUp","MessengerReactionEmojiThumbsDown"],function(m){var n=c("MessengerReactionsUtil").defaultReactions,o={};for(var p=arguments.length,q=Array(p>1?p-1:0),r=1;r<p;r++)q[r-1]=arguments[r];for(var s=0;s<n.length;s++){var t=n[s];o[t]=this.$MessengerReactionsMenu3(m,q[s])}l(o)}.bind(this),"MessengerReactionsMenu.react")}.bind(this))};k.prototype.$MessengerReactionsMenu5=function(){return new(c("Promise"))(function(l){return c("Bootloader").loadModules(["Keyframes"],function(m){return l(m)},"MessengerReactionsMenu.react")})};k.prototype.$MessengerReactionsMenu6=function(){return this.$MessengerReactionsMenu5().then(function(l){return c("Promise").all(["love","haha","wow","sad","angry","thumbsup","thumbsdown"].map(function(m){return l.requestRenderer(c("MessengerReactionsWebConfig").paths[m],{projectName:"messaging_reactions",assetName:m})}))}).then(function(l){return l.map(function(m){var n=m.setWidth(45).setHeight(45).repeatForever().play().redrawIfNeeded().getElement();c("CSS").addClass(n,"_37pj");return n}).reduce(function(m,n,o){m[c("MessengerReactionsUtil").defaultReactions[o]]=n;return m},{})})};k.prototype.loadAnimations=function(){var l=Date.now(),m=c("gkx")("AT73IznQIkY02C9rV8vL4R3YkbSkACVgXraE8X-uFkb_OT2PRV3iP4-_YrhXstfluJNPnsiHG095PXy59ZeAc60gRt0fnbAP-74qBQSunTkZDQ")?this.$MessengerReactionsMenu6():this.$MessengerReactionsMenu4();m.done(function(n){c("Bootloader").loadModules(["MessengerRestReactionTypedLogger"],function(o){new o().setLoadedTime(Date.now()-l).log()},"MessengerReactionsMenu.react")});return m};k.prototype.render=function(){var l=c("CurrentUser").getID(),m=this.props.message.reactions&&this.props.message.reactions[l];return c("React").createElement(c("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,shown:true,onBlur:this.props.onHide,onToggle:this.$MessengerReactionsMenu7},c("React").createElement("div",{role:"select",className:"_1z8q _fy2"},this.state.reactions.map(function(n){return c("React").createElement("span",{className:"_1z8r"+(n===m?" _5-2b":""),id:n,key:n,onClick:function(){return this.$MessengerReactionsMenu8(n)}.bind(this),role:"option",tabIndex:"0"},!this.state.animations[n]?c("React").createElement(c("MessengerTextWithEmoticons.react"),{customSize:true,renderEmoticons:true,renderEmoji:true,text:n}):c("React").createElement(c("DOMContainer.react"),null,this.state.animations[n]))}.bind(this))))};k.prototype.$MessengerReactionsMenu8=function(l){var m=this.props,n=m.message,o=m.entryPoint,p=c("CurrentUser").getID(),q=n.reactions&&n.reactions[p],r=c("MercuryMessages").get().getServerMessageID(n.message_id),s=c("MessageReactionMutationWebGraphQLMutation").getURI({action:l===q?"REMOVE_REACTION":"ADD_REACTION",message_id:r,actor_id:p,reaction:l}),t=function t(u){var v=n.other_user_fbid||n.thread_fbid,w=c("MercuryThreads").get().getThreadMetaNow(n.thread_id),x=w&&w.participants?w.participants.length:0,y=c("getThreadTypeNameFromThreadType")(w&&w.thread_type),z=n.attachments[0],A=new(c("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(n.offline_threading_id).setMid(r).setRecipientID(c("MercuryIDs").getUserIDFromParticipantID(n.author)).setEntryPoint(o).setReaction(l).setPreviousReaction(q).setGroupSize(x).setThreadType(y).setThreadid(v);if(u.errorSummary)A=A.setErrorText(u.errorSummary.toString());if(z)A=A.setMessageType(z.attach_type);A.log()};new(c("XAsyncRequest"))(s).setMethod("POST").setHandler(t).send();this.props.onHide()};f.exports=k}),null);
__d("MessengerReactionsPrompt.react",["cx","ix","Image.react","MessengerReactionsMenu.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={open:false},this.$MessengerReactionsPrompt1=function(){this.setState({open:true},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this))}.bind(this),this.$MessengerReactionsPrompt2=function(){this.setState({open:false},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this))}.bind(this),n}l.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;return c("React").createElement("span",{className:(!this.props.isQuickAdd?"_5zvq":"")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?null:this.$MessengerReactionsPrompt1,ref:"button"},c("React").createElement(c("Image.react"),{src:this.props.isQuickAdd?i("278123"):this.state.open?i("277597"):i("277596")}),this.renderMenu())};l.prototype.renderMenu=function(){if(!this.state.open)return null;return c("React").createElement(c("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",message:this.props.message,onHide:this.$MessengerReactionsPrompt2,refProp:function(){return this.refs.button}.bind(this)})};f.exports=l}),null);
__d("MessengerReactions.react",["cx","fbt","Bootloader","CurrentUser","MercuryIDs","MercuryParticipants","MessengerEnvironment","MessengerReactionsUtil","MessengerReactionsPrompt.react","MessengerTextWithEmoticons.react","MessengerWebViewReactionsTypedLogger","MercuryConfig","TooltipData","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="ALL",n=c("CurrentUser").getID(),o=3,p=9;j=babelHelpers.inherits(q,c("React").Component);k=j&&j.prototype;function q(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.$MessengerReactions2=function(){var w=c("MessengerEnvironment").messengerui,x=this.props,y=x.isFromViewer,z=x.message,A=x.participants,B=z.reactions;new(c("MessengerWebViewReactionsTypedLogger"))().setEvent("open_details").setMid(z.message_id).setSenderID(z.author).setEmojiGroup(m).setEmojiGroupCount(Object.values(B).length).log();if(w)c("Bootloader").loadModules(["messengerDialogsRe","messengerReactionsDialogReact"],function(C,D){var E=D.jsComponent;C.showDialog(function(){return c("React").createElement(E,{isFromViewer:y,participants:A,message:z})})},"MessengerReactions.react");else c("Bootloader").loadModules(["ChatReactionsDialog"],function(C){C.show(z,A,y)},"MessengerReactions.react")}.bind(this),s}q.prototype.render=function(){__p&&__p();var r=this.props,s=r.message,t=r.participants,u=r.renderQuickAdd,v=r.hovered,w=s.reactions,x=s.attachments;if(!v&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE&&x&&x.length===1&&x[0].attach_type==="share"&&w&&Object.keys(w).length===0)return null;if((!w||!t)&&!u)return null;var y={},z=0,A=false;Object.entries(w||{}).forEach(function(F){var G=F[0],H=F[1];if(typeof H==="string"){if(G===n)A=true;if(!y[H])y[H]=0;y[H]++;z++}});var B=Object.keys(y).sort(c("MessengerReactionsUtil").sortFunction).slice(0,o).map(function(F,G,w){return c("React").createElement("span",{className:"_4kf5",style:{zIndex:w.length-G,marginLeft:G===0?0:"-4px"},key:F},c("React").createElement(c("MessengerTextWithEmoticons.react"),{customSize:true,renderEmoticons:true,renderEmoji:true,text:F}))}),C=z>0?c("React").createElement("span",{className:"_4kf5 _4kf6"+(A?" _fy2":"")},z):null,D=u&&!A?c("React").createElement("div",{className:"_aou _aov"},c("React").createElement("span",{className:"_aow"},c("React").createElement(c("MessengerReactionsPrompt.react"),{message:s,messageIsSelected:true,isQuickAdd:true}))):null,E=c("TooltipData").propsFor(this.$MessengerReactions1());return c("React").createElement("div",babelHelpers["extends"]({},E,{className:"_4kf7 preview"}),c("React").createElement(c("ShimButton.react"),{className:"_aou",onClick:this.$MessengerReactions2},B,C),D)};q.prototype.$MessengerReactions1=function(){__p&&__p();var r=this.props.message.reactions,s=this.props.participants;if(!r||!s)return"";var t=Object.keys(r),u=t.reduce(function(u,y){if(u.length>=p)return u;var z=c("MercuryIDs").getParticipantIDFromUserID(y),A=s.get(z)||c("MercuryParticipants").getNow(z),B=A&&A.name;if(B)u.push(B);return u},[]),v=u.length,w=u.join("\n");if(t.length>v){var x=i._("and {count} other(s)",[i.param("count",t.length-v)]);w+="\n"+x.toString()}return w};q.propTypes={isFromViewer:l.bool.isRequired,message:l.object.isRequired,participants:l.object,renderQuickAdd:l.bool,hovered:l.bool};f.exports=q}),null);
__d("MessengerDecorator",["cssVar","cx","BootloadedComponent.react","CurrentUser","JSResource","MercuryAttachment","MercuryConfig","MercuryMessageActions","MercuryMessageCustomizations","MercuryTagHelper","MessageBorderType","MessageCustomizationType","MessagingFlowerBorder.react","MessagingGiftWrap.react","MessagingGiftWrapConstants","MessengerEnvironment","MessengerReactions.react","React","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=function j(s){var t=s.attachments&&s.attachments.length===1&&s.attachments[0];return!!t},k=function k(s){var t=s.attachments&&s.attachments.length===1&&s.attachments[0];if(!t)return false;if(c("MercuryAttachment").isPhotoGroupAttachment(t))return true;if(c("MercuryAttachment").isFileAttachment(t))if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK&&t.message_file_fbid)return true;return false},l=function l(s){__p&&__p();var t=[],u=[];s.attachments.forEach(function(v){if(v.metadata&&v.metadata.fbid){t.push(v.metadata.fbid.toString());u.push(v.attach_type.toString())}if(c("MercuryAttachment").isFileAttachment(v)&&v.message_file_fbid)if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK){t.push(v.message_file_fbid);u.push(v.attach_type)}});return{ids:t,types:u}},m=[{name:"GiftWrap",check:function s(t){var u=function u(w){return c("MercuryTagHelper").get(w,c("MessagingGiftWrapConstants").TAG_PREFIX)===c("MessagingGiftWrapConstants").VALENTINES_GIFT},v=function v(w){return!!c("MercuryTagHelper").get(w,c("MessagingGiftWrapConstants").UNWRAPPED_TAG)};return!!(t.tags&&u(t.tags)&&!v(t.tags))},render:function s(t,u){return c("React").createElement(c("MessagingGiftWrap.react"),{key:"giftwrap",onUnwrap:function v(){var w="2500ms",x=parseInt(w.substring(0,w.length-2),10);setTimeout(function(){return c("MercuryMessageActions").get().unwrap(t)},x)}})},getAdditionalClassNames:function s(){return null}},{name:"FlowerBorder",check:function s(t){return c("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&c("MercuryMessageCustomizations").getCustomizationValue(t,c("MessageCustomizationType").BORDER)===c("MessageBorderType").FLOWERS},render:function s(t,u){if(c("MessengerEnvironment").messengerui)return c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10,key:"giftwrap:"+t.message_id});return c("React").createElement(c("MessagingFlowerBorder.react"),{key:"giftwrap:"+t.message_id})},getAdditionalClassNames:function s(){if(!c("MessengerEnvironment").messengerui)return"_337n";return null}},{name:"Reactions",check:function s(t,u){var v=!!(t.reactions&&Object.keys(t.reactions).length>0),w=!!(!u&&(k(t)||j(t)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE));return v||w},render:function s(t,u,v,w){var x=k(t)||j(t)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE;return c("React").createElement(c("MessengerReactions.react"),{isFromViewer:u,key:t.message_id+"-reactions",message:t,renderQuickAdd:x&&!u,hovered:w,participants:v&&v.participants})},getAdditionalClassNames:function s(){return"_5z-5"}}],n=[],o=[],p=[{name:"MontageReply",check:function s(t){if(!c("MercuryConfig").MontageThreadViewer)return false;var u=t.montage_reply_data&&t.montage_reply_data.message_id;return!!u},render:function s(t,u){var v=t.montage_reply_data&&t.montage_reply_data.message_id,w=t.montage_reply_data&&t.montage_reply_data.reply_action;return c("React").createElement(c("BootloadedComponent.react"),{key:"montagereply:"+t.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:u,messageID:v,replyAction:w,replyAuthorID:t.author,threadID:t.thread_id})},getAdditionalClassNames:function s(){return null}}],q=[{name:"ForwardImages",check:function s(t){return k(t)},render:function s(t,u){var v=l(t),w=v.ids,x=v.types;return c("React").createElement(c("BootloadedComponent.react"),{key:"forwardimages:"+t.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("MessengerEnvironment").messengerui?c("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):c("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:w,attachmentTypes:x,isFromViewer:u})},getAdditionalClassNames:function s(){return"_ylc"}},{name:"ReactionPrompt",check:function s(t){return!k(t)},render:function s(t,u,v){return c("React").createElement(c("BootloadedComponent.react"),{key:"reactionprompt:"+t.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:t,messageIsSelected:v&&v.messageIsSelected&&(!c("MercuryConfig").MessengerForwardButtonForSharedLinksQE||c("MercuryConfig").MessengerForwardButtonForSharedLinksQE&&!j(t)),onShowMenu:v&&v.onShowMenu})},getAdditionalClassNames:function s(){return null}},{name:"MessageActions",check:function s(t){return c("MessengerEnvironment").messengerui},render:function s(t,u,v){var w=k(t)||j(t)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE;return c("React").createElement(c("BootloadedComponent.react"),{key:"messageactions:"+t.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:t,isActive:v&&v.messageIsSelected,onShowMenu:v&&v.onShowMenu,includeReactions:w,isShowingOriginal:v&&v.isShowingOriginal,hasFormatting:v&&v.hasFormatting,onToggleOriginal:v&&v.handleToggleOriginal})},getAdditionalClassNames:function s(){return null}}],r={getBeforeDecorators:function s(){return p},getAfterDecorators:function s(){return m},getInnerDecorators:function s(){return q},getAfterExternalDecorators:function s(){return n},getInsideDecorators:function s(){return o}};f.exports=r}),null);
__d("MessengerInnerDecorators.react",["cx","Locale","MessengerDecorator","React","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={shown:false},this.$MessengerInnerDecorators1=function(q){this.setState({shown:q})}.bind(this),m}k.prototype.render=function(){var l=c("MessengerDecorator").getInnerDecorators().map(function(m){if(m.check(this.props.message))return m.render(this.props.message,this.props.isFromViewer,babelHelpers["extends"]({},this.props.messageProps,{messageIsSelected:this.props.hovered||this.state.shown,onShowMenu:this.$MessengerInnerDecorators1}));return null}.bind(this)).filter(Boolean);return c("React").createElement("span",{className:"_40fu"+(c("gkx")("AT70rONwKRIflAfK7-b4vyJ1_mxpZCDSr6xln8L8WEV8pNQI_XsW4Dd8Eel-gRLLo1OcnJGbyGR6AUa0wFCxwPsr")&&c("Locale").isRTL()?" _64wc":"")},c("React").createElement("span",{className:"_2u_d"},l))};f.exports=k}),null);
__d("MessengerVideoAutoplayActions",["MessengerFluxReduceDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h="messenger_video",i=c("keyMirror")({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null}),j={Types:i,Namespace:h,onScroll:function k(l,m,n,o){c("MessengerFluxReduceDispatcher").dispatch({type:i.SCROLL,namespace:h,threadID:l,messageIDs:m,messageRectMap:n,viewportRect:o})},updateStore:function k(l,m){c("MessengerFluxReduceDispatcher").dispatch({type:i.UPDATE,namespace:h,threadID:l,messageIDs:m})},deleteThread:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:i.DESTROY,namespace:h,threadID:l})},deleteAllThreads:function k(){c("MessengerFluxReduceDispatcher").dispatch({type:i.DESTROY_ALL,namespace:h})}};f.exports=j}),null);
__d("MessengerVideoAutoplayStore",["FluxReduceStore","immutable","MessengerVideoAutoplayActions","MessengerFluxReduceDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("MessengerVideoAutoplayActions").Types;h=babelHelpers.inherits(m,c("immutable").Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return c("immutable").Map()};n.prototype.reduce=function(o,p){__p&&__p();if(p.namespace!==c("MessengerVideoAutoplayActions").Namespace)return o;switch(p.type){case l.SCROLL:if(p.messageIDs)o=this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);return this.$MessengerVideoAutoplayStore2(o,p.threadID,p.messageRectMap,p.viewportRect);case l.UPDATE:return this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);case l.DESTROY:return this.$MessengerVideoAutoplayStore3(o,p.threadID);case l.DESTROY_ALL:return o.clear()}return o};n.prototype.$MessengerVideoAutoplayStore1=function(o,p,q){if(!q)return o["delete"](p);return o.set(p,new m({currentVideoMessageID:null,lastVideoMessageID:q.first(),messageIDs:q,videoVisibilityMap:null}))};n.prototype.$MessengerVideoAutoplayStore3=function(o,p){return o["delete"](p)};n.prototype.$MessengerVideoAutoplayStore4=function(o,p,q,r,s){var t=null,u=q.map(function(v){if(t)return[v,false];else{var w=this.$MessengerVideoAutoplayStore5(v,r,s);if(w)t=v;return[v,w]}}.bind(this)).fromEntrySeq().toOrderedMap();return o.mergeIn([p],{currentVideoMessageID:t,videoVisibilityMap:u})};n.prototype.$MessengerVideoAutoplayStore2=function(o,p,q,r){__p&&__p();var s=o.getIn([p,"messageIDs"]);if(!s||!q||!r)return o;if(!o.getIn([p,"currentVideoMessageID"]))return this.$MessengerVideoAutoplayStore4(o,p,s,q,r);else{var t=o.getIn([p,"videoVisibilityMap"]),u=o.getIn([p,"lastVideoMessageID"]),v=o.getIn([p,"currentVideoMessageID"]);if(this.$MessengerVideoAutoplayStore5(u,q,r)){if(t&&t.first())return o}else if(this.$MessengerVideoAutoplayStore5(v,q,r))return o;o=o.setIn([p,"currentVideoMessageID"],null);return this.$MessengerVideoAutoplayStore4(o,p,s,q,r)}};n.prototype.$MessengerVideoAutoplayStore6=function(o,p){if(!o)return false;return o.top>p.top&&o.bottom<p.bottom};n.prototype.$MessengerVideoAutoplayStore5=function(o,p,q){var r=p.get(o);return this.$MessengerVideoAutoplayStore6(r,q)};n.prototype.getVideoVisibilityMap=function(o){return this.getState().getIn([o,"videoVisibilityMap"])};n.prototype.getMessageIDs=function(o){return this.getState().getIn([o,"messageIDs"])};n.prototype.isVisible=function(o,p){return!!this.getState().getIn([o,"videoVisibilityMap",p])};function n(){j.apply(this,arguments)}f.exports=new n(c("MessengerFluxReduceDispatcher"))}),null);
__d("convertMIGColorToFIGColor",["cssVar"],(function a(b,c,d,e,f,g,h){"use strict";var i={"#0077e5":"#4080ff","#44bec7":"#54C7EC","#ffc300":"#f5c33b","#fa3c4c":"#F35369","#d696bb":"#d696bb","#6699cc":"#7596c8","#13cf13":"#42b72a","#ff7e29":"#F7923B","#e68585":"#e68585","#7646ff":"#8C72CB","#20cef5":"#54C7EC","#67b868":"#A3CE71","#d4a88c":"#cfa588","#ff5ca1":"#EC7EBD","#a695c7":"#AF9CDA"};function j(k){return k&&i[k]||k||""}f.exports=j}),null);
__d("ChatMessage.react",["cx","fbt","BootloadedComponent.react","ChatAnimatedGifs","ChatBubble.react","EmojiLikeUtils","FluxContainer","MercuryTimestamp","CSS","immutable","ImmutableObject","Locale","JSResource","MercuryAttachment","MercuryConfig","MercuryErrorInfo","MercuryIDs","MercuryMessageCustomizations","MercuryMessageError.react","MercuryMessageInfo","MessageBorderType","MessageCustomizationType","MessagingGiftWrapChecker","MessengerDecorator","MessengerInnerDecorators.react","MessengerVideoAutoplayStore","ChatCodePasteUtils","MNCommerceMessageType","MercuryDisplayTimeFilterMessageRenderer","React","ReactDOM","TooltipData","XUISpinner.react","convertMIGColorToFIGColor","isRTL","joinClasses","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={isVisible:false},this.$ChatMessage1=function(){return this.setState({hovered:true})}.bind(this),this.$ChatMessage2=function(){return this.setState({hovered:false})}.bind(this),o}m.getStores=function(){return[c("MessengerVideoAutoplayStore")]};m.calculateState=function(n,o){return{isVisible:c("MessengerVideoAutoplayStore").isVisible(o.message.thread_id,o.message.message_id)}};m.prototype.componentDidMount=function(){c("CSS").conditionClass(c("ReactDOM").findDOMNode(this),"_2cnu",this.isOneLine())};m.prototype.isOneLine=function(){var n=this.props.message;return c("MercuryMessageInfo").isInbound(n)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps()};m.prototype.shouldComponentUpdate=function(n,o){var p=n.message!==this.props.message,q=false,r=false,s=this.props.thread;if(s){q=s.custom_like_icon!==n.thread.custom_like_icon;r=s.custom_color!==n.thread.custom_color}else if(n.thread)return true;return p||q||r||o.isVisible!==this.state.isVisible};m.prototype.render=function(){var n=this.props.message,o=c("MercuryAttachment").get(n).length>0,p=c("MercuryMessageInfo").isInbound(n),q=c("MercuryIDs").isGroupChat(n.thread_id),r=c("MercuryErrorInfo").hasErrorStatus(n),s="_5wd4"+(p?" _1nc7":"")+(!p?" _1nc6":"")+(o?" _2_-t":"")+(p&&q?" _5ysy":"")+(r?" _1zcs":""),t=this.props,u=t.isFromViewer,v=t.participants,w=[],x=n;if(x)c("MessengerDecorator").getBeforeDecorators().forEach(function(y){if(y.check(x))w.push(y.render(x,u))});return c("React").createElement("div",{className:c("joinClasses")(this.props.className,s),onMouseEnter:this.$ChatMessage1,onMouseLeave:this.$ChatMessage2},c("React").createElement("div",{className:"_h8t"},w,this.$ChatMessage3()),c("React").createElement(c("MessengerInnerDecorators.react"),{message:n,isFromViewer:this.props.isFromViewer||false,hovered:this.state.hovered,messageProps:this.props}),this.$ChatMessage4(x,u),this.$ChatMessage5())};m.prototype.$ChatMessage3=function(){var n=this.props.message,o={};if(c("MercuryMessageInfo").isOutbound(n)){var p=i._("{time}",[i.param("time",c("MercuryTimestamp").getPreciseTimestamp(n.timestamp))]);Object.assign(o,c("TooltipData").propsFor(p,"right"))}if(n.is_filtered_content)return c("React").createElement("div",babelHelpers["extends"]({className:"_5wd9 _5wdc uiBoxYellow clearfix",ref:"inner"},o),c("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(n));var q=this.$ChatMessage6("outside"),r=n.body&&n.body!==""?c("isRTL")(n.body):c("Locale").isRTL();return c("React").createElement("div",babelHelpers["extends"]({className:"_5wd9"+(r?" direction_rtl":"")+(!r?" direction_ltr":""),ref:"inner"},o),this.$ChatMessage7(!q),q)};m.prototype.$ChatMessage4=function(n,o){__p&&__p();var p,q=this;if(n){var p=function(){__p&&__p();var r=[],s=[];c("MessengerDecorator").getAfterExternalDecorators().forEach(function(u){if(n&&u.check(n)){r.push(u.render(n,o,this.props));s.push(u.getAdditionalClassNames())}}.bind(q));if(s.length===0&&r.length===0)return{v:null};var t=s.join(" ");return{v:c("React").createElement("div",{className:c("joinClasses")(t,"_5ijz"+(!o?" isFromOther":""))},r)}}();if(typeof p==="object")return p.v}return null};m.prototype.$ChatMessage5=function(){var n=this.props.message;if(n.is_filtered_content||!c("MercuryMessageInfo").hasError(n))return null;return c("React").createElement("div",{className:"_3ry4",ref:"undertext"},c("React").createElement(c("MercuryMessageError.react"),{className:"_5wda clearfix",message:n,ref:"status"}),this.$ChatMessage8())};m.prototype.$ChatMessage8=function(){return this.props.message.is_spoof_warning?c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("MercurySpoofWarning.react").__setRef("ChatMessage.react"),authorID:this.props.message.author,className:"_5wdb"}):null};m.prototype.$ChatMessage9=function(){return c("React").createElement("div",{style:{padding:"20px",text_align:"center"}},c("React").createElement(c("XUISpinner.react"),null))};m.prototype.$ChatMessage6=function(n){__p&&__p();if(this.props.message.commerce_message_type===c("MNCommerceMessageType").RIDE_INTENT)return null;var o=this.props.message,p=this.props.thread?this.props.thread.custom_like_icon:null,q=n=="inside"?"attachmentsInside":"attachmentsOutside",r=c("MercuryAttachment").get(o).filter(function(v){var w=c("MercuryAttachment").isBubblePreferred(v);return w&&n==="inside"||!w&&n==="outside"}),s=this.props.thread?c("convertMIGColorToFIGColor")(this.props.thread.custom_color):"",t=[],u=[];if(n==="outside"&&o)c("MessengerDecorator").getAfterDecorators().forEach(function(v){if(v.check(o,this.props.isFromViewer)){t.push(v.render(o,this.props.isFromViewer,this.props,this.state.hovered));u.push(v.getAdditionalClassNames())}}.bind(this));if(r.length>0)return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:this.$ChatMessage9(),bootloadLoader:c("JSResource")("MercuryAttachments.react").__setRef("ChatMessage.react"),className:c("joinClasses")((n==="outside"?"_3e7u":"")+(!!o.body?" _16ys":"")+(!!s?" _3al":"")+" _n4o",u),attachments:r,customLike:p,customColor:s,hasFlowerBorder:c("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&c("MercuryMessageCustomizations").getCustomizationValue(o,c("MessageCustomizationType").BORDER)===c("MessageBorderType").FLOWERS&&n==="outside",isChat:true,isGiftWrapped:c("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(o)&&n==="outside",afterDecorators:t,isVisible:this.state.isVisible,maxWidth:this.props.maxBubbleWidth,message:o,onUnwrap:this.$ChatMessage10,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:q});return null};m.prototype.$ChatMessage7=function(n){__p&&__p();var o=this.props,p=o.isFromViewer,q=o.message,r=o.thread,s=q.body,t=this.$ChatMessage6("inside"),u=[],v=[],w=[],x=q;if(x){if(n)c("MessengerDecorator").getAfterDecorators().forEach(function(A){if(A.check(x,p)){u.push(A.render(x,p,this.props));v.push(A.getAdditionalClassNames())}}.bind(this));c("MessengerDecorator").getInsideDecorators().forEach(function(A){if(A.check(x,p)){w.push(A.render(x,p,this.props));v.push(A.getAdditionalClassNames())}}.bind(this));c("MessengerDecorator").getBeforeDecorators().forEach(function(A){if(A.check(x,p))v.push(A.getAdditionalClassNames())})}var y=v.join(" ");if(c("ChatAnimatedGifs").shouldHideBody(q))s="";var z=q.ranges;if(q.profile_ranges&&q.profile_ranges.length)z=(z||[]).concat(q.profile_ranges.map(function(A){return babelHelpers["extends"]({},A,{url:"/"+A.id})}));if(c("ChatCodePasteUtils").containsCodeBlock(s))return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{height:22}}),bootloadLoader:c("JSResource")("ChatCodeBubble.react").__setRef("ChatMessage.react"),body:s,className:"_5wdf",maxWidth:this.props.maxBubbleWidth,ranges:z,threadID:q.thread_id,customColor:r&&p?c("convertMIGColorToFIGColor")(r.custom_color):""});if(s||t)return c("React").createElement("div",{className:c("joinClasses")(y,"_5wde _n4o")},c("React").createElement(c("ChatBubble.react"),{attachments:t,body:s,className:"_5wdf",insideDecorators:w,isEmojiLike:c("EmojiLikeUtils").isEmojiLike(q),isFromViewer:this.props.isFromViewer,metaRanges:q.meta_ranges,message:q,maxWidth:this.props.maxBubbleWidth,ranges:z,ref:"bubble",threadID:q.thread_id,customLike:q.customLike,customColor:r&&p?c("convertMIGColorToFIGColor")(r.custom_color):"",threadCustomColor:r&&c("convertMIGColorToFIGColor")(r.custom_color)}),u);return null};m.propTypes={message:l.instanceOf(c("ImmutableObject")).isRequired,maxBubbleWidth:l.number.isRequired,onAttachmentLoad:l.func,onStickerClick:l.func,participants:l.instanceOf(c("immutable").Map).isRequired,readReceipts:l.instanceOf(c("immutable").OrderedMap).isRequired,thread:l.instanceOf(c("ImmutableObject"))};f.exports=c("FluxContainer").create(m,{withProps:true})}),null);
__d("ChatMessageGroup.react",["cx","fbt","ChatConfig","ChatDateBreak.react","ChatMessage.react","CurrentUser","Image.react","immutable","ImmutableObject","MercuryConfig","MercuryIDs","MercuryParticipants","MercuryTimestamp","MessengerTextWithEmoticons.react","React","ReactDOM","StoreAndPropBasedStateMixin","QE2Logger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("immutable").OrderedMap,k=c("React").PropTypes,l=new(c("ImmutableObject"))({name:"",href:"#",image_src:""}),m=c("ChatConfig").get("chattab_rounded_profile",false),n=c("React").createClass({displayName:"ChatMessageGroup",mixins:[c("StoreAndPropBasedStateMixin")(c("MercuryParticipants"))],propTypes:{activeMessageID:k.string,author:k.string,hasDateBreak:k.bool,isCanonical:k.bool,isFromViewer:k.bool,isPageMessage:k.bool,isOnline:k.bool,maxBubbleWidth:k.number,messages:k.instanceOf(c("immutable").List).isRequired,readReceipts:k.instanceOf(j).isRequired,onAttachmentLoad:k.func,onStickerClick:k.func,thread:k.instanceOf(c("ImmutableObject")),threadID:k.string},statics:{calculateState:function p(q){return{participants:o(q)}}},componentDidMount:function p(){c("QE2Logger").logExposureForUser("messenger_growth_tombstone")},shouldComponentUpdate:function p(q,r){return this.props.isOnline!==q.isOnline||this.props.activeMessageID!==q.activeMessageID||this.props.isFromViewer!==q.isFromViewer||!c("immutable").is(this.props.messages,q.messages)||!c("immutable").is(this.state.participants,r.participants)||!c("immutable").is(this.props.thread,q.thread)},render:function p(){return c("React").createElement("div",{className:"_4tdt"+(this.props.isFromViewer?" _ua0":"")+(!this.props.isFromViewer?" _ua1":"")+(this._hasSeenHeadsAtBottom()?" _3lil":"")},this._renderProfileColumn(),c("React").createElement("div",{className:"_ua2"},this._renderName(),c("React").createElement("div",{className:"_4tdv"},this._renderMessages())))},_renderProfileColumn:function p(){if(this.props.isFromViewer)return null;var q=this.state.participants.get(this.props.author)||l,r=i._("{name} {time}",[i.param("name",q.name),i.param("time",c("MercuryTimestamp").getPreciseTimestamp(this.props.messages.last().timestamp))]),s=q.image_src?c("React").createElement(c("Image.react"),{src:q.image_src}):null,t=c("MercuryConfig").GDWC&&this.props.isOnline,u=c("CurrentUser").isWorkUser()&&q.is_coworker===false;return c("React").createElement("div",{className:"_31o4"+(m?" _3njy":"")},c("React").createElement("a",{"aria-label":r,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":r,"data-tooltip-position":"left",href:q.href,ref:"link"},s),u?c("React").createElement("div",{className:"_4rwx _4rwy"}):t?c("React").createElement("div",{className:"_sce"}):null)},_renderName:function p(){__p&&__p();if(this.props.isCanonical||this.props.isFromViewer)return null;var q=this.state.participants.get(this.props.messages.first().author);if(!q)return null;var r=q.short_name;if(this.props.thread&&this.props.thread.custom_nickname){var s=c("MercuryIDs").getUserIDFromParticipantID(q.id);if(this.props.thread.custom_nickname[s])r=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:this.props.thread.custom_nickname[s]})}return c("React").createElement("div",{className:"_4tdx"},r)},_renderMessages:function p(){var q=this.props.messages.size,r=[];this.props.messages.forEach(function(s,t,u){var v=s.message_id===this.props.activeMessageID;if(v&&!(t===0&&this.props.hasDateBreak))r.push(c("React").createElement(c("ChatDateBreak.react"),{date:new Date(s.timestamp),key:"db:"+s.message_id}));r.push(c("React").createElement(c("ChatMessage.react"),{isFromViewer:this.props.isFromViewer,key:s.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:s,participants:this.state.participants,readReceipts:this.props.readReceipts,ref:s.message_id,nextTimestamp:this._getNextTimestamp(u,q,t),onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,thread:this.props.thread}))}.bind(this));return r},_hasSeenHeadsAtBottom:function p(){var q=this.props,r=q.messages,s=q.nextTimestamp,t=q.readReceipts,u=r.last().timestamp,v=0;t.forEach(function(w){if(w>=u&&w<s)if(++v===2)return false;return null});return v===2},_getNextTimestamp:function p(q,r,s){return s<r-1?q.get(s+1).timestamp:this.props.nextTimestamp},getMessageElement:function p(q){return c("ReactDOM").findDOMNode(this.refs[q])}});function o(p){return c("immutable").Map().withMutations(function(q){p.readReceipts.forEach(function(r,s){q.set(s,c("MercuryParticipants").getOrFetch(s))});q.set(p.author,c("MercuryParticipants").getOrFetch(p.author))})}f.exports=n}),null);
__d("MercuryMessageRendererUtils",["cx","invariant","HovercardLink","MercuryViewer","MessengerTextWithEmoticons.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={getLinkToParticipant:function k(l,m){var n=l.fbid,o=c("HovercardLink").constructEndpoint({id:n}),p=m&&m.custom_nickname&&m.custom_nickname[n];if(p)p=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:p});var q=p?p:l.name;if(l.href)return c("React").createElement("a",{className:"_5wzt",href:l.href,"data-hovercard":o},q);return q},moveCurrentUserToFront:function k(){var l=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];l||i(0);var m=l.indexOf(c("MercuryViewer").getID());if(m>0){var n=l.filter(function(o){return o!==c("MercuryViewer").getID()});return[c("MercuryViewer").getID()].concat(n)}return l}};f.exports=j}),null);
__d("MessengerLightweightActionUtils",["MercuryAttachmentType"],(function a(b,c,d,e,f,g){"use strict";function h(k){return!!(k&&k.attach_type===c("MercuryAttachmentType").SHARE&&k.share&&k.share.target&&k.share.target.lwa_type)}function i(k){var l=k.attachments;return!!(l&&l.length===1&&h(l[0]))}function j(k){return k.attachments[0].share.title}f.exports={isLWAMessage:i,isLWAAttachment:h,getCollapsedLWAText:j}}),null);
__d("MercuryLogMessageRenderer",["cx","fbt","invariant","ix","Bootloader","CSS","Image.react","MercuryAttachmentViewer","MercuryViewer","MercuryLogMessageType","MessengerAdminGroupUtils","MessengerLightweightActionUtils","MessengerTextWithEmoticons.react","MercuryParticipants","React","ReactDOM","MercuryMessageRendererUtils","MercuryThreads","TooltipLink.react","UserAgent","convertMIGColorToFIGColor"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=c("MercuryThreads").get(),m="source:messenger_growth:event_upcoming_bump",n={renderText:function F(G,H,I,J){__p&&__p();H=H||l.getThreadMetaNow(G.thread_id);if(c("MessengerLightweightActionUtils").isLWAMessage(G)){J(c("MessengerLightweightActionUtils").getCollapsedLWAText(G));return}switch(G.log_message_type){case c("MercuryLogMessageType").SUBSCRIBE:var K=G.author;G.log_message_data||j(0);var L=G.log_message_data.added_participants;L||j(0);var M=L.length===1&&K===L[0];if(M)c("Bootloader").loadModules(["MercuryJoinableMessageRenderer"],function(O){O.renderText(G,H,J)},"MercuryLogMessageRenderer");else q(G,J);break;case c("MercuryLogMessageType").UNSUBSCRIBE:if(c("MessengerAdminGroupUtils").isJoinableThread(H))c("MessengerAdminGroupUtils").isGroupChat(H)?C(G,J):w(G,J);else v(G,J);break;case c("MercuryLogMessageType").THREAD_NAME:if(H&&c("MessengerAdminGroupUtils").isJoinableThread(H))c("MessengerAdminGroupUtils").isGroupChat(H)?D(G,H,J):x(G,H,J);else y(G,H,J);break;case c("MercuryLogMessageType").THREAD_IMAGE:if(H&&c("MessengerAdminGroupUtils").isJoinableThread(H))c("MessengerAdminGroupUtils").isGroupChat(H)?E(G,H,J):z(G,H,J);else A(G,H,J);break;case c("MercuryLogMessageType").WALLPAPER:B(G,J);break;case c("MercuryLogMessageType").GENERIC_ADMIN_TEXT:var N=c("convertMIGColorToFIGColor")(H&&H.custom_color);c("Bootloader").loadModules(["MercuryXMATRenderer"],function(O){J(O.renderText(N,G,I))},"MercuryLogMessageRenderer");break;default:c("Bootloader").loadModules(["MercurySpecialLogMessageRenderer"],function(O){O.renderText(G,J)},"MercuryLogMessageRenderer");break}},renderIcon:function F(G){return c("React").createElement(c("Image.react"),{className:o(G.log_message_type,G.log_message_data),src:k("99239")})},renderLegacy:function F(G,H,I,J){o(J.log_message_type,J.log_message_data).split(" ").forEach(function(K){return K&&c("CSS").addClass(G,K)});this.renderText(J,null,false,function(K){c("ReactDOM").render(c("React").createElement("span",null,K),H)});this.renderAttachmentLegacy(I,J)},renderAttachmentLegacy:function F(G,H){__p&&__p();var I;if(H.log_message_type===c("MercuryLogMessageType").THREAD_IMAGE)(function(){H.log_message_data||j(0);var J=H.log_message_data.image;if(J&&J.preview_url){c("ReactDOM").render(c("React").createElement(c("Image.react"),{className:"_z6a",onClick:function K(){return p(J)},src:J.preview_url}),G);c("CSS").show(G)}})()}};f.exports=n;function o(F,G){var H=!!(G&&G.answered);return"_5wzu"+(F===c("MercuryLogMessageType").SUBSCRIBE?" _5wzj":"")+(F===c("MercuryLogMessageType").UNSUBSCRIBE?" _5wzk":"")+(F===c("MercuryLogMessageType").THREAD_NAME?" _5wzl":"")+(F===c("MercuryLogMessageType").THREAD_IMAGE?" _5wzm":"")+(F===c("MercuryLogMessageType").VIDEO_CALL&&H?" _5wzn":"")+(F===c("MercuryLogMessageType").VIDEO_CALL&&!H?" _5wzo":"")+(F===c("MercuryLogMessageType").PHONE_CALL&&H?" _5wzp":"")+(F===c("MercuryLogMessageType").PHONE_CALL&&!H?" _5wzq":"")+(F===c("MercuryLogMessageType").SERVER_ERROR?" _5wzr":"")+(!F?" _2r5l":"")}function p(F){c("MercuryAttachmentViewer").bootstrapWithConfig({src:F.preview_url,endpoint:F.url,fbid:F.metadata.fbid,dimensions:F.metadata.dimensions,disablePaging:true},null)}function q(F,G){__p&&__p();F.log_message_data||j(0);var H=c("MercuryMessageRendererUtils").moveCurrentUserToFront(F.log_message_data.added_participants);H||j(0);switch(H.length){case 1:r(F,G,H);break;case 2:s(F,G,H);break;case 3:t(F,G,H);break;default:u(F,G,H);break}}function r(F,G,H){var I=[F.author,H[0]];c("MercuryParticipants").getMulti(I,function(J){if(F.author===c("MercuryViewer").getID())G(i._("You added {subscriber1}.",[i.param("subscriber1",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[0]]))]));else if(H[0]===c("MercuryViewer").getID())G(i._("{actor} added you.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(J[F.author]))]));else G(i._("{actor} added {subscriber1}.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(J[F.author])),i.param("subscriber1",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[0]]))]))})}function s(F,G,H){var I=[F.author].concat(H);c("MercuryParticipants").getMulti(I,function(J){if(F.author===c("MercuryViewer").getID())G(i._("You added {subscriber1} and {subscriber2}.",[i.param("subscriber1",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[0]])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[1]]))]));else if(H[0]===c("MercuryViewer").getID())G(i._("{actor} added you and {subscriber2}.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(J[F.author])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[1]]))]));else G(i._("{actor} added {subscriber1} and {subscriber2}.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(J[F.author])),i.param("subscriber1",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[0]])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[1]]))]))})}function t(F,G,H){var I=[F.author].concat(H);c("MercuryParticipants").getMulti(I,function(J){if(F.author===c("MercuryViewer").getID())G(i._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[i.param("subscriber1",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[0]])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[1]])),i.param("subscriber3",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[2]]))]));else if(H[0]===c("MercuryViewer").getID())G(i._("{actor} added you, {subscriber2} and {subscriber3}.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(J[F.author])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[1]])),i.param("subscriber3",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[2]]))]));else G(i._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(J[F.author])),i.param("subscriber1",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[0]])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[1]])),i.param("subscriber3",c("MercuryMessageRendererUtils").getLinkToParticipant(J[H[2]]))]))})}function u(F,G,H){__p&&__p();var I=[F.author].concat(H);c("MercuryParticipants").getMulti(I,function(J){__p&&__p();function K(M){var N=c("React").createElement("div",null,M.map(function(O){return c("React").createElement("div",null,O.name)}));return c("React").createElement(c("TooltipLink.react"),{alignH:"center",position:"above",tooltip:N},i._({"*":"{num} more"},[i.param("num",M.length,[0])]))}var L=H.map(function(M){return J[M]});if(F.author===c("MercuryViewer").getID())G(i._("You added {subscriber1}, {subscriber2} and {more_people}.",[i.param("subscriber1",c("MercuryMessageRendererUtils").getLinkToParticipant(L[0])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(L[1])),i.param("more_people",K(L.slice(2)))]));else if(H[0]===c("MercuryViewer").getID())G(i._("{actor} added you, {subscriber2} and {more_people}.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(J[F.author])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(L[1])),i.param("more_people",K(L.slice(2)))]));else G(i._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(J[F.author])),i.param("subscriber1",c("MercuryMessageRendererUtils").getLinkToParticipant(L[0])),i.param("subscriber2",c("MercuryMessageRendererUtils").getLinkToParticipant(L[1])),i.param("more_people",K(L.slice(2)))]))})}function v(F,G){__p&&__p();var H=[F.author];F.log_message_data||j(0);var I=F.log_message_data.removed_participants;I||j(0);var J=void 0;if(I.length===1){J=I[0];H.push(J)}c("MercuryParticipants").getMulti(H,function(K){__p&&__p();var L=K[F.author],M=K[J];if(F.author===c("MercuryViewer").getID())if(!J||J===F.author)G(i._("You left the conversation."));else G(i._("You removed {name} from the conversation.",[i.param("name",c("MercuryMessageRendererUtils").getLinkToParticipant(M))]));else if(!J||J===F.author)G(i._("{actor} left the conversation.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L))]));else if(J===c("MercuryViewer").getID())G(i._("{actor} removed you from the conversation.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L))]));else G(i._("{actor} removed {name} from the conversation.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L)),i.param("name",c("MercuryMessageRendererUtils").getLinkToParticipant(M))]))})}function w(F,G){__p&&__p();var H=[F.author];F.log_message_data||j(0);var I=F.log_message_data.removed_participants;I||j(0);var J=void 0;if(I.length===1){J=I[0];H.push(J)}c("MercuryParticipants").getMulti(H,function(K){__p&&__p();var L=K[F.author],M=K[J];if(F.author===c("MercuryViewer").getID())if(!J||J===F.author)G(i._("You left the room."));else G(i._("You removed {name} from the room.",[i.param("name",c("MercuryMessageRendererUtils").getLinkToParticipant(M))]));else if(!J||J===F.author)G(i._("{actor} left the room.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L))]));else if(J===c("MercuryViewer").getID())G(i._("{actor} removed you from the room.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L))]));else G(i._("{actor} removed {name} from the room.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L)),i.param("name",c("MercuryMessageRendererUtils").getLinkToParticipant(M))]))})}function x(F,G,H){__p&&__p();F.log_message_data||j(0);var I=F.log_message_data.name,J="_5wzs"+(c("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(F.author===c("MercuryViewer").getID())if(I){var K=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:I});H(i._("You named the room: {name}.",[i.param("name",c("React").createElement("span",{className:J},K))]))}else H(i._("You removed the room name."));else c("MercuryParticipants").get(F.author,function(L){var M=c("MercuryMessageRendererUtils").getLinkToParticipant(L,G);if(I){var N=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:I});H(i._("{actor} named the room: {name}.",[i.param("actor",M),i.param("name",c("React").createElement("span",{className:J},N))]))}else H(i._("{actor} removed the room name.",[i.param("actor",M)]))})}function y(F,G,H){__p&&__p();F.log_message_data||j(0);var I=F.log_message_data.name,J="_5wzs"+(c("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(I&&F.tags&&F.tags.indexOf(m)!==-1)H(i._("The group has been named {name}.",[i.param("name",c("React").createElement("span",{className:J},c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:I})))]));else if(F.author===c("MercuryViewer").getID())if(I){var K=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:I});H(i._("You named the conversation: {name}.",[i.param("name",c("React").createElement("span",{className:J},K))]))}else H(i._("You removed the conversation name."));else c("MercuryParticipants").get(F.author,function(L){var M=c("MercuryMessageRendererUtils").getLinkToParticipant(L,G);if(I){var N=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:I});H(i._("{actor} named the conversation: {name}.",[i.param("actor",M),i.param("name",c("React").createElement("span",{className:J},N))]))}else H(i._("{actor} removed the conversation name.",[i.param("actor",M)]))})}function z(F,G,H){__p&&__p();if(F.author===c("MercuryViewer").getID()){F.log_message_data||j(0);if(F.log_message_data.image)H(i._("You changed the room picture."));else H(i._("You removed the room picture."))}else c("MercuryParticipants").get(F.author,function(I){var J=c("MercuryMessageRendererUtils").getLinkToParticipant(I,G);F.log_message_data||j(0);if(F.log_message_data.image)H(i._("{actor} changed the room picture.",[i.param("actor",J)]));else H(i._("{actor} removed the room picture.",[i.param("actor",J)]))})}function A(F,G,H){__p&&__p();if(F.tags!==undefined&&F.tags.indexOf(m)!==-1)H(i._("The conversation picture has been set."));else if(F.author===c("MercuryViewer").getID()){F.log_message_data||j(0);if(F.log_message_data.image)H(i._("You changed the conversation picture."));else H(i._("You removed the conversation picture."))}else c("MercuryParticipants").get(F.author,function(I){var J=c("MercuryMessageRendererUtils").getLinkToParticipant(I,G);F.log_message_data||j(0);if(F.log_message_data.image)H(i._("{actor} changed the conversation picture.",[i.param("actor",J)]));else H(i._("{actor} removed the conversation picture.",[i.param("actor",J)]))})}function B(F,G){if(F.author===c("MercuryViewer").getID())G(i._("You changed the wallpaper."));else c("MercuryParticipants").get(F.author,function(H){var I=c("MercuryMessageRendererUtils").getLinkToParticipant(H);G(i._("{actor} changed the wallpaper.",[i.param("actor",I)]))})}function C(F,G){__p&&__p();var H=[F.author];F.log_message_data||j(0);var I=F.log_message_data.removed_participants;I||j(0);var J=void 0;if(I.length===1){J=I[0];H.push(J)}c("MercuryParticipants").getMulti(H,function(K){__p&&__p();var L=K[F.author],M=K[J];if(F.author===c("MercuryViewer").getID())if(!J||J===F.author)G(i._("You left the chat."));else G(i._("You removed {name} from the chat.",[i.param("name",c("MercuryMessageRendererUtils").getLinkToParticipant(M))]));else if(!J||J===F.author)G(i._("{actor} left the chat.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L))]));else if(J===c("MercuryViewer").getID())G(i._("{actor} removed you from the chat.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L))]));else G(i._("{actor} removed {name} from the chat.",[i.param("actor",c("MercuryMessageRendererUtils").getLinkToParticipant(L)),i.param("name",c("MercuryMessageRendererUtils").getLinkToParticipant(M))]))})}function D(F,G,H){__p&&__p();F.log_message_data||j(0);var I=F.log_message_data.name,J="_5wzs"+(c("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(F.author===c("MercuryViewer").getID())if(I){var K=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:I});H(i._("You named the chat: {name}.",[i.param("name",c("React").createElement("span",{className:J},K))]))}else H(i._("You removed the chat name."));else c("MercuryParticipants").get(F.author,function(L){var M=c("MercuryMessageRendererUtils").getLinkToParticipant(L,G);if(I){var N=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:I});H(i._("{actor} named the chat: {name}.",[i.param("actor",M),i.param("name",c("React").createElement("span",{className:J},N))]))}else H(i._("{actor} removed the chat name.",[i.param("actor",M)]))})}function E(F,G,H){__p&&__p();if(F.author===c("MercuryViewer").getID()){F.log_message_data||j(0);if(F.log_message_data.image)H(i._("You changed the chat picture."));else H(i._("You removed the chat picture."))}else c("MercuryParticipants").get(F.author,function(I){var J=c("MercuryMessageRendererUtils").getLinkToParticipant(I,G);F.log_message_data||j(0);if(F.log_message_data.image)H(i._("{actor} changed the chat picture.",[i.param("actor",J)]));else H(i._("{actor} removed the chat picture.",[i.param("actor",J)]))})}}),null);
__d("MercuryLogMessage.react",["cx","fbt","DOM","DOMDimensions","Event","EventReminderRequestHelper","ImmutableObject","MercuryLogMessageRenderer","MercuryLogMessageType","MessagingGenericAdminTextType","React","ReactDOM","ShimButton.react","cancelAnimationFrame","emptyFunction","formatDate","joinClasses","requestAnimationFrame","requireWeak"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=266;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={messageText:null,showEventReminderFlyout:false},this.$MercuryLogMessage4=function(){this.$MercuryLogMessage5()}.bind(this),this.$MercuryLogMessage9=function(){if(!this.state.showEventReminderFlyout)c("EventReminderRequestHelper").fetchEventReminder(this.props.thread.thread_id,this.props.thread.lightweight_event.oid,function(){this.$MercuryLogMessage1&&this.setState({showEventReminderFlyout:true})}.bind(this));else this.setState({showEventReminderFlyout:false})}.bind(this),this.$MercuryLogMessage11=function(t){if(t!==this.state.showEventReminderFlyout)this.setState({showEventReminderFlyout:t})}.bind(this),p}n.prototype.componentDidMount=function(){this.$MercuryLogMessage1=true;this.componentWillReceiveProps(this.props)};n.prototype.componentWillUnmount=function(){this.$MercuryLogMessage1=false;if(this.$MercuryLogMessage2)c("cancelAnimationFrame")(this.$MercuryLogMessage2)};n.prototype.$MercuryLogMessage3=function(){return c("React").createElement(c("ShimButton.react"),{form:"link",onClick:this.$MercuryLogMessage4},i._("Show previous messages."))};n.prototype.$MercuryLogMessage5=function(){var o=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(!this.$MercuryLogMessage1)return;if(o)this.setState({messageText:this.$MercuryLogMessage3()});else{var p=i._("Couldn't find previous messages.");this.setState({messageText:p})}};n.prototype.componentWillReceiveProps=function(o){if(o.message.log_message_type===c("MercuryLogMessageType").SERVER_ERROR)return;c("MercuryLogMessageRenderer").renderText(o.message,o.thread,o.isLastOfType,function(p){this.$MercuryLogMessage1&&this.setState({messageText:p})}.bind(this))};n.prototype.shouldComponentUpdate=function(o,p){return this.state.messageText!=p.messageText||o.maxWidth!==this.props.maxWidth||this.state.showEventReminderFlyout!==p.showEventReminderFlyout};n.prototype.componentDidUpdate=function(){this.$MercuryLogMessage6();if(!this.refs.attachment)return;c("MercuryLogMessageRenderer").renderAttachmentLegacy(this.refs.attachment,this.props.message);c("DOM").scry(this.refs.wrap,"img").forEach(function(o){var p=c("Event").listen(o,"load",function(){this.$MercuryLogMessage6();p.remove()}.bind(this))}.bind(this))};n.prototype.render=function(){return c("React").createElement("div",babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"_5ye6"),ref:"wrap",style:babelHelpers["extends"]({},this.props.style,this.$MercuryLogMessage7()),title:c("formatDate")(new Date(this.props.message.timestamp),"g:ia")}),c("React").createElement("div",{className:"_5ye7"},c("MercuryLogMessageRenderer").renderIcon(this.props.message),this.state.messageText),c("React").createElement("div",{className:"_5ye8",ref:"attachment"},this.$MercuryLogMessage8()))};n.prototype.$MercuryLogMessage8=function(){__p&&__p();if(this.props.thread&&!this.props.thread.lightweight_event||!this.props.message.log_message_data)return null;var o=void 0;c("requireWeak")("EventReminderStateStore",function(s){o=s.getEvent(this.props.thread.thread_id)}.bind(this));if(!o||!o.exists)return null;var p;c("requireWeak")("Link.react",function(s){p=s});var q=void 0;switch(this.props.message.log_message_data.message_type){case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:q=i._("Change");break;default:q=null}var r=c("React").createElement(p,{href:"#",onClick:this.$MercuryLogMessage9,title:i._("Edit Event"),ref:"event_rem_link"},q);if(this.props.displayItems)r=null;return c("React").createElement("span",null,r,this.$MercuryLogMessage10())};n.prototype.$MercuryLogMessage10=function(){__p&&__p();if(!this.state.showEventReminderFlyout)return null;var o="right",p=c("ReactDOM").findDOMNode(this.refs.wrap);if(p&&p instanceof Element&&p.getBoundingClientRect().left<m)o="left";var q={alignment:o,position:"above",contextRef:function(){return this.refs.event_rem_link}.bind(this),shown:this.state.showEventReminderFlyout,onToggle:this.$MercuryLogMessage11},r=void 0;c("requireWeak")("EventsActionsLogger",function(v){r=v});var s={action_history:[{surface:r.Surface.MESSENGER_CHAT_TAB,mechanism:r.Mechanism.REMINDER_ADMIN_TEXT}]},t={threadID:this.props.thread.thread_id,dialogProps:q,flyoutNoSheet:true,isEditing:true,actionContext:s},u;c("requireWeak")("ChatEventReminderContainer.react",function(v){u=v});return c("React").createElement(u,t)};n.prototype.$MercuryLogMessage7=function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null};n.prototype.$MercuryLogMessage6=function(){if(this.$MercuryLogMessage2)c("cancelAnimationFrame")(this.$MercuryLogMessage2);this.$MercuryLogMessage2=c("requestAnimationFrame")(function(){this.props.onImageLoad&&this.props.onImageLoad(c("DOMDimensions").getElementDimensions(this.refs.wrap).height);delete this.$MercuryLogMessage2}.bind(this))};n.propTypes={loadMoreMessages:l.func,maxWidth:l.number,message:l.instanceOf(c("ImmutableObject")).isRequired,onImageLoad:l.func,thread:l.object};n.defaultProps={onImageLoad:c("emptyFunction")};f.exports=n}),null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentType","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","enumerate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={calculateMessageGroups:function k(l,m){__p&&__p();var n=[],o=null,p={value:null},q=c("enumerate")(l),r=void 0;while(!(r=q.next()).done){var s=h.canAppendMessageToLastGroup(p.value,r.value,m);if(!s){o=[];n.push(o)}o.push(r.value);p=r}return n},canAppendMessageToLastGroup:function k(l,m,n){var o=c("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!l||i(l,n)||i(m,n)||l.author!=m.author||l.timestamp<m.timestamp-o||l.is_spoof_warning!==m.is_spoof_warning||l.page_admin_notes)return false;return true}};function i(k,l){var m=k.has_attachment;if(m&&(l===c("MercuryShareAttachmentRenderLocations").MESSENGER||l===c("MercuryShareAttachmentRenderLocations").CHAT))m=j(k);return!!(c("MessengerLightweightActionUtils").isLWAMessage(k)||k.action_type==c("MercuryActionType").LOG_MESSAGE||m||k.html_body||k.body&&k.body.length>c("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function j(k){var l=k.attachments[0];return!l||l.attach_type===c("MercuryAttachmentType").STICKER||l.attach_type===c("MercuryAttachmentType").ANIMATED_IMAGE}f.exports=h}),null);
__d("PagesMessagingMercuryChatTabActionKeys",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null});f.exports=h}),null);
__d("PagesMessagingMercuryChatTabDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("PagesMessagingMercuryChatTabActions",["PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h={requestGreetingConfig:function i(j){c("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:c("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG,threadID:j})},notifyGreetingConfigReceived:function i(j,k){c("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:c("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED,threadID:j,payload:k})}};f.exports=h}),null);
__d("PagesMessagingMercuryChatTabState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("immutable").Record({pagesGreetingShouldShow:false,pagesGreetingContent:null,pageResponsiveness:null,coverPhotoData:null,connectionContext:null,pageOnlineMessage:null,pageOneClickMessages:null}));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/messaging/mercury/greeting/",{})}),null);
__d("PagesMessagingMercuryChatTabStore",["invariant","PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabActions","AsyncRequest","PagesMessagingMercuryChatTabDispatcher","FluxStore","Map","MercuryIDs","PagesMessagingMercuryChatTabState","XMercuryChatTabPagesNullStateConfigController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("FluxStore"));j=i&&i.prototype;function k(){j.constructor.call(this,c("PagesMessagingMercuryChatTabDispatcher"));this.$PagesMessagingMercuryChatTabStore1=new(c("Map"))()}k.prototype.getStateByThread=function(l){if(!this.$PagesMessagingMercuryChatTabStore1.has(l))this.$PagesMessagingMercuryChatTabStore1.set(l,new(c("PagesMessagingMercuryChatTabState"))());var m=this.$PagesMessagingMercuryChatTabStore1.get(l);m||h(0);return m};k.prototype.__onDispatch=function(l){var m=l.actionType,n=l.payload,o=l.threadID,p=this.getStateByThread(o);p||h(0);switch(m){case c("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(o);break;case c("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore3(o,this.$PagesMessagingMercuryChatTabStore4(n,p));break}};k.prototype.$PagesMessagingMercuryChatTabStore2=function(l){var m=c("XMercuryChatTabPagesNullStateConfigController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(m).setMethod("POST").setData({page_id:c("MercuryIDs").getUserIDFromThreadID(l)}).setHandler(function(n){return c("PagesMessagingMercuryChatTabActions").notifyGreetingConfigReceived(l,n.payload)}).send()};k.prototype.$PagesMessagingMercuryChatTabStore3=function(l,m){this.$PagesMessagingMercuryChatTabStore1.set(l,m);this.__emitChange()};k.prototype.$PagesMessagingMercuryChatTabStore4=function(l,m){var n=m.set("pagesGreetingShouldShow",l.pagesGreetingShouldShow).set("pagesGreetingContent",l.pagesGreetingContent).set("pageResponsiveness",l.pageResponsiveness).set("coverPhotoData",l.coverPhotoData).set("connectionContext",l.connectionContext).set("pageOnlineMessage",l.pageOnlineMessage);if(m.pageOneClickMessages===null||m.pageOneClickMessages===undefined||Object.keys(m.pageOneClickMessages).length===0)n=n.set("pageOneClickMessages",l.pageOneClickMessages);return n};f.exports=new k()}),null);
__d("PagesMessageListGreeting.react",["cx","FluxContainer","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("PagesMessagingMercuryChatTabStore")]};k.calculateState=function(l,m){if(m.messageCount>0)return{shouldShowGreeting:false};var n=c("PagesMessagingMercuryChatTabStore").getStateByThread(m.threadID);return{greetingContent:n.pagesGreetingContent,shouldShowGreeting:n.pagesGreetingShouldShow}};k.prototype.componentDidMount=function(){c("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)};k.prototype.render=function(){if(!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0)return null;return c("React").createElement("div",{className:"_4fsh _3-8z"},this.state.greetingContent)};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("messengerDomIDsRe",["uniqueID"],(function a(b,c,d,e,f,g){"use strict";var h={COMPOSER_INPUT_DESCRIPTION:c("uniqueID")(),CONVERSATION:c("uniqueID")(),MAIN_LABEL:c("uniqueID")(),MUTE_DIALOG_TITLE:c("uniqueID")(),THREAD_INFO_PANEL:c("uniqueID")(),THREAD_TITLE:c("uniqueID")()};g.ids=h}),null);
__d("MessageList.react",["cx","immutable","ImmutableObject","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MessagingGenericAdminTextType","MessengerAdminGroupUtils","messengerDomIDsRe","MessengerLightweightActionUtils","PagesMessageListGreeting.react","React","ReactDOM","MercuryShareAttachmentRenderLocations","idx"],(function aa(ba,a,ca,da,b,ea,fa){"use strict";__p&&__p();var c,d,e=a("messengerDomIDsRe").ids,f=a("React").PropTypes,g=1e3*60*60,h=function h(p){var q,r,s,t=(q=p)!=null?(q=q.log_message_data)!=null?q.message_type:q:q;switch(t){case a("MessagingGenericAdminTextType").GROUP_POLL:return(r=p)!=null?(r=r.log_message_data)!=null?(r=r.untypedData)!=null?r.question_id:r:r:r;case a("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(s=p)!=null?(s=s.log_message_data)!=null?(s=s.untypedData)!=null?s.game_id:s:s:s;default:return null}},i=function i(p){if(a("MessengerLightweightActionUtils").isLWAMessage(p))return"lwa";return null};c=babelHelpers.inherits(j,a("React").PureComponent);d=c&&c.prototype;function j(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=d.constructor).call.apply(p,[this].concat(s)),this.state={activeMessageID:null,messageGroups:a("MercuryMessageGroup").calculateMessageGroups(this.props.messages,this.props.location)},this.$MessageList4=function(u){this.setState(function(v){return{activeMessageID:v.activeMessageID===u?null:v.activeMessageID}})}.bind(this),this.$MessageList5=function(u){this.setState({activeMessageID:u})}.bind(this),q}j.prototype.componentWillReceiveProps=function(p){if(p.messages!==this.props.messages)this.setState({messageGroups:a("MercuryMessageGroup").calculateMessageGroups(p.messages,p.location)})};j.prototype.render=function(){__p&&__p();var p=this.props,q=p.DateBreak,r=p.location,s=p.MessageGroup,t=p.CollapsedLogMessageGroup,u=[],v=[],w=void 0,x=this.props.thread&&this.props.thread.custom_color,y=x?{backgroundColor:x}:null,z=this.state.activeMessageID,A=this.state.messageGroups,B=A.length,C=this.props.readReceipts,D=C.last(),E=D?D.watermark:0,F=a("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),G=a("MessengerAdminGroupUtils").isJoinableThread(this.props.thread),H={};for(var I=this.props.messages.size-1;I>=0;I--){var J=this.props.messages.get(I),K=h(J)||i(J);if(K&&!H[K])H[K]=J.message_id}for(var L=0;L<B;L++){var M=L>0?A[L-1]:null,N=M&&M.length>0?M[M.length-1]:null,O=A[L],P=O[0],Q=O[O.length-1],R=false;if(!N||P.timestamp-N.timestamp>g){R=true;var S=a("React").createElement(q,{date:new Date(P.timestamp),key:"db:"+P.message_id,ref:"db:"+P.message_id});if(v.length===0)u.push(S)}if(a("MessengerLightweightActionUtils").isLWAMessage(P))if(H[i(P)]!==P.message_id){var T=this.$MessageList1(P,H);u.push(T);continue}if(P.action_type==a("MercuryActionType").LOG_MESSAGE){var U,V=(U=P)!=null?(U=U.log_message_data)!=null?U.message_type:U:U,W=V===a("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,ga=V===a("MessagingGenericAdminTextType").GROUP_POLL;if((r===a("MercuryShareAttachmentRenderLocations").CHAT||r===a("MercuryShareAttachmentRenderLocations").MESSENGER)&&(P.log_message_type===a("MercuryLogMessageType").VIDEO_CALL||P.log_message_type===a("MercuryLogMessageType").PHONE_CALL)){var ha=this.$MessageList2(P,F,A,B,L,C,E,Q);u.push(ha)}else{var X=this.$MessageList3(P,H);w=P.message_id;if(G&&!W&&!ga)v.push(X);else{if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}u.push(X)}}continue}if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}O=a("immutable").List(O);var Y=l(A,B,L),ia=!n(C,O,Y),ja=m(E,Q),ka=o(this.props.deliveryTimestamp,Q),la=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(a("MercuryIDs").getUserIDFromParticipantID(O.first().author));u.push(a("React").createElement(s,{activeMessageID:k(z,O),author:O.first().author,deliveryTimestamp:ka,hasDateBreak:R,isCanonical:this.props.isCanonical,isFromViewer:F===P.author,isPageMessage:this.props.isPageMessage,isOnline:la,key:"mg:"+P.message_id,lastReadTimestamp:ja,maxBubbleWidth:this.props.maxBubbleWidth,messages:O,nextTimestamp:Y,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,pageID:this.props.isPageMessage?this.props.viewer:null,readReceipts:ia?C:a("immutable").OrderedMap(),ref:"mg:"+P.message_id,thread:this.props.thread,threadID:this.props.threadID}))}if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}var Z=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid,$=null;if(r===a("MercuryShareAttachmentRenderLocations").MESSENGER&&Z&&this.props.isPageMessage)$=a("React").createElement(a("PagesMessageListGreeting.react"),{messageCount:v.length+B,threadID:Z});return a("React").createElement("div",{id:r===a("MercuryShareAttachmentRenderLocations").MESSENGER?e.CONVERSATION:null},$,u)};j.prototype.getMessageElement=function(p,q){__p&&__p();if(q){var r=this.refs["db:"+p];if(r)return a("ReactDOM").findDOMNode(r)}var s=this.state.messageGroups.find(function(v){return v.some(function(w){return w.message_id===p})});if(!s)return null;var t=s[0].message_id,u=this.refs["mg:"+t];if(!u)return null;if(q&&t===p)return a("ReactDOM").findDOMNode(u);return u.getMessageElement(p)};j.prototype.$MessageList2=function(p,q,r,s,t,u,v,w){var x=this.props.MessageGroup,y={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:p.log_message_body,log_message_data:p.log_message_data,log_message_type:p.log_message_type,timestamp:p.timestamp}},z=a("ImmutableObject").setProperty(p,"attachments",[y]);z=a("ImmutableObject").setProperty(z,"body","");var A=a("immutable").List([z]),B=l(r,s,t),C=!n(u,A,B),D=m(v,w),E=o(this.props.deliveryTimestamp,w);return a("React").createElement(x,{author:A.first().author,deliveryTimestamp:E,isFromViewer:q===p.author,key:p.message_id,lastReadTimestamp:D,maxBubbleWidth:this.props.maxBubbleWidth,messages:A,nextTimestamp:B,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,readReceipts:C?u:a("immutable").OrderedMap(),thread:this.props.thread,threadID:this.props.threadID})};j.prototype.$MessageList3=function(p,q){var r=this.props.LogMessage,s=q[h(p)];if(p.log_message_type!==a("MercuryLogMessageType").SERVER_ERROR)return a("React").createElement(r,{className:this.props.location===a("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:p.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:p,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:s===p.message_id});return null};j.prototype.$MessageList1=function(p,q){var r=q[i(p)],s=this.props.LogMessage;return a("React").createElement(s,{className:this.props.location===a("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:p.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:p,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:r===p.message_id})};j.propTypes={CollapsedLogMessageGroup:f.func.isRequired,DateBreak:f.func.isRequired,deliveryTimestamp:f.number.isRequired,isCanonical:f.bool,isPageMessage:f.bool,location:f.string.isRequired,LogMessage:f.func.isRequired,loadMoreMessages:f.func,MessageGroup:f.func.isRequired,messages:f.instanceOf(a("immutable").List).isRequired,onAttachmentLoad:f.func,onlineUsers:f.instanceOf(a("immutable").List),onStickerClick:f.func,readReceipts:f.instanceOf(a("immutable").OrderedMap).isRequired,viewer:f.string.isRequired,thread:f.object,threadID:f.string};function k(p,q){return q.find(function(r){return r.message_id===p})?p:null}function l(p,q,r){return r<q-1?p[r+1][0].timestamp:Infinity}function m(p,q){return q.timestamp>p?p:Infinity}function n(p,q,r){return q.isEmpty()||p.last()<q.first().timestamp||p.first()>=r}function o(p,q){return q.timestamp>p?p:Infinity}b.exports=j}),null);
__d("ChatConversation.react",["ChatCollapsedLogMessageGroup.react","ChatDateBreak.react","ChatMessageGroup.react","immutable","MercuryLogMessage.react","MercuryIDs","mercuryRogerRe","MessageList.react","React","Set","MercuryShareAttachmentRenderLocations","cancelAnimationFrame","requestAnimationFrame"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("mercuryRogerRe").get(),i=c("immutable").OrderedMap,j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatConversation",_raf:(undefined,Number),_onMountTimeout:(undefined,Number),propTypes:{contextBanner:j.object,isCanonical:j.bool.isRequired,loadMoreMessages:j.func,maxBubbleWidth:j.number.isRequired,messages:j.instanceOf(c("immutable").List).isRequired,onAttachmentLoad:j.func,onMount:j.func,onlineUsers:j.instanceOf(c("immutable").List).isRequired,onStickerClick:j.func,viewer:j.string.isRequired,thread:j.object,threadID:j.string.isRequired},componentDidMount:function l(){this._raf=c("requestAnimationFrame")(function(){this._onMountTimeout=setTimeout(function(){this.props.onMount&&this.props.onMount();delete this._onMountTimeout}.bind(this),0);delete this._raf}.bind(this))},componentWillUnmount:function l(){if(this._raf)c("cancelAnimationFrame")(this._raf);clearTimeout(this._onMountTimeout)},render:function l(){return c("React").createElement("div",null,this.props.contextBanner,c("React").createElement(c("MessageList.react"),{DateBreak:c("ChatDateBreak.react"),LogMessage:c("MercuryLogMessage.react"),MessageGroup:c("ChatMessageGroup.react"),deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:c("MercuryShareAttachmentRenderLocations").CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,CollapsedLogMessageGroup:c("ChatCollapsedLogMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onlineUsers:this.props.onlineUsers,onStickerClick:this.props.onStickerClick,readReceipts:this._calculateReceipts(this.props),ref:"messageList",viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID}))},_calculateReceipts:function l(m){__p&&__p();var n=c("MercuryIDs").getParticipantIDFromUserID(m.viewer),o=h.getSeenTimestamps(m.threadID),p=new(c("Set"))(m.thread?m.thread.participants:o.keys());p["delete"](n);return o.withMutations(function(o){__p&&__p();c("immutable").Seq(m.messages).reverse().forEach(function(q){__p&&__p();if(p.size===0)return false;if(!p.has(q.author))return null;o.update(q.author,function(r){if(!r||r.watermark<=q.timestamp)return{watermark:q.timestamp,action:q.timestamp};return r});p["delete"](q.author);return null})})},getMessageList:function l(){return this.refs.messageList}});f.exports=k}),null);
__d("ChatEditParticipantsUtils",["AsyncDialog","AsyncRequest","MercuryIDs","MercuryThreadIDMap","URI"],(function a(b,c,d,e,f,g){"use strict";var h=c("MercuryThreadIDMap").get(),i={showParticipantsModal:function j(k){if(!c("MercuryIDs").isGroupChat(k))return;h.getServerIDFromClientID(k,function(l){c("AsyncDialog").send(new(c("AsyncRequest"))(new(c("URI"))("/ajax/browser/dialog/multichat_members/").addQueryData({id:l})))})}};f.exports=i}),null);
__d("MessengerEmojiSpan.react",["cx","EmojiLikeConstants","MessengerSupportedEmojiUtils","React","cssURL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c("MessengerSupportedEmojiUtils").getUrl(o,c("EmojiLikeConstants").size.SMALL);p=p?p:"";return c("React").createElement("span",{className:"_21wj",style:{backgroundImage:c("cssURL")(p)},"data-offset-key":this.props.offsetKey},c("React").createElement("span",{className:"_21wk"},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l}),null);
__d("MessengerEmoticonSpan.react",["cx","EmojiLikeConstants","MessengerSupportedEmojiUtils","EmoticonEmojiList","React","cssURL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c("EmoticonEmojiList").emote2emojis[o],q=c("MessengerSupportedEmojiUtils").getUrl(p,c("EmojiLikeConstants").size.XSMALL);q=q?q:"";return c("React").createElement("span",{className:"_21wj",style:{backgroundImage:c("cssURL")(q)},"data-offset-key":this.props.offsetKey},c("React").createElement("span",{className:"_21wk"},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l}),null);
__d("MessengerMentionSource",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({REPLY:"reply",ATSIGN:"@",TYPEAHEAD:"typeahead"});f.exports=h}),null);
__d("MessengerMentionsEntityDecorator.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("span",{className:"_fy2"},this.props.children)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("createMessengerMentionDraftEntity",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return i.createEntity("MENTION","SEGMENTED",{mid:j.getUniqueID()})}f.exports=h}),null);
__d("getProfileRangesForContentState",["EmojiFormat","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("emptyFunction").thatReturnsTrue;function i(j,k){__p&&__p();var l=[],m=0;j.getBlockMap().forEach(function(n){__p&&__p();var o=0,p=n.getText();n.findEntityRanges(h,function(q,r){__p&&__p();var s=n.getEntityAt(q);if(s){var t=j.getEntity(s);if(t.getType()==="EMOTICON")o+=t.getData().originalEmoticon.length-1;else if(t.getType()==="EMOJI"){var u=t.getData().type,v=c("EmojiFormat").codeStringToCodeArray(u),w=String.fromCodePoint.apply(String,v);o+=w.length-1}else if(t.getType()==="MENTION"){var x=t.getData().mid,y=q+o+m,z=x===k;if(/^\d+$/.test(x)||z)l.push({id:x,offset:y,length:r-q,type:z?"t":"p"})}}});m+=p.length+o+1});return l}f.exports=i}),null);
__d("getVisibleValueForContentStateWithMessengerEmoji",["EmojiFormat","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=i.getBlockMap().map(function(k){__p&&__p();var l=k.getText(),m="";k.findEntityRanges(c("emptyFunction").thatReturnsTrue,function(n,o){__p&&__p();var p=k.getEntityAt(n);if(!p)m+=l.slice(n,o);else{var q=i.getEntity(p);if(q.getType()==="EMOTICON")m+=q.getData().originalEmoticon;else if(q.getType()==="EMOJI"){var r=q.getData().type,s=c("EmojiFormat").codeStringToCodeArray(r);m+=String.fromCodePoint.apply(String,s)}else m+=l.slice(n,o)}});return m});return j.join("\n")}f.exports=h}),null);
__d("insertMessengerEmojiIntoContentState",["DraftModifier","EmojiFormat"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){var m=j.createEntity("EMOJI","IMMUTABLE",{type:i}),n=m.getLastCreatedEntityKey();return c("DraftModifier").insertText(j,k,c("EmojiFormat").codeStringToUnicode(i),l,n)}f.exports=h}),null);
__d("handleBeforeInputForMessengerEmoji",["EditorState","MessengerSupportedEmojiUtils","insertMessengerEmojiIntoContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=i.getSelection();if(!k.isCollapsed()||!j)return i;var l=c("MessengerSupportedEmojiUtils").getEmojiMatchObj(j);if(!l||!l.is_supported)return i;var m=c("insertMessengerEmojiIntoContentState")(l.emoji_key,i.getCurrentContent(),k,i.getCurrentInlineStyle());return c("EditorState").push(i,m,"insert-characters")}f.exports=h}),null);
__d("applyMessengerEmoticonToContentBlock",["CharacterMetadata","EmoticonEmojiList","immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").List,i="\u3000";function j(k,l,m,n){if(!c("EmoticonEmojiList").names[m])return l;var o=k.createEntity("EMOTICON","IMMUTABLE",{type:c("EmoticonEmojiList").names[m],originalEmoticon:m}),p=o.getLastCreatedEntityKey(),q=l.getText(),r=l.getCharacterList(),s=m.length,t=r.get(n);return l.merge({text:q.slice(0,n)+i+q.slice(n+s),characterList:r.slice(0,n).concat(h.of(c("CharacterMetadata").applyEntity(t,p)),r.slice(n+s))})}f.exports=j}),null);
__d("getTextAfterNearestEntity",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=j;while(k>0&&i.getEntityAt(k-1)===null)k--;return i.getText().slice(k,j)}f.exports=h}),null);
__d("applyMessengerEmoticonToContentState",["EmoticonEmojiList","applyMessengerEmoticonToContentBlock","getTextAfterNearestEntity"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=j.getAnchorKey(),l=j.getAnchorOffset(),m=i.getBlockForKey(k),n=c("getTextAfterNearestEntity")(m,l),o=c("EmoticonEmojiList").regexp.exec(n);if(!o)return i;var p=o[1];if(!p&&l!==n.length)return i;var q=o[2],r=l-n.length,s=r+o.index+o[1].length,t=i.getBlockMap().set(k,c("applyMessengerEmoticonToContentBlock")(i,m,q,s));l-=q.length-1;return i.merge({blockMap:t,selectionBefore:j,selectionAfter:j.merge({anchorOffset:l,focusOffset:l})})}f.exports=h}),null);
__d("handleBeforeInputForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new RegExp(/[\s\'\".,!?]/);function i(j,k){var l=j.getSelection();if(!l.isCollapsed()||!k||!h.test(k))return j;var m=j.getCurrentContent(),n=c("applyMessengerEmoticonToContentState")(m,l);if(n===m)return j;var o=c("DraftModifier").insertText(n,n.getSelectionAfter(),k);return c("EditorState").push(j,o,"insert-characters")}f.exports=i}),null);
__d("handleSoftNewlineForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getCurrentContent(),k=i.getSelection(),l=c("applyMessengerEmoticonToContentState")(j,k),m=c("DraftModifier").splitBlock(l,j===l?k:l.getSelectionAfter());return c("EditorState").push(i,m,"split-block")}f.exports=h}),null);
__d("applyEmoticonToContentBlock",["CharacterMetadata","DraftEntity","EmoticonsList","immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").List,i="\u3000";function j(k,l,m){if(!c("EmoticonsList").emotes[l])return k;var n=c("DraftEntity").create("EMOTICON","IMMUTABLE",{type:c("EmoticonsList").emotes[l],originalEmoticon:l}),o=k.getText(),p=k.getCharacterList(),q=l.length,r=p.get(m);return k.merge({text:o.slice(0,m)+i+o.slice(m+q),characterList:p.slice(0,m).concat(h.of(c("CharacterMetadata").applyEntity(r,n)),p.slice(m+q))})}f.exports=j}),null);
__d("insertEmoticonIntoContentState",["DraftModifier","applyEmoticonToContentBlock"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l=c("DraftModifier").replaceText(j,k,i),m=k.getAnchorKey(),n=k.getAnchorOffset(),o=l.getBlockForKey(m),p=l.getBlockMap().set(m,c("applyEmoticonToContentBlock")(o,i,n));n++;return j.merge({blockMap:p,selectionBefore:k,selectionAfter:k.merge({anchorOffset:n,focusOffset:n})})}f.exports=h}),null);
__d("insertEmoticonIntoEditorState",["DraftModifier","EditorState","insertEmoticonIntoContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=" ";function i(j,k){__p&&__p();var l=k.getSelection(),m=k.getCurrentContent(),n=l.getStartOffset(),o=l.getEndOffset(),p=m.getBlockForKey(l.getStartKey()).getText(),q=m.getBlockForKey(l.getEndKey()).getText(),r="";if(o<=q.length&&q[o]!==h)r=h;if(n>0&&p[n-1]!==h){m=c("DraftModifier").insertText(m,l,h);l=m.getSelectionAfter()}var s=c("insertEmoticonIntoContentState")(j,m,l);m=c("DraftModifier").insertText(s,s.getSelectionAfter(),r);return c("EditorState").push(k,m,"insert-characters")}f.exports=i}),null);
__d("messengerUploadFilesUtilRe",["bs_array","bs_curry","FantaTypeFileUploader"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i=(h={},h[c("FantaTypeFileUploader").fileTypes.ANIMATED_IMAGE]="gif_ids",h[c("FantaTypeFileUploader").fileTypes.AUDIO]="audio_ids",h[c("FantaTypeFileUploader").fileTypes.FILE]="file_ids",h[c("FantaTypeFileUploader").fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",h[c("FantaTypeFileUploader").fileTypes.IMAGE]="image_ids",h[c("FantaTypeFileUploader").fileTypes.VIDEO]="video_ids",h);function j(n,o){if(n==null)return null;else{var p=n.getTypeIDs(o);if(p.length)return p;else return null}}function k(n){__p&&__p();if(n==null)return 0;else{var o=n.get("uploadedFiles"),p=[],q=[],r=[];o.forEach(function(s,t,u){__p&&__p();var v=s.file;if(v.type.startsWith("image/")){p.push(v);return 0}else if(v.type.startsWith("video/")){q.push(v);return 0}else{r.push(v);return 0}});return[[p,q,r]]}}function l(n,o){if(o.length)return c("bs_curry")._1(n,o);else return 0}function m(n,o){__p&&__p();if(n==null)return 0;else if(o==null)return 0;else{var p=k(n);if(p){var q=p[0];c("bs_array").iter(function(r){return l(o,[r])},q[1]);l(o,q[0]);return l(o,q[2])}else return 0}}g.supportAttachments=i;g.getAttachmentIDs=j;g.getAttachments=k;g.sendAttchment=l;g.sendAttchments=m}),null);
__d("ChatInput.react",["AbstractMentionsTextEditor.react","BootloadedComponent.react","Bootloader","CompositeDraftDecorator","ContentState","DraftModifier","EditorState","EmojiFormat","ifRequired","JSResource","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","messengerUploadFilesUtilRe","React","ReactDOM","cancelAnimationFrame","clearImmediate","createMessengerMentionDraftEntity","createCancelableFunction","debounce","emptyFunction","getDefaultKeyBinding","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","insertEmoticonIntoEditorState","insertMentionIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","setImmediate","requestAnimationFrame","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=c("emptyFunction").thatReturnsNull,l=1,m="handled",n=8,o="not-handled";h=babelHelpers.inherits(p,c("React").Component);i=h&&h.prototype;function p(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=i.constructor).call.apply(r,[this].concat(u)),this.$ChatInput4=c("createCancelableFunction")(function(w,x){var y=w.participants,z=w.viewer,A=w.thread;this.setState({mentionsSource:x(z,y,A,c("gkx")("AT49sw5n0nlIyoqYGYpRJXtOnRzCLqSpsmIoWA7hmyYTaoQcU5JHlDW_AWGZ_laa8hQ933FOWyuLNLlpGxYhTnOb"))})}.bind(this)),this.$ChatInput6=function(){var w=this.$ChatInput8(this.state.editorState.getCurrentContent());this.$ChatInput1=c("setImmediate")(function(){this.$ChatInput1=null;var x=c("EditorState").set(this.state.editorState,{decorator:w});this.setState({editorState:x})}.bind(this))}.bind(this),this.onChange=function(w){if(w!==this.state.editorState){this.setState({editorState:w});this.$ChatInput3(w)}}.bind(this),this.onReturn=function(event,w){__p&&__p();if(c("isSoftNewlineEvent")(event)){var x=c("handleSoftNewlineForMessengerEmoticon");this.setState({editorState:x(w)});return m}event.persist();this.setState({},function(){if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("messengerUploadFilesUtilRe").sendAttchments(this.props.fileUploader,this.props.uploadPhotoFn);this.props.inputKeyDown(event,this.getValue())}.bind(this));return m}.bind(this),this.getValue=function(){return this.getValueFromEditorState(this.state.editorState)}.bind(this),this.$ChatInput9=function(w,x){this.props.onBeforeInput&&this.props.onBeforeInput();var y=this.$ChatInput10(w,x),z=this.$ChatInput11(w,x);return y||z?m:o}.bind(this),this.$ChatInput13=function(w){return this.$ChatInput12(w)}.bind(this),this.$ChatInput14=function(w,x){return this.$ChatInput12(x)}.bind(this),this.state={editorState:this.$ChatInput7(this.props.defaultText)},this.$ChatInput16=function(){var w=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:w})}.bind(this),this.$ChatInput18=function(w,x){var y=(this.state.mentionsTriggeredCount||0)+1,z={mentionsTriggeredCount:y};if(!this.state.mentionsTriggerSource)z.mentionsTriggerSource=x===l?c("MessengerMentionSource").ATSIGN:c("MessengerMentionSource").TYPEAHEAD;this.setState(z)}.bind(this),this.$ChatInput17=function(w){if(!this.refs.input.isShowingMentionables())this.props.onEscape&&this.props.onEscape(w)}.bind(this),s}p.prototype.componentDidMount=function(){__p&&__p();this.$ChatInput2=c("ReactDOM").findDOMNode(this).getBoundingClientRect().height;this.props.resizeFn(this.$ChatInput2);this.props.initializeThingsWithInputFn(c("ReactDOM").findDOMNode(this.refs.input),this.getValue);this.setState({triggeredWord:this.props.triggeredWord});var r=this.props.onTextChange;this.$ChatInput3=r?c("debounce")(function(s){r(this.getValueFromEditorState(s),200)}.bind(this),200):c("emptyFunction");c("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],this.$ChatInput4.bind(this,this.props),"ChatInput.react");if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("Bootloader").loadModules(["FantaMessageActions"],c("emptyFunction"),"ChatInput.react")};p.prototype.componentWillUnmount=function(){if(this.$ChatInput1)c("clearImmediate")(this.$ChatInput1);if(this.$ChatInput5)c("cancelAnimationFrame")(this.$ChatInput5);this.$ChatInput4.cancel();this.$ChatInput5=null};p.prototype.componentWillReceiveProps=function(r){if(this.state.triggeredWord!==r.triggeredWord)this.setState({triggeredWord:r.triggeredWord},this.$ChatInput6);if(!this.props.thread||!r.thread||q(r,this.props))c("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],this.$ChatInput4.bind(this,r),"ChatInput.react")};p.prototype.componentDidUpdate=function(){this.$ChatInput5=c("requestAnimationFrame")(function(){if(!this.$ChatInput5)return;this.$ChatInput5=null;var r=c("ReactDOM").findDOMNode(this).getBoundingClientRect(),s=r.height;if(this.$ChatInput2!==s)this.props.resizeFn(s);this.$ChatInput2=s}.bind(this))};p.prototype.$ChatInput7=function(r){var s=c("ContentState").createFromText(r);return c("EditorState").createWithContent(s,this.$ChatInput8(s))};p.prototype.resetState=function(){if(this.state.typeaheadReporter){this.state.typeaheadReporter.sessionEnd();this.state.typeaheadReporter.sessionStart()}this.setState({editorState:c("EditorState").moveFocusToEnd(this.$ChatInput7("")),triggeredWord:null,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null})};p.prototype.resetAfterSend=function(r){var s,t=this,u=this.getMentions();if(r&&(u&&u.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource))(function(){var v=t.state,w=v.addedMentionsCount,x=v.mentionsTriggeredCount,y=v.mentionsTriggerSource,z=t.props,A=z.thread,B=z.participants;c("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(C,D){new C().setEvent(D.MENTION).setGroupSize(B&&B.length).setNumDelivered(u?u.length:0).setNumSelects(w).setNumTriggers(x).setThreadid(A&&A.thread_id).setThreadType(c("getThreadTypeNameFromThreadType")(A&&A.thread_type)).setOfflineThreadid(r.offline_threading_id).updateExtraData({source:y}).log()},"ChatInput.react")})();this.resetState()};p.prototype.$ChatInput8=function(r){var s=[{strategy:c("getEntityMatcher")(function(t){return t.getType()==="EMOTICON"},r.getEntity),component:c("MessengerEmoticonSpan.react")}];s.push({strategy:c("getEntityMatcher")(function(t){return t.getType()==="EMOJI"},r.getEntity),component:c("MessengerEmojiSpan.react")});s.push({strategy:c("getEntityMatcher")(function(t){return t.getType()==="MENTION"},r.getEntity),component:c("MessengerMentionsEntityDecorator.react")});return new(c("CompositeDraftDecorator"))(s)};p.prototype.getValueFromEditorState=function(r){var s=r.getCurrentContent();return c("getVisibleValueForContentStateWithMessengerEmoji")(s)};p.prototype.getMentions=function(){var r=this.props.thread;return c("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),r?r.thread_fbid:null)};p.prototype.focus=function(){this.refs.input&&this.refs.input.focus&&this.refs.input.focus()};p.prototype.$ChatInput10=function(r,s){var t=c("handleBeforeInputForMessengerEmoticon")(s,r);if(t===s)return false;this.setState({editorState:t});return true};p.prototype.$ChatInput11=function(r,s){var t=c("handleBeforeInputForMessengerEmoji")(s,r);if(t===s)return false;this.setState({editorState:t});return true};p.prototype.$ChatInput12=function(r){__p&&__p();var s=/^image\//,t=r.filter(function(u){return s.test(u.type)});if(t.length){if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("ifRequired")("FantaMessageActions",function(u){u.prepareFilesForSend(this.props.threadID,t)}.bind(this),function(){c("Bootloader").loadModules(["FantaMessageActions"],function(u){u.prepareFilesForSend(this.props.threadID,t)}.bind(this),"ChatInput.react")}.bind(this));else this.props.uploadPhotoFn(t[0]);return true}return false};p.prototype.insertEmoticon=function(r){var s=c("insertEmoticonIntoEditorState")(r,this.state.editorState);if(s!==this.state.editorState)this.setState({editorState:s})};p.prototype.insertEmoji=function(r){var s=this.state.editorState,t=c("insertMessengerEmojiIntoContentState")(c("EmojiFormat").codeArrayToCodeString(r),s.getCurrentContent(),s.getSelection(),s.getCurrentInlineStyle()),u=c("EditorState").push(s,t,"insert-characters");if(u!==this.state.editorState)this.setState({editorState:c("EditorState").forceSelection(u,t.getSelectionAfter())})};p.prototype.appendText=function(r){var s=this.state.editorState,t=s.getSelection(),u=s.getCurrentContent();u=c("DraftModifier").insertText(u,t,r);s=c("EditorState").push(s,u,"insert-characters");this.setState({editorState:s})};p.prototype.render=function(){var r=babelHelpers["extends"]({},this.props,this.$ChatInput15());return c("React").createElement(c("AbstractMentionsTextEditor.react"),babelHelpers["extends"]({ref:"input"},r,{editorState:this.state.editorState,onChange:this.onChange,handleBeforeInput:this.$ChatInput9,handlePastedFiles:this.$ChatInput13,handleDroppedFiles:this.$ChatInput14,handleReturn:this.onReturn,spellCheck:true,stripPastedStyles:true,textAlignment:"left"}))};p.prototype.$ChatInput15=function(){return{autoHighlight:true,handleContentReturn:this.onReturn,maxResults:n,mentionResultsProps:{typeaheadView:c("BootloadedComponent.react").create(c("JSResource")("ChatMentionsInputTypeaheadView.react").__setRef("ChatInput.react")),typeaheadViewProps:{},position:"above",autoflip:true},mentionResultsComponent:c("BootloadedComponent.react").create(c("JSResource")("MentionsLayer.react").__setRef("ChatInput.react")),mentionCreationForContentStateFn:c("createMessengerMentionDraftEntity"),mentionsSource:this.state.mentionsSource,onAddMention:this.$ChatInput16,onEscape:this.$ChatInput17,onShowMentions:this.$ChatInput18}};p.prototype.addMention=function(r){var s=c("insertMentionIntoEditorState")(r,this.state.editorState,0,c("createMessengerMentionDraftEntity"));if(!this.state.mentionsTriggerSource)this.setState({mentionsTriggerSource:c("MessengerMentionSource").REPLY});this.onChange(s);this.$ChatInput16()};p.propTypes={blockStyleFn:j.func,fileUploader:j.object,initializeThingsWithInputFn:j.func,inputKeyDown:j.func,keyBindingFn:j.func,onBeforeInput:j.func,onBlur:j.func,onEscape:j.func,onFocus:j.func,onTab:j.func,resizeFn:j.func,thread:j.object,threadID:j.string,viewer:j.string};p.defaultProps={blockStyleFn:k,keyBindingFn:c("getDefaultKeyBinding")};function q(r,s){var t=r.participants,u=s.participants;if(!t||!u)return true;var v=t.filter(Boolean),w=u.filter(Boolean);return v.length!==w.length}f.exports=p}),null);
__d("ChatPhotoUploader.react",["cx","fbt","Promise","Bootloader","ifRequired","InlineBlock.react","Link.react","MercuryConfig","MessengerEnvironment","React","ReactDOM","SubscriptionsHandler","emptyFunction","gkx","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatPhotoUploader",_uploader:null,_uploaderPromiseIsResolving:false,_uploaderPromise:null,_subscriptions:null,propTypes:{actionURI:j.string,allowCrossPage:j.bool,customUI:j.bool,disabled:j.bool,imageClassName:j.string,imagesOnly:j.bool,inputClassname:j.string,linkClassName:j.string,threadID:j.string,focusInput:j.func,onSubmit:j.func,onAllUploadsComplete:j.func,onLastUploadFail:j.func,onLastUploadCancel:j.func,onMount:j.func,onUploadError:j.func},getDefaultProps:function l(){return{actionURI:c("MercuryConfig").upload_url,allowCrossPage:true,costomUI:false,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:"",onSubmit:c("emptyFunction"),onAllUploadsComplete:c("emptyFunction"),onLastUploadFail:c("emptyFunction"),onLastUploadCancel:c("emptyFunction")}},shouldComponentUpdate:function l(m){return m.actionURI!=this.props.actionURI||m.disabled!==this.props.disabled},componentDidMount:function l(){if(this.props.onMount)this.props.onMount(this);if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("MessengerEnvironment").messengerui?c("Bootloader").loadModules(["MessengerActions"],c("emptyFunction"),"ChatPhotoUploader.react"):c("Bootloader").loadModules(["FantaMessageActions"],c("emptyFunction"),"ChatPhotoUploader.react")},componentDidUpdate:function l(m){if(this._uploader)this._uploader.setAllowCrossPage(this.props.allowCrossPage)},componentWillUnmount:function l(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup()},render:function l(){var m=this.props.imagesOnly?i._("Add Photos"):i._("Add Files"),n=c("joinClasses")("_4q61"+(!this.props.customUI?" _5f0v":"")+(!this.props.customUI?" _509v":""),this.props.linkClassName),o=c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw");return c("React").createElement("form",{action:this.props.actionURI,className:"_vzk",title:m,method:"post",onClick:function(p){p.stopPropagation();if(this.props.disabled)p.preventDefault()}.bind(this),ref:"form"},c("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),c("React").createElement("input",{type:"hidden",name:"images_only",value:this.props.imagesOnly}),c("React").createElement(c("InlineBlock.react"),{onClick:o?c("emptyFunction"):this._bootloadChatAutoSendPhotoUploader,className:c("joinClasses")(this.props.className,"_m _4q60 _3rzn")},c("React").createElement("input",{disabled:this.props.disabled,type:"file",className:c("joinClasses")(this.props.inputClassname,"_n _2__f"),name:"attachment[]",multiple:"true",accept:this.props.imagesOnly?"image/*":"*",ref:"input",title:m,onChange:o?function(event){this._handleInputOnChange(event,this.props.threadID)}.bind(this):c("emptyFunction")}),c("React").createElement(c("Link.react"),{className:n,tabIndex:-1},c("React").createElement("i",{className:this.props.imageClassName,alt:i._("Camera")}))))},_handleInputOnChange:function l(event,m){c("MessengerEnvironment").messengerui?c("ifRequired")("MessengerActions",function(n){return n.prepareFilesForSend(m,event.target.files)},function(){c("Bootloader").loadModules(["MessengerActions"],function(n){n.prepareFilesForSend(m,event.target.files)},"ChatPhotoUploader.react")}):c("ifRequired")("FantaMessageActions",function(n){return n.prepareFilesForSend(this.props.threadID,event.target.files)}.bind(this),function(){c("Bootloader").loadModules(["FantaMessageActions"],function(n){n.prepareFilesForSend(this.props.threadID,event.target.files)}.bind(this),"ChatPhotoUploader.react")}.bind(this));this.props.focusInput&&this.props.focusInput()},_handleSubmit:function l(m,n){this.props.onSubmit&&this.props.onSubmit(m,n)},_handleAllUploadsCompleted:function l(m,n){this.props.onAllUploadsComplete&&this.props.onAllUploadsComplete(m,n);if(!this.isMounted())this._cleanup()},_handleLastUploadFailed:function l(m,n){this.props.onLastUploadFail&&this.props.onLastUploadFail(m,n);if(!this.isMounted())this._cleanup()},_handleLastUploadCanceled:function l(m,n){this.props.onLastUploadCancel&&this.props.onLastUploadCancel(m,n);if(!this.isMounted())this._cleanup()},_handleUploadError:function l(m,n){this.props.onUploadError&&this.props.onUploadError(n);if(!this.isMounted())this._cleanup()},isUploading:function l(){return this._uploader&&this._uploader.isUploading()||this._uploaderPromiseIsResolving},_bootloadChatAutoSendPhotoUploader:function l(){__p&&__p();if(!this._uploaderPromise){this._uploaderPromiseIsResolving=true;this._uploaderPromise=new(c("Promise"))(function(m){c("Bootloader").loadModules(["ChatAutoSendPhotoUploader"],function(n){this._uploaderPromiseIsResolving=false;var o=new n(c("ReactDOM").findDOMNode(this.refs.form),c("ReactDOM").findDOMNode(this.refs.input),c("ReactDOM").findDOMNode(this.refs.attachID),c("MercuryConfig").msgr_region);o.setAllowCrossPage(this.props.allowCrossPage);var p=new(c("SubscriptionsHandler"))();p.addSubscriptions(o.subscribe("submit",this._handleSubmit),o.subscribe("all-uploads-completed",this._handleAllUploadsCompleted),o.subscribe("last-upload-failed",this._handleLastUploadFailed),o.subscribe("last-upload-canceled",this._handleLastUploadCanceled),o.subscribe("file-upload-error",this._handleUploadError));this._subscriptions=p;this._uploader=o;m(this._uploader)}.bind(this),"ChatPhotoUploader.react")}.bind(this))}return this._uploaderPromise},uploadFiles:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadFiles(m)}).done()},uploadURL:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadURL(m)}).done()},_cleanup:function l(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy()}});f.exports=k}),null);
__d("ChatEventPlanButton.react",["cx","fbt","Bootloader","BootloadOnRender.react","ChatFlyoutPlaceholder.react","EventsActionsLogger","EventReminderActionsLogger","JSResource","LazyComponent.react","Link.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={showFlyout:false},this.$ChatEventPlanButton2=false,this.$ChatEventPlanButton3=function(){__p&&__p();c("EventReminderActionsLogger").logClickOnEntryPoint();c("Bootloader").loadModules(["EventReminderStateStore","EventReminderRequestHelper"],function(r,s){__p&&__p();var t=r.getEvent(this.props.threadID);if(!this.$ChatEventPlanButton2)return;if(t&&t.exists){this.$ChatEventPlanButton1=true;if(!this.state.showFlyout)s.fetchEventReminder(this.props.threadID,t.eventID,function(){if(!this.$ChatEventPlanButton2)return;this.setState({showFlyout:true})}.bind(this));else this.setState({showFlyout:false})}else{this.$ChatEventPlanButton1=false;this.setState({showFlyout:!this.state.showFlyout})}}.bind(this),"ChatEventPlanButton.react")}.bind(this),this.onToggle=function(r){if(r!==this.state.showFlyout)this.setState({showFlyout:r})}.bind(this),n}l.prototype.componentDidMount=function(){this.$ChatEventPlanButton2=true};l.prototype.componentWillUnmount=function(){this.$ChatEventPlanButton2=false};l.prototype.render=function(){var m="_6gb _3k_u";return c("React").createElement("div",null,c("React").createElement(c("Link.react"),{className:m,onClick:this.$ChatEventPlanButton3,ref:"event_plan",role:"button",title:i._("Start a plan")},this.$ChatEventPlanButton4()))};l.prototype.$ChatEventPlanButton4=function(){if(!this.state.showFlyout)return null;var m={alignment:"right",position:"above",contextRef:function(){return this.refs.event_plan}.bind(this),shown:this.state.showFlyout,onToggle:this.onToggle},n={action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.MESSENGER_COMPOSER}]};return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{actionContext:n,dialogProps:m,flyoutNoSheet:true,isEditing:this.$ChatEventPlanButton1,threadID:this.props.threadID}),loader:c("JSResource")("ChatEventReminderContainer.react").__setRef("ChatEventPlanButton.react"),placeholder:c("React").createElement(c("ChatFlyoutPlaceholder.react"),null)})};f.exports=l}),null);
__d("CustomColorHighlighting.react",["cssVar","csx","cx","React","UserAgent","guid","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n="._fy2",o="._43by",p="._mh6",q=c("UserAgent").isEngine("Gecko")?"._mh6 *::-moz-selection":"._mh6 ::selection",r=c("UserAgent").isEngine("Gecko")?"._43by *::-moz-selection":"._43by ::selection",s=n+n,t=o+o,u=p+q,v=p+p,w=o+r,x="rgba(255, 255, 255, 0.3)";k=babelHelpers.inherits(y,c("React").PureComponent);l=k&&k.prototype;function y(z){l.constructor.call(this,z);this.state={id:"cch_"+c("guid")()}}y.prototype.componentWillMount=function(){this.$CustomColorHighlighting1()};y.prototype.componentWillUnmount=function(){this.$CustomColorHighlighting2();if(this.state.styleTag)document.head.removeChild(this.state.styleTag)};y.prototype.componentWillReceiveProps=function(z){if(this.props.customColor&&!z.customColor)this.$CustomColorHighlighting2();else if(z.customColor!==this.props.customColor)this.$CustomColorHighlighting3(z.customColor)};y.prototype.render=function(){return c("React").createElement("span",{className:c("joinClasses")("_mh6",this.props.className),id:this.state.id},this.props.children)};y.prototype.$CustomColorHighlighting1=function(){var z=document.createElement("style");z.appendChild(document.createTextNode(""));document.head.appendChild(z);this.setState({styleSheet:z.sheet,styleTag:z},function(){return this.$CustomColorHighlighting3(this.props.customColor)}.bind(this))};y.prototype.$CustomColorHighlighting4=function(z,A,B){if(z.insertRule)z.insertRule(A+"{"+B+"}",0);else if(z.addRule)z.addRule(A,B,0)};y.prototype.$CustomColorHighlighting5=function(z){if("removeRule"in z)z.removeRule(0);else if("deleteRule"in z)z.deleteRule(0)};y.prototype.$CustomColorHighlighting2=function(){if(this.state.styleSheet){if(this.state.styleSheet.rules)while(this.state.styleSheet.rules.length)this.$CustomColorHighlighting5(this.state.styleSheet);if(this.state.styleSheet.cssRules)while(this.state.styleSheet.cssRules.length)this.$CustomColorHighlighting5(this.state.styleSheet)}};y.prototype.$CustomColorHighlighting6=function(z){var A=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z),B=parseInt(A[1],16),C=parseInt(A[2],16),D=parseInt(A[3],16);return"rgba("+B+","+C+","+D+",0.2)"};y.prototype.$CustomColorHighlighting3=function(z){this.$CustomColorHighlighting2();var A=z||this.props.customColor;if(A){var B=this.$CustomColorHighlighting6(A),C="background: "+B;this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+u,C);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+" "+s,"color: "+A);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+" "+t,"background-color: "+A);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+v+" "+w,"background-color: "+x)}};y.propTypes={className:m.string,customColor:m.string};f.exports=y}),null);
__d("MNBotsLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BOT_COMPOSER_MENU_ICON_DISPLAYED:"bot_composer_menu_icon_displayed",BOT_COMPOSER_MENU_ICON_TAPPED:"bot_composer_menu_icon_tapped",BOT_COMPOSER_MENU_ITEM_DID_SELECT:"bot_composer_menu_item_did_select",BOT_COMPOSER_QUICK_REPLY_DISPLAYED:"bot_composer_quick_reply_displayed",BOT_COMPOSER_QUICK_REPLY_TAPPED:"bot_composer_quick_reply_tapped"})}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1193572474099061"};j.getQueryID=function(){"use strict";return"1132183563559860"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("XMessengerBotsMenuController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messenger/commerce/bots/menu/",{page_id:{type:"String",required:true}})}),null);
__d("MessengerBotMenuDataFetcher",["AsyncRequest","Cache","MessengerBotComposerWebGraphQLQuery","XMessengerBotsMenuController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$MessengerBotMenuDataFetcher1=new(c("Cache"))();this.$MessengerBotMenuDataFetcher2=new(c("Cache"))()}h.prototype.getMenuItems=function(i,j,k){__p&&__p();if(this.$MessengerBotMenuDataFetcher1.has(i)){j(this.$MessengerBotMenuDataFetcher1.get(i));return}var l=c("XMessengerBotsMenuController").getURIBuilder().setString("page_id",i).getURI();new(c("AsyncRequest"))().setURI(l).setHandler(function(m){var n=m.payload.menu;this.$MessengerBotMenuDataFetcher1.set(i,n);j(n)}.bind(this)).setErrorHandler(function(m){k()}).send()};h.prototype.getHasPageSetting=function(i,j,k,l){__p&&__p();if(!this.$MessengerBotMenuDataFetcher2.has(i)){var m=c("MessengerBotComposerWebGraphQLQuery").getURI({node_id:i});new(c("AsyncRequest"))().setURI(m).setHandler(function(o){var p=o.payload.data.node,n=p&&p.commerce_page_settings||[];this.$MessengerBotMenuDataFetcher2.set(i,n);j(n.indexOf(l)!==-1)}.bind(this)).setErrorHandler(function(o){this.$MessengerBotMenuDataFetcher2.set(i,[]);k()}.bind(this)).send()}var n=this.$MessengerBotMenuDataFetcher2.get(i)||[];j(n.indexOf(l)!==-1);return n.indexOf(l)!==-1};f.exports=new h()}),null);
__d("MessengerBotMenuButton.react",["BootloadOnRender.react","ChatFlyoutPlaceholder.react","JSResource","LazyComponent.react","Link.react","MessengerBotMenuDataFetcher","MessengerBotsWebTypedLogger","MessengerContextualDialog.react","MessengerEnvironment","MNBotsLoggerEvents","React","XUIContextualDialog.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=302,l=280;h=babelHelpers.inherits(m,c("React").Component);i=h&&h.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MessengerBotMenuButton1=false,this.state={flyoutOpen:false,isLoading:false,menuItems:null},this.$MessengerBotMenuButton2=function(){this.setState({flyoutOpen:false})}.bind(this),this.$MessengerBotMenuButton6=function(){if(this.state.flyoutOpen)this.$MessengerBotMenuButton2()}.bind(this),this.$MessengerBotMenuButton4=function(){this.$MessengerBotMenuButton1=this.state.flyoutOpen}.bind(this),this.$MessengerBotMenuButton3=function(event){event.stopPropagation();if(this.state.flyoutOpen||this.$MessengerBotMenuButton1)return;if(this.state.menuItems===null){this.setState({isLoading:true});this.$MessengerBotMenuButton7()}this.setState({flyoutOpen:!this.state.flyoutOpen})}.bind(this),o}m.prototype.componentDidMount=function(){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log()};m.prototype.componentWillUnmount=function(){if(this.state.flyoutOpen)this.$MessengerBotMenuButton2()};m.prototype.render=function(){return c("React").createElement("span",null,c("React").createElement(c("Link.react"),{className:this.props.className,href:"#",onClick:this.$MessengerBotMenuButton3,onMouseDown:this.$MessengerBotMenuButton4,role:"button",ref:"link"}),this.$MessengerBotMenuButton5())};m.prototype.$MessengerBotMenuButton5=function(){if(!this.state.flyoutOpen)return null;var n=c("MessengerEnvironment").messengerui,o=n?k:l,p=n?c("MessengerContextualDialog.react"):c("XUIContextualDialog.react");return c("React").createElement(p,babelHelpers["extends"]({alignment:this.props.flyoutAlignment,width:o,position:"above",contextRef:function(){return this.refs.link}.bind(this),onBeforeHide:this.$MessengerBotMenuButton6,onBlur:this.$MessengerBotMenuButton2,shown:this.state.flyoutOpen},this.props,{key:"contextualDialog"}),c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{onEscKeyDown:this.$MessengerBotMenuButton2,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$MessengerBotMenuButton2}),loader:c("JSResource")("MessengerBotMenuDialog.react").__setRef("MessengerBotMenuButton.react"),placeholder:c("React").createElement(c("ChatFlyoutPlaceholder.react"),null)}))};m.prototype.$MessengerBotMenuButton7=function(){c("MessengerBotMenuDataFetcher").getMenuItems(this.props.pageID,function(n){this.setState({menuItems:n,isLoading:false})}.bind(this),function(){this.setState({menuItems:[],isLoading:false})}.bind(this))};m.propTypes={className:j.string,flyoutAlignment:j.string.isRequired,threadID:j.string.isRequired,pageID:j.string.isRequired};f.exports=m}),null);
__d("MercuryTriodeSourceUtil",["MessengerEnvironment","MercurySourceType"],(function a(b,c,d,e,f,g){"use strict";var h={getMercuryTriodeSource:function i(){return c("MessengerEnvironment").messengerdotcom?c("MercurySourceType").MESSENGER_WEB:c("MercurySourceType").TITAN_WEB}};f.exports=h}),null);
__d("MessengerHotLikeOutlineSVG.react",["cssVar","fbt","CurrentUser","React","MercuryShareAttachmentRenderLocations","uniqueID","UserAgent"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="transparent",n=i._("Thumbs Up Sign");j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={titleId:c("uniqueID")()},q}o.prototype.render=function(){var p=this.props.color||(c("CurrentUser").isWorkUser()?"#1479fb":"#0084ff"),q=c("UserAgent").isBrowser("Safari")?"0 0 40.16 42.24":"-1 -1 40.16 42.24",r={height:this.props.height||"85%"};if(this.props.location!==c("MercuryShareAttachmentRenderLocations").CHAT&&this.props.location!==c("MercuryShareAttachmentRenderLocations").PAGES_INBOX)r.width="66%";return c("React").createElement("svg",{"aria-labelledby":this.state.titleId,version:"1.1",viewBox:q,preserveAspectRatio:"xMinYMax meet",style:r},c("React").createElement("title",{id:this.state.titleId},n),c("React").createElement("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:m,fillRule:"evenodd",stroke:p,strokeLinecap:"round",strokeWidth:"5%"}))};o.propTypes={color:l.string,height:l.string,location:l.string};f.exports=o}),null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],(function a(b,c,d,e,f,g){"use strict";var h={START:"start",STOP:"stop",STOP_EMOJI:"stop_emoji",POP:"pop",REMOVE:"remove",FINISH_ANIMATION:"finish_animation",FINISH_EMOJI_ANIMATION:"finish_emoji_animation"};c("mixInEventEmitter")(h,{start:true,stop:true,stop_emoji:true,pop:true,remove:"remove",finish_animation:"finish_animation",finish_emoji_animation:"finish_emoji_animation"});f.exports=h}),null);
__d("MessengerHotLikeUtils",["EmojiLikeConstants","StickerAssetType","StickerConstants","XStickerAssetController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={SizeTimes:{small:1e3,medium:2e3,large:3e3},getStickerIDForTime:function i(j){var k=c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;switch(true){case j<this.SizeTimes.small:k=c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;break;case j<this.SizeTimes.medium:k=c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID;break;case j<this.SizeTimes.large:k=c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;break}return k},getEmojiSizeForTime:function i(j){var k=c("EmojiLikeConstants").size.SMALL;if(j<this.SizeTimes.small)k=c("EmojiLikeConstants").size.SMALL;else if(j<this.SizeTimes.medium)k=c("EmojiLikeConstants").size.MEDIUM;else if(j<this.SizeTimes.large)k=c("EmojiLikeConstants").size.LARGE;return k},getMetadataForHotLike:function i(j){__p&&__p();var k=void 0;switch(j){case c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:k=120;break;case c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID:k=84;break;case c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID:k=35;break;case c("EmojiLikeConstants").size.LARGE:k=64;break;case c("EmojiLikeConstants").size.MEDIUM:k=64;break;case c("EmojiLikeConstants").size.SMALL:k=32;break}return k?{height:k,width:k}:undefined},getPreviewURI:function i(){return c("XStickerAssetController").getURIBuilder().setInt("sticker_id",c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID).setEnum("image_type",c("StickerAssetType").IMAGE).getURI().toString()},getURIWithID:function i(j){return c("XStickerAssetController").getURIBuilder().setInt("sticker_id",j).setEnum("image_type",c("StickerAssetType").IMAGE).getURI().toString()},getCustomEmojiFromThread:function i(j){return j&&j.custom_like_icon}};f.exports=h}),null);
__d("MessengerHotLikeButton.react",["cx","fbt","EmojiLikeConstants","Image.react","ImmutableObject","Keys","KeyStatus","Link.react","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerEnvironment","MessengerHotLikePreviewEvents","MessengerHotLikeOutlineSVG.react","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","StickerConstants","clearTimeout","ifRequired","joinClasses","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryMessageObject").get(),m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerHotLikeButton1=null,this.$MessengerHotLikeButton2=null,this.$MessengerHotLikeButton3=null,this.$MessengerHotLikeButton4=null,this.$MessengerHotLikeButton6=function(t){__p&&__p();if(this.props.disabled||this.$MessengerHotLikeButton3){t.preventDefault();t.stopPropagation()}if(this.props.disabled||t.button!==0)return;this.props.onMouseDown&&this.props.onMouseDown();this.$MessengerHotLikeButton3=Date.now();this.$MessengerHotLikeButton9();this.$MessengerHotLikeButton10()}.bind(this),this.$MessengerHotLikeButton8=function(){if(!(this.props.threadID&&this.$MessengerHotLikeButton3))return;this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton12()}.bind(this),this.$MessengerHotLikeButton14=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").POP,this.props.threadID)}.bind(this),this.$MessengerHotLikeButton7=function(){if(this.$MessengerHotLikeButton3){this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton14()}}.bind(this),this.$MessengerHotLikeButton5=function(t){t.stopPropagation();if(this.props.disabled)return;if(c("KeyStatus").getKeyDownCode()===c("Keys").RETURN||!this.props.threadID){var u=this.props.sendCustomLike;if(this.props.customLike&&u)u(this.props.customLike,c("MessengerHotLikeUtils").getEmojiSizeForTime(1));else this.props.sendSticker(c("MessengerHotLikeUtils").getStickerIDForTime(1))}}.bind(this),p}n.prototype.componentDidMount=function(){this.$MessengerHotLikeButton4=c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(o,p,q){if(o===this.props.threadID)if(q&&this.props.customLike&&this.props.sendCustomLike)this.props.sendCustomLike(this.props.customLike,q,c("EmojiLikeConstants").source.HOT_LIKE);else this.props.sendSticker(p)}.bind(this))};n.prototype.componentWillUnmount=function(){this.$MessengerHotLikeButton4&&this.$MessengerHotLikeButton4.remove()};n.prototype.render=function(){__p&&__p();var o=null,p={};if(this.props.customLike&&this.props.customLike.emoji){var q=this.props.customLike.emoji,r=c("MessengerSupportedEmojiUtils").getNewEmojiData(q,c("EmojiLikeConstants").size.SMALL),s=this.props.renderSize?this.props.renderSize:16;p.background="none";o=c("React").createElement(c("Image.react"),{src:r&&r.url,style:{padding:s==16?0:3,display:"block",height:s,width:s}})}else if(this.props.CustomRenderer){var t=this.props.CustomRenderer;o=c("React").createElement(t,{color:this.props.customColor,location:this.props.location,renderSize:this.props.renderSize})}else if(this.props.customColor)o=c("React").createElement(c("MessengerHotLikeOutlineSVG.react"),{color:this.props.customColor,location:this.props.location});var u=i._("Send a Like");return c("React").createElement(c("Link.react"),{"aria-label":u,className:c("joinClasses")(this.props.customColor||this.props.CustomRenderer?"_5j_u":"",this.props.className),disabled:this.props.disabled,href:"#",onClick:this.$MessengerHotLikeButton5,onDragStart:function v(w){return w.preventDefault()},onMouseDown:this.$MessengerHotLikeButton6,onMouseLeave:this.$MessengerHotLikeButton7,onMouseUp:this.$MessengerHotLikeButton8,role:"button",style:p,title:u},o)};n.prototype.$MessengerHotLikeButton9=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").START,this.$MessengerHotLikeButton13(),this.props.threadID)};n.prototype.$MessengerHotLikeButton12=function(){__p&&__p();if(!this.props.threadID)return;if(!c("MessengerEnvironment").messengerui)c("ifRequired")("MessengerHotLikePreview.react",function(){c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this),function(){if(this.$MessengerHotLikeButton1!==null)return;this.$MessengerHotLikeButton1=c("setIntervalAcrossTransitions")(function(){c("ifRequired")("MessengerHotLikePreview.react",function(){if(this.$MessengerHotLikeButton1!==null){clearInterval(this.$MessengerHotLikeButton1);this.$MessengerHotLikeButton1=null}c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this))}.bind(this),100)}.bind(this));else c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)};n.prototype.$MessengerHotLikeButton13=function(){__p&&__p();var o=this.props.threadID;if(!o)return null;var p=l.constructStickerMessageObject(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),o);l.normalizeNewMessage(p);p.is_like_preview=true;p.like_preview_since=this.$MessengerHotLikeButton3;p.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;p.body="";return new(c("ImmutableObject"))(p)};n.prototype.$MessengerHotLikeButton10=function(){this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton2=c("setTimeoutAcrossTransitions")(this.$MessengerHotLikeButton14,c("MessengerHotLikeUtils").SizeTimes.large)};n.prototype.$MessengerHotLikeButton11=function(){c("clearTimeout")(this.$MessengerHotLikeButton2)};n.propTypes={CustomRenderer:m.func,onMouseDown:m.func,customLike:m.object,customColor:m.string,location:m.string,sendSticker:m.func.isRequired,sendCustomLike:m.func,threadID:m.string,disabled:m.bool,renderSize:m.number};f.exports=n}),null);
__d("MessengerHotLikeChatSVGIcon.react",["cssVar","fbt","React","gkx","uniqueID"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("gkx")("AT5ZvVwuqKWcfrio0AdnNomF7UAfIh6xykST_qUQlvhzlEwa0D-O1yjSaPSHOODgL1U"),m=c("React").PropTypes,n="transparent",o=i._("Thumbs Up Sign");j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={titleId:c("uniqueID")()},r}p.prototype.render=function(){var q=this.props.color||"#0084ff",r=this.props.renderSize,s=r?{height:r.toString(),width:r.toString()}:undefined,t=l?{fill:n,stroke:q,opacity:.2}:{fill:q,opacity:.2},u="bounds_"+this.state.titleId;return l?c("React").createElement("svg",babelHelpers["extends"]({width:"32px",height:"31px","aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},s),c("React").createElement("title",{id:this.state.titleId},o),c("React").createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},c("React").createElement("rect",{id:u,fill:n,width:"32",height:"32"}),c("React").createElement("g",{style:t},c("React").createElement("path",{d:"M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z",transform:"translate(-643 -439)"})),c("React").createElement("g",{transform:"translate(1.000000, 0.000000)"},c("React").createElement("path",{d:"M7.195,29.2559 L0.804,29.2559 C0.362,29.2559 0,28.8939 0,28.4509 L0,13.0609 C0,12.6179 0.362,12.2559 0.804,12.2559 L7.195,12.2559 C7.637,12.2559 8,12.6179 8,13.0609 L8,28.4509 C8,28.8939 7.637,29.2559 7.195,29.2559 Z",id:"Stroke-172",stroke:q,strokeWidth:"2"}),c("React").createElement("path",{d:"M15.9694,0 L15.9694,0 C14.6414,0 13.5214,0.568 13.0414,1.097 L12.4654,1.732 L12.5184,2.63 L12.8154,6.635 C12.8204,6.692 12.8074,6.749 12.7804,6.8 L9.5534,12.791 L8.1544,13.443 L6.9994,13.982 L6.9994,15.256 L6.9994,25.256 L6.9994,27.256 L8.5914,27.256 C8.7024,27.35 8.8354,27.47 8.9364,27.562 C9.1404,27.747 9.3424,27.928 9.5324,28.078 C10.4784,28.825 11.8634,29.174 12.8444,29.25 L12.9214,29.256 L12.9994,29.256 L23.3374,29.256 C25.3594,29.256 26.7824,28.521 27.5704,27.072 C28.0124,26.258 28.1384,25.438 28.0904,24.695 C28.9084,24.168 29.5624,23.33 29.7984,22.148 C29.9184,21.549 29.8984,20.985 29.7854,20.474 C30.4514,19.814 30.9374,18.865 30.9374,17.581 C30.9374,16.549 30.6654,15.739 30.2574,15.123 C30.4314,14.637 30.5364,14.081 30.5364,13.459 C30.5364,10.906 28.4954,9.256 25.3374,9.256 L21.0124,9.256 C21.1474,8.379 21.2494,7.521 21.2494,6.931 C21.2494,4.646 20.4484,1.775 18.2014,0.569 C17.4974,0.191 16.7464,0 15.9694,0 M15.9694,2 C16.3574,2 16.7974,2.085 17.2564,2.332 C18.6054,3.056 19.2494,5.021 19.2494,6.931 C19.2494,7.863 18.8974,9.829 18.7254,10.731 C18.6784,10.978 18.8684,11.256 19.1184,11.256 L25.3374,11.256 C26.2704,11.256 28.5364,11.456 28.5364,13.459 C28.5364,14.979 27.5584,15.534 27.5584,15.534 C27.5584,15.534 28.9374,15.673 28.9374,17.581 C28.9374,19.489 27.0854,19.682 27.0854,19.682 C27.0854,19.682 28.0924,20.481 27.8374,21.756 C27.5284,23.3 26.0264,23.391 25.6764,23.391 C25.6294,23.391 25.6044,23.389 25.6044,23.389 C25.6044,23.389 26.5714,24.723 25.8124,26.118 C25.5674,26.57 25.0414,27.256 23.3374,27.256 L12.9994,27.256 C12.2824,27.2 11.3154,26.937 10.7734,26.51 C10.1994,26.056 9.5134,25.256 8.9994,25.256 L8.9994,15.256 L10.6304,14.494 C10.8704,14.383 11.0674,14.197 11.1934,13.965 L14.5404,7.748 C14.7494,7.362 14.8424,6.924 14.8104,6.486 L14.5124,2.482 C14.5114,2.465 14.5114,2.453 14.5234,2.44 C14.5964,2.359 15.1744,2 15.9694,2",id:"Fill-174",fill:q})))):c("React").createElement("svg",babelHelpers["extends"]({"aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},s),c("React").createElement("title",{id:this.state.titleId},o),c("React").createElement("g",null,c("React").createElement("rect",{id:u,fill:n,width:"32",height:"32"}),c("React").createElement("g",{style:t},c("React").createElement("path",{d:"M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z",transform:"translate(-643 -439)"})),c("React").createElement("g",{style:t},c("React").createElement("rect",{x:"2",y:"14",width:"6",height:"16",rx:"0.2",ry:"0.2"})),c("React").createElement("path",{fill:q,d:"M650.8,453a0.2,0.2,0,0,1,.2.2v15.6a0.2,0.2,0,0,1-.2.2h-5.6a0.2,0.2,0,0,1-.2-0.2V453.2a0.2,0.2,0,0,1,.2-0.2h5.6m0-2h-5.6a2.2,2.2,0,0,0-2.2,2.2v15.6a2.2,2.2,0,0,0,2.2,2.2h5.6a2.2,2.2,0,0,0,2.2-2.2V453.2a2.2,2.2,0,0,0-2.2-2.2h0Z",transform:"translate(-643 -439)"}),c("React").createElement("path",{fill:q,"data-name":"stroke",d:"M658.83,441c1.06,0,2.16,1,2.83,3a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66h1.18l5.59,0c2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2,2,2,0,0,1-2.07,1.91,0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.24,467,668.07,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41,2,2,0,0,1,1.17-.41m0-2h0a4,4,0,0,0-2.36.8,2.45,2.45,0,0,0-1,2.23l0.39,3.67h0v0.05l-1.41,5.32a3.64,3.64,0,0,1-.47.69l-2.19,1.59L651,454v11.15l0.36,0.52A7.58,7.58,0,0,0,658,469h10.07c3.25,0,4.95-1.21,5-3.59a4.54,4.54,0,0,0-.05-0.93,3.59,3.59,0,0,0,1.14-2.71,3.77,3.77,0,0,0-.18-1.15,3.85,3.85,0,0,0,1-2.57,4,4,0,0,0-.82-2.55,4.38,4.38,0,0,0,.31-2.25c-0.2-1.59-1.18-4.25-5.53-4.25l-5,0a12.65,12.65,0,0,0-.35-5.63c-0.91-2.75-2.67-4.38-4.73-4.38h0Z",transform:"translate(-643 -439)"})))};p.propTypes={color:m.string,location:m.string,renderSize:m.number};f.exports=p}),null);
__d("XSetNUXSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/chat/nux_seen/",{setting_name:{type:"String"}})}),null);
__d("MessagingShowNUX.react",["AsyncRequest","ChatConfig","React","XSetNUXSeenController","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={showNUX:!c("ChatConfig").get(this.props.settingName)},this.$MessagingShowNUX1=function(){if(!this.state.showNUX)return;c("ChatConfig").set(this.props.settingName,true);new(c("AsyncRequest"))(c("XSetNUXSeenController").getURIBuilder().getURI()).setData({setting_name:this.props.settingName}).send();this.setState({showNUX:false});this.props.onHidden()}.bind(this),m}k.prototype.render=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$MessagingShowNUX1,position:"left",width:"auto",shown:this.state.showNUX&&this.props.shown},this.props.children)};k.propTypes={children:j.any,contextRef:j.func.isRequired,onHidden:j.func.isRequired,settingName:j.string.isRequired,shown:j.bool.isRequired};f.exports=k}),null);
__d("XMessagingQuickCamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/quick-cam/",{thread_id:{type:"String",required:true},__asyncDialog:{type:"Int"}})}),null);
__d("MessengerQuickCamButton.react",["fbt","AsyncRequest","ChatConfig","Link.react","React","MessagingShowNUX.react","XMessagingQuickCamController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l="seen_cam_button_nux";i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$MessengerQuickCamButton2=function(){this.setState({nuxShown:true,nuxOpen:false},function(){return this.$MessengerQuickCamButton3()}.bind(this))}.bind(this);this.$MessengerQuickCamButton1=function(){if(!this.state.nuxShown)this.setState({nuxOpen:true});else this.$MessengerQuickCamButton3()}.bind(this);this.state={nuxOpen:false,nuxShown:!!c("ChatConfig").get(l)}}m.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(c("Link.react"),{className:this.props.className,onClick:this.$MessengerQuickCamButton1,ref:"photoButton",role:"button",title:h._("Take a picture using quick cam")}),c("React").createElement(c("MessagingShowNUX.react"),{contextRef:function(){return this.refs.photoButton}.bind(this),settingName:l,shown:this.state.nuxOpen,onHidden:this.$MessengerQuickCamButton2,ref:"camNUX"},h._("Send photos from your computer's camera.")))};m.prototype.$MessengerQuickCamButton3=function(){var n=c("XMessagingQuickCamController").getURIBuilder().setString("thread_id",this.props.threadID).getURI();new(c("AsyncRequest"))().setMethod("GET").setURI(n).setRelativeTo(this).setReadOnly(true).send()};m.propTypes={className:k.string.isRequired,threadID:k.string.isRequired};f.exports=m}),null);
__d("MessengerQuickCamDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("MessengerQuickCamActions",["MessengerQuickCamDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CLOSE:null,COUNT_DOWN_TIMER:null,COUNT_DOWN_TIMER_START:null,PROCESS_RECORDING:null,REGISTER_QUICKCAM:null,REMOVE_ALL_LISTENERS:null,REQUEST_USER_MEDIA:null,RETAKE:null,SEND_PHOTO:null,SEND_VIDEO:null,SET_MEDIA:null,SHUTTER_OFF:null,STOP_VIDEO:null,TAKE_VIDEO:null,UPDATE_PROGRESS:null,UPLOAD_COMPLETE:null,UPLOAD_ERROR:null,USER_MEDIA_ERROR:null}),i={Types:h,close:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.CLOSE})},countDownTimer:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.COUNT_DOWN_TIMER})},countDownTimerStart:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.COUNT_DOWN_TIMER_START})},processRecording:function j(k){c("MessengerQuickCamDispatcher").dispatch({type:h.PROCESS_RECORDING,videoBlob:k})},registerQuickCam:function j(k,l){c("MessengerQuickCamDispatcher").dispatch({type:h.REGISTER_QUICKCAM,source:k,quickcam:l})},requestUserMedia:function j(k,l){c("MessengerQuickCamDispatcher").dispatch({type:h.REQUEST_USER_MEDIA,viewer:k,threadID:l})},retake:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.RETAKE})},sendPhoto:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.SEND_PHOTO})},sendVideo:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.SEND_VIDEO})},setMedia:function j(k,l){c("MessengerQuickCamDispatcher").dispatch({type:h.SET_MEDIA,videoSrc:k,videoStream:l})},stopVideo:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.STOP_VIDEO})},shutterOff:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.SHUTTER_OFF})},takeVideo:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.TAKE_VIDEO})},updateProgress:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.UPDATE_PROGRESS})},uploadError:function j(k){c("MessengerQuickCamDispatcher").dispatch({type:h.UPLOAD_ERROR,error:k})},uploadComplete:function j(k){c("MessengerQuickCamDispatcher").dispatch({type:h.UPLOAD_COMPLETE,data:k})},userMediaError:function j(){c("MessengerQuickCamDispatcher").dispatch({type:h.USER_MEDIA_ERROR})}};f.exports=i}),null);
__d("MessengerQuickCamOrigins",[],(function a(b,c,d,e,f,g){"use strict";var h={CHAT_TAB:"chat tab",MESSENGER:"messenger",getValues:function i(){return[h.CHAT_TAB,h.MESSENGER]}};f.exports=h}),null);
__d("MessengerQuickCamButtonHTML5.react",["cx","fbt","BootloadedComponent.react","ChatConfig","JSResource","Link.react","MessagingShowNUX.react","MessengerDialog.react","MessengerQuickCamActions","MessengerQuickCamOrigins","MessengerSpinner.react","React","XUIDialog.react","XUISpinner.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="seen_cam_button_nux";j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){__p&&__p();k.constructor.call(this,o);this.$MessengerQuickCamButtonHTML53=function(){this.setState({nuxOpen:false,nuxShown:true,dialogOpen:true})}.bind(this);this.$MessengerQuickCamButtonHTML56=function(){if(this.state.dialogOpen)this.setState({dialogOpen:false})}.bind(this);this.$MessengerQuickCamButtonHTML57=function(p){if(!p)this.$MessengerQuickCamButtonHTML56();else c("MessengerQuickCamActions").requestUserMedia(this.props.viewer,this.props.threadID)}.bind(this);this.$MessengerQuickCamButtonHTML51=function(p){if(!this.state.nuxShown){this.setState({nuxOpen:true});return}if(this.state.dialogOpen)return;p.stopPropagation();this.setState({dialogOpen:!this.state.dialogOpen})}.bind(this);this.state={dialogOpen:false,nuxShown:!!c("ChatConfig").get(m),nuxOpen:false}}n.prototype.render=function(){var o=this.props.textChild;return c("React").createElement(c("Link.react"),{className:c("joinClasses")(this.props.className,"_30yy"),onClick:this.$MessengerQuickCamButtonHTML51,ref:"photoButton",role:"button",title:i._("Take a picture using quick cam")},!!o&&o,this.$MessengerQuickCamButtonHTML52())};n.prototype.$MessengerQuickCamButtonHTML52=function(){if(!this.state.nuxShown)return c("React").createElement(c("MessagingShowNUX.react"),{contextRef:function(){return this.refs.photoButton}.bind(this),settingName:m,shown:this.state.nuxOpen,onHidden:this.$MessengerQuickCamButtonHTML53,ref:"camNUX"},i._("Send photos and videos from your computer's camera."));if(!this.state.dialogOpen)return null;return this.props.location===c("MessengerQuickCamOrigins").MESSENGER?this.$MessengerQuickCamButtonHTML54():this.$MessengerQuickCamButtonHTML55()};n.prototype.$MessengerQuickCamButtonHTML54=function(){var o=window.innerWidth/3;return c("React").createElement(c("MessengerDialog.react"),{overflow:"hidden",contextRef:function(){return this.refs.photoButton}.bind(this),shown:this.state.dialogOpen,onBlur:this.$MessengerQuickCamButtonHTML56,onToggle:this.$MessengerQuickCamButtonHTML57,width:400>o?400:o},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerQuickCamButtonHTML5.react"),location:this.props.location,onShown:function(p){this.$MessengerQuickCamButtonHTML57(true);if(this.props.onDialogShown)this.props.onDialogShown(p)}.bind(this),onHidden:this.$MessengerQuickCamButtonHTML56,onEscKeyDown:this.$MessengerQuickCamButtonHTML56,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};n.prototype.$MessengerQuickCamButtonHTML55=function(){var o=window.innerWidth/3;return c("React").createElement(c("XUIDialog.react"),{overflow:"hidden",contextRef:function(){return this.refs.photoButton}.bind(this),shown:this.state.dialogOpen,onBlur:this.$MessengerQuickCamButtonHTML56,hideOnEscape:true,onToggle:this.$MessengerQuickCamButtonHTML57,width:400>o?400:o},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("XUISpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerQuickCamButtonHTML5.react"),location:this.props.location,onShown:function(p){this.$MessengerQuickCamButtonHTML57(true);if(this.props.onDialogShown)this.props.onDialogShown(p)}.bind(this),onHidden:this.$MessengerQuickCamButtonHTML56,onEscKeyDown:this.$MessengerQuickCamButtonHTML56,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};n.propTypes={className:l.string.isRequired,location:l.oneOf(c("MessengerQuickCamOrigins").getValues()).isRequired,textChild:l.node,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=n}),null);
__d("P2PAbstractSendMoneyButton.react",["cx","fbt","React","TooltipLink.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$P2PAbstractSendMoneyButton1=false,this.$P2PAbstractSendMoneyButton3=function(){this.props.onMouseDown&&this.props.onMouseDown();this.$P2PAbstractSendMoneyButton1=this.props.isActive}.bind(this),this.$P2PAbstractSendMoneyButton2=function(r){r.stopPropagation();if(this.$P2PAbstractSendMoneyButton1){this.$P2PAbstractSendMoneyButton1=false;return}this.props.onClick()}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("TooltipLink.react"),{alignH:"center",className:c("joinClasses")(this.props.className,(this.props.isActive?"open":"")+(this.props.isDisabled?" disabled":"")+(this.props.isActive?" _10gz":"")+(this.props.isDisabled?" _10g-":"")+(!this.props.isMessenger&&!this.props.className?" _5uqy":"")+(this.props.isMessenger?" _3ggc":"")),href:"#",onClick:this.$P2PAbstractSendMoneyButton2,onMouseDown:this.$P2PAbstractSendMoneyButton3,onMouseOver:this.props.onMouseOver,position:"above",role:"button",title:this.$P2PAbstractSendMoneyButton4()},this.getButton())};l.prototype.getButton=function(){if(this.props.button)return this.props.button;return c("React").createElement("i",{className:"_5s8l"})};l.prototype.$P2PAbstractSendMoneyButton4=function(){if(this.props.isDisabled)return null;return i._("Send Money")};f.exports=l}),null);
__d("P2PSendMoneyContainerBootloader.react",["cx","Bootloader","MessengerEnvironment","DeferredComponent.react","MercuryIDs","P2PAbstractSendMoneyButton.react","P2PActions","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PSendMoneyDialogStore","React","ReactLayeredComponentMixin_DEPRECATED","XUIContextualDialog.react","emptyFunction","getPageIDFromThreadID"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("MessengerEnvironment").messengerui,k=j?282:260,l=c("React").createClass({displayName:"P2PSendMoneyContainerBootloader",propTypes:{button:i.node,className:i.string,ContextualDialog:i.func,flyoutAlignment:i.oneOf(["left","center","right"]),onTrigger:i.func,participantIDs:i.array,referrer:i.string,threadID:i.string},getInitialState:function m(){return{showPlaceholderDialog:false,shouldBootloadImmediately:c("P2PSendMoneyDialogStore").isAnyChatSendViewOpen()}},mixins:[c("ReactLayeredComponentMixin_DEPRECATED")],_clicked:false,_onComponentLoad:c("emptyFunction"),_bootloadCalled:false,_sendMoneyDialogStoreSub:null,log:function m(n,o){c("P2PLogger").log(n,babelHelpers["extends"]({www_event_referrer:this.props.referrer,www_event_flow:c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SEND},o))},componentWillUnmount:function m(){this.removeDialogStoreSub()},onDialogStoreChange:function m(){this._bootloadComponentNow();this.removeDialogStoreSub()},removeDialogStoreSub:function m(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null}},onPlaceholderClick:function m(){var n=this.props.threadID?c("MercuryIDs").tokenize(this.props.threadID).value:null;this._handleDialogVisibility(!this.state.showPlaceholderDialog);this.log(c("P2PPaymentLoggerEvent").UI_ACTN_SEND_MONEY_BUTTON_PLACEHOLDER_CLICKED,{object_id:n});this._bootloadComponentNow();this._clicked=false},_handleDialogVisibility:function m(n){if(!n)c("P2PActions").chatSendViewClosed({threadID:this.props.threadID});else c("P2PActions").chatSendViewOpened({referrer:this.props.referrer,threadID:this.props.threadID});this.setState({showPlaceholderDialog:n})},renderLayers:function m(){__p&&__p();var n={};if(this.state.showPlaceholderDialog){var o=this.props.ContextualDialog||c("XUIContextualDialog.react");n.placeholderDialog=c("React").createElement(o,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:j?"right":"left",contextRef:function(){return this.refs.placeholderButton}.bind(this),onBlur:function(){if(!this._clicked)this._handleDialogVisibility(false);this._clicked=false}.bind(this),ref:"dialog",shown:true,width:k,position:"above"},c("React").createElement("div",{className:"_c_5"},c("React").createElement(c("P2PLoadingMask.react"),{visible:true})))}return n},render:function m(){if(this._isPageChat())return null;return c("React").createElement(c("DeferredComponent.react"),babelHelpers["extends"]({deferredComponent:this._bootloadComponent,deferredPlaceholder:this._renderPlaceholder()},this.props))},_renderPlaceholder:function m(){return c("React").createElement(c("P2PAbstractSendMoneyButton.react"),{button:this.props.button,className:this.props.className,isActive:false,isDisabled:false,isMessenger:j,onClick:this.onPlaceholderClick,onMouseDown:function(){this._clicked=true}.bind(this),onMouseOver:this._bootloadComponentNow,ref:"placeholderButton"})},_bootloadComponent:function m(n){this._onComponentLoad=n.bind(this);if(this.state.shouldBootloadImmediately)this._bootloadComponentNow();else this._sendMoneyDialogStoreSub=c("P2PSendMoneyDialogStore").addListener("change",this.onDialogStoreChange)},_bootloadComponentNow:function m(){if(this._bootloadCalled)return;this._bootloadCalled=true;c("Bootloader").loadModules(["P2PSendMoneyContainer.react"],function(n){this.removeDialogStoreSub();this._onComponentLoad(n);this.setState({showPlaceholderDialog:false})}.bind(this),"P2PSendMoneyContainerBootloader.react")},_isPageChat:function m(){return!!this._getPageID()},_getPageID:function m(){return c("getPageIDFromThreadID")(this.props.threadID)}});f.exports=l}),null);
__d("isWebGLEnabled",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=null;function i(){try{var k=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&Boolean(k.getContext("webgl")||k.getContext("experimental-webgl"))}catch(l){return false}}function j(){if(h===null)h=i();return h}f.exports=j}),null);
__d("ChatTabComposer.react",["cssVar","csx","cx","fbt","BootloadOnRender.react","ChatConfig","ChatComposerFlyoutButton","ChatComposerFlyoutButtonBootLoader.react","ChatEventPlanButton.react","ChatInput.react","ChatPhotoUploader.react","CustomColorHighlighting.react","CSS","EventRemindersGating","FantaMessageActions","JSResource","Keys","LazyComponent.react","MercuryConfig","MercuryIDs","MessengerBotMenuButton.react","MessengerHotLikeButton.react","MessengerHotLikeChatSVGIcon.react","MessengerHotLikeUtils","MessengerQuickCamButton.react","MessengerQuickCamButtonHTML5.react","MessengerQuickCamOrigins","P2PPaymentConfig","P2PSendMoneyContainerBootloader.react","React","MercuryShareAttachmentRenderLocations","StickersActions","XUISpinner.react","clearImmediate","convertMIGColorToFIGColor","getPageIDFromThreadID","gkx","isWebGLEnabled","requireWeak","setImmediate"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("React").PropTypes,o=77,p=9,q=c("ChatConfig").get("chat_basic_input_module")||c("ChatInput.react"),r=null;c("requireWeak")("FantaAppStore",function(t){return r=t});l=babelHelpers.inherits(s,c("React").PureComponent);m=l&&l.prototype;function s(){__p&&__p();var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=m.constructor).call.apply(t,[this].concat(w)),this.state={inputHeight:0,p2pPaymentConfig:c("P2PPaymentConfig").config,stickerFlyoutShown:false},this.$ChatTabComposer2=null,this.$ChatTabComposer3=null,this.$ChatTabComposer10=function(y){var z=this.props.threadID;if(z)this.$ChatTabComposer1=c("setImmediate")(function(){this.$ChatTabComposer1=null;c("FantaMessageActions").composerTextUpdate(z,y)}.bind(this))}.bind(this),this.$ChatTabComposer8=function(y){if(y.keyCode===c("Keys").RETURN){this.refs.emojiButton&&this.refs.emojiButton.hideFlyout();this.$ChatTabComposer10("")}this.props.inputKeyDown&&this.props.inputKeyDown(y)}.bind(this),this.$ChatTabComposer5=function(y){var z=y.target;if(z instanceof Element&&(c("CSS").matchesSelector(z,"._1d4_")||c("CSS").matchesSelector(z,"._552h")||c("CSS").matchesSelector(z,"._552n")))this.refs.input.focus()}.bind(this),this.$ChatTabComposer9=function(y){if(this.state.stickerFlyoutShown)c("StickersActions").hideStickerFlyout();this.props.onEscape&&this.props.onEscape(y);this.$ChatTabComposer10("")}.bind(this),this.$ChatTabComposer32=function(y,z){if(y.platformFBID.toString()!==c("MercuryConfig").MessengerAppID)this.uploadURL({attribution_app_id:y.platformFBID,errorDialogParams:{body:k._("There was a problem sending this GIF. Choose another one and try again."),title:k._("Couldn't Send GIF")},external_image_url:y.source.url,preview_url:y.media.preview?y.media.preview.url:y.media.thumbnail.url,source:y.source});else this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect&&this.props.stickerButtonProps.onStickerSelect(y.resultID.toString)}.bind(this),this.$ChatTabComposer35=function(y){this.refs.input&&this.refs.input.insertEmoji&&this.refs.input.insertEmoji(y)}.bind(this),u}s.prototype.render=function(){var t=this.props.disableInput?null:c("React").createElement("ul",{className:"_552n"+(c("gkx")("AT5ZvVwuqKWcfrio0AdnNomF7UAfIh6xykST_qUQlvhzlEwa0D-O1yjSaPSHOODgL1U")?" _22v_":"")},this.$ChatTabComposer4());return c("React").createElement("div",{className:"_1d4_",onClick:this.$ChatTabComposer5,role:"presentation"},this.$ChatTabComposer6(),t)};s.prototype.componentWillUnmount=function(){if(this.$ChatTabComposer1)c("clearImmediate")(this.$ChatTabComposer1)};s.prototype.resetInput=function(t){this.refs.input.resetAfterSend(t)};s.prototype.uploadURL=function(t){var u=this.$ChatTabComposer2||this.$ChatTabComposer3;if(!u)return;u.uploadURL(t)};s.prototype.isUploading=function(){return!!(this.$ChatTabComposer2&&this.$ChatTabComposer2.isUploading()||this.$ChatTabComposer3&&this.$ChatTabComposer3.isUploading())};s.prototype.getInput=function(){return this.refs.input};s.prototype.$ChatTabComposer6=function(){__p&&__p();var t={};if(this.state.inputHeight)t.minHeight=this.state.inputHeight;var u=null;if(this.props.showStructuredMenu)u=c("React").createElement("div",{className:"_5c6-"},c("React").createElement(c("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_5c6_"}));var v="",w=this.props.threadID;if(w&&r){var x=r.getState().mercury.tabContents.get(w);v=x&&x.composerText||""}var y="";if(this.props.disableInput)y=k._("Composer is disabled for this thread.");else if(this.props.thread&&!this.props.thread.is_canonical)y=k._("Type a message, \u0040name...");else y=k._("Type a message...");return c("React").createElement("div",{className:"_552h",style:t},u,c("React").createElement("div",{className:this.props.showStructuredMenu?"_4yzj":""},c("React").createElement(c("CustomColorHighlighting.react"),{customColor:this.props.thread&&this.props.thread.custom_color},c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")&&this.$ChatTabComposer7(this.props.threadID),c("React").createElement(q,{defaultText:v,fileUploader:this.props.fileUploader,initializeThingsWithInputFn:this.props.initializeThingsWithInputFn,inputKeyDown:this.$ChatTabComposer8,onBeforeInput:function(){return this.refs.emojiButton&&this.refs.emojiButton.hideFlyout()}.bind(this),onBlur:this.props.onBlur,onEscape:this.$ChatTabComposer9,onFocus:this.props.onFocus,onTab:this.props.onTab,readOnly:this.props.disableInput,ref:"input",resizeFn:function(z){z=Math.min(z,o);this.setState({inputHeight:z});this.props.resizeFn&&this.props.resizeFn(z)}.bind(this),thread:this.props.thread,threadID:this.props.threadID,onTextChange:this.$ChatTabComposer10,uploadPhotoFn:function(z){this.$ChatTabComposer3&&this.$ChatTabComposer3.uploadFiles([].concat(z))}.bind(this),participants:this.props.participants,placeholder:y,viewer:this.props.viewer}))))};s.prototype.$ChatTabComposer7=function(t){__p&&__p();if(!t)return null;var u=this.props.fileUploader;if(!u)return null;var v=u.get("uploadedFiles");if(v.size==0)return null;var w=this.props.thread,x=w&&w.custom_color?w.custom_color:"#0084ff";return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{files:v,small:true,threadID:t,threadCustomColor:x,onClick:this.$ChatTabComposer11}),loader:c("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("ChatTabComposer.react"),placeholder:c("React").createElement(c("XUISpinner.react"),{className:"_2qf"})})};s.prototype.$ChatTabComposer11=function(t,u){c("FantaMessageActions").cancelFileUpload(t,u)};s.prototype.$ChatTabComposer4=function(){var t=[this.$ChatTabComposer12(),this.$ChatTabComposer13(),this.$ChatTabComposer14(),this.$ChatTabComposer15(),this.$ChatTabComposer16(),this.$ChatTabComposer17(),this.$ChatTabComposer18(),this.$ChatTabComposer19(),this.$ChatTabComposer20()],u=t.filter(Boolean),v=this.$ChatTabComposer21();if(v&&u.length<p)u.push(v);var w=this.$ChatTabComposer22();if(w&&u.length<p&&c("EventRemindersGating").shouldShowComposer)u.push(w);return u};s.prototype.$ChatTabComposer12=function(){var t=this.props.photoUploaderProps||{};return c("React").createElement("li",{className:"_13f-",key:"photos"},c("React").createElement(c("ChatPhotoUploader.react"),babelHelpers["extends"]({onMount:function(u){return this.$ChatTabComposer3=u}.bind(this)},t)))};s.prototype.$ChatTabComposer21=function(){var t=c("convertMIGColorToFIGColor")(this.props.thread&&this.props.thread.custom_color),u=this.$ChatTabComposer23();if(u&&this.props.thread&&!this.props.thread.is_canonical)return c("ChatComposerFlyoutButton").MessengerGroupPollingButton?this.$ChatTabComposer24(t,u):this.$ChatTabComposer25(t,u);return null};s.prototype.$ChatTabComposer25=function(t,u){return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{key:"grouppolling",interactionClassName:"_6gd _13f_",flyoutProps:{customColor:t,threadFBID:u},flyoutAlignment:"left",iconClassName:"_6gb _4tjk",flyoutLoader:c("JSResource")("MessengerGroupPollingFlyoutWrapper.react").__setRef("ChatTabComposer.react")})};s.prototype.$ChatTabComposer24=function(t,u){var v=c("ChatComposerFlyoutButton").MessengerGroupPollingButton;return c("React").createElement("li",{className:"_6gd _13f_",key:"group_polling"},c("React").createElement(v,{customColor:t,threadFBID:u}))};s.prototype.$ChatTabComposer18=function(){var t=c("gkx")("AT4VU3LTU_m0y3MeJeai7hJytsOcRy63JbTrv7QtkGDcMH9aN_sV8sDNC1ebrhVq0RfT0H4FEgW5UVoJHsOiHpnF")&&c("isWebGLEnabled")(),u=this.$ChatTabComposer23();return t&&u&&!this.$ChatTabComposer26()?c("ChatComposerFlyoutButton").MessengerGamesButton?this.$ChatTabComposer27():this.$ChatTabComposer28():null};s.prototype.$ChatTabComposer28=function(){return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{key:"games",interactionClassName:"_6gd _13ga",flyoutAlignment:"left",iconClassName:"_6gb _4cf0",flyoutProps:{threadFBID:this.$ChatTabComposer23()},flyoutLoader:c("JSResource")("MessengerGamesFlyout.react").__setRef("ChatTabComposer.react")})};s.prototype.$ChatTabComposer27=function(){var t=c("ChatComposerFlyoutButton").MessengerGamesButton;return c("React").createElement("li",{className:"_6gd _13ga",key:"games"},c("React").createElement(t,{threadFBID:this.$ChatTabComposer23()}))};s.prototype.$ChatTabComposer22=function(){return this.props.threadID&&!this.$ChatTabComposer26()?c("React").createElement("li",{className:"_6gd _13gb",key:"eventPlan"},c("React").createElement(c("ChatEventPlanButton.react"),{threadID:this.props.threadID})):null};s.prototype.$ChatTabComposer17=function(){if(this.props.disableFileUploads)return null;var t=this.props.fileUploaderProps||{};return c("React").createElement("li",{className:"_13gd",key:"files"},c("React").createElement(c("ChatPhotoUploader.react"),babelHelpers["extends"]({onMount:function(u){return this.$ChatTabComposer2=u}.bind(this)},t)))};s.prototype.$ChatTabComposer13=function(){var t=this.props.stickerButtonProps;if(!t)return null;var u=c("ChatComposerFlyoutButton").ChatStickerButton;return u?this.$ChatTabComposer29():this.$ChatTabComposer30()};s.prototype.$ChatTabComposer30=function(){var t=this.props.stickerButtonProps;if(!t)return null;var u={className:"_5e-r",position:"above"};return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{flyoutProps:t,dialogProps:u,flyoutAlignment:"right",key:"sticker",interactionClassName:"_6gd _13ge",iconClassName:"_6gb _6gf",flyoutLoader:c("JSResource")("StickersFlyoutWrapper.react").__setRef("ChatTabComposer.react")})};s.prototype.$ChatTabComposer29=function(){var t=c("ChatComposerFlyoutButton").ChatStickerButton;return c("React").createElement("li",{className:"_6gd _13ge",key:"stickers"},c("React").createElement(t,babelHelpers["extends"]({},this.props.stickerButtonProps,{onFlyoutShown:function(){this.refs.input.focus();this.setState({stickerFlyoutShown:true})}.bind(this),onFlyoutHidden:function(){this.setState({stickerFlyoutShown:false})}.bind(this)})))};s.prototype.$ChatTabComposer31=function(){var t=c("ChatComposerFlyoutButton").ChatContentSearchButton;return c("React").createElement("li",{className:"_6gd _13gf",key:"contentsearch"},c("React").createElement(t,{className:"_6gb _6gs",getQuery:function(){return this.refs.input.getValue()}.bind(this),onSelect:this.$ChatTabComposer32}))};s.prototype.$ChatTabComposer14=function(){return c("ChatComposerFlyoutButton").ChatContentSearchButton?this.$ChatTabComposer31():this.$ChatTabComposer33()};s.prototype.$ChatTabComposer33=function(){var t={getQuery:function(){return this.refs.input.getValue()}.bind(this),onSelect:this.$ChatTabComposer32};return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,key:"contentSearch",interactionClassName:"_6gd _13gf",flyoutProps:t,flyoutAlignment:"left",iconClassName:"_6gb _6gs",threadFBID:this.$ChatTabComposer23(),flyoutLoader:c("JSResource")("ChatContentSearchFlyoutWrapper.react").__setRef("ChatTabComposer.react")})};s.prototype.$ChatTabComposer34=function(){var t=c("ChatComposerFlyoutButton").ChatEmojiButton;return c("React").createElement("li",{className:"_6gd _13gg",key:"emojipicker"},c("React").createElement(t,{className:"_6gb _3oxr",flyoutAlignment:"right",fromChatTab:true,getInput:function(){return this.refs.input}.bind(this),onSelect:this.$ChatTabComposer35,ref:"emojiButton",sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}))};s.prototype.$ChatTabComposer36=function(){var t={onSelect:this.$ChatTabComposer35,getInput:function(){return this.refs.input}.bind(this)};return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,key:"emoji",interactionClassName:"_6gd _13gg",flyoutAlignment:"left",iconClassName:"_6gb _3oxr",threadFBID:this.$ChatTabComposer23(),flyoutLoader:c("JSResource")("ChatEmojiFlyout.react").__setRef("ChatTabComposer.react"),dialogProps:{offsetY:10},flyoutProps:t})};s.prototype.$ChatTabComposer15=function(){if(!c("ChatConfig").get("www_messenger_emoji_picker"))return null;return c("ChatComposerFlyoutButton").ChatEmojiButton?this.$ChatTabComposer34():this.$ChatTabComposer36()};s.prototype.$ChatTabComposer20=function(){if(!c("ChatConfig").get("hotlike"))return null;var t=this.props.thread,u=c("convertMIGColorToFIGColor")(t&&t.custom_color)||"",v=c("MessengerHotLikeChatSVGIcon.react"),w="_6gb";return c("React").createElement("li",{className:"_6gd _5ep3 _13gi",key:"like"},c("React").createElement(c("MessengerHotLikeButton.react"),{className:w,customColor:u,customLike:c("MessengerHotLikeUtils").getCustomEmojiFromThread(t)||undefined,CustomRenderer:v,location:c("MercuryShareAttachmentRenderLocations").CHAT,renderSize:16,sendSticker:this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID}))};s.prototype.$ChatTabComposer16=function(){if(!this.props.p2pProps||!this.props.showP2PButton||this.$ChatTabComposer26())return null;var t=this.props.p2pProps;t.threadID=this.props.threadID;t.p2pPaymentConfig=this.state.p2pPaymentConfig;if(this.props.participantIDs&&this.props.participantIDs.length)t.participantIDs=this.props.participantIDs;return c("React").createElement("li",{className:"_6gd _13gj",key:"p2p"},c("React").createElement(c("P2PSendMoneyContainerBootloader.react"),t))};s.prototype.$ChatTabComposer19=function(){if(c("MercuryIDs").isLocalThread(this.props.threadID)||!c("ChatConfig").get("messenger_www_quickcam"))return null;var t=c("React").createElement(c("MessengerQuickCamButton.react"),{className:"_6gb _5yhk",threadID:this.props.threadID});if(c("ChatConfig").get("messenger_www_html5_quickcam"))t=c("React").createElement(c("MessengerQuickCamButtonHTML5.react"),babelHelpers["extends"]({location:c("MessengerQuickCamOrigins").CHAT_TAB,viewer:this.props.viewer},t.props));return c("React").createElement("li",{className:"_6gd _13gk",key:"quickcam"},t)};s.prototype.$ChatTabComposer26=function(){return!!this.$ChatTabComposer37()};s.prototype.$ChatTabComposer37=function(){return c("getPageIDFromThreadID")(this.props.threadID)};s.prototype.$ChatTabComposer23=function(){if(this.props.threadID&&!c("MercuryIDs").isLocalThread(this.props.threadID))return c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID);if(this.props.thread&&this.props.thread.thread_fbid)return this.props.thread.thread_fbid;return null};s.prototype.replyToMention=function(t){this.refs.input&&this.refs.input.addMention&&this.refs.input.addMention(t)};s.propTypes={disableInput:n.bool.isRequired,disableFileUploads:n.bool,fileUploaderProps:n.object,initializeThingsWithInputFn:n.func,inputKeyDown:n.func,onBlur:n.func,onCustomLikeSelect:n.func,onEmojiSelect:n.func,onEscape:n.func,onFocus:n.func,onTab:n.func,p2pProps:n.object,pageID:n.string,participantIDs:n.arrayOf(n.string),photoUploaderProps:n.object,resizeFn:n.func,showP2PButton:n.bool,showStructuredMenu:n.bool.isRequired,stickerButtonProps:n.object,thread:n.object,threadID:n.string,uploadPhotoFn:n.func,viewer:n.string};f.exports=s}),null);
__d("ChatTabComposerContainer.react",["cx","fbt","Bootloader","ChatTabComposer.react","MercuryIDs","MercuryThreads","MercuryMessageActions","MessengerBotMenuDataFetcher","MercuryParticipants","MNCommercePageSetting","P2PGKValues","ReactComponentWithPureRenderMixin","React","MercuryShareAttachmentRenderLocations","SearchableEntry","SimpleXUIDialog","StoreAndPropBasedStateMixin","getPageIDFromThreadID","getThreadTypeNameFromThreadType","nullthrows","setImmediate"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="right",k=c("React").PropTypes,l=c("React").createClass({displayName:"ChatTabComposerContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MercuryThreads"),c("MercuryParticipants"))],propTypes:{disableInput:k.bool.isRequired,fileUploader:k.object,threadID:k.string,viewer:k.string.isRequired,onFileUploadFail:k.func,onPhotoUploadFail:k.func,onStickerSelect:k.func,onUploadCancel:k.func,onUploadComplete:k.func,onUploadSubmit:k.func},statics:{calculateState:function m(n){var o=c("MercuryThreads").getForFBID(n.viewer),p=n.threadID?o.getOrFetch(n.threadID):null,q=c("P2PGKValues").P2PVisible&&n.viewer!==c("MercuryIDs").getUserIDFromThreadID(n.threadID),r=c("getPageIDFromThreadID")(n.threadID),s=r===null||r===undefined?false:c("MessengerBotMenuDataFetcher").getHasPageSetting(r,function(){},function(){},c("MNCommercePageSetting").STRUCTURED_MENU_ENABLED),t=p&&p.participants?p.participants.map(c("MercuryParticipants").getOrFetch,c("MercuryParticipants")):[];return{thread:p,participants:t,showP2PButton:q,pageID:r,showStructuredMenu:s}}},componentDidMount:function m(){this.props.onMount(this);if(this.state.pageID)c("MessengerBotMenuDataFetcher").getHasPageSetting(this.state.pageID,function(n){this.setState({showStructuredMenu:n})}.bind(this),function(){this.setState({showStructuredMenu:false})}.bind(this),c("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)},componentWillReceiveProps:function m(n){if(n.threadID!==this.props.threadID)this.setState({participantIDs:[],participants:[]})},render:function m(){return c("React").createElement(c("ChatTabComposer.react"),babelHelpers["extends"]({fileUploader:this.props.fileUploader,fileUploaderProps:this._getFileUploaderProps(),ref:"composer",thread:this.state.thread},this.props,{disableInput:this.props.disableInput,p2pProps:this._getP2PProps(),pageID:this.state.pageID,participantIDs:this.state.participantIDs,participants:this.state.participants,photoUploaderProps:this._getPhotoUploaderProps(),showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,stickerButtonProps:this._getStickerButtonProps()}))},onSend:function m(n){var o,p=this;if(n&&n.profile_ranges&&n.profile_ranges.length)(function(){var q=n,r=p.state,s=r.thread,t=r.participants;c("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(u,v){new u().setEvent(v.MENTION).setGroupSize(t&&t.length).setNumDelivered((q.profile_ranges||[]).length).setThreadid(s&&s.thread_id).setThreadType(c("getThreadTypeNameFromThreadType")(s&&s.thread_type)).setOfflineThreadid(q.offline_threading_id).log()},"ChatTabComposerContainer.react")})();if(this.refs.composer)this.refs.composer.resetInput(n)},setParticipantIDs:function m(n){n=n||[];this.setState({participantIDs:n})},getInput:function m(){return this.refs.composer.getInput()},isUploading:function m(){return this.refs.composer.isUploading()},_getP2PProps:function m(){if(!this.state.showP2PButton)return{};return{button:c("React").createElement("i",{className:"hidden_elem"}),className:"_6ga _6gb",flyoutAlignment:j,referrer:c("MercuryShareAttachmentRenderLocations").CHAT,threadID:this.props.threadID,onTrigger:this.props.onP2PTrigger}},_getStickerButtonProps:function m(){var n={className:"_6gb _6gf",flyoutAlignment:j,threadID:this.props.threadID,onStickerSelect:this.props.onStickerSelect};return n},_getPhotoUploaderProps:function m(){var n={className:"_6gd",customUI:true,imageClassName:"hidden_elem",linkClassName:"_6gb _6ge",threadID:this.props.threadID,onLastUploadCancel:this._handleUploadCancel,onAllUploadsComplete:this._handleUploadComplete,onLastUploadFail:this._handlePhotoUploadFail,onUploadError:this._handleUploadError,onSubmit:this._handleUploadSubmit};return n},_getFileUploaderProps:function m(){var n=this._getPhotoUploaderProps();n.linkClassName="_6gb _6gg";n.imagesOnly=false;n.onLastUploadFail=this._handleFileUploadFail;return n},_handleUploadComplete:function m(n,o){c("MercuryMessageActions").getForFBID(this.props.viewer).confirmAttachmentPlaceholder(o.upload_id,o);this.props.onUploadComplete&&this.props.onUploadComplete(o)},_handleUploadError:function m(n){var o=void 0,p=void 0;switch(n.error){case"size-exceeded":o=i._("The file you have selected is too large");p=i._("The file you have selected is too large. The maximum size is 25MB.");break;default:o=i._("File Upload Failed");p=i._("There was a problem uploading the file.")}this._showErrorDialog(o,p);this.props.onFileUploadFail&&this.props.onFileUploadFail(n)},_handleUploadCancel:function m(n,o){c("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);this.props.onUploadCancel&&this.props.onUploadCancel(o)},_handleFileUploadFail:function m(n,o){c("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);var p=i._("File Upload Failed"),q=i._("There was a problem uploading the file.");if(o.errorDialogParams){p=o.errorDialogParams.title||p;q=o.errorDialogParams.body||q}this._showErrorDialog(p,q);this.props.onFileUploadFail&&this.props.onFileUploadFail(o)},_handlePhotoUploadFail:function m(n,o){c("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(o.upload_id,o);var p=i._("Photo Upload Failed"),q=i._("Please try again. Make sure you are uploading a valid photo.");if(o.errorDialogParams){p=o.errorDialogParams.title||p;q=o.errorDialogParams.body||q}this._showErrorDialog(p,q);this.props.onPhotoUploadFail&&this.props.onPhotoUploadFail(o)},_handleUploadSubmit:function m(n,o){this.props.onUploadSubmit&&this.props.onUploadSubmit(o)},_showErrorDialog:function m(n,o){c("SimpleXUIDialog").show(o,n)},_handleReplyToMention:function m(n,event){if(event.threadID===this.props.threadID)c("MercuryParticipants").get(event.participantID,function(o){if(!o||!this.refs.composer)return;var p=new(c("SearchableEntry"))({uniqueID:c("nullthrows")(o.fbid),title:"@"+o.name});c("setImmediate")(function(){this.refs.composer.getInput().focus();this.refs.composer.replyToMention&&this.refs.composer.replyToMention(p)}.bind(this))}.bind(this))}});f.exports=l}),null);
__d("ChatTitleLink.react",["cx","ChatEditParticipantsUtils","Link.react","MercuryThreads","MercuryThreadTitle.react","MessengerAdminGroupUtils","React","TrackingNodes","UserAgent","goURI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MercuryThreads").get(),j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatTitleLink",propTypes:{href:j.string,thread:j.object,viewer:j.string},getDefaultProps:function m(){return{href:null}},getTitle:function m(){return this.refs.threadTitle.getTitle()},render:function m(){if(!this.props.thread)return null;var n=this.props,o=n.href,p=n.thread,q=n.viewer,r=babelHelpers.objectWithoutProperties(n,["href","thread","viewer"]);return c("React").createElement(l,babelHelpers["extends"]({className:"titlebarText"+(c("UserAgent").isBrowser("Chrome")&&!c("UserAgent").isPlatform("Windows")?" fixemoji":"")+(o===null?" noLink":""),"data-ft":c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.TITLE),"data-hover":"tooltip",onClick:function(s){return this._handleClick(s)}.bind(this),href:o},r),c("React").createElement(c("MercuryThreadTitle.react"),{ref:"threadTitle",isNewThread:i.isNewEmptyLocalThread(p.thread_id),thread:p,useAndSeparator:true,useShortName:!p.is_canonical,viewer:q}))},_handleClick:function m(n){var o=this.props,p=o.href,q=o.thread;if(!p)return;if(q&&q.associated_object)c("goURI")(p);else if(c("MessengerAdminGroupUtils").showParticipantsModal(q.is_canonical,i.isEmptyLocalThread(q.thread_id),q)){c("ChatEditParticipantsUtils").showParticipantsModal(q.thread_id);n.preventDefault()}}}),l=function l(m){return m.href?c("React").createElement(c("Link.react"),m):c("React").createElement("span",m)};f.exports=k}),null);
__d("MercuryTypingAnimation.react",["cx","React","SutroPhase2GatingConfig","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=c("SutroPhase2GatingConfig").enabled_bubble_comments,n="_4a0v"+(!m&&this.props.color==="light"?" _4a0w":"")+(!m&&this.props.color==="dark"?" _4a0x":"")+(m?" _x8s":"");return c("React").createElement("div",{className:c("joinClasses")(this.props.className,n)},c("React").createElement("div",{className:"_4b0g"},c("React").createElement("div",{className:"_5pd7"}),c("React").createElement("div",{className:"_5pd7"}),c("React").createElement("div",{className:"_5pd7"})))};function l(){i.apply(this,arguments)}l.propTypes={color:k.oneOf(["light","dark"])};l.defaultProps={color:"dark"};f.exports=l}),null);
__d("ChatTypingIndicator.react",["cx","fbt","ChatConfig","Image.react","MercuryConfig","MercuryParticipants","MercuryTypingAnimation.react","ReactComponentWithPureRenderMixin","React","QE2Logger"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=c("ChatConfig").get("chattab_rounded_profile",false),l=c("React").createClass({displayName:"ChatTypingIndicator",mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{isOnline:j.bool,userID:j.string,showName:j.bool},componentDidMount:function n(){c("QE2Logger").logExposureForUser("messenger_growth_tombstone")},render:function n(){var o=void 0;if(this.props.userID)o=c("MercuryParticipants").getNow(this.props.userID);if(!o)return null;var p=c("MercuryConfig").GDWC&&!!this.props.isOnline;return c("React").createElement("div",{className:"_4tdt"},m(o,p),this._renderBubble())},getBubble:function n(){return this.refs.bubble},_renderBubble:function n(){var o=this.props.showName;return c("React").createElement("div",{className:"_4tdv"},c("React").createElement("div",{className:"_5wd4 _1nc7 _2cnu"+(o?" _5ysy":"")},c("React").createElement("div",{className:"_5wd9 _n4o"},c("React").createElement("div",{className:"_5w1r _5wdf _3_om"},c("React").createElement(c("MercuryTypingAnimation.react"),{className:"_5x7x",ref:"bubble"})))))}});function m(n,o){var p=i._("{name}",[i.param("name",n.name)]);return c("React").createElement("div",{className:"_31o4"+(k?" _3njy":"")},c("React").createElement("a",{"aria-label":p,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":p,"data-tooltip-position":"left",href:n.href||"#",ref:"link"},c("React").createElement(c("Image.react"),{src:n.image_src,ref:"image"})),o?c("React").createElement("div",{className:"_sce"}):null)}f.exports=l}),null);
__d("MercuryTypingReceiver",["Arbiter","ChannelConstants","FBIDCheck","MercuryActionType","MercuryIDs","MercuryPayloadSource","MercuryDispatcher","MercurySingletonMixin","MercuryThreadIDMap","MercuryViewer","TypingStates","isEmpty","mixInEventEmitter","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("MercuryThreadIDMap").get(),i=3e4;function j(k){"use strict";__p&&__p();this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=c("MercuryDispatcher").getForFBID(k);this.$MercuryTypingReceiver3.subscribe("update-typing-state",function(m,n){__p&&__p();var o=n.payload_source;if(o!=c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)return;var p=n.actions;if(!p||!p.length)return;var q=c("MercuryActionType").USER_GENERATED_MESSAGE;p.forEach(function(r){if(r.action_type==q&&r.author!=c("MercuryViewer").getID())this.$MercuryTypingReceiver4(r.thread_id,r.author)}.bind(this))}.bind(this));var l=[c("ChannelConstants").getArbiterType("typ"),c("ChannelConstants").getArbiterType("ttyp")];if(!c("FBIDCheck").isUser_deprecated(k))l.push(c("ChannelConstants").getArbiterType("page_typing"));c("Arbiter").subscribe(l,function(m,n){__p&&__p();var o=n.obj,p=this.$MercuryTypingReceiver5(o);if(p){var q=c("MercuryIDs").getParticipantIDFromUserID(o.from.toString());if(o.st==c("TypingStates").TYPING){this.$MercuryTypingReceiver2[p]=this.$MercuryTypingReceiver2[p]||{};var r=this.$MercuryTypingReceiver2[p][q];this.$MercuryTypingReceiver2[p][q]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=c("setTimeoutAcrossTransitions")(function(){this.$MercuryTypingReceiver6()}.bind(this),3e3);!r&&this.$MercuryTypingReceiver7(p)}else if(o.st==c("TypingStates").INACTIVE)this.$MercuryTypingReceiver4(p,q)}}.bind(this))}j.prototype.$MercuryTypingReceiver8=function(k){"use strict";var l=this.$MercuryTypingReceiver2[k]||{},m=Object.keys(l);m.sort(function(n,o){return l[n]-l[o]});return m};j.prototype.$MercuryTypingReceiver6=function(){"use strict";__p&&__p();this.$MercuryTypingReceiver1=null;var k=Date.now(),l={},m=false;for(var n in this.$MercuryTypingReceiver2){var o=false;for(var p in this.$MercuryTypingReceiver2[n]||{})if(this.$MercuryTypingReceiver2[n][p]<k-i){delete this.$MercuryTypingReceiver2[n][p];o=true}else m=true;if(o)l[n]=this.$MercuryTypingReceiver8(n)}if(!c("isEmpty")(l))this.$MercuryTypingReceiver9(l);if(m)this.$MercuryTypingReceiver1=c("setTimeoutAcrossTransitions")(function(){this.$MercuryTypingReceiver6()}.bind(this),3e3)};j.prototype.$MercuryTypingReceiver4=function(k,l){"use strict";if(k in this.$MercuryTypingReceiver2)if(l in this.$MercuryTypingReceiver2[k]){delete this.$MercuryTypingReceiver2[k][l];this.$MercuryTypingReceiver7(k)}};j.prototype.$MercuryTypingReceiver9=function(k){"use strict";this.releaseHeldEventType("state-changed");this.emitAndHold("state-changed",k)};j.prototype.$MercuryTypingReceiver7=function(k){"use strict";var l={};l[k]=this.$MercuryTypingReceiver8(k);this.$MercuryTypingReceiver9(l)};j.prototype.$MercuryTypingReceiver5=function(k){"use strict";if(k.thread_fbid)return h.getClientIDFromServerIDNow(k.thread_fbid.toString());if(k.type==="typ"||k.type==="page_typing")return c("MercuryIDs").getThreadIDFromUserID(k.from.toString());return null};c("mixInEventEmitter")(j,{"state-changed":true});Object.assign(j,c("MercurySingletonMixin"));f.exports=j}),null);
__d("ChatTypingIndicators.react",["fbt","ChatTypingIndicator.react","DOM","immutable","MercuryIDs","MercuryThreadInformer","MercuryThreads","MercuryTypingReceiver","MercuryParticipants","React","ReactDOM","SubscriptionsHandler","TooltipData","createObjectFrom","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("MercuryThreads").get(),j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatTypingIndicators",propTypes:{indicatorClass:j.func,indicatorsWillShow:j.func,indicatorsDidShow:j.func,onlineUsers:j.instanceOf(c("immutable").List),rootClassName:j.string,threadID:j.string.isRequired,viewer:j.string.isRequired},getDefaultProps:function l(){return{indicatorClass:c("ChatTypingIndicator.react"),indicatorsWillShow:c("emptyFunction"),indicatorsDidShow:c("emptyFunction")}},getInitialState:function l(){return{typingUserIDs:[]}},componentDidMount:function l(){var m=c("MercuryThreadInformer").getForFBID(this.props.viewer),n=c("MercuryTypingReceiver").getForFBID(this.props.viewer);this._subscriptions=new(c("SubscriptionsHandler"))();this._subscriptions.addSubscriptions(n.addRetroactiveListener("state-changed",this.typingStateChanged),m.subscribe("messages-received",this.messagesReceived))},componentWillReceiveProps:function l(m){if(m.threadID!=this.props.threadID)this.setState({typingUserIDs:[]})},componentWillUpdate:function l(m,n){if(n.typingUserIDs.length>0)this.props.indicatorsWillShow()},componentDidUpdate:function l(){if(this.state.typingUserIDs.length>0)this.props.indicatorsDidShow();c("MercuryParticipants").getMulti(this.state.typingUserIDs,function(m){if(this.isMounted())this.state.typingUserIDs.forEach(function(n){var o=m[n],p=this.refs[n]&&this.refs[n].getBubble();if(p&&o)c("TooltipData").set(c("ReactDOM").findDOMNode(p),this.renderTooltip(o.short_name),"above","left")}.bind(this))}.bind(this))},componentWillUnmount:function l(){this._subscriptions.release()},render:function l(){if(!c("MercuryIDs").isValid(this.props.threadID))return null;var m=i.getThreadMetaNow(this.props.threadID);if(m&&!m.is_subscribed)return null;var n=c("MercuryIDs").isGroupChat(this.props.threadID);return c("React").createElement("div",{className:this.props.rootClassName},this.state.typingUserIDs.map(function(o){return this._renderTypingIndicator(o,!!n)}.bind(this)))},_renderTypingIndicator:function l(m,n){var o=this.props.indicatorClass,p=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(c("MercuryIDs").getUserIDFromParticipantID(m));return c("React").createElement(o,{key:m,ref:m,showName:n,userID:m,isOnline:p})},renderTooltip:function l(m){var n=c("DOM").create("span");c("ReactDOM").render(c("React").createElement("span",null,h._("{name} is typing...",[h.param("name",m)])),n);return n},typingStateChanged:function l(m){if(this.props.threadID in m)this.setState({typingUserIDs:m[this.props.threadID].slice().sort()})},messagesReceived:function l(m,n){if(this.props.threadID in n){var o=n[this.props.threadID],p=c("createObjectFrom")(o.map(function(q){return q.author}));this.setState({typingUserIDs:this.state.typingUserIDs.filter(function(q){return!p[q]}).sort()})}}});f.exports=k}),null);
__d("AutoFocusableLink.react",["Link.react","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("Link.react"));i=h&&h.prototype;j.prototype.componentDidMount=function(){if(this.props.autoFocus)c("ReactDOM").findDOMNode(this).focus()};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("MercuryBootloadOnInteraction.react",["BootloadOnRender.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$MercuryBootloadOnInteraction1=function(l){this.setState({hadUserInteraction:true,interactionType:l.type})}.bind(this);this.$MercuryBootloadOnInteraction2=function(l){this.setState({interactionType:undefined})}.bind(this);this.state={hadUserInteraction:false}}j.prototype.render=function(){__p&&__p();if(!this.state.hadUserInteraction)return c("React").cloneElement(this.props.placeholder,{onFocus:this.$MercuryBootloadOnInteraction1,onMouseOver:this.$MercuryBootloadOnInteraction1,onClick:this.$MercuryBootloadOnInteraction1,onBlur:this.$MercuryBootloadOnInteraction2});var k=this.props,l=k.loader,m=k.component,n=k.placeholder,o={};switch(this.state.interactionType){case"focus":o.autoFocus=true;break;case"click":o.clicked=true;break}m=c("React").cloneElement(m,o);n=c("React").cloneElement(n,o);return c("React").createElement(c("BootloadOnRender.react"),{placeholder:n,loader:l,component:m})};f.exports=j}),null);
__d("ChatTabHeader.react",["cx","fbt","Promise","AutoFocusableLink.react","Bootloader","BootloadOnRender.react","MercuryBootloadOnInteraction.react","ChatCloseButton.react","ChatConfig","ChatTitleLink.react","EventPlanExperiment","EventReminderStateStore","JSResource","LayerFadeOnHide","LazyComponent.react","LoadOnRender.react","MercuryThreadInfo","MercuryTypingAnimation.react","MessengerAdminGroupUtils","MessengerJoinableModeType","React","SimpleNUXMessage","TooltipData","XUIAmbientNUX.react","requireWeak","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="118809038721180",n=function n(q){c("Bootloader").loadModules(["archiveWarningReact"],function(r){var s=r.jsComponent;return q(s)},"ChatTabHeader.react")},o=c("gkx")("AT7esXHVKl_rB1r5C-zEkmCVhZJMRd4NQJBo-b1EyRH6vUNk2XZEcNJ3WOEvumLbmsR6a_bwkl5o0d60WUY3jm1v");j=babelHelpers.inherits(p,c("React").PureComponent);k=j&&j.prototype;function p(q){__p&&__p();k.constructor.call(this,q);this.$ChatTabHeader1=false;this.$ChatTabHeader6=function(){for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];this.props.onClick.apply(null,s)}.bind(this);this.$ChatTabHeader16=function(){return this.refs.menu}.bind(this);this.$ChatTabHeader17=function(){c("SimpleNUXMessage").markMessageSeenByUser(m);this.setState({eventPlanNuxSeen:true})}.bind(this);this.state={eventPlanNuxSeen:c("SimpleNUXMessage").hasUserSeenMessage(m)};this.$ChatTabHeader2=new(c("Promise"))(function(r,s){this.$ChatTabHeader3=r}.bind(this));this.$ChatTabHeader4=c("JSResource")("ChatTabMenu.react").__setRef("ChatTabHeader.react")}p.prototype.componentDidMount=function(){this.$ChatTabHeader1=true;c("requireWeak")("ChatVideoCallButton.react",function(q){if(this.$ChatTabHeader1)this.setState({RTCComponent:q})}.bind(this));if(this.props.isMuted)this.getMenu()};p.prototype.componentWillUnmount=function(){this.$ChatTabHeader1=false};p.prototype.render=function(){var q=this.$ChatTabHeader5(),r=this.props.isRaised;return c("React").createElement("div",{className:"_15p4"+(!this.props.isRaised?" _15p5":"")+(r||!q?" _2pis":""),onMouseUp:this.$ChatTabHeader6,ref:"root",role:"presentation"},c("React").createElement("div",{"aria-level":"2",className:"titlebarTextWrapper _15p6",role:"heading"},c("React").createElement("div",{className:"_61td",role:r?"presentation":"button",tabIndex:r?-1:0},q,this.$ChatTabHeader7()),this.props.isTyping&&!this.props.isRaised?c("React").createElement(c("MercuryTypingAnimation.react"),{className:"_15p8",color:"dark"}):null),c("React").createElement("ul",{className:"_32ca"+(o?" _2qi8":"")},this.$ChatTabHeader8(),c("React").createElement("li",{className:"_32cb"},c("React").createElement(c("ChatCloseButton.react"),{active:this.props.isActive,className:"_3olu _3olv",onClick:this.props.onCloseClick}))))};p.prototype.focus=function(){this.refs.root&&this.refs.root.focus()};p.prototype.getMenu=function(){this.$ChatTabHeader4.load().done(function(q){return this.$ChatTabHeader1&&this.setState({MenuComponent:q})}.bind(this));return this.$ChatTabHeader2};p.prototype.$ChatTabHeader8=function(){if(!this.props.isRaised)return null;var q=[this.$ChatTabHeader9(),this.$ChatTabHeader10(),this.$ChatTabHeader11(),this.$ChatTabHeader12(),this.$ChatTabHeader13(),this.$ChatTabHeader14()];return q.filter(Boolean)};p.prototype.$ChatTabHeader13=function(){return this.$ChatTabHeader15({isAudio:true})};p.prototype.$ChatTabHeader12=function(){return this.$ChatTabHeader15({isAudio:false})};p.prototype.$ChatTabHeader15=function(q){__p&&__p();if(this.props.isEmptyChat)return null;var r=this.props,s=r.isGroupChat,t=r.onRTCNuxCloseButtonClick,u=r.rtcNuxShown,v=r.thread,w=r.threadID,x=r.viewer;if(s){if(!v||v.participants.length<=1||!c("MercuryThreadInfo").canReply(v))return null;if(v.joinable_mode&&v.joinable_mode.mode===c("MessengerJoinableModeType").JOINABLE)return null;if(q.isAudio){if(!c("ChatConfig").get("rtc_conferencing_www"))return null}else if(!c("ChatConfig").get("rtc_conferencing_www_video"))return null}var y=babelHelpers["extends"]({isGroupChat:s,onRTCNuxCloseButtonClick:t,rtcCallData:v&&v.rtc_call_data,rtcNuxShown:u&&q.isAudio,threadID:w,thread:v,viewer:x},q);y.className="_3olv"+(y.isAudio?" _2fpc":"")+(!y.isAudio?" _2fpd":"");var z=this.state.RTCComponent;return c("React").createElement("li",{className:"_3a61"+(y.isAudio?" _461a":"")+(!y.isAudio?" _461b":""),key:"rtc"+(y.isAudio?"audio":"video")},z?c("React").createElement(z,y):c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),y),loader:c("JSResource")("ChatVideoCallButton.react").__setRef("ChatTabHeader.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:y.className,role:"button"})}))};p.prototype.$ChatTabHeader14=function(){__p&&__p();if(this.props.isEmptyChat)return null;var q=babelHelpers["extends"]({attachmentsShelf:this.props.attachmentsShelf,isGroupChat:this.props.isGroupChat,isEmptyChat:this.props.isEmptyChat,isMuted:this.props.isMuted,nameConversationFunc:this.props.nameConversationFunc,otherUserID:this.props.otherUserID,showAddFriend:this.props.showAddFriend,sheetController:this.props.sheetController,threadID:this.props.threadID,onMount:this.$ChatTabHeader3},this.props.additionalMenuProps);q.className="_3olv _1ll-";var r=i._("Options"),s=this.state.MenuComponent,t=false;if(this.props.threadID){var u=c("EventReminderStateStore").getEvent(this.props.threadID);t=u&&!u.exists&&!this.state.eventPlanNuxSeen&&c("EventPlanExperiment").shouldShowEntryPointNuxWithExposure()}return c("React").createElement("div",{key:"menu"},c("React").createElement("li",{className:"_3a61 _461_",ref:"menu"},s?c("React").createElement(s,q):c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),q),loader:c("JSResource")("ChatTabMenu.react").__setRef("ChatTabHeader.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:q.className,"aria-label":r,role:"button"})})),c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"right",behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},contextRef:this.$ChatTabHeader16,onCloseButtonClick:this.$ChatTabHeader17,shown:t,width:"auto"},i._("Click here to start a new plan.")))};p.prototype.$ChatTabHeader11=function(){if(this.props.isPageChat||this.props.isEmptyChat||this.props.isMultiCompany&&!this.props.isGroupChat)return null;var q={className:"_3olv _3jyj",isFBAtWork:this.props.isWorkUser,shouldAddToApprovalQueue:c("MessengerAdminGroupUtils").shouldAddToApprovalQueue(this.props.thread,this.props.viewer),shown:true,onClick:function(){return this.props.sheetController.openAddFriendsSheet()}.bind(this)},r=i._("Add");return c("React").createElement("li",{className:"_3a61 _4620",key:"add"},c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),q),loader:c("JSResource")("ChatAddToThreadButton.react").__setRef("ChatTabHeader.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{"aria-label":r,className:q.className,role:"button"})}))};p.prototype.$ChatTabHeader9=function(){if(!this.props.isViewerEmployee)return null;var q=this.props.participants,r=q?q.length>0&&q.every(function(s){return!!(s&&s.employee)}):false;if(!r)return null;return c("React").createElement("li",{key:"archiveWarning"},c("React").createElement(c("LoadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{shown:true}),loader:n,placeholder:c("React").createElement("div",null)}))};p.prototype.$ChatTabHeader10=function(){if(!this.props.isWorkUser||!this.props.isMultiCompany)return null;var q=i._("Multi company chat");return c("React").createElement("li",{key:"multiCompanyBadge"},c("React").createElement("div",{className:"_3olv"},c("React").createElement(c("AutoFocusableLink.react"),babelHelpers["extends"]({className:"_kp6",onClick:this.props.onCloseClick,lable:q},c("TooltipData").propsFor(q,"above")))))};p.prototype.$ChatTabHeader18=function(){return c("React").createElement("span",{className:"_3a61"+(!this.props.isRaised?" _3-99":"")},c("React").createElement("span",{className:"_3olv _2nlt"}))};p.prototype.$ChatTabHeader7=function(){return c("React").createElement(c("ChatTitleLink.react"),babelHelpers["extends"]({href:this.props.isRaised?this.props.href:undefined,thread:this.props.thread,viewer:this.props.viewer},c("TooltipData").propsFor(this.props.tooltip,"above")))};p.prototype.$ChatTabHeader5=function(){var q=this.props,r=q.isRaised,s=q.thread;if(!r&&s&&s.unread_count>0)return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{className:"_3-8_ _3-99",count:s.unread_count,type:"special"}),loader:c("JSResource")("XUIBadge.react").__setRef("ChatTabHeader.react"),placeholder:c("React").createElement("span",null)});return this.$ChatTabHeader18()};p.propTypes={additionalMenuProps:l.object,attachmentsShelf:l.object.isRequired,href:l.string,isActive:l.bool.isRequired,isEmptyChat:l.bool,isGroupChat:l.bool,isMuted:l.bool,isPageChat:l.bool,isRaised:l.bool,isTyping:l.bool,isViewerEmployee:l.bool,isWorkUser:l.bool,nameConversationFunc:l.func.isRequired,otherUserID:l.string,participants:l.arrayOf(l.object),rtcNuxShown:l.bool.isRequired,sheetController:l.object.isRequired,showAddFriend:l.func.isRequired,thread:l.object,threadID:l.string,tooltip:l.string,viewer:l.string.isRequired,onClick:l.func.isRequired,onCloseClick:l.func.isRequired,onRTCNuxCloseButtonClick:l.func.isRequired};f.exports=p}),null);
__d("getGroupNameTooltipFromParticipantIDs",["fbt","MercuryParticipants","MercuryViewer"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=10,j="\n";function k(m,n){__p&&__p();var o=[],p=c("MercuryViewer").getID();m=m&&m.filter(function(s){return s!==p});if(!m||!m.length){n(null);return}var q=m.length,r=q-i;if(r>1)m=m.slice(0,i);c("MercuryParticipants").getMulti(m,function(s){for(var t in s){var u=s[t];o.push(u.name)}if(r>1){var v=h._("and {number of hidden chat participants} more.",[h.param("number of hidden chat participants",r)]);o.push(v)}n(o.join(j))})}function l(m){__p&&__p();var n=[],o=c("MercuryViewer").getID();m=m&&m.filter(function(r){return r!==o});if(!m||!m.length)return null;n=m.map(function(r){var s=c("MercuryParticipants").getOrFetch(r);return s&&s.name}).filter(function(r){return!!r});var p=m.length-(m.length-n.length)-i;if(p>1){n=n.slice(0,i);var q=h._("and {number of hidden chat participants} more.",[h.param("number of hidden chat participants",p)]);n.push(q)}return n.join(j)}f.exports={getGroupNameTooltipFromParticipantIDs:l,getGroupNameTooltipFromParticipantIDsAsync:k}}),null);
__d("getTitleHrefFromThreadID",["MercuryIDs","MercuryParticipants","WebMessengerThreadPermalinks"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){__p&&__p();if(c("MercuryIDs").isLocalThread(i)){j();return}var k=c("MercuryIDs").getUserIDFromThreadID(i);if(k)c("MercuryParticipants").get(c("MercuryIDs").getParticipantIDFromUserID(k),function(l){if(l.href)j(l.href);else j(c("WebMessengerThreadPermalinks").getThreadURIFromUserID(k))});else c("WebMessengerThreadPermalinks").getThreadURI(i,j)}f.exports=h}),null);
__d("ChatTabHeaderContainer.react",["ChatTabHeader.react","CurrentUser","MercuryIDs","MercuryParticipants","MercuryThreads","MercuryThreadInfo","React","SubscriptionsHandler","WorkModeConfig","getPageIDFromThreadID","getGroupNameTooltipFromParticipantIDs","getTitleHrefFromThreadID"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("getGroupNameTooltipFromParticipantIDs").getGroupNameTooltipFromParticipantIDs,k=c("React").PropTypes;h=babelHelpers.inherits(l,c("React").PureComponent);i=h&&h.prototype;function l(m){i.constructor.call(this,m);this.$ChatTabHeaderContainer1=new(c("SubscriptionsHandler"))();this.state=this.calculateState(m)}l.prototype.calculateState=function(m){__p&&__p();var n=false,o=true,p=false,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0;if(m.threadID){var v=c("MercuryThreads").getForFBID(m.viewer);t=v.getOrFetch(m.threadID);n=c("MercuryIDs").isGroupChat(m.threadID);o=v.isNewEmptyLocalThread(m.threadID);p=!!t&&c("MercuryThreadInfo").isMuted(t);q=c("MercuryIDs").getUserIDFromThreadID(m.threadID);r=c("getPageIDFromThreadID")(m.threadID);if(t){s=t.participants.map(c("MercuryParticipants").getOrFetch,c("MercuryParticipants"));u=j(t.participants)}}var w=this.state&&this.state.additionalMenuProps||{};if(m)w=babelHelpers["extends"]({},w,m.additionalMenuProps);return{additionalMenuProps:w,isEmptyChat:o,isGroupChat:n,isMuted:p,otherUserID:q,pageID:r,participants:s,thread:t,tooltip:u}};l.prototype.componentWillMount=function(){this.$ChatTabHeaderContainer1.addSubscriptions(c("MercuryThreads").addListener("change",function(){this.setState(this.calculateState(this.props))}.bind(this)),c("MercuryParticipants").addListener("change",function(){this.setState(this.calculateState(this.props))}.bind(this)))};l.prototype.componentDidMount=function(){this.$ChatTabHeaderContainer2();this.props.onMount&&this.props.onMount(this)};l.prototype.componentWillReceiveProps=function(m){if(m.threadID!==this.props.threadID)this.$ChatTabHeaderContainer2();this.setState(this.calculateState(m))};l.prototype.componentWillUnmount=function(){this.$ChatTabHeaderContainer1.release()};l.prototype.render=function(){return c("React").createElement(c("ChatTabHeader.react"),{additionalMenuProps:this.state.additionalMenuProps,attachmentsShelf:this.props.attachmentsShelf,href:this.state.href,isActive:this.props.isActive,isEmptyChat:this.state.isEmptyChat,isGroupChat:this.state.isGroupChat,isMuted:this.state.isMuted,isPageChat:!!this.state.pageID,isRaised:this.props.isRaised,isTyping:this.props.isTyping,isViewerEmployee:c("CurrentUser").isEmployee(),isWorkUser:!!c("WorkModeConfig").is_work_user,nameConversationFunc:this.props.nameConversationFunc,otherUserID:this.state.otherUserID,participants:this.state.participants,rtcNuxShown:this.props.rtcNuxShown,sheetController:this.props.sheetController,showAddFriend:this.props.showAddFriend,ref:"header",thread:this.state.thread,threadID:this.props.threadID,tooltip:this.state.tooltip,viewer:this.props.viewer,onClick:this.props.onClick,onCloseClick:this.props.onCloseClick,onRTCNuxCloseButtonClick:this.props.onRTCNuxCloseButtonClick,isMultiCompany:this.props.isMultiCompany})};l.prototype.focus=function(){this.refs.header.focus()};l.prototype.setAdditionalMenuProps=function(m){var n=babelHelpers["extends"]({},this.state.additionalMenuProps,m);this.setState({additionalMenuProps:n})};l.prototype.getMenu=function(){return this.refs.header.getMenu()};l.prototype.$ChatTabHeaderContainer2=function(){c("getTitleHrefFromThreadID")(this.props.threadID,function(m){return this.setState({href:m})}.bind(this))};l.propTypes={additionalMenuProps:k.object,attachmentsShelf:k.object.isRequired,isActive:k.bool.isRequired,isRaised:k.bool,isTyping:k.bool,nameConversationFunc:k.func.isRequired,rtcNuxShown:k.bool.isRequired,sheetController:k.object.isRequired,showAddFriend:k.func.isRequired,threadID:k.string,viewer:k.string.isRequired,onClick:k.func.isRequired,onCloseClick:k.func.isRequired,onMount:k.func,onRTCNuxCloseButtonClick:k.func.isRequired};f.exports=l}),null);
__d("MessageRequestUtils",["MessagingTag"],(function a(b,c,d,e,f,g){"use strict";var h={isMessageRequest:function i(j){return(j.folder===c("MessagingTag").PENDING||j.folder===c("MessagingTag").OTHER)&&j.can_reply},isFiltered:function i(j){return j.folder===c("MessagingTag").OTHER}};f.exports=h}),null);
__d("MoveToWorkUtils",["CurrentUser"],(function a(b,c,d,e,f,g){"use strict";function h(){return c("CurrentUser").isEmployee()&&c("CurrentUser").hasWorkUser()}f.exports={isViewerEligible:h}}),null);
__d("XGroupCallNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/groupcall/nux/",{action:{type:"String",required:true}})}),null);
__d("FantaChatHeaderContainer.react",["cx","AsyncRequest","ChatTabHeaderContainer.react","FantaTabActions","FantaTabSheetActions","mercuryBlockedParticipantsRe","MercuryConfig","MercuryIDs","MercuryParticipants","MercuryThreadInfo","MercuryThreads","MessageRequestUtils","MoveToWorkUtils","React","XGroupCallNuxController","emptyFunction","isEmpty"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("MercuryThreads").get(),l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$FantaChatHeaderContainer1=false,this.state={rtcNuxShown:false},this.$FantaChatHeaderContainer6=function(){var s=this.props.threadID;c("FantaTabSheetActions").openAddMoreFriendsSheet(s)}.bind(this),this.$FantaChatHeaderContainer5=function(){var s=this.props.threadID;c("FantaTabSheetActions").openNameConversationSheet(s)}.bind(this),this.$FantaChatHeaderContainer7=function(){var s=this.props.threadID;c("FantaTabSheetActions").openAddMoreFriendsSheet(s)}.bind(this),this.$FantaChatHeaderContainer9=function(){this.props.onClose&&this.props.onClose()}.bind(this),this.$FantaChatHeaderContainer8=function(event){this.$FantaChatHeaderContainer3();var s=event.target;if(!s)return;if(s.getAttribute("role")==="presentation"||s.classList&&(s.classList.contains("_15p6")||s.classList.contains("_2nlt")||s.classList.contains("_14lt"))){event.preventDefault();c("FantaTabActions").minimizeTab(this.props.threadID)}}.bind(this),this.$FantaChatHeaderContainer3=function(){if(this.state.rtcNuxShown&&this.$FantaChatHeaderContainer1){this.setState({rtcNuxShown:false});var s=c("XGroupCallNuxController").getURIBuilder().setString("action","dismiss").getURI();new(c("AsyncRequest"))(s).send()}}.bind(this),o}m.prototype.shouldComponentUpdate=function(n,o){var p=this.props,q=this.state;return p.viewer!==n.viewer||p.threadID!==n.threadID||p.isLastGroupTab!==n.isLastGroupTab||p.thread!==n.thread||q.rtcNuxShown!==o.rtcNuxShown||p.customColor!==n.customColor};m.prototype.componentDidMount=function(){this.$FantaChatHeaderContainer1=true;this.$FantaChatHeaderContainer2()};m.prototype.componentWillUnmount=function(){this.$FantaChatHeaderContainer3();this.$FantaChatHeaderContainer1=false};m.prototype.render=function(){var n=this.props,o=n.isFocused,p=n.thread,q=n.threadID,r=n.viewer,s=n.customColor,t=this.state.rtcNuxShown,u=!!p&&c("MercuryThreadInfo").isMuted(p),v=c("MercuryIDs").getParticipantIDFromFromThreadID(q),w=v?c("MercuryParticipants").getNow(v):null,x=w&&w.is_business_enabled,y=c("MoveToWorkUtils").isViewerEligible()&&c("MercuryIDs").isGroupChat(q)&&p&&this.$FantaChatHeaderContainer4(p.participants),z=p&&c("MercuryThreadInfo").showComposer(p)&&!c("isEmpty")(p.participants)&&!c("MessageRequestUtils").isMessageRequest(p)&&!c("MercuryConfig").ViewerIsReadOnly&&!(c("MercuryConfig").ColdOpenBlock&&(c("MercuryThreadInfo").isColdOpen(p)||c("MercuryThreadInfo").isEmptyLocalThread(p))),A=p&&c("mercuryBlockedParticipantsRe").get().isMessageBlocked(p),B=k.isNewEmptyLocalThread(q),C=p&&p.message_count===0,D={hasMessageBlocked:A,hasSwitchToWork:y,isBusinessEnabled:x,isEmptyChat:B,isEmptyConversation:C,isMuted:u,show:z},E=s?{color:s}:null;return c("React").createElement("div",{className:"clearfix fbNubFlyoutTitlebar titlebar"+(!!s?" _1m34":""),style:E},c("React").createElement(c("ChatTabHeaderContainer.react"),{additionalMenuProps:D,attachmentsShelf:document.createElement("div"),isActive:o,isRaised:true,isTyping:false,nameConversationFunc:this.$FantaChatHeaderContainer5,rtcNuxShown:t,sheetController:{openAddFriendsSheet:this.$FantaChatHeaderContainer6},showAddFriend:this.$FantaChatHeaderContainer7,threadID:q,viewer:r,onClick:this.$FantaChatHeaderContainer8,onCloseClick:this.$FantaChatHeaderContainer9,onRTCNuxCloseButtonClick:this.$FantaChatHeaderContainer3,isMultiCompany:this.props.isMultiCompany}))};m.prototype.$FantaChatHeaderContainer4=function(n){return n.length>0&&n.every(function(o){var p=c("MercuryParticipants").getNow(o);return!!(p&&p.employee)})};m.prototype.$FantaChatHeaderContainer2=function(){if(this.props.isLastGroupTab){var n=c("XGroupCallNuxController").getURIBuilder().setString("action","should_show").getURI();new(c("AsyncRequest"))(n).setHandler(function(o){var p=o.payload.shouldShow;if(this.$FantaChatHeaderContainer1)this.setState({rtcNuxShown:p})}.bind(this)).send()}};m.propTypes={customColor:l.string,isFocused:l.bool.isRequired,isLastGroupTab:l.bool.isRequired,onClose:l.func.isRequired,thread:l.object,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=m}),null);
__d("FantaConversation.react",["Bootloader","ChatConversation.react","CurrentUser","EventProfiler","MercuryIDs","MessengerHotLikePreviewEvents","React","StickerInterfaces","StickersTypedLogger","SubscriptionsHandler","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(l){__p&&__p();i.constructor.call(this,l);this.$FantaConversation4=function(m){if(this.props.threadID===m)this.setState({likePreview:null})}.bind(this);this.$FantaConversation5=function(m,n){__p&&__p();if(!m)return;new(c("StickersTypedLogger"))().setEvent("click_sticker").setPackid(m).setStickerid(n).log();c("Bootloader").loadModules(["StickersPackInTray","StickersActions","StickersStoreController"],function(o,p,q){o.onIsPackInTray(m,c("StickerInterfaces").MESSAGES,function(r){if(r.in_sticker_tray){p.selectTrayPack(m);p.showStickerFlyout(this.props.threadID)}else q.showStore(m)}.bind(this))}.bind(this),"FantaConversation.react")}.bind(this);this.state={likePreview:null};this.$FantaConversation1=new(c("SubscriptionsHandler"))()}k.prototype.shouldComponentUpdate=function(l,m){var n=this.props,o=this.state;return!n.onlineUsers.equals(l.onlineUsers)||!n.messages.equals(l.messages)||n.threadID!==l.threadID||n.thread!==l.thread||o.likePreview!==m.likePreview};k.prototype.componentDidMount=function(){this.$FantaConversation2();this.$FantaConversation3()};k.prototype.componentDidUpdate=function(){this.$FantaConversation3()};k.prototype.componentWillUnmount=function(){this.$FantaConversation1.release()};k.prototype.$FantaConversation3=function(){c("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],true,"click")};k.prototype.$FantaConversation2=function(){this.$FantaConversation1.addSubscriptions(c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").START,function(l,m){if(this.props.threadID===m)this.setState({likePreview:l})}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").STOP,this.$FantaConversation4),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").STOP_EMOJI,this.$FantaConversation4),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").REMOVE,this.$FantaConversation4))};k.prototype.render=function(){var l=this.props.messages,m=this.props,n=m.onLoadMoreMessages,o=m.thread,p=m.threadID,q=this.state.likePreview,r=c("CurrentUser").getID();if(q)l=l.push(q);return o?c("React").createElement(c("ChatConversation.react"),{isCanonical:c("MercuryIDs").isCanonical(p),loadMoreMessages:n,maxBubbleWidth:181-this.props.scrollbarPadding,messages:l,onAttachmentLoad:function(){return this.props.onAttachmentLoad()}.bind(this),onMount:c("emptyFunction"),onStickerClick:this.$FantaConversation5,onlineUsers:this.props.onlineUsers,ref:"conversation",thread:o,threadID:p,viewer:r}):c("React").createElement("div",null)};k.prototype.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList()};k.propTypes={messages:j.object.isRequired,onLoadMoreMessages:j.func.isRequired,onlineUsers:j.object.isRequired,scrollbarPadding:j.number,thread:j.object,threadID:j.string.isRequired};f.exports=k}),null);
__d("FantaPageGreetingLoader.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React","getPageIDFromThreadID","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function i(j){var k=j.thread,l=j.threadID;if(k!=null){var m,n=((m=k)!=null?m.is_canonical_neo_user:m)||false;if(n)return null}else return null;return c("getPageIDFromThreadID")(l)?c("React").createElement("div",{className:"_av1"},c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MercuryChatTabPagesGreetingContainer.react").__setRef("FantaPageGreetingLoader.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{threadID:l})})):null};f.exports=i}),null);
__d("MercuryCamQuickReply.react",["cx","fbt","BootloadedComponent.react","JSResource","MercuryIDs","MercuryThreads","MessengerQuickCamOrigins","React","XUISpinner.react","convertMIGColorToFIGColor"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryThreads").get(),m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;n.prototype.componentWillUpdate=function(o,p){if(o&&this.props.lastMessage!==o.lastMessage&&this.props.camQuickReplyWillShow)this.props.camQuickReplyWillShow()};n.prototype.componentDidUpdate=function(o,p){if(o&&this.props.lastMessage!==o.lastMessage&&this.props.camQuickReplyDidShow)this.props.camQuickReplyDidShow()};n.prototype.render=function(){var o=this.props.lastMessage,p=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);if(!(o&&o.message_source&&o.author!==p&&o.message_source==="camera"))return null;var q=l.getThreadMetaNow(this.props.threadID),r=q?c("convertMIGColorToFIGColor")(q.custom_color):null,s=c("React").createElement("div",{className:"_zdf",style:r&&{color:r}},i._("Send a photo reply"));return c("React").createElement("div",{className:"_zdg"},c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MercuryCamQuickReply.react"),bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),{className:"_5h-9"}),className:"_5yhk _6gb",location:c("MessengerQuickCamOrigins").CHAT_TAB,threadID:this.props.threadID,viewer:this.props.viewer,textChild:s}))};function n(){j.apply(this,arguments)}n.propTypes={camQuickReplyWillShow:m.func,camQuickReplyDidShow:m.func,lastMessage:m.object,threadID:m.string.isRequired,viewer:m.string.isRequired};f.exports=n}),null);
__d("MercuryIndicatorController",["fbt","ArbiterMixin","DOM","MercuryActionType","MercuryDelayedRoger","MercuryIDs","MercuryMessageSourceTags","MercuryParticipants","mercuryRogerRe","MercurySourceType","MercuryThreads","MercuryTypingReceiver","MercuryViewer","WorkModeConfig","formatDate","removeFromArray"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("MercuryDelayedRoger").get(),j=c("mercuryRogerRe").get(),k=c("MercuryThreads").get(),l=c("MercuryTypingReceiver").get(),m=[];function n(o){this._threadID=o;this._canonicalUser=c("MercuryIDs").getUserIDFromThreadID(o);m.push(this)}Object.assign(n.prototype,c("ArbiterMixin"),{destroy:function o(){c("removeFromArray")(m,this)},setLastMessage:function o(p){this._lastMsg=p;this._handleStateChange()},_informStateChanged:function o(p){if(p.activity=="none"&&this._currentActivity=="none")return;if(this._lastMsg&&this._lastMsg.author&&c("MercuryViewer").isViewer(this._lastMsg.author))p.self_authored=true;this._currentActivity=p.activity;this.inform("state-changed",p)},_notifySentFrom:function o(){__p&&__p();var p,q,r=this._lastMsg.source_tags||this._lastMsg.tags||[];if(r.includes(c("MercuryMessageSourceTags").MESSENGER)){if(!c("WorkModeConfig").is_work_user)p=c("DOM").create("a",{href:"/mobile/messenger","class":"fcg",target:"_blank"},h._("Sent from Messenger"));else p=c("DOM").create("a",{href:"https://www.facebook.com/workplace/mobile/","class":"fcg",target:"_blank"},h._("Sent from Workplace Chat"));q="sentFromMobile"}else if(r.includes(c("MercuryMessageSourceTags").MOBILE)){var s=c("WorkModeConfig").is_work_user?"/workplace/mobile":"/mobile";p=c("DOM").create("a",{href:s,"class":"fcg",target:"_blank"},h._("Sent from Mobile"));q="sentFromMobile"}else if(r.includes(c("MercuryMessageSourceTags").EMAIL)){p=h._("Sent from email");q="sentFromEmail"}else if(r.includes(c("MercurySourceType").MESSENGER_COMMERCE))q="sentFromMessengerCommerce";else{this._informStateChanged({activity:"none"});return}this._informStateChanged({activity:q,text:p})},_notifySeenTimestamp:function o(p){var q=Date.now()*.001,r=j.getSeenTimestamp(this._threadID,p[0]),s=r.action*.001,t;if(s<q-518400)t="M j";else if(s<q-86400)t="D g:ia";else t="g:ia";this._informStateChanged({activity:"seen-timestamp",text:h._("Seen {timestamp}",[h.param("timestamp",c("formatDate")(s,t))])})},_nameNormalizer:function o(p){__p&&__p();var q;c("MercuryParticipants").getMulti(p,function(r){function s(u){if(r[u]!==undefined&&r[u].short_name)return r[u].short_name.toLowerCase();else return u}var t=p.map(s);q=function q(u){var v=s(u),w=t.indexOf(v)!==t.lastIndexOf(v);return w?r[u].name:r[u].short_name}});return q},_seenByEveryone:function o(p,q,r){var s=r?r.participants.length:0,t=p.length;if(q.author!=c("MercuryViewer").getID()&&(!r||r.participants.indexOf(q.author)>-1))t++;return s>2&&t>=s-1},_notifySeenBy:function o(p){__p&&__p();var q=this._lastMsg,r=true;c("MercuryParticipants").getMulti(p,function(s){__p&&__p();r=false;if(this._lastMsg!=q)return;var t=k.getThreadMetaNow(this._threadID),u=null;if(t&&t.custom_nickname)u=t.custom_nickname;var v=[];for(var w in s){var x=s[w],y=x.short_name;if(u&&u[x.fbid])y=u[x.fbid];v[w]=y}var z,A=false;if(this._seenByEveryone(p,q,t))z={prefix:"Seen by everyone"};else if(p.length==1)z={prefix:"Seen by ",names:" "+v[p[0]]};else if(p.length==2)z={prefix:"Seen by ",names:" "+v[p[0]]+", "+v[p[1]]};else if(p.length==3)z={prefix:"Seen by ",names:" "+v[p[0]]+", "+v[p[1]]+", "+v[p[2]]};else if(p.length>3){z={prefix:"Seen by ",names:" "+v[p[0]]+", "+v[p[1]]+", "};A=true}this._informStateChanged({activity:"seen-by",text:z,seenBy:p,showTooltip:A})}.bind(this));r&&this._informStateChanged({activity:"none"})},_handleStateChange:function o(){__p&&__p();var p=c("MercuryActionType").LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==p){this._informStateChanged({activity:"none"});return}if(this._typing&&this._typing.length){this._informStateChanged({activity:"none"});return}if(this._canonicalUser&&this._lastMsg.author!=c("MercuryViewer").getID()){this._notifySentFrom();return}var q=i.getSeenBy(this._threadID,true);if(q.length)if(this._canonicalUser){this._notifySeenTimestamp(q);return}else{this._notifySeenBy(q);return}this._informStateChanged({activity:"none"})}});l.addRetroactiveListener("state-changed",function(o){m.forEach(function(p){var q=o[p._threadID];if(q!==undefined){p._typing=q;p._handleStateChange()}})});i.subscribe("state-changed",function(o,p){m.forEach(function(q){p[q._threadID]&&q._handleStateChange()})});f.exports=n}),null);
__d("MercuryLastMessageIndicator.react",["cx","fbt","DOM","MercuryIndicatorController","MessengerTextWithEmoticons.react","MercuryParticipants","React","ReactDOM","TooltipData","emptyFunction","joinClasses"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={data:{}},this.getRootClass=function(){var s="_510g"+(this.state.data.self_authored?" _510e":""),t=this.state.data.activity,u=null;if(String(t).startsWith("seen"))u="seen";else if(t=="typing")u=this.props.hideTyping?null:t;else u=t;return c("joinClasses")(s,u,this.props.className)}.bind(this),this.isVisible=function(s,t){s=s||this.props;t=t||this.state;return t.data&&t.data.activity!="none"&&!(s.hideTyping&&t.data.activity=="typing")}.bind(this),this.$MercuryLastMessageIndicator2=function(){this.$MercuryLastMessageIndicator6.unsubscribe();this.$MercuryLastMessageIndicator3.destroy()}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.$MercuryLastMessageIndicator1(this.props)};m.prototype.componentWillReceiveProps=function(n){"use strict";if(n.threadID!=this.props.threadID){this.$MercuryLastMessageIndicator2();this.$MercuryLastMessageIndicator1(n)}else if(n.lastMessage!=this.props.lastMessage)this.$MercuryLastMessageIndicator3.setLastMessage(n.lastMessage)};m.prototype.componentWillUpdate=function(n,o){"use strict";if(this.isVisible(n,o))this.props.indicatorWillShow()};m.prototype.componentDidUpdate=function(){"use strict";if(!this.isVisible())return;if(!this.isSeenBy()){this.setText();this.setTooltip()}this.props.indicatorDidShow()};m.prototype.componentWillUnmount=function(){"use strict";this.$MercuryLastMessageIndicator2()};m.prototype.render=function(){"use strict";if(this.isSeenBy()){var n=this.$MercuryLastMessageIndicator4(this.state.data);return c("React").createElement("div",{className:this.getRootClass()},c("React").createElement("div",{className:"_510h"}),c("React").createElement("span",{className:"_510f"},n))}else return c("React").createElement("div",{className:this.getRootClass()},c("React").createElement("div",{className:"_510h"}),c("React").createElement("span",{className:"_510f",ref:"text"},"\xa0"))};m.prototype.isSeenBy=function(n,o){"use strict";n=n||this.props;o=o||this.state;return o.data&&o.data.activity==="seen-by"};m.prototype.setText=function(){"use strict";if(this.state.data.text)c("DOM").setContent(c("ReactDOM").findDOMNode(this.refs.text),this.state.data.text)};m.prototype.setTooltip=function(){"use strict";if(this.state.data.activity==="seen-by"&&this.state.data.showTooltip)c("MercuryParticipants").getMulti(this.state.data.seenBy,function(n){var o=c("DOM").create("div",null,this.state.data.seenBy.map(function(p){return c("DOM").create("div",null,n[p].name)}));c("TooltipData").set(c("DOM").find(c("ReactDOM").findDOMNode(this),"span.more"),o,"above","center")}.bind(this))};m.prototype.$MercuryLastMessageIndicator4=function(n){"use strict";__p&&__p();var o=n&&n.text;if(!o)return null;if(!o.names)return i._("Seen by everyone");else{var p=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoji:true,renderEmoticons:true,text:o.names});if(!n.showTooltip)return i._("Seen by {names}",[i.param("names",p)]);else{var q=this.$MercuryLastMessageIndicator5(n);return i._("Seen by {names}{=num more link}",[i.param("names",p),i.param("=num more link",q)])}}};m.prototype.$MercuryLastMessageIndicator5=function(n){"use strict";__p&&__p();if(!n||!n.text||!n.showTooltip)return null;var o={},p=0;if(n.activity==="seen-by"){var q=null;c("MercuryParticipants").getMulti(n.seenBy,function(s){q=n.seenBy.map(function(t){return s[t].name}).join("\r\n");p=Object.keys(s).length-2});o=Object.assign({"data-tooltip-alignh":"center"},c("TooltipData").propsFor(q,"above"))}var r=i._({"*":"{num} more"},[i.param("num",p,[0])]);return c("React").createElement("span",babelHelpers["extends"]({className:"more"},o),r)};m.prototype.$MercuryLastMessageIndicator1=function(n){"use strict";this.$MercuryLastMessageIndicator3=new(c("MercuryIndicatorController"))(n.threadID);this.$MercuryLastMessageIndicator6=this.$MercuryLastMessageIndicator3.subscribe("state-changed",function(o,p){return this.setState({data:p})}.bind(this));n.lastMessage&&this.$MercuryLastMessageIndicator3.setLastMessage(n.lastMessage)};m.propTypes={hideTyping:l.bool,indicatorWillShow:l.func,indicatorDidShow:l.func,lastMessage:l.object,threadID:l.string.isRequired};m.defaultProps={indicatorWillShow:c("emptyFunction"),indicatorDidShow:c("emptyFunction")};f.exports=m}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1342409575886656"};j.getQueryID=function(){"use strict";return"304829463257788"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MercuryQuickReply.react",["cx","BootloadedComponent.react","JSResource","MercuryIDs","MessengerQuickCamOrigins","MessengerViewerContactMethodsWebGraphQLQuery","MNOmniMConstants","OmniMStore","React","WebGraphQL","XUISpinner.react","FluxContainer","gkx","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={suggestions:null,omniMPrefs:null,viewerEmail:null,viewerPhone:null},n}l.getStores=function(){return[c("OmniMStore")]};l.calculateState=function(m,n){return{suggestions:c("OmniMStore").suggestionsForThread(n.threadID),omniMPrefs:c("OmniMStore").prefs()}};l.prototype.componentWillMount=function(){if(this.props.quickReplyWillShow&&this.$MercuryQuickReply1(this.state))this.props.quickReplyWillShow()};l.prototype.componentDidMount=function(){if(this.props.quickReplyDidShow&&this.$MercuryQuickReply1(this.state))this.props.quickReplyDidShow()};l.prototype.componentWillUpdate=function(m,n){if(this.props.quickReplyWillShow&&n&&this.$MercuryQuickReply1(n)&&!this.$MercuryQuickReply1(this.state))this.props.quickReplyWillShow()};l.prototype.componentDidUpdate=function(m,n){if(this.props.quickReplyDidShow&&this.$MercuryQuickReply1(this.state)&&!this.$MercuryQuickReply1(n))this.props.quickReplyDidShow();this.$MercuryQuickReply2()};l.prototype.render=function(){__p&&__p();var m=this.props.lastMessage;if(!m)return null;var n=null,o=null,p=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),q=this.state.suggestions||{},r=q.quickReplies,s=q.agentSuggestions;if(r&&r.length&&m.author!==p){n=r;o=c("MNOmniMConstants").QUICKREPLIES}else if(s&&s.length&&c("gkx")("AT4E-H2IF55T_cfJfVFc0DIJ5Zc0x6Ksd6rrKuinf7B4BwJUeLW2H-a3HWX5xDBokJhpUd0lJcH9_F8HOyg9KFc8")){n=s;o=c("MNOmniMConstants").OMNIM}if(!n||!n.length||n.every(function(t){return t.content_type==="user_email"&&this.state.viewerEmail===null||t.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this))||!n.filter(function(t){return!t.dismissed}).length)return null;return c("React").createElement("div",{className:"_419m",ref:"quickReply"},c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MercuryQuickReply.react"),bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),{className:"_5h-9"}),isSponsored:m.is_sponsored,messageId:m.message_id,omniMPrefs:this.state.omniMPrefs,options:n,pageId:m.author!==null?c("MercuryIDs").getUserIDFromParticipantID(m.author):undefined,threadID:m.thread_id,quickCamOriginLocation:this.props.quickCamOriginLocation,source:o,viewer:this.props.viewer,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}))};l.prototype.$MercuryQuickReply1=function(m){var n=m.suggestions||{},o=n.quickReplies,p=n.agentSuggestions,q=o&&o.length,r=p&&p.length&&c("gkx")("AT4E-H2IF55T_cfJfVFc0DIJ5Zc0x6Ksd6rrKuinf7B4BwJUeLW2H-a3HWX5xDBokJhpUd0lJcH9_F8HOyg9KFc8");return!!(q||r)};l.prototype.$MercuryQuickReply2=function(){__p&&__p();var m=this.state.suggestions||{},n=m.quickReplies;if(!n||n.length===0)return;var o=c("gkx")("AT6b68OqbLsWJQlJTGZqwlCTZJ0z0taRGUXqOzuQVRDoLPO2Dnjh-maTANaNF_FUgpVzi4qt9-S_T7GMqZpzzd99"),p=c("gkx")("AT70ApPO8u4r9N24CdWkIiFYZMdcnAaeV9BaXzLxdBmkmVf60X7teW8bfJTrYYnPlB7TPT4_aBOsOQDbCdO-mpJj4JY2rmmLkTH2jaDU2xAiSg");if(n.some(function(q){return q.content_type==="user_email"&&o||q.content_type==="user_phone_number"&&p}))c("WebGraphQL").exec(new(c("MessengerViewerContactMethodsWebGraphQLQuery"))({})).done(function(q){var r,s,t,u,v=p?(r=q)!=null?(r=r.viewer)!=null?(r=r.user)!=null?r.all_phones:r:r:r:null,w=o?(s=q)!=null?(s=s.viewer)!=null?s.all_emails:s:s:null,x=!v?null:v.find(function(z){return z.is_preferred});if(!x&&v)x=v[0];var y=!w?null:w.find(function(z){return z.is_primary});this.setState({viewerEmail:(t=y)!=null?(t=t.email_address)!=null?t.deduplicated_email_address:t:t,viewerPhone:(u=x)!=null?(u=u.phone_number)!=null?u.universal_number:u:u})}.bind(this))};l.propTypes={quickReplyWillShow:k.func,quickReplyDidShow:k.func,lastMessage:k.object,quickCamOriginLocation:k.oneOf(c("MessengerQuickCamOrigins").getValues()).isRequired,threadID:k.string.isRequired,viewer:k.string.isRequired};f.exports=c("FluxContainer").create(l,{withProps:true})}),null);
__d("FantaConversationScroller.react",["csx","cx","fbt","Animation","Arbiter","BootloadedComponent.react","Bootloader","ChatTypingIndicators.react","CurrentUser","DOM","Event","FantaConversation.react","FantaPageGreetingLoader.react","FantaTabActions","Grid.react","immutable","JSResource","MercuryLastMessageIndicator.react","MercuryAttachment","MercuryCamQuickReply.react","MercuryConfig","MercuryIDs","MercuryQuickReply.react","MercuryThreads","MessengerHotLikePreviewEvents","MessengerQuickCamOrigins","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MutationObserver","Parent","React","ReactDOM","MercuryShareAttachmentRenderLocations","Scroll","ScrollBoundaryContain","Style","SubscriptionsHandler","XUISpinner.react","clearImmediate","emptyFunction","getElementPosition","getPageIDFromThreadID","gkx","isEventSupported","setImmediate","throttle"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MercuryThreads").get(),n=c("Grid.react").GridItem,o=c("React").PropTypes,p=".img:not(.loaded)",q="loaded",r="._59go",s=15,t=null,u=20,v=1e3;function w(y){__p&&__p();if(t===null){var z=y.firstElementChild;if(z){c("Style").set(y,"overflow","scroll");var A=z.clientWidth;c("Style").set(y,"overflow","hidden");var B=z.clientWidth;t=Math.max(B-A,0);c("Style").set(y,"overflow","")}else t=0}return t}k=babelHelpers.inherits(x,c("React").Component);l=k&&k.prototype;function x(y){__p&&__p();l.constructor.call(this,y);this.$FantaConversationScroller10=[];this.state={loadingMessages:!m.isEmptyLocalThread(this.props.threadID),scrollbarPadding:t===null?s:t};this.$FantaConversationScroller12=function(z){if(!c("gkx")("AT41s5nc5usyR3AxF6JSJYEGfAY8tyQMohn4tHD5EBNPLj9IR60HLUM8XbLkhkanQ0whco6up8j9rPvwA-GdPWr0"))return;z.forEach(function(A){if(A.addedNodes.length>0){A.addedNodes.forEach(function(B){this.$FantaConversationScroller13(B)}.bind(this));this.$FantaConversationScroller17()}}.bind(this))}.bind(this);this.$FantaConversationScroller22=function(z){__p&&__p();var A=c("ReactDOM").findDOMNode(this.refs.scrollContainer);if(A){this.$FantaConversationScroller23();if(this.$FantaConversationScroller24()&&!this.$FantaConversationScroller25()&&!this.$FantaConversationScroller4&&!this.props.hasFetchedAll){this.setState({loadingMessages:true});this.props.onLoadMoreMessages()}this.$FantaConversationScroller26();this.$FantaConversationScroller11()}}.bind(this);this.$FantaConversationScroller19=function(){__p&&__p();if(!this.refs||this.state.loadingMessages||!this.props.thread){this.$FantaConversationScroller10=[];return}var z=c("ReactDOM").findDOMNode(this.refs.scrollContainer),A=c("getPageIDFromThreadID")(this.props.threadID);if(!z||!A){this.$FantaConversationScroller10=[];return}var B=10,C=void 0,D=void 0;try{C=z.getBoundingClientRect();D=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(E){return}if(!D||!C)return;var F=[];this.$FantaConversationScroller9.forEach(function(G){__p&&__p();if(!D)return;var H=G.message_id,I=D.getMessageElement(H);if(I){var J=I.getBoundingClientRect();if(J.top>C.top-B&&J.bottom<C.bottom+B){F.push(H);if(!this.$FantaConversationScroller10.includes(H))c("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(K,L){K.log(G.ad_client_token,G.ad_id,L.MESSAGE_SEEN_THREAD,true,H,A)},"FantaConversationScroller.react")}}}.bind(this),this);this.$FantaConversationScroller10=F}.bind(this);this.$FantaConversationScroller27=function(){this.$FantaConversationScroller1=null;c("FantaTabActions").scrollBottomChanged(this.props.threadID,this.$FantaConversationScroller7,this.$FantaConversationScroller28)}.bind(this);this.$FantaConversationScroller28=function(){this.$FantaConversationScroller29(false);this.$FantaConversationScroller20()}.bind(this);this.$FantaConversationScroller3=new(c("MutationObserver"))(this.$FantaConversationScroller12);this.$FantaConversationScroller7=true}x.prototype.shouldComponentUpdate=function(y,z){var A=this.props,B=this.state;return!A.onlineUsers.equals(y.onlineUsers)||A.hasFetchedAll!==y.hasFetchedAll||A.isFocused!==y.isFocused||!A.messages.equals(y.messages)||A.showContextBanner!==y.showContextBanner||A.thread!==y.thread||A.threadID!==y.threadID||B.loadingMessages!==z.loadingMessages};x.prototype.componentDidMount=function(){__p&&__p();this.$FantaConversationScroller13(c("ReactDOM").findDOMNode(this.refs.scrollContainer));this.$FantaConversationScroller14();this.$FantaConversationScroller8=new(c("SubscriptionsHandler"))();this.$FantaConversationScroller15();this.$FantaConversationScroller16();this.$FantaConversationScroller17();c("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$FantaConversationScroller18());this.setState({scrollbarPadding:w(this.refs.scrollContainer)});this.$FantaConversationScroller11=c("throttle")(this.$FantaConversationScroller19,v);this.$FantaConversationScroller9=this.props.messages.filter(function(y){return y.is_sponsored});this.$FantaConversationScroller11()};x.prototype.componentDidUpdate=function(y){__p&&__p();this.$FantaConversationScroller17();if(this.$FantaConversationScroller4){var z=c("ReactDOM").findDOMNode(this.refs.scrollContainer),A=this.$FantaConversationScroller4||0,B=z.scrollHeight-A;this.scrollToPosition(B,false);this.$FantaConversationScroller4=null}if(!y.messages.equals(this.props.messages)){c("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$FantaConversationScroller18());var C=y.messages.last(),D=this.props.messages.last();if(C!==D&&D&&D.author){var E=c("MercuryIDs").getUserIDFromParticipantID(D.author);if(E===c("CurrentUser").getID()){this.scrollToBottom(false);this.$FantaConversationScroller20()}}}this.$FantaConversationScroller11()};x.prototype.componentWillUnmount=function(){this.$FantaConversationScroller1&&c("clearImmediate")(this.$FantaConversationScroller1);this.$FantaConversationScroller8.release()};x.prototype.componentWillReceiveProps=function(y){var z=this.state.loadingMessages&&y.messages.size>0&&!y.messages.equals(this.props.messages);if(z||y.hasFetchedAll||y.showContextBanner)this.setState({loadingMessages:false});if(z||y.showContextBanner||!c("gkx")("AT6NK6oQoOtGPMXC4hqBhPGTzBFXslcH1aNzs-YWPij7VGfo5f1bp4KXFq8mVbY4xJ8")&&y.hasFetchAll){var A=c("ReactDOM").findDOMNode(this.refs.scrollContainer),B=A.scrollHeight,C=c("Scroll").getTop(A);this.$FantaConversationScroller4=B-C}this.$FantaConversationScroller9=y.messages.filter(function(D){return D.is_sponsored})};x.prototype.$FantaConversationScroller14=function(){if(!c("gkx")("AT41s5nc5usyR3AxF6JSJYEGfAY8tyQMohn4tHD5EBNPLj9IR60HLUM8XbLkhkanQ0whco6up8j9rPvwA-GdPWr0"))return;var y=c("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller3.observe(y,{childList:true,subtree:true})};x.prototype.$FantaConversationScroller13=function(y){__p&&__p();if(!c("gkx")("AT41s5nc5usyR3AxF6JSJYEGfAY8tyQMohn4tHD5EBNPLj9IR60HLUM8XbLkhkanQ0whco6up8j9rPvwA-GdPWr0"))return;this.$FantaConversationScroller21(y).forEach(function(z){c("DOM").scry(z,p).forEach(function(A){if(A.complete){A.classList.add(q);return}var B=c("Event").listen(A,"load",function(){A.classList.add(q);this.$FantaConversationScroller17();B.remove()}.bind(this))}.bind(this))}.bind(this))};x.prototype.$FantaConversationScroller21=function(y){var z=c("DOM").scry(y,r);if(z.length===0){var A=c("Parent").bySelector(y,r);if(A)z=z.concat(A)}return z};x.prototype.$FantaConversationScroller17=function(){var y=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(this.$FantaConversationScroller7)this.scrollToBottom(y)};x.prototype.renderGroupWave=function(){var y=this.props.thread;if(c("MercuryIDs").isLocalThread(this.props.threadID)&&c("gkx")("AT7uCGaYk4KWBCIq3SurfBIwk1DjmbU_QXgSqcY73Sdnw3DJhbzA4qigZjhm4wwYtWnHVZcxghHN6RO33C1W8YjG")&&y&&!y.is_canonical&&!y.thread_fbid)return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),{background:"light",className:"loading",size:"small"}),bootloadLoader:c("JSResource")("ChatWaveImage.react").__setRef("FantaConversationScroller.react"),thread:y});return null};x.prototype.$FantaConversationScroller26=function(){__p&&__p();var y=this.props.threadID,z=c("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!z)return;var A=void 0,B=void 0;try{A=z.getBoundingClientRect();B=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(C){return}if(!B||!A)return;var D=[],E=c("MessengerVideoAutoplayStore").getMessageIDs(y),F=E||this.$FantaConversationScroller18()||c("immutable").List();F.map(function(G){var H=c("MercuryAttachment").getVideoElem(G,B);if(H)D.push([G,H.getBoundingClientRect()])});if(D.length)c("MessengerVideoAutoplayActions").onScroll(y,E?null:F,c("immutable").Map(D),A)};x.prototype.$FantaConversationScroller18=function(){return this.props.messages.filter(function(y){return c("MercuryAttachment").isSingleVideoAttachment(y)||c("MercuryAttachment").isSharedVideoAttachmentMessage(y)}).reverse().map(function(y){return y.message_id})};x.prototype.scrollToBottom=function(y){var z=c("ReactDOM").findDOMNode(this.refs.scrollContainer);if(z)this.scrollToPosition(z.scrollHeight,y)};x.prototype.scrollToPosition=function(y,z){var A=c("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller6&&this.$FantaConversationScroller6.stop();if(z)this.$FantaConversationScroller6=new(c("Animation"))(A).to("scrollTop",y).ease(c("Animation").ease.end).duration(400).go();else c("Scroll").setTop(A,y)};x.prototype.$FantaConversationScroller25=function(y){var z=c("ReactDOM").findDOMNode(this.refs.scrollContainer);y=y===0?0:y||u;return c("Scroll").getTop(z)+z.clientHeight>=z.scrollHeight-y};x.prototype.$FantaConversationScroller24=function(){var y=c("ReactDOM").findDOMNode(this.refs.scrollContainer);return c("Scroll").getTop(y)<y.clientHeight};x.prototype.$FantaConversationScroller20=function(){var y=this.$FantaConversationScroller7;if(this.$FantaConversationScroller25())this.$FantaConversationScroller7=true;else this.$FantaConversationScroller7=false;if(y!==this.$FantaConversationScroller7)this.$FantaConversationScroller1=c("setImmediate")(this.$FantaConversationScroller27)};x.prototype.$FantaConversationScroller15=function(){__p&&__p();var y=c("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!y)return;var z=c("isEventSupported")("mousewheel")?"mousewheel":c("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",A=function(){this.$FantaConversationScroller20()}.bind(this),B=function B(){y.addEventListener(z,A,{passive:true})},C=function C(){y.removeEventListener(z,A,{passive:true})};this.$FantaConversationScroller8.addSubscriptions(c("Arbiter").subscribe("overflow-applied-to-body",function(){return this.$FantaConversationScroller17()}.bind(this)),c("Event").listen(y,"mousedown",A),c("Event").listen(y,"mouseup",A),c("Event").listen(y,"mouseenter",B),c("Event").listen(y,"mouseleave",C),{cancel:C},c("Event").listen(y,"scroll",c("throttle")(this.$FantaConversationScroller22,50)));var D=c("ScrollBoundaryContain").applyToElem(y);if(D)this.$FantaConversationScroller8.addSubscriptions(D)};x.prototype.$FantaConversationScroller16=function(){__p&&__p();this.$FantaConversationScroller8.addSubscriptions(c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").START,function(y,z){if(this.props.threadID===z){this.$FantaConversationScroller29(false);clearInterval(this.$FantaConversationScroller5);this.$FantaConversationScroller5=setInterval(function(){this.$FantaConversationScroller29(false)}.bind(this),50)}}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(y){clearInterval(this.$FantaConversationScroller5)}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(y){clearInterval(this.$FantaConversationScroller5)}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").REMOVE,function(y){if(this.props.threadID===y)clearInterval(this.$FantaConversationScroller5)}.bind(this)))};x.prototype.render=function(){var y=this.props,z=y.hasFetchedAll,A=y.messages,B=y.showContextBanner,C=y.thread,D=y.threadID,E=c("CurrentUser").getID(),F=c("gkx")("AT572SLwCLmZDDTsXg5I9LZsOQ15AFaFyPW6mF-2-OPcT86erU7KYs2R9o67DUyJwQ6AK0Y7upy2o2--jlRi_7EZ"),G=F&&(m.isEmptyLocalThread(D)||z||B),H=!c("MercuryConfig").ChatSeenHeadsEnabled,I=this.state.loadingMessages||!C?c("React").createElement(c("XUISpinner.react"),{background:"light",className:"loading",size:"small"}):null,J=c("gkx")("AT41s5nc5usyR3AxF6JSJYEGfAY8tyQMohn4tHD5EBNPLj9IR60HLUM8XbLkhkanQ0whco6up8j9rPvwA-GdPWr0")?c("emptyFunction"):function(){return this.$FantaConversationScroller17()}.bind(this);return c("React").createElement("div",{className:"_2v5j"},c("React").createElement("div",{className:"fbNubFlyoutBody scrollable",onClick:function(K){if(K.target&&K.target.classList&&K.target.classList.contains("_5wd4"))this.props.onFocus&&this.props.onFocus()}.bind(this),ref:"scrollContainer",role:"button",tabIndex:"0"},c("React").createElement("div",{className:"fbNubFlyoutBodyContent"},c("React").createElement(c("FantaPageGreetingLoader.react"),{thread:C,threadID:D}),c("React").createElement(c("Grid.react"),{className:"conversationContainer",role:"log",cols:1},c("React").createElement(n,{alignv:"bottom"},c("React").createElement("div",{className:"accessible_elem"},j._("Chat Conversation Start")),G?c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerContextBannerContainer.react").__setRef("FantaConversationScroller.react"),isContinuation:false,location:c("MercuryShareAttachmentRenderLocations").CHAT,viewer:E,threadID:D}):null,I,c("React").createElement("div",{style:A.size>0?{height:"176px"}:I?{height:"168px"}:{height:"192px"}},c("React").createElement(c("FantaConversation.react"),babelHelpers["extends"]({onAttachmentLoad:J,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation"},this.props)),c("gkx")("AT7Fdvvof3gB21NGh8Fo7o5af68El03cTnUDtqQrI_yHQbziWN3MyQvvj6iMavHBZ0fTg3S3rpHTM9337zgjjUnM")?c("React").createElement(c("MercuryCamQuickReply.react"),{camQuickReplyWillShow:c("emptyFunction"),camQuickReplyDidShow:function(){return this.$FantaConversationScroller17(true)}.bind(this),lastMessage:A.size>0?A.last():undefined,threadID:D,viewer:E}):null,c("React").createElement(c("ChatTypingIndicators.react"),{threadID:D,indicatorsWillShow:c("emptyFunction"),indicatorsDidShow:function(){return this.$FantaConversationScroller17(true)}.bind(this),viewer:E,onlineUsers:this.props.onlineUsers}),this.renderGroupWave(),H?c("React").createElement(c("MercuryLastMessageIndicator.react"),{hideTyping:true,indicatorDidShow:function(){return this.$FantaConversationScroller17(true)}.bind(this),indicatorWillShow:c("emptyFunction"),lastMessage:A.size>0?A.last():null,threadID:D}):null,c("React").createElement(c("MercuryQuickReply.react"),{lastMessage:A.size>0?A.last():undefined,threadID:D,quickReplyWillShow:c("emptyFunction"),quickReplyDidShow:function(){return this.$FantaConversationScroller17(true)}.bind(this),viewer:E,quickCamOriginLocation:c("MessengerQuickCamOrigins").CHAT_TAB})),c("React").createElement("div",{className:"accessible_elem"},j._("Chat Conversation End")))))))};x.prototype.$FantaConversationScroller23=function(){var y=c("ReactDOM").findDOMNode(this.refs.scrollContainer),z=c("getElementPosition")(y);c("Arbiter").inform("chatScrolled/"+this.props.threadID,{scrollTop:c("Scroll").getTop(y),top:z.y,viewHeight:z.height})};x.prototype.$FantaConversationScroller29=function(y){var z=c("ReactDOM").findDOMNode(this.refs.scrollContainer);if(z)this.$FantaConversationScroller30(z.scrollHeight,y)};x.prototype.$FantaConversationScroller30=function(y,z){var A=c("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$FantaConversationScroller6&&this.$FantaConversationScroller6.stop();if(z===true)this.$FantaConversationScroller6=new(c("Animation"))(A).to("scrollTop",y).ease(c("Animation").ease.end).duration(400).go();else c("Scroll").setTop(A,y)};x.propTypes={hasFetchedAll:o.bool.isRequired,isFocused:o.bool.isRequired,messages:o.object.isRequired,onFocus:o.func,onLoadMoreMessages:o.func.isRequired,onlineUsers:o.instanceOf(c("immutable").List).isRequired,showContextBanner:o.bool,thread:o.object,threadID:o.string.isRequired};f.exports=x}),null);
__d("FantaDragAndDropRow.react",["cx","fbt","ix","Bootloader","Image.react","MessengerEnvironment","MercuryAttachment","React","XUICloseButton.react","XUISpinner.react","emptyFunction","ifRequired","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$FantaDragAndDropRow1=function(){var s=this.props,t=s.threadID,u=s.fileData;c("MessengerEnvironment").messengerui?c("ifRequired")("MessengerActions",function(v){v.cancelFileUpload(t,u.id)},function(){c("Bootloader").loadModules(["MessengerActions"],function(v){v.cancelFileUpload(t,u.id)},"FantaDragAndDropRow.react")}):c("ifRequired")("FantaMessageActions",function(v){v.cancelFileUpload(t,u.id)},function(){c("Bootloader").loadModules(["FantaMessageActions"],function(v){v.cancelFileUpload(t,u.id)},"FantaDragAndDropRow.react")})}.bind(this),o}m.prototype.componentDidMount=function(){c("MessengerEnvironment").messengerui?c("Bootloader").loadModules(["MessengerActions"],c("emptyFunction"),"FantaDragAndDropRow.react"):c("Bootloader").loadModules(["FantaMessageActions"],c("emptyFunction"),"FantaDragAndDropRow.react")};m.prototype.render=function(){var n=this.props,o=n.fileData,p=n.isUploaded,q=o.file,r="";if(q.type)r=c("MercuryAttachment").getAttachIconClassByMime(q.type);var s=c("joinClasses")(r,"_3tn"),t=p?"done":"",u=c("joinClasses")(t,"_2qh _2qe uploadFileRow");return c("React").createElement("div",{className:u},c("React").createElement(c("XUISpinner.react"),{className:"_2qf"}),c("React").createElement(c("XUICloseButton.react"),{"aria-label":i._("Remove file"),className:"_2qg",shade:"dark",size:"small",onClick:this.$FantaDragAndDropRow1}),c("React").createElement("div",{className:"_4-te"},c("React").createElement("span",{className:s},c("React").createElement(c("Image.react"),{src:j("86988")})),q.name))};f.exports=m}),null);
__d("FantaDragAndDrop.react",["Bootloader","BootloadOnRender.react","FantaDragAndDropRow.react","MessengerEnvironment","JSResource","LazyComponent.react","MercuryShareAttachmentRenderLocations","React","emptyFunction","gkx","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=960,k=c("React").PropTypes;h=babelHelpers.inherits(l,c("React").Component);i=h&&h.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$FantaDragAndDrop3=function(r){this.$FantaDragAndDrop7(function(s){s.removeSharePreview(r)})}.bind(this),this.$FantaDragAndDrop4=function(r,s){this.$FantaDragAndDrop7(function(t){t.loadedShareData(r,s)})}.bind(this),this.$FantaDragAndDrop5=function(r){this.$FantaDragAndDrop7(function(s){s.loadingShareData(r)})}.bind(this),n}l.prototype.componentDidMount=function(){c("MessengerEnvironment").messengerui?c("Bootloader").loadModules(["MessengerActions"],c("emptyFunction"),"FantaDragAndDrop.react"):c("Bootloader").loadModules(["FantaMessageActions"],c("emptyFunction"),"FantaDragAndDrop.react")};l.prototype.shouldComponentUpdate=function(m){var n=this.props;return n.threadID!==m.threadID||!!(!n.uploadingFiles&&m.uploadingFiles)||!!(n.uploadingFiles&&m.uploadingFiles&&!n.uploadingFiles.equals(m.uploadingFiles))||!!(!n.uploadedFiles&&m.uploadedFiles)||!!(n.uploadedFiles&&m.uploadedFiles&&!n.uploadedFiles.equals(m.uploadedFiles))||!!(!n.sharePreview&&m.sharePreview)||!!(n.sharePreview&&m.sharePreview&&!n.sharePreview.equals(m.sharePreview))};l.prototype.render=function(){var m=this.props,n=m.uploadedFiles,o=m.uploadingFiles,p=m.sharePreview,q=m.threadID,r=p||{},s=r.share,t=r.uri;return c("React").createElement("div",{className:"fbNubFlyoutAttachments"},c("React").createElement("div",{className:"chatAttachmentShelf"},s||t?c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MercurySharePreview.react").__setRef("FantaDragAndDrop.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{onClose:this.$FantaDragAndDrop3,onLoaded:this.$FantaDragAndDrop4,onLoading:this.$FantaDragAndDrop5,threadID:q,imageSize:{width:j,height:j},location:c("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW,share:s,uri:t})}):null,!c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")&&c("React").createElement("div",{ref:function(u){this.$FantaDragAndDrop1=u}.bind(this)},this.$FantaDragAndDrop6(o,false),this.$FantaDragAndDrop6(n,true))))};l.prototype.$FantaDragAndDrop7=function(m){c("MessengerEnvironment").messengerui?c("ifRequired")("MessengerActions",function(n){m(n)},function(){c("Bootloader").loadModules(["MessengerActions"],function(n){m(n)},"FantaDragAndDrop.react")}):c("ifRequired")("FantaMessageActions",function(n){m(n)},function(){c("Bootloader").loadModules(["FantaMessageActions"],function(n){m(n)},"FantaDragAndDrop.react")})};l.prototype.$FantaDragAndDrop6=function(m,n){var o=this.props.threadID;return m&&m.map(function(p){return c("React").createElement(c("FantaDragAndDropRow.react"),{fileData:p,isUploaded:n,key:n?"uped-"+p.id:"uping-"+p.id,threadID:o})}).toArray()};l.propTypes={threadID:k.string.isRequired,uploadedFiles:k.object,uploadingFiles:k.object};f.exports=l}),null);
__d("FantaMercuryTabOverflowBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{items:this.props.items}),loader:c("JSResource")("FantaMercuryTabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("FantaTab.react",["cx","EventProfiler","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$FantaTab1=false,m}k.prototype.componentDidMount=function(){c("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],true,"click")};k.prototype.render=function(){var l=this.props,m=l.isFocused,n=l.isLastTab,o=l.isLastTabOfType,p=l.MainComponent,q=l.MinimizedComponent,r=l.raisedTabCount,s=l.tab,t=l.tabContent,u=s.isMinimized?q:p,v=s.id+(s.isMinimized?"-minimized":"-maximized"),w=this.$FantaTab1&&!s.isMinimized;this.$FantaTab1=s.isMinimized;return c("React").createElement("div",{className:"_5qi9 _5qib"+(this.props.isFocused?" _5qic":"")+(s.isMinimized?" _3001":"")},c("React").createElement(u,{isFocused:m,isHovered:s.isHovered||w,isLastTab:n,isLastTabOfType:o,key:v,raisedTabCount:r,tab:s,tabContent:t}))};f.exports=k}),null);
__d("FantaTabGroup.react",["cx","FantaTab.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){return!this.props.tabGroup.equals(m.tabGroup)||!!(!this.props.tabContents&&m.tabContents)||!!(this.props.tabContents&&m.tabContents&&!this.props.tabContents.equals(m.tabContents))};l.prototype.render=function(){var m=this.props,n=m.isLastOfTypeChecker,o=m.MainComponent,p=m.MinimizedComponent,q=m.OverflowComponent,r=m.tabContents,s=m.tabGroup,t=s.focusedTabID,u=s.getRaisedandUnraisedTabs(),v=u.raisedTabs,w=u.unraisedTabs,x=void 0;if(n)x=v.findLastKey(function(A){return n(A)&&A.id});var y=s.allowedRaisedTabs===0?null:this.$FantaTabGroup1(w,q),z=v.count();return c("React").createElement("div",{className:"_59v1"},y,v.map(function(A){return c("React").createElement(c("FantaTab.react"),{isFocused:A.id===t,isLastTab:A===v.last(),isLastTabOfType:A.id===x,key:A.id,MainComponent:o,MinimizedComponent:p,raisedTabCount:z,tab:A,tabContent:r&&r.get(A.id)})}).toArray())};l.prototype.$FantaTabGroup1=function(m,n){if(!m.isEmpty())return c("React").createElement("div",{className:"_1kws"},c("React").createElement(n,{items:m}));return null};function l(){i.apply(this,arguments)}l.propTypes={MainComponent:k.func.isRequired,MinimizedComponent:k.func.isRequired,OverflowComponent:k.func.isRequired,tabContents:k.object,tabGroup:k.object.isRequired};f.exports=l}),null);
__d("MNPlatformAttributionTags",[],(function a(b,c,d,e,f,g){f.exports={ATTRIBUTION_TAGS_PREFIX:"bnp:trigger:",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",MESSENGER_WEB:"messenger_web",MESSENGER_WEB_SEARCH:"messenger_web_search",M_DOT_ME:"m_dot_me"}}),null);
__d("MessengerStore",["MessengerDispatcher","mixInEventEmitter"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$MessengerStore1=c("MessengerDispatcher").register(this.__onDispatch.bind(this))}h.prototype.getDispatchToken=function(){return this.$MessengerStore1};h.prototype.emitChange=function(){this.emit("change")};h.prototype.destroy=function(){c("MessengerDispatcher").unregister(this.$MessengerStore1)};c("mixInEventEmitter")(h,{change:true});f.exports=h}),null);
__d("MessengerAttributionTagsStore",["MessengerActions","MessengerStore"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this);this.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null}}j.prototype.getState=function(){"use strict";return this.$MessengerAttributionTagsStore1};j.prototype.__onDispatch=function(k){"use strict";__p&&__p();switch(k.type){case c("MessengerActions").Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=k.messagingTags;this.$MessengerAttributionTagsStore1.threadID=k.threadID;this.emitChange();break;case c("MessengerActions").Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break}};f.exports=new j()}),null);
__d("MNPlatformTagsDataManager",["MessagingSourceEnum","MessengerActions","MessengerAttributionTagsStore","MNPlatformAttributionTags"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={getTags:function h(){__p&&__p();var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=null;switch(i){case c("MessagingSourceEnum").PAGES_MESSAGE_SHORTLINK:j=c("MNPlatformAttributionTags").M_DOT_ME;break;case c("MessagingSourceEnum").MESSENGER_WEB:j=c("MNPlatformAttributionTags").MESSENGER_WEB;break;case c("MessagingSourceEnum").MESSENGER_WEB_SEARCH:j=c("MNPlatformAttributionTags").MESSENGER_WEB_SEARCH;break;case c("MessagingSourceEnum").CUSTOMER_CHAT_PLUGIN:j=c("MNPlatformAttributionTags").CUSTOMER_CHAT_PLUGIN;break;default:j="";break}if(j!=="")j=c("MNPlatformAttributionTags").ATTRIBUTION_TAGS_PREFIX+j;return[j]},updateThreadTabAfterSelectThread:function h(){var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=arguments.length<=1||arguments[1]===undefined?null:arguments[1],k=this.getTags(i);c("MessengerActions").changeThreadTag(k,j)},hasThreadTags:function h(i){var j=c("MessengerAttributionTagsStore").getState();return!!(j.messagingTags&&i&&j.threadID&&j.threadID.toString()===i)},getThreadTags:function h(){var i=c("MessengerAttributionTagsStore").getState();return i.messagingTags}}}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/postback/",{cta_id:{type:"String",required:true},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackCTADataManager",["AsyncRequest","BanzaiODS","CurrentUser","getPageIDFromThreadID","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MNPlatformTagsDataManager","XMNCommercePostbackCTAController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryMessageActions").get();i.prototype.send=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=arguments.length<=2||arguments[2]===undefined?null:arguments[2],m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=c("XMNCommercePostbackCTAController").getURIBuilder().setString("cta_id",j).setString("ref",l).setString("message_id",m).getURI();if(k!==null)new(c("AsyncRequest"))().setURI(n).setMethod("POST").setErrorHandler(k).send();else new(c("AsyncRequest"))().setURI(n).setMethod("POST").send()};i.prototype.sendAndConfirm=function(j,k,l,m){var n=arguments.length<=4||arguments[4]===undefined?null:arguments[4],o=arguments.length<=5||arguments[5]===undefined?null:arguments[5],p=arguments.length<=6||arguments[6]===undefined?[]:arguments[6],q=arguments.length<=7||arguments[7]===undefined?null:arguments[7];if(k!==null)this.sendConfirmationText(k,l,m,p);this.send(j,n,o,q)};i.prototype.sendConfirmationText=function(j,k,l){if(!k)c("BanzaiODS").bumpEntityKey("messenger_commerce","confirm_message_failed.empty_threadID");else{var m=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),n=[],o=c("getPageIDFromThreadID")(k);if(c("MNPlatformTagsDataManager").hasThreadTags(o))n=c("MNPlatformTagsDataManager").getThreadTags();h.send(m.constructCTAConfirmationMessageObject(j,c("MercurySourceType").TITAN_WEB,k,l,n));if(n&&n.length>0)c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread()}};function i(){}f.exports=new i()}),null);
__d("MessengerMDotMeReferralStore",["MessengerActions","MessengerStore"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this);this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null}}j.prototype.getState=function(){"use strict";return this.$MessengerMDotMeReferralStore1};j.prototype.__onDispatch=function(k){"use strict";switch(k.type){case c("MessengerActions").Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=k.refCode;this.$MessengerMDotMeReferralStore1.refThreadID=k.refThreadID;this.emitChange()}};f.exports=new j()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:true},ref:{type:"String",required:true},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.sendMDotMeRef=function(i,j){var k=this.getMdotMeRef();if(this.shouldSendRef(j,i)){var l=c("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",i).setString("ref",k).getURI();new(c("AsyncRequest"))().setURI(l).setMethod("POST").send();c("MessengerActions").changeMDotMeReferral()}};h.prototype.shouldSendRef=function(i,j){if(!j||!i)return false;return this.hasMDotMeRef(j)};h.prototype.hasMDotMeRef=function(i){var j=c("MessengerMDotMeReferralStore").getState();return!!(j.refCode&&i&&j.refThreadID&&j.refThreadID===i)};h.prototype.getMdotMeRef=function(){var i=c("MessengerMDotMeReferralStore").getState();return i.refCode};function h(){}f.exports=new h()}),null);
__d("FantaPageComposerNullState.react",["cx","fbt","BootloadOnRender.react","JSResource","LazyComponent.react","MNCommerceCallToActionType","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","React","XUISpinner.react","getPageIDFromThreadID"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$FantaPageComposerNullState2=function(){var r=this.props,s=r.threadID,t=r.nullStateCTA;switch(t.action_type){case c("MNCommerceCallToActionType").OPEN_NATIVE:break;case c("MNCommerceCallToActionType").POSTBACK:default:c("MNCommercePostbackCTADataManager").sendAndConfirm(t.id,t.title,s);break}}.bind(this),n}l.prototype.render=function(){return c("React").createElement("div",{className:"_2xh0"},this.$FantaPageComposerNullState1(),c("React").createElement("div",{className:"_2xh4 _59w_"},c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{cta:this.props.nullStateCTA,onClick:this.$FantaPageComposerNullState2,threadID:this.props.threadID}),loader:c("JSResource")("ChatPageComposerNullState.react").__setRef("FantaPageComposerNullState.react"),placeholder:c("React").createElement(c("XUISpinner.react"),{size:"small"})})))};l.prototype.$FantaPageComposerNullState1=function(){if(this.props.nullStateCTA!==null)switch(this.props.nullStateCTA.action_type){case c("MNCommerceCallToActionType").OPEN_NATIVE:return null;case c("MNCommerceCallToActionType").POSTBACK:if(!c("MNCommercePostbackRefSendManager").hasMDotMeRef(c("getPageIDFromThreadID")(this.props.threadID))&&!this.props.nullStateCTA.instantgame_metadata)return c("React").createElement("div",{className:"_4teq"},i._("When you tap {cta title}, {name} will see your public info.",[i.param("cta title",this.props.nullStateCTA.title),i.param("name",this.props.pageName)]));break;default:return null}return null};f.exports=l}),null);
__d("FantaPendingActions.react",["Bootloader","BootloadOnRender.react","FantaTabActions","JSResource","LazyComponent.react","MercuryThreadActions","MessengerMessageRequestsTypedLogger","MessageRequestUtils","MessagingTag","React","MercuryIDs","CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("MercuryThreadActions").get();h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaPendingActions3=function(){var q=this.props.thread,r=!!q&&c("MessageRequestUtils").isFiltered(q),s=c("CurrentUser").getID(),t=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,s);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(r?"other":"pending").setThreadKey(t).setEntryPoint(null).log()}.bind(this),this.$FantaPendingActions4=function(q){var r=this.props.thread,s=!!r&&c("MessageRequestUtils").isFiltered(r),t=c("CurrentUser").getID(),u=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,t);if(q==="hide")new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(s?"other":"pending").setThreadKey(u).setEntryPoint("inbox_banner").log()}.bind(this),this.$FantaPendingActions1=function(){__p&&__p();var q,r=this.props,s=r.thread,t=r.threadID,u=!!s&&c("MessageRequestUtils").isFiltered(s),v=c("CurrentUser").getID(),w=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,v);if(u)c("Bootloader").loadModules(["WebMessengerDeleteThreadDialog"],function(x){x.show(t,this.$FantaPendingActions3,this.$FantaPendingActions4,function(){return c("FantaTabActions").closeTab(t)})}.bind(this),"FantaPendingActions.react");else(function(){var x=c("MercuryIDs").isGroupChat(t);c("Bootloader").loadModules(["WebMessengerDeclineMRDialog"],function(y){y.show(s,t,function(){return c("FantaTabActions").closeTab(t)},x)},"FantaPendingActions.react")})();new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(u?"other":"pending").setThreadKey(w).setEntryPoint(null).log()}.bind(this),this.$FantaPendingActions2=function(){var q=this.props.thread,r=!!q&&c("MessageRequestUtils").isFiltered(q),s=c("CurrentUser").getID(),t=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,s);j.changeFolder(this.props.threadID,c("MessagingTag").INBOX);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(r?"other":"pending").setThreadKey(t).setEntryPoint(null).log()}.bind(this),m}k.prototype.render=function(){var l=this.props.thread,m=!!l&&c("MessageRequestUtils").isFiltered(l);return c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("ChatPendingActions.react").__setRef("FantaPendingActions.react"),placeholder:c("React").createElement("div",{style:{height:27}}),component:c("React").createElement(c("LazyComponent.react"),{isFiltered:m,onDeleteClick:this.$FantaPendingActions1,onReplyClick:this.$FantaPendingActions2})})};f.exports=k}),null);
__d("getEveryoneMentionIndex",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.findIndex(function(j){return j.type=="t"})}f.exports=h}),null);
__d("FantaTabComposer.react",["fbt","ChatTabComposerContainer.react","FantaTabActions","Keys","LogHistory","MercuryIDs","MercuryThreadIDMap","MercuryThreads","PhotosUploadWaterfall","React","SimpleXUIDialog","TypingDetectorController","WaterfallIDGenerator","WorkFileUploadsGating","XUIDialogButton.react","XUIDialogCancelButton.react","emptyFunction","getEveryoneMentionIndex"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("MercuryThreadIDMap").get(),l=c("MercuryThreads").get(),m=c("LogHistory").getInstance("chat_tab_view"),n=c("React").PropTypes,o=/^\s*$/;i=babelHelpers.inherits(p,c("React").Component);j=i&&i.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$FantaTabComposer3=c("WaterfallIDGenerator").generate(),this.$FantaTabComposer4=function(v,w){var x=this.props.threadID;k.getServerIDFromClientID(x,function(y){this.$FantaTabComposer2=new(c("TypingDetectorController"))(c("MercuryIDs").getUserIDFromThreadID(x),v,"mercury-chat",null,y,w)}.bind(this))}.bind(this),this.$FantaTabComposer14=function(v){this.$FantaTabComposer15(c("PhotosUploadWaterfall").UPLOAD_START,v);this.props.onSendPhoto(v,this.$FantaTabComposer1.onSend);this.$FantaTabComposer16("submit",v);this.focusInput()}.bind(this),this.$FantaTabComposer8=function(v){this.$FantaTabComposer15(c("PhotosUploadWaterfall").CLIENT_ERROR,v);this.$FantaTabComposer16("failed",v)}.bind(this),this.$FantaTabComposer10=function(v){this.$FantaTabComposer15(c("PhotosUploadWaterfall").CLIENT_ERROR,v);this.$FantaTabComposer16("failed",v)}.bind(this),this.$FantaTabComposer12=function(v){this.$FantaTabComposer15(c("PhotosUploadWaterfall").CANCEL_DURING_UPLOAD,v);this.$FantaTabComposer16("canceled",v)}.bind(this),this.$FantaTabComposer13=function(v){this.$FantaTabComposer15(c("PhotosUploadWaterfall").ALL_UPLOADS_DONE,v);this.$FantaTabComposer16("completed",v);var w=v.image_ids.length||v.attachments.length;this.$FantaTabComposer17(w)}.bind(this),this.$FantaTabComposer9=function(){this.props.onSendMessage("",this.$FantaTabComposer1.onSend)}.bind(this),this.$FantaTabComposer11=function(v){this.props.onSelectSticker(v,function(){return this.$FantaTabComposer1.getInput().focus()}.bind(this))}.bind(this),this.$FantaTabComposer6=function(v,w,x){this.props.onSendHotLike(v.emoji,w,x,function(){return this.$FantaTabComposer1.getInput().focus()}.bind(this))}.bind(this),this.$FantaTabComposer7=function(v){this.$FantaTabComposer1.getInput().insertEmoji(v)}.bind(this),this.$FantaTabComposer5=function(event){__p&&__p();var v=this.props.threadID;if(event.keyCode===c("Keys").RETURN&&!event.shiftKey){event.preventDefault();var w=this.$FantaTabComposer20().trim(),x=this.$FantaTabComposer21();if(x){var y=c("getEveryoneMentionIndex")(x)>-1;if(y)this.$FantaTabComposer18(w,x);else this.$FantaTabComposer19(w,x)}else this.$FantaTabComposer19(w,[])}if(event.keyCode===c("Keys").DOWN&&event.shiftKey&&this.hasEmptyInput()){c("FantaTabActions").minimizeTab(v);return}}.bind(this),r}p.prototype.componentDidMount=function(){var q=this.props,r=q.threadID,s=q.participants;if(this.props.isFocused&&s.length>0&&!l.isEmptyLocalThread(r))this.focusInput()};p.prototype.componentDidUpdate=function(q){if(this.props.isFocused&&this.props.isFocused!==q.isFocused&&!l.isEmptyLocalThread(this.props.threadID))this.focusInput()};p.prototype.componentWillUnmount=function(){this.$FantaTabComposer2&&this.$FantaTabComposer2.destroy()};p.prototype.render=function(){var q=this.props,r=q.participants,s=q.threadID,t=q.viewer;if(r.length===0)return c("React").createElement("div",null);return c("React").createElement(c("ChatTabComposerContainer.react"),{disableInput:this.props.disableInput,disableFileUploads:!c("WorkFileUploadsGating").canUploadFiles,fileUploader:this.props.fileUploader,initializeThingsWithInputFn:this.$FantaTabComposer4,inputKeyDown:this.$FantaTabComposer5,onBlur:c("emptyFunction"),onCustomLikeSelect:this.$FantaTabComposer6,onEmojiSelect:this.$FantaTabComposer7,onEscape:this.props.onEscape,onFileUploadFail:this.$FantaTabComposer8,onMount:function u(){},onP2PTrigger:this.$FantaTabComposer9,onPhotoUploadFail:this.$FantaTabComposer10,onStickerSelect:this.$FantaTabComposer11,onTab:this.props.onTab,onUploadCancel:this.$FantaTabComposer12,onUploadComplete:this.$FantaTabComposer13,onUploadSubmit:this.$FantaTabComposer14,placeholder:h._("Type a message..."),ref:function(u){this.$FantaTabComposer1=u;if(this.props.isFocused&&!l.isEmptyLocalThread(this.props.threadID))this.focusInput()}.bind(this),resizeFn:function u(){},threadID:s,viewer:t})};p.prototype.$FantaTabComposer15=function(q,r){c("PhotosUploadWaterfall").sendSignal(babelHelpers["extends"]({qn:this.$FantaTabComposer3,step:q,uploader:c("PhotosUploadWaterfall").APP_CHAT},r||{}))};p.prototype.$FantaTabComposer17=function(q){if(q===0)return;this.$FantaTabComposer15(c("PhotosUploadWaterfall").POST_PUBLISHED,{count:q});this.$FantaTabComposer3=c("WaterfallIDGenerator").generate()};p.prototype.$FantaTabComposer16=function(q,r){m.debug("photo_uploader:"+q,"{}")};p.prototype.$FantaTabComposer18=function(q,r){var s=h._("Mention everyone?").toString(),t=h._("Doing so will send a mention to everyone in this group.").toString(),u=h._("Mention \u0040everyone!").toString(),v=c("React").createElement("div",null,c("React").createElement(c("XUIDialogCancelButton.react"),null),c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",label:u,use:"confirm",onClick:function(){this.$FantaTabComposer19(q,r)}.bind(this)}));c("SimpleXUIDialog").showEx(t,s,v,null,null)};p.prototype.$FantaTabComposer19=function(q,r){this.props.onSendMessage({message:q,mentions:r},this.$FantaTabComposer1.onSend);return};p.prototype.focusInput=function(){this.$FantaTabComposer1&&this.$FantaTabComposer1.getInput().focus()};p.prototype.$FantaTabComposer20=function(){return this.$FantaTabComposer1&&this.$FantaTabComposer1.getInput().getValue()||""};p.prototype.$FantaTabComposer21=function(){if(!this.$FantaTabComposer1)return null;var q=this.$FantaTabComposer1.getInput();return q.getMentions?q.getMentions():null};p.prototype.hasEmptyInput=function(){return o.test(this.$FantaTabComposer20())};p.propTypes={fileUploader:n.object,isFocused:n.bool.isRequired,onEscape:n.func.isRequired,onSelectSticker:n.func.isRequired,onSendHotLike:n.func.isRequired,onSendMessage:n.func.isRequired,onSendPhoto:n.func.isRequired,onTab:n.func.isRequired,participants:n.array.isRequired,threadID:n.string.isRequired,viewer:n.string.isRequired};f.exports=p}),null);
__d("FantaTabSheetPlaceholder.react",["cx","React","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(){return c("React").createElement("div",{className:"_w_z"},c("React").createElement(c("XUISpinner.react"),null))};f.exports=i}),null);
__d("FantaTabSheet.react",["cx","BootloadedComponent.react","CurrentUser","FantaTabSheetActions","FantaTabSheetPlaceholder.react","JSResource","MercuryIDs","MercuryMessages","MercuryParticipants","MercurySheetPolicy","React","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("MercuryMessages").get(),l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.shouldComponentUpdate=function(n){var o=this.props;return o.threadID!==n.threadID||!o.tabContent.equals(n.tabContent)};m.prototype.render=function(){__p&&__p();var n=this.props,o=n.threadID,p=n.tabContent,q=p.openSheet,r=p.privacyController,s=p.thread,t=p.typeahead,u=void 0;switch(q){case c("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaTabSheetChatThreadIsMuted.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatNameConversationTabSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaTabSheetNameConversation.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement(c("FantaTabSheetPlaceholder.react"),null),key:q,thread:s,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet:var v=c("MercuryIDs").getUserIDFromThreadID(o);if(v){var w=c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(v));if(w&&r)u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatUserBlockedTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),gender:w.gender,key:q,privacyActionController:r,shortName:w.short_name})}break;case c("MercurySheetPolicy").sheets.ChatOfflineTabSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaTabSheetOffline.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,privacyController:r,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet:case c("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaTabSheetReadOnly.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,threadID:o});break;case c("MercurySheetPolicy").sheets.FantaAddFriendsSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaTabSheetAddFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement(c("FantaTabSheetPlaceholder.react"),null),key:q,thread:s,threadID:o,typeahead:t});break;case c("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaTabSheetAddMoreFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement(c("FantaTabSheetPlaceholder.react"),null),key:q,thread:s,threadID:o,typeahead:t});break;case c("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaTabSheetMessageBlocked.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatUserFocusSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatUserFocusSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,thread:s,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatUserFocusBypassSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q});break;case c("MercurySheetPolicy").sheets.ChatUserTimezoneSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatUserTimezoneSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),data:p.timezoneInfo,key:q,onDismiss:function B(){return c("FantaTabSheetActions").closeUserTimezoneSheet(o)},resize:c("emptyFunction"),threadID:o});break;case c("MercurySheetPolicy").sheets.ChatUploadWarningTabSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatUploadWarningTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q});break;case c("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet:if(!c("MercuryIDs").isCanonical(o))u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatNoRecipientsTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q});break;case c("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaNewMessagesTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatEmployeeAwaySheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEmployeeAwaySheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q});break;case c("MercurySheetPolicy").sheets.ChatUserIsPersonalUserSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaUserIsPersonalUserSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,thread:s,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatUserIsWorkUserSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaUserIsWorkUserSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,thread:s,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatEventReminderTabSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FantaEventReminderTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,threadID:o});break;case c("MercurySheetPolicy").sheets.ChatAppointmentBanner:if(s){var x=k.getCurrentlyLoadedMessages(o);u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatAppointmentBannerRoot.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),pageID:s.other_user_fbid,userID:c("CurrentUser").getID(),count:100,messageList:x,appointmentBannerDidUpdate:c("emptyFunction"),key:q,threadID:o})}break;case c("MercurySheetPolicy").sheets.ChatMontageSheet:u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatMontageSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,threadID:o,onResize:c("emptyFunction")});break;case c("MercurySheetPolicy").sheets.ChatJoinCallSheet:if(s){var y=s.rtc_call_data,z=s.thread_fbid;u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatJoinCallSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,rtcCallData:y,threadFBID:z})}break;case c("MercurySheetPolicy").sheets.ChatRoomAssociatedObjectSheet:if(s){var A=s.associated_object;u=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatRoomAssociatedObjectSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:c("React").createElement("div",null),key:q,associatedObject:A})}break}if(u)return c("React").createElement("div",{className:"_1sk5"},c("React").createElement("div",{className:"_1sk6"},u));return null};function m(){i.apply(this,arguments)}m.propTypes={threadID:l.string.isRequired,tabContent:l.object.isRequired};f.exports=m}),null);
__d("FantaTabMain.react",["cx","fbt","invariant","Bootloader","BootloadOnRender.react","ChatBehavior","ChatTabBlinking","CurrentUser","DragDropTarget","Event","FantaAvailableStatus","FantaChatHeaderContainer.react","FantaConversationScroller.react","FantaDragAndDrop.react","FantaDispatcher","FantaMessageActions","FantaPageComposerNullState.react","FantaPendingActions.react","FantaTabActions","FantaTabComposer.react","FantaTabSheet.react","immutable","JSResource","Keys","LazyComponent.react","MercuryIDs","MercuryParticipants","MessageRequestUtils","MessengerBotMenuDataFetcher","MNCommercePageSetting","Parent","React","ReactDOM","SimpleXUIDialog","WorkFileUploadsGating","WorkFocusMode","convertMIGColorToFIGColor","FBIDCheck","getPageIDFromThreadID","getVendorPrefixedEventName","gkx","idx","ifRequired","joinClasses","throttle"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=/\D+/g,n=c("React").PropTypes;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={closing:false,disableInput:false},this.$FantaTabMain19=function(event){var u=!!c("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),v=!!c("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);if(!u||!v){if(this.$FantaTabMain9){clearTimeout(this.$FantaTabMain9);this.$FantaTabMain9=null;return}c("FantaTabActions").hoveredTab(this.props.tab.id)}}.bind(this),this.$FantaTabMain20=function(event){var u=!!c("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),v=!!c("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);if(!u||!v){if(this.$FantaTabMain9)clearTimeout(this.$FantaTabMain9);this.$FantaTabMain9=setTimeout(function(){this.$FantaTabMain9=null;c("FantaTabActions").unhoveredTab(this.props.tab.id)}.bind(this),500)}}.bind(this),this.$FantaTabMain17=function(event){var u=!!c("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),v=!!c("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);if(!u||!v)if(!event.relatedTarget||!event.target)this.$FantaTabMain7=setTimeout(function(){this.$FantaTabMain7=null;this.$FantaTabMain21(this.props.tab.id)}.bind(this),100);else this.$FantaTabMain21(this.props.tab.id)}.bind(this),this.$FantaTabMain18=function(event){__p&&__p();if(this.$FantaTabMain7){clearTimeout(this.$FantaTabMain7);this.$FantaTabMain7=null;return}var u=!!c("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),v=!!c("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id),w=event.target;if(!(w&&w.classList&&(w.classList.contains("_3olu")||w.classList.contains("_61td"))))if(!u||!v)if(!c("FantaDispatcher").isDispatching())c("FantaTabActions").focusTab(this.props.tab.id)}.bind(this),this.$FantaTabMain23=function(u){c("FantaMessageActions").linkPreview(this.props.tab.id,u)}.bind(this),this.$FantaTabMain22=function(u){c("FantaMessageActions").prepareFilesForSend(this.props.tab.id,u)}.bind(this),this.$FantaTabMain14=function(u){if(u.keyCode===c("Keys").ESC){this.$FantaTabMain2(true);u.preventDefault();u.stopPropagation()}}.bind(this),this.$FantaTabMain15=function(u){if(u.keyCode===c("Keys").TAB)this.$FantaTabMain16(u)}.bind(this),this.$FantaTabMain16=function(event){var u=this.props.raisedTabCount;if(u>1){event.preventDefault();this.$FantaTabMain3(event.ctrlKey,event.shiftKey)}}.bind(this),this.$FantaTabMain2=function(u){if(!this.refs.composer||this.refs.composer.hasEmptyInput()&&!this.$FantaTabMain24())this.$FantaTabMain25(u);else this.$FantaTabMain26(u)}.bind(this),q}o.prototype.componentWillMount=function(){this.$FantaTabMain2=c("throttle")(this.$FantaTabMain2,100);this.$FantaTabMain3=c("throttle")(this.$FantaTabMain3,100)};o.prototype.componentDidMount=function(){this.$FantaTabMain10();this.$FantaTabMain11();this.$FantaTabMain12();this.$FantaTabMain13()};o.prototype.componentDidUpdate=function(){this.$FantaTabMain11()};o.prototype.componentWillUnmount=function(){this.$FantaTabMain4&&this.$FantaTabMain4.disable()};o.prototype.shouldComponentUpdate=function(p,q){var r=this.props,s=this.state;return r.hasFetchedAll!==p.hasFetchedAll||r.isFocused!==p.isFocused||r.isHovered!==p.isHovered||r.isLastGroupTab!==p.isLastGroupTab||!r.messages.equals(p.messages)||!r.tab.equals(p.tab)||!r.tabContent&&!!p.tabContent||r.tabContent&&!r.tabContent.equals(p.tabContent)||r.thread!==p.thread||s.closing!==q.closing||s.disableInput!==q.disableInput||!r.onlineUsers.equals(p.onlineUsers)};o.prototype.$FantaTabMain11=function(){__p&&__p();var p=this.props,q=p.tab,r=p.thread,s=q.id;if(!r)return;var t=this.refs.root&&c("ReactDOM").findDOMNode(this.refs.root);if(!t)return;var u=r.unread_count;if(c("WorkFocusMode")&&c("WorkFocusMode").currentViewerInFocusMode(s))return;if(u!==undefined){var v=!!u&&(!c("ChatBehavior").showsTabUnreadUI||c("ChatBehavior").showsTabUnreadUI());if(v)c("ChatTabBlinking").blinkTab(s,{getTabElem:function w(){return t},isFocused:function(){return this.props.isFocused}.bind(this),isHovered:function w(){return false}});else c("ChatTabBlinking").unblinkTab(s)}};o.prototype.render=function(){var p,q=this.props,r=q.hasFetchedAll,s=q.isFocused,t=q.isHovered,u=q.isLastGroupTab,v=q.messages,w=q.onLoadMoreMessages,x=q.onSelectSticker,y=q.onSendHotLike,z=q.onSendMessage,A=q.onSendPhoto,B=q.showContextBanner,C=q.tab,D=q.tabContent,E=q.thread,F=C.id,G=c("CurrentUser").getID(),H=D&&D.fileUploader,I=D&&D.sharePreview,J=H&&H.uploadingFiles,K=H&&H.uploadedFiles,L=E&&c("convertMIGColorToFIGColor")(E.custom_color),M=D&&D.nullStateCTA,N=M&&E&&E.message_count===0,O=E&&E.participants||[],P=D&&D.threadPreviewRecipients||c("immutable").List(),Q=O.length>0?O:P.toArray(),R=(p=this.props)!=null?(p=p.thread)!=null?p.other_user_fbid:p:p,S=R?c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(R)):null,T=S&&S.short_name||"page",U=E&&c("MessageRequestUtils").isMessageRequest(E)?c("React").createElement(c("FantaPendingActions.react"),{thread:E,threadID:F}):N&&M?c("React").createElement(c("FantaPageComposerNullState.react"),{threadID:F,nullStateCTA:M,pageName:T}):c("React").createElement("div",{className:"fbNubFlyoutFooter"+(this.state.disableInput?" fbNubFlyoutComposerDisabled":"")},c("React").createElement(c("FantaTabComposer.react"),{disableInput:this.state.disableInput,fileUploader:H,isFocused:s,onEscape:this.$FantaTabMain14,onKeyDown:this.$FantaTabMain14,onKeyPress:this.$FantaTabMain15,onSelectSticker:x,onSendHotLike:y,onSendMessage:z,onSendPhoto:A,onTab:this.$FantaTabMain16,ref:"composer",participants:Q,threadID:F,viewer:G})),V=c("FantaAvailableStatus").isAvailable(E,F);!!D||j(0);var W=c("React").createElement(c("FantaTabSheet.react"),{tabContent:D,threadID:F}),X=D&&D.isMultiCompany,Y=D&&D.joinableInterstitialData?c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("ChatJoinableInterstitialPreview.react").__setRef("FantaTabMain.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{data:D.joinableInterstitialData,isActive:s,onClose:this.$FantaTabMain2})}):c("React").createElement("div",{className:"fbNubFlyoutInner"},c("React").createElement(c("FantaChatHeaderContainer.react"),{customColor:L,isFocused:s,isLastGroupTab:u,onClose:this.$FantaTabMain2,thread:E,threadID:F,viewer:G,isMultiCompany:X}),c("React").createElement("div",{className:"_1ia _2sz2",ref:function(Z){this.$FantaTabMain5=Z}.bind(this)},W,c("React").createElement(c("FantaConversationScroller.react"),{hasFetchedAll:r,isFocused:s,messages:v,onFocus:function(){return this.refs.composer&&this.refs.composer.focusInput()}.bind(this),onLoadMoreMessages:w,onlineUsers:this.props.onlineUsers,showContextBanner:B,thread:E,threadID:F,viewer:G}),c("React").createElement("div",{className:"_3bpu"}),c("React").createElement("div",{className:"_2hc2"},c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("P2PChatThreadBannerContainer.react").__setRef("FantaTabMain.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{isVisible:true,otherUserID:c("MercuryIDs").getUserIDFromThreadID(F),threadID:F})})),c("React").createElement("div",{className:"_4g6x"},c("React").createElement("div",{className:"_4g6y"},c("React").createElement("div",{className:"_4g6z _4g71"},i._("Drag Link\/Files Here")),c("React").createElement("div",{className:"_4g6z _4g6- _4g6_"},i._("Drop Files Here")),c("React").createElement("div",{className:"_4g6z _4g6- _4g70"},i._("Drop Link Here")))),U,c("React").createElement(c("FantaDragAndDrop.react"),{threadID:F,uploadedFiles:K,uploadingFiles:J,sharePreview:I})));return c("React").createElement("div",{className:c("joinClasses")((this.state.closing?"_2suj":"")+" _3_9e _s0f _50mz _50m_"+(V?" _4-0b":"")+" fbNub _50-v"+(s?" focusedTab":"")+(t?" hoveredTab":"")+" opened _27_3"+(c("gkx")("AT41s5nc5usyR3AxF6JSJYEGfAY8tyQMohn4tHD5EBNPLj9IR60HLUM8XbLkhkanQ0whco6up8j9rPvwA-GdPWr0")?" _64ko":""),"fantaTabMain-"+F),onBlur:this.$FantaTabMain17,onFocus:this.$FantaTabMain18,onKeyDown:this.$FantaTabMain14,onKeyPress:this.$FantaTabMain15,onMouseEnter:this.$FantaTabMain19,onMouseLeave:this.$FantaTabMain20,ref:"root",role:"presentation"},c("React").createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent",role:"complementary"},c("React").createElement("div",{className:"fbNubFlyoutOuter"},Y)))};o.prototype.$FantaTabMain21=function(p){if(!c("FantaDispatcher").isDispatching())c("FantaTabActions").blurTab(this.props.tab.id);if(this.$FantaTabMain9){clearTimeout(this.$FantaTabMain9);this.$FantaTabMain9=null}c("FantaTabActions").unhoveredTab(p)};o.prototype.$FantaTabMain13=function(){var p=c("getPageIDFromThreadID")(this.props.tab.id);if(p)c("MessengerBotMenuDataFetcher").getHasPageSetting(p,function(q){this.setState({disableInput:q})}.bind(this),function(){this.setState({disableInput:false})}.bind(this),c("MNCommercePageSetting").COMPOSER_INPUT_DISABLED)};o.prototype.$FantaTabMain10=function(){__p&&__p();if(c("WorkFileUploadsGating").canUploadFiles&&!this.$FantaTabMain4){var p=c("ReactDOM").findDOMNode(this.$FantaTabMain5);if(p){var q=new(c("DragDropTarget"))(p);this.$FantaTabMain4=q;q.setOnFilesDropCallback(this.$FantaTabMain22);q.setOnURLDropCallback(this.$FantaTabMain23);q.enable()}}};o.prototype.$FantaTabMain3=function(p,q){if(!p)if(q)c("FantaTabActions").focusPreviousTab();else c("FantaTabActions").focusNextTab()};o.prototype.$FantaTabMain24=function(){return this.$FantaTabMain27()||this.$FantaTabMain28()};o.prototype.$FantaTabMain27=function(){var p,q,r=this.props.tabContent,s=((p=r)!=null?(p=p.fileUploader)!=null?p.uploadedFiles:p:p)||{size:0},t=((q=r)!=null?(q=q.fileUploader)!=null?q.uploadingFiles:q:q)||{size:0};return s.size>0||t.size>0};o.prototype.$FantaTabMain28=function(){var p,q=this.props.tabContent,r=(p=q)!=null?p.sharePreview:p;return!!(r&&r.params&&r.type)};o.prototype.$FantaTabMain25=function(p){__p&&__p();var q=this.props,r=q.tab,s=q.tabContent,t=s&&s.threadPreviewID?s.threadPreviewID:r.id,u=c("ReactDOM").findDOMNode(this.refs.root);this.$FantaTabMain1=setTimeout(function(){return p?c("FantaTabActions").closeAndTabNext(t):c("FantaTabActions").closeTab(t)},1.2*c("ifRequired")("cssVar",function(w){return"200ms".replace(m,"")},function(){return 200}));var v=c("Event").listen(u,c("getVendorPrefixedEventName")("animationend"),function(w){if(w.animationName==="closeChatTab"){p?c("FantaTabActions").closeAndTabNext(t):c("FantaTabActions").closeTab(t);clearTimeout(this.$FantaTabMain1);v.remove()}}.bind(this));this.$FantaTabMain29();this.setState({closing:true})};o.prototype.$FantaTabMain26=function(p){var q=this.props.tab,r=q.id;c("FantaTabActions").blurTab(r);var s=i._("Are you sure you want to close this chat window?"),t=i._("You haven't sent your message.");c("SimpleXUIDialog").showConfirm(s,t,function(u){if(u)p?c("FantaTabActions").closeAndTabNext(r):c("FantaTabActions").closeTab(r);else c("FantaTabActions").focusTab(r)},{autofocusConfirm:true,useReactFocusBehavior:true})};o.prototype.$FantaTabMain12=function(){this.$FantaTabMain8=Math.floor(Date.now()/1e3)};o.prototype.$FantaTabMain29=function(){var p=this.props.thread,q=p?p.other_user_fbid:null,r=Math.floor(Date.now()/1e3),s=this.$FantaTabMain8;if(p&&q&&!c("FBIDCheck").isUser_deprecated(q))c("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(t,u,v,w,x){t.log(q,u.CLICK,v.MESSAGE_FANTA_TAB_CLOSE,"",["pages_surface_team"],{open_tab_timestamp:s,close_tab_timestamp:r,last_message_timestamp:p.last_message_timestamp,message_count:p.message_count,snippet_sender:p.snippet_sender,participants:p.participants});w.notify(x.MESSAGES_FANTA_TAB_CLOSE,q,{open_tab_timestamp:s,close_tab_timestamp:r,last_message_timestamp:p.last_message_timestamp,message_count:p.message_count,snippet_sender:p.snippet_sender,participants:p.participants})},"FantaTabMain.react")};o.propTypes={hasFetchedAll:n.bool.isRequired,isFocused:n.bool.isRequired,isHovered:n.bool.isRequired,isLastGroupTab:n.bool.isRequired,messages:n.object,onlineUsers:n.instanceOf(c("immutable").List).isRequired,onLoadMoreMessages:n.func.isRequired,onSelectSticker:n.func.isRequired,onSendHotLike:n.func.isRequired,onSendMessage:n.func.isRequired,onSendPhoto:n.func.isRequired,raisedTabCount:n.number,showContextBanner:n.bool,tab:n.object.isRequired,tabContent:n.object,thread:n.object};f.exports=o}),null);
__d("FantaTabMainLoader.react",["Bootloader","FantaAppStore","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabMain.react","immutable","MercuryConfig","MercuryIDs","React","emptyFunction","idx","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=function m(n){__p&&__p();var o,p;c("FantaAppStore").addReducers(n);var q=c("FantaAppStore").getState(),r=(o=q)!=null?(o=o.mercury)!=null?o.tabContents:o:o;if(r)(function(){var s=r.reduce(function(s,t){var u=t.thread;if(u)s.push(u);return s},[]);c("setImmediate")(function(){return c("FantaGetMessageActions").threadsUpdated(s)})})();k=c("emptyFunction")};h=babelHelpers.inherits(l,c("React").Component);i=h&&h.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$FantaTabMainLoader2=function(){var r=this.props.tab;c("FantaGetMessageActions").fetchMoreMessages(r.id)}.bind(this),this.$FantaTabMainLoader3=function(r,s){var t=this.props.tab;c("FantaMessageActions").sendSticker(t.id,r,s)}.bind(this),this.$FantaTabMainLoader4=function(r,s,t,u){var v=this.props.tab;c("FantaMessageActions").sendHotLike(v.id,r,s,t,u)}.bind(this),this.$FantaTabMainLoader5=function(r,s){var t=this.props.tab;c("FantaMessageActions").sendMessage(t.id,r,s)}.bind(this),this.$FantaTabMainLoader6=function(r,s){var t=this.props.tab;c("FantaMessageActions").sendPhoto(t.id,r,s)}.bind(this),n}l.prototype.shouldComponentUpdate=function(m){var n=this.props;return n.isFocused!==m.isFocused||n.isHovered!==m.isHovered||n.isLastTabOfType!==m.isLastTabOfType||!n.tab.equals(m.tab)||!n.tabContent.equals(m.tabContent)};l.prototype.componentDidMount=function(){c("Bootloader").loadModules(["FantaReducersTabSheets"],k,"FantaTabMainLoader.react")};l.prototype.render=function(){var m=this.props,n=m.isFocused,o=m.isHovered,p=m.isLastTabOfType,q=m.raisedTabCount,r=m.tab,s=m.tabContent,t=s.hasFetchedAll,u=s.showContextBanner,v=s.thread,w=s.threadPreviewID,x=s.messages,y=w?r.id+"-"+w:r.id;if(!s)return c("React").createElement("div",{key:"noContent-"+y});if(!x)x=c("immutable").List();var z=c("immutable").List([]);if(c("MercuryConfig").GDWC)z=this.$FantaTabMainLoader1(v,r);return c("React").createElement(c("FantaTabMain.react"),{hasFetchedAll:t,isFocused:n,isHovered:o,isLastGroupTab:p,key:y,messages:x,onlineUsers:z,onLoadMoreMessages:this.$FantaTabMainLoader2,onSelectSticker:this.$FantaTabMainLoader3,onSendHotLike:this.$FantaTabMainLoader4,onSendMessage:this.$FantaTabMainLoader5,onSendPhoto:this.$FantaTabMainLoader6,raisedTabCount:q,showContextBanner:u,tab:r,tabContent:s,thread:v})};l.prototype.$FantaTabMainLoader1=function(m,n){__p&&__p();var o=c("MercuryIDs").getUserIDFromThreadID(n.id),p=[];if(o)p=c("FantaAvailableStatus").isAvailable(m,n.id)?[o]:[];else if(m){p=m.participants.filter(function(q){if(!q)return false;var r=c("MercuryIDs").getThreadIDFromParticipantID(q);if(!r)return false;var s=c("FantaAvailableStatus").isAvailable(null,r);return s});p=p.map(function(q){return c("MercuryIDs").getUserIDFromParticipantID(q)||""})}return c("immutable").List(p)};l.propTypes={isFocused:j.bool.isRequired,isHovered:j.bool.isRequired,isLastTabOfType:j.bool.isRequired,raisedTabCount:j.number,tab:j.object.isRequired,tabContent:j.object};f.exports=l}),null);
__d("FantaTabMinimized.react",["cx","fbt","ChatBehavior","ChatTabBlinking","ChatTabHeaderContainer.react","CurrentUser","Event","FantaAvailableStatus","FantaTabActions","React","ReactDOM","SimpleXUIDialog","WorkFocusMode","emptyFunction","getVendorPrefixedEventName","ifRequired"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=/\D+/g,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={closing:false},this.$FantaTabMinimized4=function(){var t=this.props.tabContent;if(!t||t&&t.composerText.length===0)this.$FantaTabMinimized5();else this.$FantaTabMinimized6()}.bind(this),this.$FantaTabMinimized3=function(event){var t=event.target;if(t&&t.classList&&!t.classList.contains("button")){event.preventDefault();c("FantaTabActions").unminimizeTab(this.props.tab.id);c("FantaTabActions").focusTab(this.props.tab.id)}}.bind(this),p}n.prototype.componentDidMount=function(){this.$FantaTabMinimized2()};n.prototype.componentDidUpdate=function(){this.$FantaTabMinimized2()};n.prototype.shouldComponentUpdate=function(o){var p=this.props;return!p.tab.equals(o.tab)||!p.tabContent&&!!o.tabContent||!!p.tabContent&&!p.tabContent.equals(o.tabContent)};n.prototype.$FantaTabMinimized2=function(){__p&&__p();var o=this.props,p=o.tab,q=o.tabContent,r=p.id;if(!q)return;var s=q.thread;if(!s)return;var t=this.refs.root&&c("ReactDOM").findDOMNode(this.refs.root);if(!t)return;var u=s.unread_count;if(c("WorkFocusMode")&&c("WorkFocusMode").currentViewerInFocusMode(r))return;if(u!==undefined){var v=!!u&&(!c("ChatBehavior").showsTabUnreadUI||c("ChatBehavior").showsTabUnreadUI());if(v)c("ChatTabBlinking").blinkTab(r,{getTabElem:function w(){return t},isFocused:function w(){return false},isHovered:function w(){return false}});else c("ChatTabBlinking").unblinkTab(r)}};n.prototype.render=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.thread&&q.thread.custom_color,s=r?{color:r}:null,t=p.id,u=q&&!!q.thread&&c("FantaAvailableStatus").isAvailable(q.thread,t);return c("React").createElement("div",{className:"_4cd8 _50mz _50m_ fbNub _50-v"+(u?" _4-0b":"")+" _27_3",ref:"root"},c("React").createElement("div",{className:(this.state.closing?"_2suj":"")+" clearfix fbNubFlyoutTitlebar titlebar"+(!!r?" _1m34":""),style:s},c("React").createElement(c("ChatTabHeaderContainer.react"),{attachmentsShelf:document.createElement("div"),isActive:false,isRaised:false,isTyping:false,nameConversationFunc:c("emptyFunction"),rtcNuxShown:false,sheetController:{},showAddFriend:c("emptyFunction"),threadID:this.props.tab.id,viewer:c("CurrentUser").getID(),onClick:this.$FantaTabMinimized3,onCloseClick:this.$FantaTabMinimized4,onRTCNuxCloseButtonClick:c("emptyFunction")})))};n.prototype.$FantaTabMinimized5=function(){__p&&__p();var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.threadPreviewID?q.threadPreviewID:p.id,s=c("ReactDOM").findDOMNode(this.refs.root);this.$FantaTabMinimized1=setTimeout(function(){return c("FantaTabActions").closeAndTabNext(r)},1.2*c("ifRequired")("cssVar",function(u){return"200ms".replace(l,"")},function(){return 200}));var t=c("Event").listen(s,c("getVendorPrefixedEventName")("animationend"),function(u){if(u.animationName==="closeChatTab"){c("FantaTabActions").closeAndTabNext(r);clearTimeout(this.$FantaTabMinimized1);t.remove()}}.bind(this));this.setState({closing:true})};n.prototype.$FantaTabMinimized6=function(){var o=this.props,p=o.tab,q=o.tabContent,r=q&&q.threadPreviewID?q.threadPreviewID:p.id,s=i._("Are you sure you want to close this chat window?");c("FantaTabActions").blurTab(r);var t=i._("You haven't sent your message.");c("SimpleXUIDialog").showConfirm(s,t,function(u){if(u)c("FantaTabActions").closeAndTabNext(r);else c("FantaTabActions").focusTab(r)},{autofocusConfirm:true,useReactFocusBehavior:true})};n.propTypes={tab:m.object.isRequired,tabContent:m.object};f.exports=n}),null);
__d("FantaMercuryTabsWithMain.react",["Bootloader","FantaAppStore","FantaCookieUtil","FantaMercuryTabOverflowBootloader.react","FantaTabActions","FantaTabGroup.react","FantaTabMainLoader.react","FantaTabMinimized.react","FluxContainer","LazyComponent.react","LoadOnRender.react","MercuryIDs","PresenceState","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=function j(l){c("Bootloader").loadModules(["messengerReasonDialogContainerReact"],function(m){var n=m.jsComponent;return l(n)},"FantaMercuryTabsWithMain.react")};h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;k.getStores=function(){return[c("FantaAppStore")]};k.calculateState=function(){return{tabGroup:c("FantaAppStore").getState().tabGroup,tabContents:c("FantaAppStore").getState().mercury.tabContents}};k.prototype.componentDidMount=function(){if(this.props.loadDataOnMount)c("FantaTabActions").loadFromData(c("FantaCookieUtil").convertCookieData(c("PresenceState").get()))};k.prototype.render=function(){return[c("React").createElement(c("FantaTabGroup.react"),{key:"tabgroup",MainComponent:c("FantaTabMainLoader.react"),MinimizedComponent:c("FantaTabMinimized.react"),OverflowComponent:c("FantaMercuryTabOverflowBootloader.react"),tabGroup:this.state.tabGroup,tabContents:this.state.tabContents,isLastOfTypeChecker:this.$FantaMercuryTabsWithMain1}),c("React").createElement(c("LoadOnRender.react"),{key:"dialog",component:c("React").createElement(c("LazyComponent.react"),null),loader:j,placeholder:c("React").createElement("span",null)})]};k.prototype.$FantaMercuryTabsWithMain1=function(l){return c("MercuryIDs").isGroupChat(l.id)};function k(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(k)}),null);
__d("FantaTabsReactApp",["ChatPerfInstrumentation","FantaMercuryTabsWithMain.react","FantaTabsAppBase","Map","React","ReactDOM","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=void 0;h=babelHelpers.inherits(k,c("FantaTabsAppBase"));i=h&&h.prototype;k.prototype.initializeFantaData=function(l){__p&&__p();e(["FantaAppStore","FantaCookieUtil","FantaGetMessageActions","FantaTabActions","MercuryThreadInformer","PresenceState"],function(m,n,o,p,q,r){__p&&__p();p.loadFromData(n.convertCookieData(r.get(),null,l));r.registerStateLoader(function(s){p.loadFromData(n.convertCookieData(s,m.getState().tabGroup,l))});r.registerStateStorer(function(s){var t=m.getState().tabGroup;if(!j||j&&!j.equals(t)){j=t;return n.createCookieData(t,s)}else return s});q.get().subscribe("threads-updated",function(s,t){Object.keys(t).forEach(function(u){c("setImmediate")(function(){o.refreshThread(u)})})});c("ChatPerfInstrumentation").logInitData()})};k.prototype.initializeFantaUI=function(){__p&&__p();e(["FantaAppStore","FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(l,m,n,o,p,q,r){__p&&__p();q.init();r.init();c("ReactDOM").render(this.getViewComponent(),this.tabsElem);m.onMessagesReceived(function(t,u){c("setImmediate")(function(){n.receivedNewMessage(t,u)})});p.init(this.tabsElem);c("ChatPerfInstrumentation").logInitUI();var s=l.getState().tabGroup.tabs;if(s.toArray().length===0)c("ChatPerfInstrumentation").logDisplayDone()}.bind(this))};k.prototype.getViewComponent=function(){return c("React").createElement(c("FantaMercuryTabsWithMain.react"),{loadDataOnMount:false})};function k(){h.apply(this,arguments)}f.exports=new k()}),null);