if (self.CavalryLogger) { CavalryLogger.start_js(["7OS4d"]); }

__d("ViewableImpressionUtils",["csx","cx","CSS"],(function a(b,c,d,e,f,g,h,i){var j={isHorizontallyOffscreen:function k(l,m,n){var o=Math.max(m.x,0),p=Math.min(m.x+m.width,n.width);return p-o<m.width||c("CSS").matchesSelector(l,".desktop_hscroll_offscreen")}};f.exports=j}),null);
__d("FullViewLogger",["Banzai","ScriptPath","SubscriptionsHandler","URI"],(function a(b,c,d,e,f,g){__p&&__p();h.logFromViewableImpressionTracker=function(i){"use strict";var j=new h();j.subscribeToTrackerEvents(i)};h.prototype.subscribeToTrackerEvents=function(i){"use strict";this.subscriptionsHandler=new(c("SubscriptionsHandler"))();this.subscriptionsHandler.addSubscriptions(i.addListener("full_view",this.onFullView,this))};h.prototype.onFullView=function(i){"use strict";if(this.$FullViewLogger1())this.$FullViewLogger2(i);var j={token:i.token,fullViewType:i.fullViewType,scriptPath:c("ScriptPath").getTopViewEndpoint()};c("Banzai").post("xtrackable:full_view",j);if(this.$FullViewLogger1())this.$FullViewLogger3(j)};h.prototype.$FullViewLogger1=function(){"use strict";return 0};h.prototype.$FullViewLogger2=function(i){"use strict"};h.prototype.$FullViewLogger3=function(i){"use strict"};function h(){"use strict"}f.exports=h}),null);
__d("CommercialBreakMobileEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SUBSCRIPTION_SUCCESS:"commercial_break_skywalker_subscription_success",SUBSCRIPTION_FAILURE:"commercial_break_skywalker_subscription_failure",RECEIVE_INTENT_MSG:"commercial_break_skywalker_receive_intent",RECEIVE_START_MSG:"commercial_break_skywalker_receive_start",RECEIVE_INVALID_MSG:"commercial_break_skywalker_receive_invalid_message",VIDEO_FETCH_SUCCESS:"commercial_break_video_fetch_success",VIDEO_FETCH_FAILURE:"commercial_break_video_fetch_failure",COMMERCIAL_BREAK_INLINE_TO_FULLSCREEN:"commercial_break_inline_to_fullscreen",COMMERCIAL_BREAK_FULLSCREEN_TO_INLINE:"commercial_break_fullscreen_to_inline",COMMERCIAL_BREAK_SCROLLED_AWAY:"commercial_break_scrolled_away",COMMERCIAL_BREAK_SCROLLED_INTO:"commercial_break_scrolled_into",COMMERCIAL_BREAK_START_NFX:"commercial_break_start_nfx",COMMERCIAL_BREAK_HIDE_AD:"commercial_break_hide_ad",COMMERCIAL_BREAK_HIDE_AD_BREAKS:"commercial_break_hide_ad_breaks",COMMERCIAL_BREAK_START:"commercial_break_start",COMMERCIAL_BREAK_START_AD:"commercial_break_start_ad",COMMERCIAL_BREAK_TRANSIT:"commercial_break_transit",COMMERCIAL_BREAK_WAIT_FOR:"commercial_break_wait_for",COMMERCIAL_BREAK_STATIC_COUNTDOWN:"commercial_break_static_countdown",COMMERCIAL_BREAK_END:"commercial_break_end",COMMERCIAL_BREAK_PAUSE_AD:"commercial_break_pause_ad",COMMERCIAL_BREAK_PLAY_AD:"commercial_break_play_ad",COMMERCIAL_BREAK_NO_AD_TRANSITION:"commercial_break_no_ad_transition",COMMERCIAL_BREAK_ELIGIBLE_VOD_START:"commercial_break_eligible_vod_start",COMMERCIAL_BREAK_START_SHOW_NOTHING:"commercial_break_start_show_nothing",COMMERCIAL_BREAK_STARTING_INDICATOR:"commercial_break_starting_indicator",COMMERCIAL_BREAK_START_TIME_DELTA:"commercial_break_start_time_delta",COMMERCIAL_BREAK_IMPRESSION_ATTEMPT:"commercial_break_impression_attempt",COMMERCIAL_BREAK_SKYWALKER_RECEIVED_DUPLICATE_EVENT:"commercial_break_skywalker_received_duplicate_event",COMMERCIAL_BREAK_ADS_LOADED:"commercial_break_ads_loaded",COMMERCIAL_BREAK_FIRE_EVENT_IN_TRACKER:"commercial_break_fire_event_in_tracker",COMMERCIAL_BREAK_LOG_IMPRESSION_IN_TRACKER:"commercial_break_log_impression_in_tracker",COMMERCIAL_BREAK_REGISTER_VIDEO:"commercial_break_register_video",COMMERCIAL_BREAK_RESUME_HOST_VIDEO:"commercial_break_resume_host_video",COMMERCIAL_BREAK_CLICK_ON_STARTING_INDICATOR:"commercial_break_click_on_starting_indicator",COMMERCIAL_BREAK_PLUGIN_IS_ON_DIFFERENT_HOSTVIDEO:"commercial_break_plugin_is_on_different_hostvideo",COMMERCIAL_BREAK_LOG_AD_IMPRESSION:"commercial_break_log_ad_impression",COMMERCIAL_BREAK_CLICK:"commercial_break_click",COMMERCIAL_BREAK_SCRUB_THROUGH:"commercial_break_scrub_through",COMMERCIAL_BREAK_SCRUBBER_LEAVE_BEFORE_AD_BREAK:"commercial_break_scrubber_leave_before_ad_break",COMMERCIAL_BREAK_SCRUBBER_LEAVE_DURING_AD_BREAK:"commercial_break_scrubber_leave_during_ad_break",COMMERCIAL_BREAK_CONTEXT_CARD_INFO_BUTTON_CLICK:"commercial_break_context_card_info_button_click"})}),null);
__d("FullViewType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ENTIRE_UNIT:1})}),null);
__d("PercentVisible",[],(function a(b,c,d,e,f,g){f.exports={NO_VISIBLE:-1,VISIBLE_0_PCT:0,VISIBLE_50_PCT:50,VISIBLE_100_PCT:100}}),null);
__d("VisibilityState",[],(function a(b,c,d,e,f,g){"use strict";f.exports={TOP:"TOP",BOTTOM:"BOTTOM",FULL:"FULL",NULL:"NULL"}}),null);
__d("ViewableImpressionTracker",["csx","AdImpressionLoggingConfig","Banzai","BrowseClientEventLogger","CommercialBreakMobileEvent","DataAttributeUtils","DOM","FullViewType","MarauderLogger","NonBlockingIFrame","PercentVisible","Style","URI","ViewableImpressionUtils","Visibility","VisibilityState","WebSpeedJSExperiments","ge","getElementPosition","getViewportDimensions","mixInEventEmitter"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j,k,l){"use strict";__p&&__p();this.id=j;this.element=k;this.config=l;this.iframe=null;this.viewableTimeout=null;this.clearSubsequentTimeout=null;this.waitForSubsequent=false;this.waitForLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.iframeLogged=false;this.banzaiLogged=false;this.topLeftInViewport=false;this.bottomRightInViewport=false}i.prototype.getID=function(){"use strict";return this.id};i.prototype.getConfig=function(){"use strict";return this.config};i.prototype.getPercentInViewport=function(){"use strict";var j=c("getViewportDimensions")(),k=c("getElementPosition")(this.element);return this.$ViewableImpressionTracker1(j,k)};i.prototype.$ViewableImpressionTracker2=function(j,k){__p&&__p();var l=arguments.length<=2||arguments[2]===undefined?0:arguments[2];"use strict";if(k.x<j.width&&k.x+k.width>0&&k.y<j.height&&k.y+k.height>l&&c("Style").get(this.element,"visibility")!=="hidden"&&c("Style").get(this.element,"opacity")!=="0"){var m=Math.max(k.x,0),n=Math.min(k.x+k.width,j.width),o=Math.max(k.y,l),p=Math.min(k.y+k.height,j.height);if(k.height*k.width===0)return 100;var q=100*(n-m)*(p-o)/(k.height*k.width);return q}return 0};i.prototype.$ViewableImpressionTracker1=function(j,k){"use strict";if(this.config.require_horizontally_onscreen&&c("ViewableImpressionUtils").isHorizontallyOffscreen(this.element,k,j))return 0;return this.$ViewableImpressionTracker2(j,k)};i.prototype.$ViewableImpressionTracker3=function(j,k,l){"use strict";var m=this.$ViewableImpressionTracker2(j,k,l);if(m===0)return c("PercentVisible").NO_VISIBLE;else if(m<50)return c("PercentVisible").VISIBLE_0_PCT;else if(m<100)return c("PercentVisible").VISIBLE_50_PCT;else return c("PercentVisible").VISIBLE_100_PCT};i.prototype.$ViewableImpressionTracker4=function(j,k){var l=arguments.length<=2||arguments[2]===undefined?0:arguments[2];"use strict";var m=Math.max(k.y,l),n=Math.min(k.y+k.height,j.height),o=100*(n-m)/(j.height-l);if(o<50)return c("PercentVisible").VISIBLE_0_PCT;else if(o<100)return c("PercentVisible").VISIBLE_50_PCT;else return c("PercentVisible").VISIBLE_100_PCT};i.prototype.$ViewableImpressionTracker5=function(j,k){"use strict";__p&&__p();var l=0,m=c("ge")("pagelet_bluebar");if(m&&m.offsetHeight)l=m.offsetHeight+m.offsetTop;if(this.config.should_log_viewport_duration){var n=this.$ViewableImpressionTracker4(j,k,l);switch(n){case c("PercentVisible").VISIBLE_0_PCT:case c("PercentVisible").VISIBLE_50_PCT:case c("PercentVisible").VISIBLE_100_PCT:this.emit("viewport_viewability",{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:n});break;default:break}}var o=this.$ViewableImpressionTracker3(j,k,l);switch(o){case c("PercentVisible").VISIBLE_0_PCT:case c("PercentVisible").VISIBLE_50_PCT:case c("PercentVisible").VISIBLE_100_PCT:this.emit("viewability",{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:o});break;default:this.emit("hidden",{id:this.getID(),token:this.getToken()});break}};i.prototype.$ViewableImpressionTracker6=function(j,k){"use strict";if(c("Style").get(this.element,"visibility")==="hidden"||c("Style").get(this.element,"opacity")==="0")return false;var l=k.x,m=k.y,n=k.x+k.width,o=k.y+k.height;this.topLeftInViewport=this.topLeftInViewport||l>=0&&l<=j.width&&m>=0&&m<=j.height;this.bottomRightInViewport=this.bottomRightInViewport||n>=0&&n<=j.width&&o>=0&&o<=j.height;return this.topLeftInViewport&&this.bottomRightInViewport};i.prototype.$ViewableImpressionTracker7=function(j,k){"use strict";if(this.hasEmittedFullViewEvent)return;if(this.$ViewableImpressionTracker6(j,k)){this.emit("full_view",{tracker:this,id:this.getID(),token:this.getToken(),fullViewType:c("FullViewType").ENTIRE_UNIT});this.hasEmittedFullViewEvent=true}};i.prototype.$ViewableImpressionTracker8=function(j,k){"use strict";__p&&__p();var l=k.y,m=k.y+k.height,n=l>=0&&l<=j.height,o=m>=0&&m<=j.height,p=void 0;if(n&&o)p=c("VisibilityState").FULL;else if(n)p=c("VisibilityState").TOP;else if(o)p=c("VisibilityState").BOTTOM;else p=c("VisibilityState").NULL;this.emit("viewability_debug",{tracker:this,id:this.getID(),token:this.getToken(),visibleState:p})};i.prototype.onVisible=function(event){"use strict";__p&&__p();this.isVisible=true;var j=c("getViewportDimensions")(),k=c("getElementPosition")(this.element),l=this.$ViewableImpressionTracker1(j,k),m=l>this.config.pixel_in_percentage;this.emit("visible",{tracker:this,id:this.getID(),token:this.getToken(),percentInViewport:l});if(this.config.should_log_viewability_duration)this.$ViewableImpressionTracker5(j,k);if(this.config.should_log_debug_duration)this.$ViewableImpressionTracker8(j,k);this.$ViewableImpressionTracker7(j,k);if(!m){this.$ViewableImpressionTracker9();return}if(this.isLogged())this.$ViewableImpressionTracker10();else this.$ViewableImpressionTracker11();if(!this.waitForLogged&&!this.isLogged()&&!(c("AdImpressionLoggingConfig").blockInvisible&&c("Visibility").isHidden())){this.waitForLogged=true;this.viewableTimeout=setTimeout(function(){__p&&__p();this.waitForLogged=false;if(c("AdImpressionLoggingConfig").blockInvisible&&c("Visibility").isHidden())return;var l=this.getPercentInViewport(),m=l>this.config.pixel_in_percentage;if(!m){this.$ViewableImpressionTracker12();return}this.logImpression(1,{});this.$ViewableImpressionTracker10()}.bind(this),this.config.duration_in_ms)}};i.prototype.onHidden=function(){"use strict";__p&&__p();this.emit("hidden",{id:this.getID(),token:this.getToken()});if(this.config.log_initial_nonviewable&&!this.isLogged()&&!this.isNonViewableLogged)this.logNonViewableImpression();else if(!this.config.log_initial_nonviewable&&!this.isLogged()&&this.isVisible)this.logNonViewableImpression();this.isVisible=false;if(this.waitForLogged){this.waitForLogged=false;clearTimeout(this.viewableTimeout)}if(this.isLogged()&&!this.waitForSubsequent&&this.config.subsequent_gap_in_ms>=0){this.waitForSubsequent=true;this.clearSubsequentTimeout=setTimeout(function(){this.waitForSubsequent=false;this.reset();if(this.isVisible)this.onVisible()}.bind(this),this.config.subsequent_gap_in_ms)}this.$ViewableImpressionTracker12()};i.prototype.onRemoved=function(){"use strict";this.isVisible=false};i.prototype.getToken=function(){"use strict";return c("DataAttributeUtils").getDataAttribute(this.element,"data-xt")};i.prototype.logImpression=function(j,k){"use strict";__p&&__p();if(this.isLogged())return;var l=this.getToken(),m=Math.floor(Date.now()/1e3),n=this.$ViewableImpressionTracker13(),o={xt:l,isv:j,cts:m,csp:n};if(c("Banzai").isEnabled("xtrackable_clientview_batch")&&this.config.should_batch||this.config.vital_mode_for_ss||this.config.signal_mode_for_ss){var p=this.config.vital_mode_for_ss?c("Banzai").VITAL:{};p.signal=this.config.signal_mode_for_ss;this.logWithBanzai(o,p)}else this.logWithIFrame(Object.assign(o,k))};i.prototype.logNonViewableImpression=function(){"use strict";if(this.config.nonviewableEnabled){var j=this.getToken();c("Banzai").post("xtrackable:nonviewable",{xt:j})}this.isNonViewableLogged=true};i.prototype.isLogged=function(){"use strict";return this.iframeLogged||this.banzaiLogged};i.prototype.reset=function(){"use strict";__p&&__p();if(this.iframeLogged)this.iframeLogged=false;if(this.iframe){c("DOM").remove(this.iframe);this.iframe=null}if(this.banzaiLogged)this.banzaiLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.waitForLogged=false;this.waitForSubsequent=false};i.prototype.logWithBanzai=function(j,k){"use strict";this.banzaiLogged=true;c("BrowseClientEventLogger").maybeLogClientViewEvent(j);c("Banzai").post("xtrackable:clientview_batch",j,k)};i.prototype.logWithIFrame=function(j){"use strict";this.iframeLogged=true;if(c("WebSpeedJSExperiments").non_blocking_tracker||this.config.is_instream_story)c("NonBlockingIFrame").loadIFrame(new(c("URI"))(this.config.impressionURL).addQueryData(j).toString());else{this.iframe=c("DOM").create("iframe",{src:new(c("URI"))(this.config.impressionURL).addQueryData(j),width:0,height:0,frameborder:0,scrolling:"no",className:"fbEmuTracking"});this.iframe.setAttribute("aria-hidden","true");c("DOM").appendContent(this.element,this.iframe)}};i.prototype.$ViewableImpressionTracker13=function(){"use strict";__p&&__p();var j=c("DataAttributeUtils").getDataAttribute(this.element,"data-dedupekey");if(j===null)return null;var k=this.$ViewableImpressionTracker14();if(k===null||k.length===0)return null;var l=k.length;while(--l>=0){var m=c("DataAttributeUtils").getDataAttribute(k[l],"data-dedupekey");if(m!==null&&j===m)break}return l+1};i.prototype.$ViewableImpressionTracker14=function(){"use strict";__p&&__p();var j=c("ge")("contentArea");if(j){var k="._5jmm",l=c("DOM").scry(j,k);return l.filter(function(n){return c("DataAttributeUtils").getDataAttribute(n,"data-dedupekey")})}else{var m=c("ge")("m_newsfeed_stream");return m===null?null:m.getElementsByTagName("article")}};i.prototype.$ViewableImpressionTracker15=function(){"use strict";return 0};i.prototype.$ViewableImpressionTracker9=function(){"use strict";if(this.$ViewableImpressionTracker15()){c("Style").set(this.element,"background-color","#abab9a");c("Style").set(this.element,"outline","3px solid #abab9a")}};i.prototype.$ViewableImpressionTracker11=function(){"use strict";if(this.$ViewableImpressionTracker15()){c("Style").set(this.element,"background-color","#e4f70a");c("Style").set(this.element,"outline","3px solid #e4f70a")}};i.prototype.$ViewableImpressionTracker12=function(){"use strict";if(this.$ViewableImpressionTracker15()){c("Style").set(this.element,"background-color",null);c("Style").set(this.element,"outline",null)}};i.prototype.$ViewableImpressionTracker10=function(){"use strict";if(this.$ViewableImpressionTracker15()){c("Style").set(this.element,"background-color","#047515");c("Style").set(this.element,"outline","3px solid #047515")}};c("mixInEventEmitter")(i,{visible:true,hidden:true,full_view:true,viewability:true,viewport_viewability:true,viewability_debug:true});f.exports=i}),null);
__d("ViewabilityDebugLogger",["Banzai","Map","ViewableImpressionTracker","VisibilityState","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({top_enter_viewport:null,top_exit_viewport:null,bottom_enter_viewport:null,bottom_exit_viewport:null});i.logFromViewableImpressionTracker=function(j){var k=new i();k.subscribeToTrackerEvents(j)};function i(){this.$ViewabilityDebugLogger1=new(c("Map"))();this.$ViewabilityDebugLogger2=new(c("Map"))();this.$ViewabilityDebugLogger3=new(c("Map"))()}i.prototype.subscribeToTrackerEvents=function(j){j.addListener("viewability_debug",this.onView.bind(this));j.addListener("hidden",this.onHidden.bind(this))};i.prototype.onView=function(event){__p&&__p();var j=event.id,k=event.visibleState,l=Date.now(),m=this.$ViewabilityDebugLogger1.get(j),n=this.$ViewabilityDebugLogger2.get(j);switch(k){case c("VisibilityState").TOP:if(!this.$ViewabilityDebugLogger1.has(j))this.$ViewabilityDebugLogger4(event,l,c("VisibilityState").TOP);if(n){var o={token:n.token,start_ts:n.start_ts,event_type:h.bottom_exit_viewport,event_time:l};this.$ViewabilityDebugLogger5(o,j,c("VisibilityState").BOTTOM)}break;case c("VisibilityState").FULL:if(!this.$ViewabilityDebugLogger3.has(j))this.$ViewabilityDebugLogger4(event,l,c("VisibilityState").FULL);break;case c("VisibilityState").BOTTOM:if(!this.$ViewabilityDebugLogger2.has(j))this.$ViewabilityDebugLogger4(event,l,c("VisibilityState").BOTTOM);if(m){var p={token:m.token,start_ts:m.start_ts,event_type:h.top_exit_viewport,event_time:l};this.$ViewabilityDebugLogger5(p,j,c("VisibilityState").TOP)}break;case c("VisibilityState").NULL:if(m){var q={token:m.token,start_ts:m.start_ts,event_type:h.top_exit_viewport,event_time:l};this.$ViewabilityDebugLogger5(q,j,c("VisibilityState").TOP)}if(n){var r={token:n.token,start_ts:n.start_ts,event_type:h.bottom_exit_viewport,event_time:l};this.$ViewabilityDebugLogger5(r,j,c("VisibilityState").BOTTOM)}}};i.prototype.onHidden=function(event){var j=event.id,k=Date.now(),l=this.$ViewabilityDebugLogger1.get(j),m=this.$ViewabilityDebugLogger2.get(j);if(l){var n={token:l.token,start_ts:l.start_ts,event_type:h.top_exit_viewport,event_time:k};this.$ViewabilityDebugLogger5(n,j,c("VisibilityState").TOP)}if(m){var o={token:m.token,start_ts:m.start_ts,event_type:h.bottom_exit_viewport,event_time:k};this.$ViewabilityDebugLogger5(o,j,c("VisibilityState").BOTTOM)}};i.prototype.$ViewabilityDebugLogger4=function(event,j,k){__p&&__p();var l={token:event.token,start_ts:j,event_time:j};switch(k){case c("VisibilityState").TOP:l.event_type=h.top_enter_viewport;this.$ViewabilityDebugLogger1.set(event.id,l);this.$ViewabilityDebugLogger6(l);break;case c("VisibilityState").BOTTOM:l.event_type=h.bottom_enter_viewport;this.$ViewabilityDebugLogger2.set(event.id,l);this.$ViewabilityDebugLogger6(l);break;case c("VisibilityState").FULL:this.$ViewabilityDebugLogger3.set(event.id,l);if(!this.$ViewabilityDebugLogger1.has(event.id)){var m={token:l.token,start_ts:j,event_time:j,event_type:h.top_enter_viewport};this.$ViewabilityDebugLogger1.set(event.id,m);this.$ViewabilityDebugLogger6(m)}if(!this.$ViewabilityDebugLogger2.has(event.id)){var n={token:l.token,start_ts:j,event_time:j,event_type:h.bottom_enter_viewport};this.$ViewabilityDebugLogger2.set(event.id,n);this.$ViewabilityDebugLogger6(n)}break}};i.prototype.$ViewabilityDebugLogger6=function(j){c("Banzai").post("xtrackable:viewability_debug",j)};i.prototype.$ViewabilityDebugLogger5=function(j,k,l){c("Banzai").post("xtrackable:viewability_debug",j);switch(l){case c("VisibilityState").BOTTOM:this.$ViewabilityDebugLogger2["delete"](k);break;case c("VisibilityState").TOP:this.$ViewabilityDebugLogger1["delete"](k);break}this.$ViewabilityDebugLogger3["delete"](k)};f.exports=i}),null);
__d("VisibilityUnitType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FEED_UNIT:"feed_unit",VIEWPORT:"viewport"})}),null);
__d("ViewabilityDurationSegmentLogger",["Banzai","Map","PercentVisible","ViewableImpressionTracker","VisibilityUnitType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=8e3;i.logFromViewableImpressionTracker=function(j){var k=new i();k.subscribeToTrackerEvents(j)};function i(){this.$ViewabilityDurationSegmentLogger1=new(c("Map"))();this.$ViewabilityDurationSegmentLogger2=new(c("Map"))();this.$ViewabilityDurationSegmentLogger3=new(c("Map"))();this.$ViewabilityDurationSegmentLogger4=new(c("Map"))();this.$ViewabilityDurationSegmentLogger5=new(c("Map"))()}i.prototype.subscribeToTrackerEvents=function(j){j.addListener("viewability",this.onViewable.bind(this));j.addListener("viewport_viewability",this.onViewport.bind(this));j.addListener("hidden",this.onHidden.bind(this))};i.prototype.onViewable=function(event){__p&&__p();var j=event.id,k=event.percentVisible,l=Date.now(),m=void 0,n=void 0;switch(k){case c("PercentVisible").VISIBLE_0_PCT:m=this.$ViewabilityDurationSegmentLogger1.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_0_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger2.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}m=this.$ViewabilityDurationSegmentLogger4.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}break;case c("PercentVisible").VISIBLE_50_PCT:m=this.$ViewabilityDurationSegmentLogger1.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_0_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger2.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_50_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger4.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}break;case c("PercentVisible").VISIBLE_100_PCT:m=this.$ViewabilityDurationSegmentLogger1.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_0_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger2.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_50_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger4.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_100_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);break}};i.prototype.onViewport=function(event){__p&&__p();var j=event.id,k=event.percentVisible,l=Date.now(),m=void 0,n=void 0;switch(k){case c("PercentVisible").VISIBLE_0_PCT:m=this.$ViewabilityDurationSegmentLogger3.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}m=this.$ViewabilityDurationSegmentLogger5.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}break;case c("PercentVisible").VISIBLE_50_PCT:m=this.$ViewabilityDurationSegmentLogger3.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_50_PCT,l,c("VisibilityUnitType").VIEWPORT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger5.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}break;case c("PercentVisible").VISIBLE_100_PCT:m=this.$ViewabilityDurationSegmentLogger3.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_50_PCT,l,c("VisibilityUnitType").VIEWPORT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger5.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_100_PCT,l,c("VisibilityUnitType").VIEWPORT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);break}};i.prototype.onHidden=function(event){__p&&__p();var j=event.id,k=Date.now(),l=this.$ViewabilityDurationSegmentLogger1.get(j),m=this.$ViewabilityDurationSegmentLogger2.get(j),n=this.$ViewabilityDurationSegmentLogger3.get(j),o=this.$ViewabilityDurationSegmentLogger4.get(j),p=this.$ViewabilityDurationSegmentLogger5.get(j);if(l)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(l,j,k,true),j);if(m)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(m,j,k,true),j);if(n)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(n,j,k,true),j);if(o)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(o,j,k,true),j);if(p)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(p,j,k,true),j)};i.prototype.$ViewabilityDurationSegmentLogger6=function(event,j,k,l){__p&&__p();var m={token:event.token,startedTrackingTS:k,percentVisible:j,visibilityUnit:l,intervalMs:0,cumulativeMs:0,segmentIdx:0};switch(j){case c("PercentVisible").VISIBLE_0_PCT:this.$ViewabilityDurationSegmentLogger1.set(event.id,m);break;case c("PercentVisible").VISIBLE_50_PCT:if(l===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger2.set(event.id,m);else this.$ViewabilityDurationSegmentLogger3.set(event.id,m);break;case c("PercentVisible").VISIBLE_100_PCT:if(l===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger4.set(event.id,m);else this.$ViewabilityDurationSegmentLogger5.set(event.id,m);break}};i.prototype.$ViewabilityDurationSegmentLogger8=function(j,k,l,m){__p&&__p();var n=l-j.startedTrackingTS,o=n-j.cumulativeMs,p=j.percentVisible,q={token:j.token,startedTrackingTS:j.startedTrackingTS,percentVisible:p,visibilityUnit:j.visibilityUnit,intervalMs:o,cumulativeMs:n,segmentIdx:++j.segmentIdx};if(m)q.duration=n;switch(p){case c("PercentVisible").VISIBLE_0_PCT:this.$ViewabilityDurationSegmentLogger1.set(k,q);break;case c("PercentVisible").VISIBLE_50_PCT:if(j.visibilityUnit===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger2.set(k,q);else this.$ViewabilityDurationSegmentLogger3.set(k,q);break;case c("PercentVisible").VISIBLE_100_PCT:if(j.visibilityUnit===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger4.set(k,q);else this.$ViewabilityDurationSegmentLogger5.set(k,q);break}return q};i.prototype.$ViewabilityDurationSegmentLogger7=function(j,k,l){var m=j.intervalMs,n=l-j.startedTrackingTS-j.cumulativeMs;if(this.$ViewabilityDurationSegmentLogger10(m,n)){var o=this.$ViewabilityDurationSegmentLogger8(j,k,l,false);c("Banzai").post("xtrackable:viewability",o,c("Banzai").VITAL)}};i.prototype.$ViewabilityDurationSegmentLogger10=function(j,k){__p&&__p();if(j>=h)return false;if(j==0)return true;if(j<1e3)return k>=1e3;var l=0;l=j/1e3;var m=k/1e3;return m>=2*l};i.prototype.$ViewabilityDurationSegmentLogger9=function(j,k){__p&&__p();var l=j.percentVisible;switch(l){case c("PercentVisible").VISIBLE_0_PCT:this.$ViewabilityDurationSegmentLogger1["delete"](k);break;case c("PercentVisible").VISIBLE_50_PCT:if(j.visibilityUnit===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger2["delete"](k);else this.$ViewabilityDurationSegmentLogger3["delete"](k);break;case c("PercentVisible").VISIBLE_100_PCT:if(j.visibilityUnit===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger4["delete"](k);else this.$ViewabilityDurationSegmentLogger5["delete"](k);break}c("Banzai").post("xtrackable:viewability",j,c("Banzai").VITAL)};f.exports=i}),null);
__d("ViewableImpressionDurationLogger",["Banzai","Map"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.logFromViewableImpressionTracker=function(i){var j=new h();j.subscribeToTrackerEvents(i)};function h(){this.$ViewableImpressionDurationLogger1=new(c("Map"))()}h.prototype.subscribeToTrackerEvents=function(i){i.addListener("visible",this.onElementVisible.bind(this));i.addListener("hidden",this.onElementHidden.bind(this))};h.prototype.onElementVisible=function(event){if(this.$ViewableImpressionDurationLogger1.get(event.id))return null;var i={token:event.token,startedTrackingTS:this.getTimeNow()};this.$ViewableImpressionDurationLogger1.set(event.id,i);return i};h.prototype.onElementHidden=function(event){var i=this.$ViewableImpressionDurationLogger1.get(event.id);if(!i)return false;i.trackingDuration=this.getTimeNow()-i.startedTrackingTS;return this.sendLog(event.id)};h.prototype.sendLog=function(i){var j=this.$ViewableImpressionDurationLogger1.get(i);if(!j||!j.trackingDuration)return false;c("Banzai").post("xtrackable:duration",j);this.$ViewableImpressionDurationLogger1["delete"](i);return true};h.prototype.getTimeNow=function(){return parseFloat((Date.now()/1e3).toFixed(2))};f.exports=h}),null);
__d("ViewableImpressionHeatmapLogger",["Banzai"],(function a(b,c,d,e,f,g){__p&&__p();h.logFromViewableImpressionTracker=function(i,j){"use strict";var k=new h(j);k.subscribeToTrackerEvents(i)};function h(i){"use strict";this.loggingDurationMS=i;this.trackingEntries={}}h.prototype.subscribeToTrackerEvents=function(i){"use strict";this.visibleSubscription=i.addListener("visible",this.onElementVisible,this);this.hiddenSubscription=i.addListener("hidden",this.onElementHidden,this)};h.prototype.onElementVisible=function(i){"use strict";var j=this.getCurrentTimestamp(),k=this.trackingEntries[i.id];if(!k){k=this.createTrackingEntry(i);this.beginTracking(i.id,k);j=k.startedTrackingTS}k.viewportProgressEvents.push({timestamp:j,percentInViewport:i.percentInViewport.toFixed(2)})};h.prototype.onElementHidden=function(i){"use strict";var j=this.getCurrentTimestamp(),k=this.trackingEntries[i.id];if(!k)return;k.viewportProgressEvents.push({timestamp:j,percentInViewport:0})};h.prototype.onTrackingCompleted=function(i){"use strict";var j=this.trackingEntries[i];j.viewportProgressEvents.push({timestamp:this.getCurrentTimestamp(),percentInViewport:j.tracker.getPercentInViewport().toFixed(2)});if(this.$ViewableImpressionHeatmapLogger1())this.$ViewableImpressionHeatmapLogger2(i,j);this.logToServer(j);delete this.trackingEntries[i]};h.prototype.logToServer=function(i){"use strict";var j=i;delete j.tracker;c("Banzai").post("xtrackable:heatmap",j)};h.prototype.beginTracking=function(i,j){"use strict";this.trackingEntries[i]=j;setTimeout(function(){return this.onTrackingCompleted(i)}.bind(this),this.loggingDurationMS)};h.prototype.createTrackingEntry=function(i){"use strict";return{tracker:i.tracker,token:i.token,startedTrackingTS:this.getCurrentTimestamp(),viewportProgressEvents:[]}};h.prototype.getCurrentTimestamp=function(){"use strict";return(Date.now()/1e3).toFixed(2)};h.prototype.$ViewableImpressionHeatmapLogger1=function(){"use strict";return 0};h.prototype.$ViewableImpressionHeatmapLogger2=function(i,j){"use strict";var k="Completed tracking for id "+i+" token="+j.token+" startedTrackingTS="+j.startedTrackingTS+"\n";j.viewportProgressEvents.forEach(function(l){k+="% in view: "+l.percentInViewport+" timestamp="+l.timestamp+"\n"})};f.exports=h}),null);
__d("ViewableImpressionEventHandler",["DataAttributeUtils","FullViewLogger","ViewabilityDebugLogger","ViewabilityDurationSegmentLogger","ViewableImpressionDurationLogger","ViewableImpressionHeatmapLogger","ViewableImpressionTracker","VisibilityTracking"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=1;h=babelHelpers.inherits(k,c("VisibilityTracking"));i=h&&h.prototype;k.prototype.extraInit=function(){this.impressionTrackers={}};k.prototype.getDataFromConfig=function(l){i.getDataFromConfig.call(this,l);this.doHeatmapLogging=l.doHeatmapLogging;this.heatmapLoggingDurationMS=l.heatmapLoggingDurationMS;l.impressionURL=l.impressionURL!==undefined?l.impressionURL:"/xti.php";l.nonviewableEnabled=l.nonviewableEnabled!==undefined?l.nonviewableEnabled:false};k.prototype.getImpressionTracking=function(l){__p&&__p();var m=this.getElementID(l),n=this.impressionTrackers[m];if(!n){var o=babelHelpers["extends"]({},this.getConfigFromElement(l),this.config);n=new(c("ViewableImpressionTracker"))(m,l,o);this.impressionTrackers[m]=n;if(o.log_impression_duration)c("ViewableImpressionDurationLogger").logFromViewableImpressionTracker(n);if(this.doHeatmapLogging)c("ViewableImpressionHeatmapLogger").logFromViewableImpressionTracker(n,this.heatmapLoggingDurationMS);if(o.should_log_full_views)c("FullViewLogger").logFromViewableImpressionTracker(n);if(o.should_log_viewability_duration)c("ViewabilityDurationSegmentLogger").logFromViewableImpressionTracker(n);if(o.should_log_debug_duration)c("ViewabilityDebugLogger").logFromViewableImpressionTracker(n)}return n};k.prototype.handleEvent=function(l,event){__p&&__p();var m=this.getImpressionTracking(l);if(!m)return;if(event.name==="visible"){m.onVisible(event);if(!this.visibleElementInfo[m.getID()])this.visibleElementInfo[m.getID()]={elem:l}}else if(event.name==="hidden"){var n=m.getConfig();if(event.cause==="default"||n.log_visibility_hidden_when_browser_inactive&&event.cause==="browser"){m.onHidden();delete this.visibleElementInfo[m.getID()]}else if(event.cause==="removed"){m.onRemoved();delete this.visibleElementInfo[m.getID()];delete this.impressionTrackers[m.getID()]}}};k.prototype.isInstreamAdStoryElement=function(l){var m=babelHelpers["extends"]({},this.getConfigFromElement(l),this.config);return!!m.is_instream_story};k.prototype.getConfigFromElement=function(l){return JSON.parse(c("DataAttributeUtils").getDataAttribute(l,"data-xt-vimp"))};k.prototype.getElementID=function(l){if(!l.getAttribute("id"))l.setAttribute("id","xt_uniq_"+j++);return l.getAttribute("id")};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("ViewableImpressionTracking",["Arbiter","DesktopHscrollUnitEventConstants","ErrorUtils","LitestandMessages","Run","ViewableImpressionEventHandler","ViewableImpressionConfig"],(function a(b,c,d,e,f,g){var h={init:function i(){if(c("ViewableImpressionEventHandler").instance===undefined){c("ViewableImpressionEventHandler").instance=new(c("ViewableImpressionEventHandler"))(c("ViewableImpressionConfig"));c("ViewableImpressionEventHandler").instance.listeners.addSubscriptions(c("Arbiter").subscribe([c("LitestandMessages").STORIES_INSERTED,"AdsRefreshHandler/AdsLoaded","MPPInsights/ChartView","PhotoSnowliftAds/displayUnits","WebMessengerAdsControl/adjustAds",c("DesktopHscrollUnitEventConstants").HSCROLL_ITEM_INSERTED_EVENT,"WebVideoChannelAds/AdsLoaded"],c("ErrorUtils").guard(function(event){c("ViewableImpressionEventHandler").instance.refreshAndFireEvent(event)},"ViewableImpressionTracking")))}c("Run").onLoad(function(){c("ViewableImpressionEventHandler").instance.refreshAndFireEvent()})}};f.exports=h}),null);
__d("PageLikeButtonLazy",["Arbiter","Bootloader","Event","PageLikeConstants","SubscriptionsHandler","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){__p&&__p();var h=new(c("SubscriptionsHandler"))(),i=[],j=false,k=false,l=c("PageLikeConstants").LIKED,m=c("PageLikeConstants").UNLIKED,n=c("PageLikeConstants").SPM_CALLOUT,o=c("PageLikeConstants").LAZY_CLICK,p={init:function q(r,s,t,u,v,w,x,y,z,A,B,C){p._initWithArgs(r,s,t,u,v,w,x,y,z,A,B,C)},_initWithArgs:function q(){for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];c("ifRequired")("PageLikeButton",function(u){return u.init.apply(u,s)},function(){s[11]=babelHelpers["extends"]({},s[11],{isLazy:true});this._startListening(s[1]);i.push(s)}.bind(this))},_startListening:function q(r){__p&&__p();if(!j){j=true;h.addSubscriptions(c("Arbiter").subscribe([l,m,n],function(event,s){c("Arbiter").inform(event+".lazy",s,c("Arbiter").BEHAVIOR_PERSISTENT);this._bootload()}.bind(this)))}h.addSubscriptions(c("Event").listen(r,"click",function(event){c("Arbiter").inform(o,{event:event,node:r},c("Arbiter").BEHAVIOR_PERSISTENT);c("setImmediate")(function(){return this._bootload()}.bind(this))}.bind(this)))},_bootload:function q(){if(k)return;k=true;c("Bootloader").loadModules(["PageLikeButton"],function(r){h.release();i.forEach(function(s){return r.init.apply(r,s)})},"PageLikeButtonLazy")}};f.exports=p}),null);
__d("HoverButton",["csx","cx","AsyncRequest","CSS","DOM","URI"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m,n){"use strict";this._button=k;this._flyout=l;this._flyoutAjaxify=n;this._flyoutContent=m;l.subscribe("show",this._onShow.bind(this));l.subscribe("hide",this._onHide.bind(this))}j.prototype.showFlyoutBriefly=function(){"use strict";this.showFlyout();this._flyout.hideFlyoutDelayed(5e3)};j.prototype.showFlyout=function(){"use strict";this._flyout.showFlyout(this._button,true);this._flyout.inform("show",this._button)};j.prototype.hideFlyout=function(){"use strict";this._flyout.hideFlyout(true);this._flyout.inform("hide",this._button)};j.prototype.enableButton=function(){"use strict";this._flyout.initNode(this._button)};j.prototype.disableButton=function(){"use strict";this.hideFlyout();this._flyout.deactivateNode(this._button)};j.prototype._onShow=function(k,l){"use strict";__p&&__p();c("CSS").addClass(l,"_52nd");if(c("CSS").hasClass(l,"uiButton")||c("CSS").matchesSelector(l,"._42fu"))c("CSS").addClass(l,"selected");if(this._flyoutAjaxify){c("CSS").addClass(this._flyoutContent,"async_saving");new(c("AsyncRequest"))().setURI(new(c("URI"))(this._flyoutAjaxify)).setHandler(function(m){c("CSS").removeClass(this._flyoutContent,"async_saving");c("DOM").setContent(this._flyoutContent,m.payload)}.bind(this)).send();this._flyoutAjaxify=null}};j.prototype._onHide=function(k,l){"use strict";c("CSS").removeClass(l,"_52nd");if(c("CSS").hasClass(l,"uiButton")||c("CSS").matchesSelector(l,"._42fu"))c("CSS").removeClass(l,"selected")};j.prototype.destroy=function(){"use strict";this.hideFlyout();this._flyout.destroy()};j.prototype.suppressNextMouseEnter=function(){"use strict";this._flyout.setActiveNode(this._button)};Object.assign(j.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null});f.exports=j}),null);
__d("SwapButton",["DOM","Event","Focus"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l){c("DOM").insertAfter(k,j);c("DOM").remove(k);l&&c("Focus").setWithoutOutline(j)}function i(j,k,l){"use strict";this._swapperButton=j;this._swappeeButton=k;c("Event").listen(j,"click",h.bind(null,k,j,true));if(l)c("Event").listen(k,"click",h.bind(null,j,k,true))}i.prototype.swap=function(j){"use strict";if(this._swapperButton.parentNode)h(this._swappeeButton,this._swapperButton,j)};i.prototype.unswap=function(j){"use strict";if(!this._swapperButton.parentNode)h(this._swapperButton,this._swappeeButton,j)};i.prototype.toggle=function(j){"use strict";if(this._swapperButton.parentNode)this.swap(j);else this.unswap(j)};i.prototype.getCurrentButton=function(){"use strict";return this._swapperButton.parentNode?this._swapperButton:this._swappeeButton};Object.assign(i.prototype,{_swapperButton:null,_swappeeButton:null});f.exports=i}),null);
__d("HoverFlyout",["Arbiter","ArbiterMixin","DataStore","Event","Keys","mixin","removeFromArray","shield"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l,m,n){"use strict";__p&&__p();i.constructor.call(this);if(k){this._showDelay=m;this._hideDelay=n;this.init(k);if(l)this.initNode(l)}c("Arbiter").subscribe("SwapButtonDEPRECATED/focusOnJoinButton",c("shield")(this.hideFlyout,this),c("Arbiter").SUBSCRIBE_ALL)}j.prototype.init=function(k){"use strict";__p&&__p();this._flyout=k;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe("mouseenter",this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe("mouseleave",c("shield")(this.hideFlyout,this))];this._nodes=[];this._dataStoreUnique="HoverFlyout_"+Date.now()+"_listeners";return this};j.prototype.initNode=function(k){"use strict";if(this._nodes.includes(k))return this;this._nodes.push(k);c("DataStore").set(k,this._dataStoreUnique,[c("Event").listen(k,"mouseenter",this._onNodeMouseEnter.bind(this,k)),c("Event").listen(k,"mouseleave",c("shield")(this.hideFlyout,this)),c("Event").listen(k,"click",this._onNodeMouseEnter.bind(this,k)),c("Event").listen(k,"keydown",this._onNodeKeyEscape.bind(this))]);return this};j.prototype.deactivateNode=function(k){"use strict";var l=c("DataStore").get(k,this._dataStoreUnique);if(l)while(l.length)l.pop().remove();c("removeFromArray")(this._nodes,k)};j.prototype.setShowDelay=function(k){"use strict";this._showDelay=k;return this};j.prototype.setHideDelay=function(k){"use strict";this._hideDelay=k;return this};j.prototype.showFlyout=function(k,l){"use strict";this.setActiveNode(k);if(l){this._flyout.setContext(k).show();this.inform("show",k)}else this._showTimeout=setTimeout(this.showFlyout.bind(this,k,true),this._showDelay);return this};j.prototype.hideFlyout=function(k){"use strict";clearTimeout(this._showTimeout);if(k){this._flyout.hide();this._activeNode&&this.inform("hide",this._activeNode);this._activeNode=null}else this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),this._hideDelay)};j.prototype.hideFlyoutDelayed=function(k){"use strict";clearTimeout(this._showTimeout);clearTimeout(this._hideTimeout);this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),k)};j.prototype.getActiveNode=function(){"use strict";return this._activeNode};j.prototype.setActiveNode=function(k){"use strict";clearTimeout(this._hideTimeout);if(this._activeNode&&this._activeNode!==k)this.hideFlyout(true);this._activeNode=k;return this};j.prototype.clearNodes=function(){"use strict";for(var k=this._nodes.length;k>0;k--)this.deactivateNode(this._nodes[k-1])};j.prototype.destroy=function(){"use strict";while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes()};j.prototype._onNodeMouseEnter=function(k){"use strict";if(this._activeNode===k)clearTimeout(this._hideTimeout);else this.showFlyout(k)};j.prototype._onFlyoutMouseEnter=function(){"use strict";clearTimeout(this._hideTimeout)};j.prototype._onNodeKeyEscape=function(event){"use strict";if(c("Event").getKeyCode(event)===c("Keys").ESC){this._activeNode&&this.inform("hide",this._activeNode);this._activeNode=null}};f.exports=b.HoverFlyout||j}),null);