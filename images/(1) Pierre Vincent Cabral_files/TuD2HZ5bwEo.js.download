if (self.CavalryLogger) { CavalryLogger.start_js(["hVpZi"]); }

__d("AdsVideoCaptionLoadingView.react",["cx","fbt","React","SUIBusinessTheme","SUIButton.react","SUISpinner.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:"_bdi"},c("React").createElement(c("SUISpinner.react"),{size:"large",theme:c("SUIBusinessTheme")}),c("React").createElement("span",null,i._("Loading Caption Editor...")),c("React").createElement("span",null,c("React").createElement(c("SUIButton.react"),{height:"short",label:i._("Cancel"),theme:c("SUIBusinessTheme"),use:"default",onClick:this.props.onCancel})))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("AdBreakExperimentalTextUtils",["fbt","React","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";var i={getHoldoutToolTipContentForVideo:function j(){return c("React").createElement("div",null,i.getToolTipTitle(),c("React").createElement("br",null),c("React").createElement(c("XUIText.react"),{display:"block"},h._("For this video, a small percentage of your viewers will be split into a group for the test. Some viewers will see ads and some won't. The remaining viewers are not affected.")),c("React").createElement("br",null),c("React").createElement(c("XUIText.react"),{display:"block"},h._("When you turn on holdout testing for a video, the test will run for 14 days or until the test group with ad breaks earns $100. Test results are available in your Page's Insights.")))},getToolTipTitle:function j(){return c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("How Holdouts Work For Ad Breaks"))}};f.exports=i}),null);
__d("BrandedContentComposerInterceptReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AFFILIATE_LINK:"affiliate_link",CREATOR_NOT_WHITELISTED:"creator_not_whitelisted",SELF_DISCLOSURE:"self_disclosure"})}),null);
__d("BrandedContentPostTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:BrandedContentPostLoggerConfig",this.$BrandedContentPostTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:BrandedContentPostLoggerConfig",this.$BrandedContentPostTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$BrandedContentPostTypedLogger1={};return this};h.prototype.updateData=function(j){this.$BrandedContentPostTypedLogger1=babelHelpers["extends"]({},this.$BrandedContentPostTypedLogger1,j);return this};h.prototype.setAdAccountID=function(j){this.$BrandedContentPostTypedLogger1.ad_account_id=j;return this};h.prototype.setAppID=function(j){this.$BrandedContentPostTypedLogger1.app_id=j;return this};h.prototype.setBcAccessGranted=function(j){this.$BrandedContentPostTypedLogger1.bc_access_granted=j;return this};h.prototype.setBcRequestPageID=function(j){this.$BrandedContentPostTypedLogger1.bc_request_page_id=j;return this};h.prototype.setBrandedContentEvent=function(j){this.$BrandedContentPostTypedLogger1.branded_content_event=j;return this};h.prototype.setBrandedContentPageType=function(j){this.$BrandedContentPostTypedLogger1.branded_content_page_type=j;return this};h.prototype.setComposerInterceptReason=function(j){this.$BrandedContentPostTypedLogger1.composer_intercept_reason=j;return this};h.prototype.setCreatorID=function(j){this.$BrandedContentPostTypedLogger1.creator_id=j;return this};h.prototype.setDirectShareStatus=function(j){this.$BrandedContentPostTypedLogger1.direct_share_status=j;return this};h.prototype.setExtraFields=function(j){this.$BrandedContentPostTypedLogger1.extra_fields=j;return this};h.prototype.setIsAd=function(j){this.$BrandedContentPostTypedLogger1.is_ad=j;return this};h.prototype.setIsBackdatedPost=function(j){this.$BrandedContentPostTypedLogger1.is_backdated_post=j;return this};h.prototype.setIsDraftPost=function(j){this.$BrandedContentPostTypedLogger1.is_draft_post=j;return this};h.prototype.setIsScheduledPost=function(j){this.$BrandedContentPostTypedLogger1.is_scheduled_post=j;return this};h.prototype.setIsSponsorChanged=function(j){this.$BrandedContentPostTypedLogger1.is_sponsor_changed=j;return this};h.prototype.setPostCreationAppID=function(j){this.$BrandedContentPostTypedLogger1.post_creation_app_id=j;return this};h.prototype.setPostCreationTime=function(j){this.$BrandedContentPostTypedLogger1.post_creation_time=j;return this};h.prototype.setPostID=function(j){this.$BrandedContentPostTypedLogger1.post_id=j;return this};h.prototype.setPostMessage=function(j){this.$BrandedContentPostTypedLogger1.post_message=j;return this};h.prototype.setPostType=function(j){this.$BrandedContentPostTypedLogger1.post_type=j;return this};h.prototype.setSponsorCount=function(j){this.$BrandedContentPostTypedLogger1.sponsor_count=j;return this};h.prototype.setSponsorIds=function(j){this.$BrandedContentPostTypedLogger1.sponsor_ids=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setSponsorRelationship=function(j){this.$BrandedContentPostTypedLogger1.sponsor_relationship=j;return this};h.prototype.setVC=function(j){this.$BrandedContentPostTypedLogger1.vc=j;return this};var i={ad_account_id:true,app_id:true,bc_access_granted:true,bc_request_page_id:true,branded_content_event:true,branded_content_page_type:true,composer_intercept_reason:true,creator_id:true,direct_share_status:true,extra_fields:true,is_ad:true,is_backdated_post:true,is_draft_post:true,is_scheduled_post:true,is_sponsor_changed:true,post_creation_app_id:true,post_creation_time:true,post_id:true,post_message:true,post_type:true,sponsor_count:true,sponsor_ids:true,sponsor_relationship:true,vc:true};f.exports=h}),null);
__d("BrandedContentVideoUploadComposerInterceptDialog.react",["cx","fbt","BrandedContentPostTypedLogger","BrandedContentComposerInterceptReason","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){"use strict";k.constructor.call(this,m);this.$BrandedContentVideoUploadComposerInterceptDialog1=function(){this.setState({showInterceptDialog:false});new(c("BrandedContentPostTypedLogger"))().setBrandedContentEvent("bc_composer_intercept").setExtraFields(JSON.stringify({override_userid:this.props.pageID})).setComposerInterceptReason(this.props.interceptReason).setPostMessage(this.props.text).setPostType("video").log()}.bind(this);this.state={showInterceptDialog:true}}l.prototype.render=function(){"use strict";return c("React").createElement(c("XUIDialog.react"),{shown:this.state.showInterceptDialog,width:600},c("React").createElement(c("XUIDialogTitle.react"),null,i._("Are you partnering with a business or brand for this post?")),c("React").createElement(c("XUIDialogBody.react"),{className:"_60b7"},c("React").createElement("div",{className:"_2pi4 _2pit"},c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{shade:"medium"},this.props.interceptReason===c("BrandedContentComposerInterceptReason").SELF_DISCLOSURE?i._("We noticed your post is about an ad. If you're partnering with a third party brand, product or business in your post for an exchange of value, you'll need to tag your business partner's Page below."):null,this.props.interceptReason===c("BrandedContentComposerInterceptReason").AFFILIATE_LINK?i._("We noticed you mentioned a third party product or business in your post. If you're partnering for an exchange of value, you'll need to tag your business partner's Page below. If the product is yours, you don't need to tag anyone."):null)))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{className:"_60b8",action:"cancel",label:i._("Skip"),onClick:this.$BrandedContentVideoUploadComposerInterceptDialog1})))};f.exports=l}),null);
__d("ComposerXTimelineTagger",["cx","Arbiter","ComposerXPlusTagger","CSS","DOMQuery","Event","Focus"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("ComposerXPlusTagger"));j=i&&i.prototype;k.prototype.init=function(l,m){"use strict";__p&&__p();j.init.call(this,l);if(!m)m="backdateicon";this._datepicker=this.getTimelineDatepickerComponent(l);this._datepickerIcon=l.getComponent(m);if(this._datepickerIcon&&this._datepicker){this.registerTagger("date",this._datepicker,this._datepickerIcon);var n=c("DOMQuery").find(this._datepicker.element,"select.periodMenu.yearMenu");this.setTaggerCallback("date",c("Focus").set.bind(null,n));this._subscriptions.push(this._datepicker.instance.subscribe("changed",this._handleDateChanged.bind(this)));this._subscriptions.push(c("Arbiter").subscribe("Datepicker/schedulingPosts",this._handleDateChanged.bind(this)));this._subscriptions.push(c("Arbiter").subscribe("Datepicker/resetSchedulingPosts",function(){this._handleDateChanged("Datepicker/resetSchedulingPosts");this.hideTaggers()}.bind(this)));c("Event").listen(this._datepickerIcon.element,"click",function(){c("Arbiter").inform("Datepicker/clicked")})}c("Arbiter").inform("ComposerXTimelineTagger/init",{composerTimelineTagger:this,datePickerElement:this._datepicker?this._datepicker.element:null,datePickerInstance:this._datepicker?this._datepicker.instance:null},c("Arbiter").BEHAVIOR_STATE)};k.prototype.getTimelineDatepickerComponent=function(l){"use strict";return l.getComponent("backdatepicker")};k.prototype._handleDateChanged=function(event){"use strict";var l=this._datepicker.instance.isSet();c("CSS").conditionClass(this._datepickerIcon.element,"_4_na",(l||event=="Datepicker/schedulingPosts")&&event!="Datepicker/resetSchedulingPosts")};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerXPagesTimelineTagger",["csx","cx","ComposerXTimelineTagger","CSS","DOM","PagesEventObserver","getElementText"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("ComposerXTimelineTagger"));k=j&&j.prototype;function l(m,n,o,p,q,r,s){"use strict";k.constructor.call(this,n);this._useWith=m;this._dialog=o;this._showSponsor=q;this._showProduct=r;this._showMessenger=s;this._defaultPostText=null;this._root=null}l.prototype.initAndRegisterWithTagger=function(){"use strict";if(this._useWith)k.initAndRegisterWithTagger.call(this)};l.prototype.init=function(m){"use strict";__p&&__p();k.init.call(this,m);this._root=m.getRoot();this._defaultPostText=c("getElementText")(this._getPostButton());if(this._showSponsor){this._sponsorIcon=m.getComponent("sponsoricon");this._sponsorTagger=m.getComponent("sponsortagger");this._sponsorTaggerPrefix=m.getComponent("sponsortaggerprefix");this._sponsorLearnMore=m.getComponent("sponsorlearnmore");this._sponsorRelationshipCheckbox=m.getComponent("sponsorrelationshipcheckbox");this._sharedToSponsorCheckbox=m.getComponent("sharedtosponsorcheckbox");this._initSponsor()}if(this._showProduct){this._productIcon=m.getComponent("producticon");this._productTagger=m.getComponent("producttagger");this._initProduct()}if(this._showMessenger){this._messengerIcon=m.getComponent("messengericon");this._messengerTagger=m.getComponent("messengertagger");this._initMessenger()}if(this._dialog)this._dialog.show();var n=m.getComponent("pagesbackdatepicker");if(n&&n.instance)n.instance.subscribe("changePostButton",function(event,o){var p=o.newText,q=this._getPostButton(),r="padding: 0 6px";if(!p){p=this._defaultPostText;r="none"}if(q)q.setAttribute("style",r);this._changePostButtonText(p)}.bind(this))};l.prototype._initTargeting=function(){"use strict";if(this._targeting){this._targeting.instance.subscribe("refresh",function(){var m=this._targeting.instance.isTargetingSet();c("CSS").conditionClass(this._targetingIcon.element,"selected",m);c("CSS").conditionClass(this._targetingIcon.element,"_21yl",m)}.bind(this));this.registerTagger("targeting",this._targeting,this._targetingIcon);this.setTaggerCallback("targeting",this._logTargetingOpen.bind(this))}};l.prototype._initSponsor=function(){"use strict";__p&&__p();if(this._sponsorTagger){this.registerTagger("sponsor",this._sponsorTagger,this._sponsorIcon);this.initTaggerInput("sponsor",this._sponsorTagger.instance.getInput());this.registerTaggerSideElement("sponsor","sponsor_prefix",this._sponsorTaggerPrefix);this.registerTaggerSideElement("sponsor","sponsor_learn_more",this._sponsorLearnMore);if(this._sponsorRelationshipCheckbox)this.registerTaggerSideElement("sponsor","sponsor_relationship_checkbox",this._sponsorRelationshipCheckbox);if(this._sharedToSponsorCheckbox)this.registerTaggerSideElement("sponsor","shared_to_sponsor_checkbox",this._sharedToSponsorCheckbox);this._subscriptions.push(this._sponsorTagger.instance.subscribe(["addToken","removeToken","init"],this._updateSponsorTaggerUI.bind(this)))}};l.prototype._updateSponsorTaggerUI=function(){"use strict";if(!this._sponsorTagger||!this._sponsorIcon)return;c("CSS").conditionClass(this._sponsorIcon.element,"_9k-",this._sponsorTagger.instance.getTokens().length>0)};l.prototype.getMoreExtraTaggedTextData=function(){"use strict";if(!this._hasProductTagger())return{};var m=this._productTagger.instance.getTokens();if(m.length===0)return{};return{productIDs:m.map(function(n){return n.info.uid})}};l.prototype._initProduct=function(){"use strict";if(this._productTagger){this.registerTagger("product",this._productTagger,this._productIcon);this.initTaggerInput("product",this._productTagger.instance.getInput());this._subscriptions.push(this._productTagger.instance.subscribe(["addToken","removeToken","init"],this._updateProductTaggerUI.bind(this)))}};l.prototype._initMessenger=function(){"use strict";if(this._messengerTagger)this.registerTagger("messenger",this._messengerTagger,this._messengerIcon)};l.prototype._hasProductTagger=function(){"use strict";return this._productTagger&&this._productIcon};l.prototype._hasMessengerTagger=function(){"use strict";return this._messengerTagger&&this._messengerIcon};l.prototype._updateProductTaggerUI=function(){"use strict";if(!this._hasProductTagger())return;this.updateTaggedText();c("CSS").conditionClass(this._productIcon.element,"_3__c",this._productTagger.instance.getTokens().length>0)};l.prototype._logTargetingOpen=function(){"use strict";if(this._config.targetIsPage===true&&this._config.targetID){var m={page_id:this._config.targetID,event_name:"composer_targeting_open"};c("PagesEventObserver").logData_DEPRECATED(m,c("PagesEventObserver").VITAL_WAIT)}};l.prototype.getTimelineDatepickerComponent=function(m){"use strict";var n=m.getComponent("pagesbackdatepicker");if(!n)return null;return{instance:n.instance.getDatepicker(),element:n.element}};l.prototype._getPostButton=function(){"use strict";if(!this._root)return null;var m=c("DOM").scry(this._root,"._1dso ._11b");return m.length>0?m[0]:null};l.prototype._changePostButtonText=function(m){"use strict";var n=this._getPostButton();if(m&&n)c("DOM").setContent(n,m)};l.prototype.initAndRegisterInterestTagger=function(){"use strict"};f.exports=l}),null);
__d("ComposerXPagesTimelineTaggerWithOG",["ComposerXOGTaggerBehavior","ComposerXPagesTimelineTagger","classWithMixins","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("classWithMixins")(c("ComposerXPagesTimelineTagger"),c("mixin")(c("ComposerXOGTaggerBehavior"))));i=h&&h.prototype;j.prototype.init=function(k){"use strict";i.init.call(this,k);this.initOGTagger(k)};j.prototype.cleanup=function(){"use strict";i.cleanup.call(this);this.cleanupOGTagger()};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("XBrandedContentComposerInterceptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/branded_content/composer/intercept/",{composer_post_text:{type:"String"},target_id:{type:"String"},sponsor_id:{type:"String"}})}),null);
__d("ComposerXVideoUploadAttachment",["csx","cx","fbt","Promise","$","Arbiter","AsyncRequest","BanzaiODS","Bootloader","BrandedContentVideoUploadComposerInterceptDialog.react","Button","ComposerWaterfallEvent","ComposerXAttachment","ComposerXAttachmentUtils","ComposerXController","ComposerXMarauderLogger","ComposerVideoPostUtils","CSS","ErrorDialog","Event","Form","OptimisticVideoPostUtils","Parent","PrivacyConst","ProfileVideoWWWFrontendActionTypedLogger","React","ReactDOM","ReactComposerMultilingualStatusStore","ReactObjectiveFirstPagesComposerGlobalFlags","Run","SubscriptionsHandler","VideoContainerType","VideoCopyrightAPI","VideoSurveySource","VideoUploadFile","VideoUploadProcessingDialog.react","XBrandedContentComposerInterceptController","XVideoManagerSurveyController","ShowsVideoDataSource","ge","ifRequired"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m="/ajax/composerx/attachment/status/";k=babelHelpers.inherits(n,c("ComposerXAttachment"));l=k&&k.prototype;function n(o,p){"use strict";__p&&__p();l.constructor.call(this);p=p||{};this.root=o;this.cancelButton=p.cancelButton;this.originalComposerID=p.originalComposerID;this.processingDialogContainer=p.processingDialogContainer;this.progressBar=p.progressBar;this.submitButton=p.submitButton;this.tagger=p.tagger;this.videoUploader=p.videoUploader;this.copyrightConfirmationDialog=p.copyrightConfirmationDialog;this.attachmentClassName="_92";this.postActionsButton=p.post_actions_button;this.videoPreview=p.videoPreview;this.isProfileVideo=p.isProfileVideo;this.isUploading=false;this.postPending=false;this.userDisplayName=p.userDisplayName;this.userProfilePictureURI=p.userProfilePictureURI;this.userCanSeeOptimisticPost=p.userCanSeeOptimisticPost;this.isPageToPage=p.isPageToPage;this.isProfileVideo=p.isProfileVideo;this.shouldShowNewEditDialog=p.shouldShowNewEditDialog;this.shouldShowVideoEditButton=p.shouldShowVideoEditButton;this.pageID=p.pageID;this.refreshTimeout=p.refreshTimeout;this.shouldRefreshAfterEncoding=p.shouldRefreshAfterEncoding;this.shouldShowVideoLibrary=p.shouldShowVideoLibrary;this.canSeeVideoManagerSurvey=p.canSeeVideoManagerSurvey;this.composerIntercept=p.composerIntercept;this.showBrandedContentIntercept=p.showBrandedContentIntercept;this.isBrandedContentInterceptShown=false}n.prototype.getRoot=function(){"use strict";return this.root};n.prototype.getComposerRoot=function(){"use strict";var o=this.getComposerID(),p=this.getRoot();while(p!=null){p=p.parentNode;if(p&&p.id==o)break}return p};n.prototype.initWithComponents=function(){"use strict";__p&&__p();c("Button").setEnabled(this.submitButton,false);var o=this.getComponent("maininput");c("CSS").show(this.cancelButton);this.videoFileSelected=false;this.uploadFinished=false;this.tagger.init(this);this.subscriptionsHandler=new(c("SubscriptionsHandler"))();if(!this.filesAddedSubscription)this.filesAddedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesAdded/"+this.getComposerID()+"/videoupload",this.onFileSelected.bind(this));if(!this.filesDroppedSubscription)this.filesDroppedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesDropped/"+this.getComposerID()+"/videoupload",this.onFileDropped.bind(this));var p=this.getComposerRoot();c("ComposerXAttachmentUtils").initMentions(o,j._("Say something about this video..."),p);this.initVideoUploader()};n.prototype.initVideoUploader=function(){"use strict";__p&&__p();var o=this.getComposerRoot();c("ComposerXController").registerConditionForComposerCancel(o,function(){return this.videoFileSelected}.bind(this));c("Run").onLeave(function(){this.videoUploader.abandon()}.bind(this));c("Run").onUnload(function(){this.videoUploader.abandon()}.bind(this));this.subscriptionsHandler.addSubscriptions(c("Event").listen(this.submitButton,"click",this.onSubmit.bind(this)),this.videoUploader.subscribe("upload-finished",this.handleUploadFinished.bind(this)),this.videoUploader.subscribe("upload-failed",this.handleUploadFailed.bind(this)),this.videoUploader.subscribe("post-finished",this.handlePostFinished.bind(this)),this.videoUploader.subscribe("post-failed",this.handlePostFailed.bind(this)));if(this.cancelButton)this.subscriptionsHandler.addSubscriptions(c("Event").listen(this.cancelButton,"click",this.onCancel.bind(this)));if(this.copyrightConfirmationDialog)this.subscriptionsHandler.addSubscriptions(this.copyrightConfirmationDialog.subscribe("confirm",this.handleCopyrightConfirmation.bind(this)));if(this.postActionsButton!=null)this.postActionsButton.initHiddenInputs(this.getComponent("pabhiddeninputs").instance)};n.prototype.cleanup=function(){"use strict";__p&&__p();this.videoFileSelected=false;this.postPending=false;this.isUploading=false;if(this.tagger)this.tagger.cleanup();this.subscriptionsHandler.release();if(this.fileInput)this.fileInput.clear();this.videoUploader.abandon();this.hideUploadProgressBar();if(this.progressBar)this.progressBar.reset()};n.prototype.canSwitchAway=function(){"use strict";return!this.videoUploader.isSessionInProgress()};n.prototype.reset=function(){"use strict";if(this.tagger)this.tagger.reset()};n.prototype.abandon=function(){"use strict";this.videoUploader.abandon();this.isUploading=false;this.uploadFinished=false;this.hideUploadProgressBar();this.progressBar.reset();c("Button").setEnabled(this.$ComposerXVideoUploadAttachment1,true);c("CSS").show(this.$ComposerXVideoUploadAttachment2)};n.showTooManyFilesErrorDialog=function(){"use strict";c("ErrorDialog").show(j._("Too many files"),j._("Please select only one video file at a time."))};n.prototype.onFileSelected=function(o,p){"use strict";__p&&__p();this.videoFileSelected=true;this.fileInput=p.fileInput;this.videoFile=c("VideoUploadFile").fromFileInput(this.fileInput.getInput());var q=this.videoFile.getFileInput();if(q.files&&q.files.length>1){n.showTooManyFilesErrorDialog();this.onCancel()}if(this.videoPreview){this.videoPreview.setVideo(q);this.upload()}c("Button").setEnabled(this.submitButton,true);this.logComposerWaterfallEvent(c("ComposerWaterfallEvent").VIDEO_ADD)};n.prototype.onFileDropped=function(o,p){"use strict";this.videoFileSelected=true;if(p.files&&p.files.length>1){n.showTooManyFilesErrorDialog();this.onCancel()}this.videoFile=c("VideoUploadFile").fromFile(p.files[0]);c("Button").setEnabled(this.submitButton,true)};n.prototype.handleUploadFinished=function(){"use strict";if(this.uploadFinished)c("BanzaiODS").bumpEntityKey("www_composer_video_upload","unexpected_upload_finished");this.isUploading=false;this.uploadFinished=true;this.hideUploadProgressBar();if(this.isPostPending())this.postUpload()};n.prototype.handleUploadFailed=function(event,o){"use strict";this.isUploading=false;if(o)c("ErrorDialog").show(o.error_summary,o.error_description);this.hideUploadProgressBar();c("ComposerXController").getAttachment(this.getComposerID(),m)};n.prototype.getPrivacySetting=function(o){"use strict";var p=parseInt(o.privacyx,10);switch(p){case c("PrivacyConst").PostParam.FRIENDS:return c("PrivacyConst").BaseValue.ALL_FRIENDS;case c("PrivacyConst").PostParam.FRIENDS_OF_FRIENDS:return c("PrivacyConst").BaseValue.FRIENDS_OF_FRIENDS;case c("PrivacyConst").PostParam.ONLY_ME:return c("PrivacyConst").BaseValue.NOBODY;default:var q=!!o.targeted_privacy_data;return q?c("PrivacyConst").BaseValue.CUSTOM:c("PrivacyConst").BaseValue.EVERYONE}};n.prototype.handlePostFinished=function(event,o){"use strict";__p&&__p();var p=c("ge")(this.getComposerID()),q=void 0;if(this.isProfileVideo)q=j._("Your profile is updating...");c("Arbiter").inform("videoUpload/complete",{videoID:o.video_id,containerType:o.video_container,copyrighted:o.copyrighted,videoAssetID:o.video_asset_id,videoTitle:o.video_title,videoDescription:o.xhpc_message_text,videoThumbnailBlob:o.thumb,userDisplayName:this.userDisplayName,userProfilePictureURI:this.userProfilePictureURI,isScheduledPost:!!o.scheduled,isHiddenFromTimeline:o.no_story,isSecret:o.secret,privacySetting:this.getPrivacySetting(o),isPageToPage:this.isPageToPage,isDraft:o.draft=="true",progressCompleteText:q,shouldShowNewEditDialog:this.shouldShowNewEditDialog,shouldShowVideoEditButton:this.shouldShowVideoEditButton,originalComposerID:this.originalComposerID,pageID:this.pageID,refreshTimeout:this.refreshTimeout,shouldRefreshAfterEncoding:this.shouldRefreshAfterEncoding,shouldShowVideoLibrary:this.shouldShowVideoLibrary,isEpisode:o.episode_data_json!==null&&o.episode_data_json!==undefined&&JSON.parse(o.episode_data_json).isEpisode});var r=babelHelpers["extends"]({},o,{isPageToPage:this.isPageToPage}),s=!c("OptimisticVideoPostUtils").shouldShowOptimisticPost(r)||!this.userCanSeeOptimisticPost;if(this.processingDialogContainer&&s)c("ReactDOM").render(c("React").createElement(c("VideoUploadProcessingDialog.react"),{videoID:o.video_id,show:true,shouldShowNewEditDialog:this.shouldShowNewEditDialog,pageID:this.pageID,isSecretVideo:o.secret,shouldShowVideoLibrary:this.shouldShowVideoLibrary}),this.processingDialogContainer);this.$ComposerXVideoUploadAttachment3();this.hideThrobber(p);c("ComposerXController").reset(p)};n.prototype.handlePostFailed=function(event,o){"use strict";this.hideThrobber(this.getComposerID());c("ErrorDialog").show(o.error_summary,o.error_description);c("Button").setEnabled(this.submitButton,true);c("CSS").show(this.cancelButton)};n.prototype.handleCopyrightConfirmation=function(){"use strict";this.copyrightConfirmationDialog.hide();this.doSubmit();return false};n.prototype.onSubmit=function(){"use strict";__p&&__p();c("ComposerVideoPostUtils").logSphericalComposerDataIfNeeded(this.getComposerID(),true);c("ComposerVideoPostUtils").logShowsVideoData(this.getComposerID(),this.videoUploader.getVideoID(),c("ShowsVideoDataSource").UPLOAD);if(this.copyrightConfirmationDialog)this.copyrightConfirmationDialog.show();else if(this.showBrandedContentIntercept&&!this.isBrandedContentInterceptShown)this.$ComposerXVideoUploadAttachment4();else this.doSubmit();if(this.isProfileVideo)new(c("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("save_profile_video_click").setSessionID(this.originalComposerID).log();return false};n.prototype.doSubmit=function(){"use strict";__p&&__p();this.$ComposerXVideoUploadAttachment5();if(this.cancelButton)c("CSS").hide(this.cancelButton);c("Button").setEnabled(this.submitButton,false);if(this.videoUploader.postUserRequest)this.videoUploader.postUserRequest();if(this.uploadFinished)this.postUpload();else{if(!this.isUploading)this.upload();this.postPending=true;this.showUploadProgressBar()}};n.prototype.isPostPending=function(){"use strict";return this.postPending};n.prototype.onCancel=function(o){"use strict";this.videoUploader.cancel();this.isUploading=false;c("ComposerXController").getAttachment(this.getComposerID(),m);this.logComposerWaterfallEvent(c("ComposerWaterfallEvent").VIDEO_REMOVE)};n.prototype.postUpload=function(){"use strict";__p&&__p();this.postPending=false;this.showThrobber(this.getComposerID());var o=c("Form").serialize(this.root),p=c("ReactComposerMultilingualStatusStore").getPostData(this.getComposerID()),q={};if(this.originalComposerID)c("ifRequired")("ReactComposerCivicEngagementStore",function(r){q=r.getData(this.originalComposerID)}.bind(this));return this.getVideoStoreData().then(function(r){o=babelHelpers["extends"]({},o,r,p,q);if(!this.validateData(o))return;if(o)o.bypass_copyright_check=!!this.copyrightConfirmationDialog;if(o.create_copyright_via_api&&this.videoUploader.getVideoID())this.postCopyrightedVideoUpload(o);else this.videoUploader.post(o)}.bind(this))};n.prototype.validateData=function(){"use strict";return true};n.prototype.getVideoStoreData=function(){"use strict";return c("Promise").resolve({})};n.prototype.upload=function(){"use strict";this.isUploading=true;this.videoUploader.upload(this.videoFile)};n.prototype.showUploadProgressBar=function(){"use strict";c("CSS").addClass(this.root,"_5suz")};n.prototype.hideUploadProgressBar=function(){"use strict";c("CSS").removeClass(this.root,"_5suz")};n.prototype.showThrobber=function(o){"use strict";c("ComposerXController").showAttachmentThrobber(o)};n.prototype.hideThrobber=function(o){"use strict";c("ComposerXController").hideAttachmentThrobber(o)};n.prototype.$ComposerXVideoUploadAttachment3=function(){"use strict";if(this.canSeeVideoManagerSurvey){var o=c("XVideoManagerSurveyController").getURIBuilder().setInt("page_id",this.pageID).setEnum("source",c("VideoSurveySource").UPLOAD).getURI();new(c("AsyncRequest"))(o).send()}};n.prototype.logComposerWaterfallEvent=function(event){"use strict";if(!c("Parent").bySelector(c("$")(this.root),"._119"))return;c("ComposerXMarauderLogger").logEvent(event,this.getComposerID())};n.prototype.$ComposerXVideoUploadAttachment5=function(){"use strict";if(c("ReactObjectiveFirstPagesComposerGlobalFlags").getIsObjectiveFirstPagesComposer())c("Bootloader").loadModules(["PagesPublishingLoggingActions"],function(o){return o.postStarted()},"ComposerXVideoUploadAttachment")};n.prototype.postCopyrightedVideoUpload=function(o){"use strict";__p&&__p();var p=o.videoDurationInSec*1e3;c("VideoCopyrightAPI").copyrightVideo(o.access_token,this.pageID.toString(),this.videoUploader.getVideoID(),o,"video_upload_composer").done(function(q){o.copyrighted=false;if(o.video_container===c("VideoContainerType").COPYRIGHT_REFERENCE_VIDEO){o.video_title=o.xhpc_message;o.xhpc_message="";o.xhpc_message_text=""}this.videoUploader.post(o)}.bind(this),function(q){this.hideThrobber(this.getComposerID());c("Button").setEnabled(this.submitButton,true);c("CSS").show(this.cancelButton)}.bind(this))};n.prototype.$ComposerXVideoUploadAttachment4=function(){"use strict";__p&&__p();this.isBrandedContentInterceptShown=true;var o=c("Form").serialize(this.root),p=c("XBrandedContentComposerInterceptController").getURIBuilder().setString("composer_post_text",o.xhpc_message_text).setString("target_id",this.pageID).getURI();new(c("AsyncRequest"))(p).setHandler(function(q){var r=q.getPayload();if(r&&r.shouldInterceptPotentialBCPost){c("ReactDOM").render(c("React").createElement(c("BrandedContentVideoUploadComposerInterceptDialog.react"),{interceptReason:r.interceptReason,text:o.xhpc_message_text,pageID:this.pageID}),this.composerIntercept);this.tagger.switchToTagger("sponsor")}else this.doSubmit()}.bind(this)).send()};f.exports=n}),null);
__d("ComposerXMessengerIconReset",["cx","CSS"],(function a(b,c,d,e,f,g,h){function i(j){c("CSS").removeClass(j.element,"_16oz");c("CSS").removeClass(j.element,"_509o")}f.exports=i}),null);
__d("ComposerXMessengerTaggerEventListener",["cx","CSS","Event","getByPath"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={attachMessengerIconOnClickListener:function j(k){__p&&__p();c("Event").listen(k,"click",function(event){__p&&__p();var k=document.getElementById("composermessengericon"),l=document.getElementById("messenger_tagger_cta_type");if(c("getByPath")(document.getElementById("messenger_tagger_cta_type"),["value"])!="MESSAGE_PAGE"){if(k)c("CSS").conditionClass(k,"_16oz",true);var m=document.getElementsByClassName("_3igh")[0];if(m)c("CSS").show(m);if(l){l=l;l.value="MESSAGE_PAGE"}}else if(k){var n=document.getElementsByClassName("_3igh")[0];if(n)c("CSS").hide(n);c("CSS").removeClass(k,"_16oz");if(l){l=l;l.value=""}}})},attachMessengerBannerOnDismissListener:function j(k){__p&&__p();c("Event").listen(k,"click",function(event){__p&&__p();var l=document.getElementById("composermessengericon");if(l)c("CSS").removeClass(l,"_16oz");var m=document.getElementsByClassName("_3igh")[0];if(m)c("CSS").hide(m);var n=document.getElementById("messenger_tagger_cta_type");if(n){n=n;n.value=""}})}};f.exports=i}),null);
__d("ComposerXMessengerTaggerReset",["CSS"],(function a(b,c,d,e,f,g){function h(i){var j=document.getElementById("messenger_tagger_cta_type");if(j!==null)j.value="";c("CSS").hide(i.element)}f.exports=h}),null);
__d("ComposerXProductIconReset",["cx","CSS"],(function a(b,c,d,e,f,g,h){function i(j){c("CSS").removeClass(j.element,"_3__c");c("CSS").removeClass(j.element,"_509o")}f.exports=i}),null);
__d("ComposerXProductTaggerReset",["CSS"],(function a(b,c,d,e,f,g){function h(i){i.instance.reset();c("CSS").hide(i.element)}f.exports=h}),null);
__d("PostActionsHiddenInputsUpdater",["$","AdsAPITargetFields","DOM","DOMQuery"],(function a(b,c,d,e,f,g){__p&&__p();var h="feed_targeted_data",i="targeted_privacy_data",j={clearHiddenInputsParams:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0];this._clearParams(l)},_getInput:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=c("DOM").scry(l,m);if(n.length)return n[0];else return{}},updateScheduleHiddenInputs:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?c("$")("pabhiddeninputs"):arguments[2],o=this._getInput(n,'input[name="future_date"]'),p=this._getInput(n,'input[name="future_time"]'),q=this._getInput(n,'input[name="scheduled"]');o.value=l;p.value=m;q.value=l?true:""},updateAnnouncementHiddenInputs:function k(l){var m=arguments.length<=1||arguments[1]===undefined?c("$")("pabhiddeninputs"):arguments[1],n=this._getInput(m,'input[name="scheduled_announcement_title"]');if(n.value!==undefined)n.value=l;else this._appendInput(m,"scheduled_announcement_title",l)},updatePostEndDateHiddenInputs:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?c("$")("pabhiddeninputs"):arguments[2];this._appendInput(n,h+"[relevant-until-date]",l);this._appendInput(n,h+"[relevant-until-time]",m)},updateExpireHiddenInputs:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?c("$")("pabhiddeninputs"):arguments[2],o=this._getInput(n,'input[name="expire_time"]'),p=this._getInput(n,'input[name="expiring"]'),q=this._getInput(n,'input[name="expire_type"]');o.value=l;p.value=l?true:"";q.value=m},updateBackdateHiddenInputs:function k(l,m,n,o){var p=arguments.length<=4||arguments[4]===undefined?c("$")("pabhiddeninputs"):arguments[4];this._clearParams(p);var q=this._getInput(p,'input[name="backdated_date[year]"]'),r=this._getInput(p,'input[name="backdated_date[month]"]'),s=this._getInput(p,'input[name="backdated_date[day]"]'),t=this._getInput(p,'input[name="hide_from_newsfeed"]');q.value=l;r.value=m;s.value=n;t.value=o},updatePoliticalDistrictHiddenInputs:function k(l){var m=arguments.length<=1||arguments[1]===undefined?c("$")("pabhiddeninputs"):arguments[1];if(!l)return;this._appendInput(m,i+"[political_district]",l)},updateTargetHiddenInputs:function k(l){var m=arguments.length<=1||arguments[1]===undefined?c("$")("pabhiddeninputs"):arguments[1];this._deleteTargetInputs(m);if(l.hints)this._setInputValue(m,l.hints,h);if(l.targeting)this._setInputValue(m,l.targeting,h);if(l.gating)this._setInputValue(m,l.gating,i)},_clearParams:function k(l){for(var m=0;m<l.children.length;m++)l.children[m].value=""},_deleteTargetInputs:function k(l){var m=c("DOMQuery").scry(l,"input");for(var n=0;n<m.length;n++){var o=(m[n].name.indexOf(h)==0||m[n].name.indexOf(i)==0)&&m[n].name!==h+"[relevant-until-time]"&&m[n].name!==h+"[relevant-until-date]";if(o)c("DOM").remove(m[n])}},_setBackdateParams:function k(l){__p&&__p();var m=l.getRoot(),n=this._getInput(m,'input[name="year"]').value,o=this._getInput(m,'input[name="hide"]'),p=c("DOM").scry(m,'input[name="month"]'),q=c("DOM").scry(m,'input[name="day"]');p=p.length&&p[0].value!==null&&p[0].value!=="0"?p[0].value:null;q=q.length&&q[0].value!==null&&q[0].value!=="0"?q[0].value:null;var r=c("$")("pabhiddeninputs");this._clearParams(r);var s=this._getInput(r,'input[name="backdated_date[year]"]'),t=this._getInput(r,'input[name="backdated_date[month]"]'),u=this._getInput(r,'input[name="backdated_date[day]"]'),v=this._getInput(r,'input[name="hide_from_newsfeed"]');s.value=n;t.value=p;u.value=q;v.value=o.checked},_setInputValue:function k(){__p&&__p();var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=arguments[2];for(var o in m){var p=m[o],q=n+"["+o+"]";if(o===c("AdsAPITargetFields").AGE_MAX||o===c("AdsAPITargetFields").AGE_MIN||o===c("AdsAPITargetFields").GENDERS){var r=o===c("AdsAPITargetFields").GENDERS?p[0]:p;this._appendInput(l,q,r)}else if(o===c("AdsAPITargetFields").GEO_LOCATIONS||o===c("AdsAPITargetFields").EXCLUDED_GEO_LOCATIONS)this._appendInput(l,q,JSON.stringify(p));else if(o===c("AdsAPITargetFields").INTERESTS||o==="fan_of"){q=n+"["+o+"][]";this._appendArrayValueId(l,p,q)}else{q=n+"["+o+"][]";this._appendArrayValue(l,p,q)}}},_appendArrayValueId:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=arguments[2];m.forEach(function(o){this._appendInput(l,n,o.id)},this)},_appendArrayValue:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=arguments[2];m.forEach(function(o){this._appendInput(l,n,o)},this)},_appendInput:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=arguments[2];c("DOM").appendContent(l,c("DOM").create("input",{type:"hidden",name:m,value:n}))}};f.exports=j}),null);
__d("PostExpirationNuxType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COMPOSER_NUX:"composer_nux",TIMELINE_NUX:"timeline_nux",SCHEDULE_DIALOG_NUX:"schedule_dialog_nux"})}),null);
__d("XPostExpirationNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/page/expiring_post/nux/",{})}),null);
__d("ComposerXPostActionDropDownV2",["csx","cx","Arbiter","AsyncRequest","BanzaiODS","Button","CSS","DOM","Event","PagesEventObserver","PostActionsHiddenInputsUpdater","PostBackdateDialog.react","PostExpirationNuxType","PostScheduleAndPostEndDialog.react","PromotedPostConstants","React","ReactComposerPoliticalInfoUtils","ReactComposerTaggerType","ReactDOM","ReactTargetingTaggerStore.react","XPostExpirationNuxController","formatDate"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m,n,o,p,q){"use strict";__p&&__p();this.menuInstance=k;this.postButton=l;this.postActionsButton=m;this.pageID=n.page_id;this.defaultAction=n.default_action;this.scheduleDialogPlaceholder=o;this.backdateDialogPlaceholder=p;this.buttonGroup=q;this.timezone_str=n.timezone_str;this.minBackdateTime=n.min_backdate_time;this.showExpire=n.should_show_expire;this.defaultScheduleTimeDelta=n.default_schedule_time_delta;this.showExpireNux=n.should_show_expire_nux;this.hiddenInputs=n.hidden_inputs;this.composerID=n.composerID;this.canCreateAnnouncementPost=n.can_create_announcement_post;this.announcementPostConfig=n.announcement_post_config;c("Arbiter").subscribe("composer/disablePostButton",function(event,r){__p&&__p();if(r.disabled){c("CSS").addClass(this.postActionsButton,"_2dha");if(r.errorMessage)this.buttonGroup.setAttribute("data-tooltip-content",r.errorMessage);else this.buttonGroup.setAttribute("data-tooltip-content","")}else{this.buttonGroup.setAttribute("data-tooltip-content","");if(!c("CSS").matchesSelector(this.postButton,"._42fr"))c("CSS").removeClass(this.postActionsButton,"_2dha")}}.bind(this));c("Arbiter").subscribe("composer/publish",function(event,r){c("CSS").addClass(this.postActionsButton,"_2dha")}.bind(this));this.menuInstance.subscribe("itemclick",function(r,s){__p&&__p();switch(s.item.getValue()){case"ads_post":this.$ComposerXPostActionDropDownV21();break;case"draft":this.$ComposerXPostActionDropDownV22();break;case"schedule":this.$ComposerXPostActionDropDownV23();break;case"backdate":this.$ComposerXPostActionDropDownV24();break;case"post":this.$ComposerXPostActionDropDownV25();break}}.bind(this));c("Event").listen(this.postActionsButton,"click",function(){this.$ComposerXPostActionDropDownV26("pab_dropdown_click")}.bind(this));if(n.handle_post_click)c("Event").listen(this.postButton,"click",function(){__p&&__p();var r=c("ReactTargetingTaggerStore.react").getTaggerData(this.pageID,c("ReactComposerTaggerType").TARGETING);c("PostActionsHiddenInputsUpdater").updateTargetHiddenInputs(r,this.hiddenInputs);var s=c("ReactComposerPoliticalInfoUtils").getPoliticalDistrict(this.composerID,this.pageID);c("PostActionsHiddenInputsUpdater").updatePoliticalDistrictHiddenInputs(s,this.hiddenInputs);c("ReactTargetingTaggerStore.react").clearComposerData(this.pageID);if(this.canCreateAnnouncementPost)c("Arbiter").inform("composer/publish",{});else{if(this.composerID)c("BanzaiODS").bumpEntityKey("videos","upload_post_button.with_composer_id");else c("BanzaiODS").bumpEntityKey("videos","upload_post_button.without_composer_id");c("Arbiter").inform("composer/publish",{composer_id:this.composerID})}}.bind(this));this.scheduleAnother=c("Arbiter").subscribe("composer/schedule_another",function(r){this.$ComposerXPostActionDropDownV23();this.scheduleAnother.unsubscribe();this.scheduleAnother=null}.bind(this));if(n.should_show_nux){c("Arbiter").inform("composer/reset_pab_nux");this.$ComposerXPostActionDropDownV27();this.renderNuxSubscription=c("Arbiter").subscribe("composer/render_pab_nux",function(r){if(!n.nux_uri)return;new(c("AsyncRequest"))().setURI(n.nux_uri).send();this.renderNuxSubscription.unsubscribe();this.renderNuxSubscription=null}.bind(this))}c("Arbiter").subscribe("AsyncRequest/error",function(r,s){if(s.request&&s.request.relativeTo===this.postButton.form)this.$ComposerXPostActionDropDownV28(true)}.bind(this));c("Arbiter").subscribe(["composer/reset"],function(r){if(this.hiddenInputsInstance)this.hiddenInputsInstance.afterSubmitPost(this.pageID);this.$ComposerXPostActionDropDownV28(true)}.bind(this))}j.prototype.initHiddenInputs=function(k){"use strict";this.hiddenInputsInstance=k;if(this.defaultAction==="save")this.hiddenInputsInstance.setDraftInputs()};j.prototype.$ComposerXPostActionDropDownV27=function(){"use strict";var k=c("DOM").scry(document,"#pab_nux_moved_indicator")[0],l=c("DOM").scry(document,"#pab_nux_click_to_finish")[0];if(k)k.removeAttribute("id");if(l)l.removeAttribute("id");this.postActionsButton.setAttribute("id","pab_nux_moved_indicator");this.postButton.setAttribute("id","pab_nux_click_to_finish")};j.prototype.$ComposerXPostActionDropDownV28=function(k){"use strict";if(this.hiddenInputsInstance)this.hiddenInputsInstance.resetInputs();this.$ComposerXPostActionDropDownV29()};j.prototype.$ComposerXPostActionDropDownV25=function(){"use strict";this.$ComposerXPostActionDropDownV28();this.$ComposerXPostActionDropDownV26("pab_post_selected");this.postButton.click();this.menuInstance.done()};j.prototype.$ComposerXPostActionDropDownV210=function(k){"use strict";var l=null,m=null;if(k){l=c("formatDate")(k,"m/d/Y",{skipPatternLocalization:true});m=60*(k.getHours()*60+k.getMinutes())}c("PostActionsHiddenInputsUpdater").clearHiddenInputsParams(this.hiddenInputs);c("PostActionsHiddenInputsUpdater").updateScheduleHiddenInputs(l,m,this.hiddenInputs)};j.prototype.$ComposerXPostActionDropDownV211=function(k,l,m,n,o){"use strict";__p&&__p();this.$ComposerXPostActionDropDownV210(k);var p=null,q=null;if(l){p=c("formatDate")(l,"m/d/Y",{skipPatternLocalization:true});q=60*(l.getHours()*60+l.getMinutes())}c("PostActionsHiddenInputsUpdater").updatePostEndDateHiddenInputs(p,q,this.hiddenInputs);var r=null;if(m)r=m.getTime()/1e3;c("PostActionsHiddenInputsUpdater").updateExpireHiddenInputs(r,n,this.hiddenInputs);if(o)c("PostActionsHiddenInputsUpdater").updateAnnouncementHiddenInputs(o,this.hiddenInputs);this.postButton.click()};j.prototype.$ComposerXPostActionDropDownV212=function(){"use strict";this.showExpireNux=false;var k=c("XPostExpirationNuxController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(k).setMethod("POST").setData({nux:c("PostExpirationNuxType").SCHEDULE_DIALOG_NUX,impression:true}).send()};j.prototype.$ComposerXPostActionDropDownV213=function(){"use strict";this.showExpireNux=false;var k=c("XPostExpirationNuxController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(k).setMethod("POST").setData({nux:c("PostExpirationNuxType").SCHEDULE_DIALOG_NUX,impression:true}).send()};j.prototype.$ComposerXPostActionDropDownV23=function(){"use strict";this.$ComposerXPostActionDropDownV26("pab_schedule_selected");var k=c("React").createElement(c("PostScheduleAndPostEndDialog.react"),{timezoneStr:this.timezone_str,onSubmit:this.$ComposerXPostActionDropDownV211.bind(this),defaultScheduledTimeDelta:this.defaultScheduleTimeDelta,showExpire:this.showExpire,showExpireNux:this.showExpireNux,onNuxAcked:this.$ComposerXPostActionDropDownV213.bind(this),canCreateAnnouncementPost:this.canCreateAnnouncementPost,announcementPostConfig:this.announcementPostConfig,composerID:this.composerID});if(this.showExpireNux)this.$ComposerXPostActionDropDownV212();k=c("ReactDOM").render(k,this.scheduleDialogPlaceholder);k.show();this.menuInstance.done()};j.prototype.$ComposerXPostActionDropDownV21=function(){"use strict";this.$ComposerXPostActionDropDownV28();this.$ComposerXPostActionDropDownV26("pab_ads_post_selected");this.$ComposerXPostActionDropDownV214();this.hiddenInputsInstance.setAdspostInputs();this.menuInstance.done();this.postButton.click()};j.prototype.$ComposerXPostActionDropDownV22=function(){"use strict";this.$ComposerXPostActionDropDownV28();this.$ComposerXPostActionDropDownV26("pab_draft_selected");this.$ComposerXPostActionDropDownV214();this.hiddenInputsInstance.setDraftInputs();this.menuInstance.done();this.postButton.click()};j.prototype.$ComposerXPostActionDropDownV24=function(){"use strict";this.$ComposerXPostActionDropDownV26("pab_backdate_selected");var k=c("React").createElement(c("PostBackdateDialog.react"),{maxTime:Date.now()/1e3,minTime:this.minBackdateTime,onSubmit:this.$ComposerXPostActionDropDownV215.bind(this)});k=c("ReactDOM").render(k,this.backdateDialogPlaceholder);k.show();this.menuInstance.done()};j.prototype.$ComposerXPostActionDropDownV215=function(k,l,m,n){"use strict";c("PostActionsHiddenInputsUpdater").updateBackdateHiddenInputs(k,l,m,n,this.hiddenInputs);this.postButton.click(k,l,m,n)};j.prototype.$ComposerXPostActionDropDownV26=function(k){"use strict";var l={page_id:this.pageID,event_name:k};c("PagesEventObserver").logData_DEPRECATED(l,c("PagesEventObserver").VITAL_WAIT)};j.prototype.$ComposerXPostActionDropDownV216=function(){"use strict";var k=this.$ComposerXPostActionDropDownV217();if(k)return k;var l=c("DOM").scry(document,"div.fbBoostedPost")[0];if(!l)return null;return this.$ComposerXPostActionDropDownV218(l)};j.prototype.$ComposerXPostActionDropDownV218=function(k){"use strict";return c("DOM").scry(k,"button._4dyi")[0]};j.prototype.$ComposerXPostActionDropDownV217=function(){"use strict";var k=this.postActionsButton,l="_1dsp";do{if(c("CSS").hasClass(k,l))return this.$ComposerXPostActionDropDownV218(k);k=k.parentNode}while(k)};j.prototype.$ComposerXPostActionDropDownV29=function(){"use strict";var k=this.$ComposerXPostActionDropDownV216();if(!k)return;c("Button").setEnabled(k,true);c("CSS").removeClass(k,"_ho3")};j.prototype.$ComposerXPostActionDropDownV214=function(){"use strict";var k=this.$ComposerXPostActionDropDownV216();if(!k)return;c("Button").setEnabled(k,false);c("CSS").addClass(k,"_ho3");c("Arbiter").inform(c("PromotedPostConstants").CLEAR_COMPOSER_BOOST)};f.exports=j}),null);
__d("PostActionsHiddenInputs",["ActorURI","AsyncRequest","XUnpublishedPostSuccessController"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k,l,m,n,o,p,q,r,s,t){"use strict";__p&&__p();this.dateInput=i;this.timeInput=j;this.schedulingInput=k;this.draftInput=l;this.backdateYearInput=m;this.backdateMonthInput=n;this.backdateDayInput=o;this.hideFromNewsFeedInput=p;this.expireTimeInput=q;this.expiringInput=r;this.expireTypeInput=s;this.adsPostInput=t}h.prototype.updateInputs=function(i){"use strict";__p&&__p();switch(i.element){case"dateinput":this.dateInput.value=i.value;this.schedulingInput.value=true;break;case"timeinput":this.timeInput.value=i.value;this.schedulingInput.value=true;break;case"backdater":this.setBackdateInputs(i);break;case"hidefromnewsfeed":this.setHideFromNewsfeed(i);break;default:break}};h.prototype.setScheduleInputs=function(i){"use strict";if(this.schedulingInput){this.schedulingInput.value=true;this.dateInput.value=i.date;this.timeInput.value=i.time}};h.prototype.setDraftInputs=function(){"use strict";if(this.draftInput)this.draftInput.value=true};h.prototype.setBackdateInputs=function(i){"use strict";if(this.backdateYearInput){this.backdateYearInput.value=i.value.year||null;this.backdateMonthInput.value=i.value.month||null;this.backdateDayInput.value=i.value.day||null}};h.prototype.setHideFromNewsfeed=function(i){"use strict";this.hideFromNewsFeedInput.value=i.value};h.prototype.setAdspostInputs=function(){"use strict";if(this.adsPostInput)this.adsPostInput.value=true};h.prototype.resetInputs=function(){"use strict";__p&&__p();if(this.schedulingInput){this.dateInput.value="";this.timeInput.value="";this.schedulingInput.value=""}if(this.expiringInput){this.expiringInput.value="";this.expireTimeInput.value="";this.expireTypeInput.value=""}if(this.backdateYearInput){this.backdateYearInput.value=null;this.backdateMonthInput.value=null;this.backdateDayInput.value=null;this.hideFromNewsFeedInput.value=""}if(this.draftInput)this.draftInput.value="";if(this.adsPostInput)this.adsPostInput.value=""};h.prototype.afterSubmitPost=function(i){"use strict";__p&&__p();var j;if(this.schedulingInput&&this.schedulingInput.value)j="scheduled";else if(this.expiringInput&&this.expiringInput.value)j="expiring";else if(this.draftInput&&this.draftInput.value)j="draft";if(!j)return;var k=c("XUnpublishedPostSuccessController").getURIBuilder().setString("type",j).getURI();k=c("ActorURI").create(k,i);new(c("AsyncRequest"))().setURI(k).send()};f.exports=h}),null);
__d("FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"query",type:"String!",defaultValue:null},{kind:"LocalArgument",name:"limit",type:"Int!",defaultValue:null},{kind:"LocalArgument",name:"scale",type:"Float!",defaultValue:null}],j=[{kind:"Variable",name:"query",variableName:"query",type:"String"}],k=[{kind:"Variable",name:"first",variableName:"limit",type:"Int"},{kind:"Literal",name:"is_fundraiser_for_story_eligible",value:true,type:"Boolean"},{kind:"Literal",name:"is_fundraiser_person_to_charity_eligible",value:false,type:"Boolean"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},n={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:[{kind:"Literal",name:"height",value:32,type:"Int"},{kind:"Variable",name:"scale",variableName:"scale",type:"Float"},{kind:"Literal",name:"width",value:32,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},o={kind:"LinkedField",alias:null,name:"charity_picker_subtitle",storageKey:null,args:null,concreteType:"TextWithEntities",plural:false,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},p={kind:"ScalarField",alias:null,name:"is_verified",args:null,storageKey:null};return{kind:"Request",operationKind:"query",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",id:"1443517632408644",text:null,metadata:{},fragment:{kind:"Fragment",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"fundraiser_charity_search",storageKey:null,args:j,concreteType:"FundraiserCharitySearchQuery",plural:false,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:null,args:k,concreteType:"FundraiserCharitySearchResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"FundraiserCharitySearchResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[l,m,n,o,{kind:"InlineFragment",type:"FundraiserCharity",selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:false,selections:[p]}]}]}]}]}]}]},operation:{kind:"Operation",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"fundraiser_charity_search",storageKey:null,args:j,concreteType:"FundraiserCharitySearchQuery",plural:false,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:null,args:k,concreteType:"FundraiserCharitySearchResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"FundraiserCharitySearchResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l,m,n,o,{kind:"InlineFragment",type:"FundraiserCharity",selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:false,selections:[p,l]}]}]}]}]}]}]}}}();f.exports=h}),null);
__d("AdBreakAdminPreviewTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:AdBreakAdminPreviewLoggerConfig",this.$AdBreakAdminPreviewTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:AdBreakAdminPreviewLoggerConfig",this.$AdBreakAdminPreviewTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$AdBreakAdminPreviewTypedLogger1={};return this};h.prototype.updateData=function(j){this.$AdBreakAdminPreviewTypedLogger1=babelHelpers["extends"]({},this.$AdBreakAdminPreviewTypedLogger1,j);return this};h.prototype.setAdBreakTimeOffsets=function(j){this.$AdBreakAdminPreviewTypedLogger1.ad_break_time_offsets=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setEvent=function(j){this.$AdBreakAdminPreviewTypedLogger1.event=j;return this};h.prototype.setException=function(j){this.$AdBreakAdminPreviewTypedLogger1.exception=j;return this};h.prototype.setTimeConsumedInMs=function(j){this.$AdBreakAdminPreviewTypedLogger1.time_consumed_in_ms=j;return this};h.prototype.setVC=function(j){this.$AdBreakAdminPreviewTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$AdBreakAdminPreviewTypedLogger1.video_id=j;return this};var i={ad_break_time_offsets:true,event:true,exception:true,time_consumed_in_ms:true,vc:true,video_id:true};f.exports=h}),null);
__d("ReactPrivacyTaggerButton.react",["Arbiter","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerPagesPrivacySelector.react","ReactComposerTaggerType","ReactComponentWithPureRenderMixin","React","ReactTargetingTaggerStore.react","StoreBasedStateMixinHelper"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactPrivacyTaggerButton",mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerContextProviderMixin")],propTypes:{contextConfig:c("ReactComposerContextConfig").isRequired,lockToPrivacy:h.string,isVideoDialog:h.bool,defaultDemographicsConfig:h.object},getInitialState:function j(){return{}},componentWillMount:function j(){this._mixin=new(c("StoreBasedStateMixinHelper"))([c("ReactTargetingTaggerStore.react")]);this._mixin.subscribeCallback(function(){this.setState(this.constructor.calculateState(this.props))}.bind(this));c("Arbiter").subscribe(["composer/publish","composer/close"],function(){this.setState({gatingSentences:undefined})}.bind(this))},componentWillUnmount:function j(){this._mixin.release()},statics:{calculateState:function j(k){var l=c("ReactTargetingTaggerStore.react").getTaggerData(k.contextConfig.targetID,c("ReactComposerTaggerType").TARGETING)||{};return{gatingSentences:l&&l.gatingSentences}}},render:function j(){var k=this.props.defaultDemographicsConfig,l=k?k.defaultDemographicsList:[];return c("React").createElement(c("ReactComposerPagesPrivacySelector.react"),{gatingSentences:this.state.gatingSentences,useReactPrivacyDialogForLegacy:true,isVideoDialog:this.props.isVideoDialog,useTargetingAsFilter:this.props.useTargetingAsFilter,defaultDemographicsList:l})}});f.exports=i}),null);
__d("FundraiserForStoryCharityPickerRelaySearchSource",["AbstractRelaySearchSource","RelayFBEnvironment","SearchableEntry","RelayModern","idx","FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("RelayModern").graphql,k=10,l=function l(){return c("FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql")};function m(q){return{query:l,variables:{query:q,limit:k}}}function n(q){var r,s=(r=q)!=null?(r=r.fundraiser_charity_search)!=null?(r=r.search_results)!=null?r.edges:r:r:r;if(!s)return[];return s.map(function(t,u){var v,w,x,y=t.node;return new(c("SearchableEntry"))({uniqueID:y.id,title:y.name,subtitle:(v=y)!=null?(v=v.charity_picker_subtitle)!=null?v.text:v:v,photo:(w=y)!=null?(w=w.profile_picture)!=null?w.uri:w:w,order:u,auxiliaryData:{verified:(x=y)!=null?(x=x.page)!=null?x.is_verified:x:x}})})}var o=function o(q,r){return r(q)};h=babelHelpers.inherits(p,c("AbstractRelaySearchSource"));i=h&&h.prototype;function p(){var q={bootstrapRequests:[{gen:function r(s){return m(s)}}],queryRequests:[{gen:function r(s){return m(s)}}],packageFn:n,getAllForEmptyQuery:true};i.constructor.call(this,c("RelayFBEnvironment"),q,o)}f.exports=p}),null);
__d("RelayVideoCaptionRoute",["RelayClassic"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("RelayClassic").Route);i=h&&h.prototype;function j(){h.apply(this,arguments)}j.path="/video/captioneditor/{caption_id}";j.routeName="RelayVideoCaptionRoute";j.paramDefinitions={caption_id:{type:"String",required:true}};j.queries={caption:function k(l){return function(m){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"caption_id"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"},c("RelayClassic").QL.__frag(m)]),fieldName:"node",kind:"Query",metadata:{isAbstract:true,identifyingArgName:"id",identifyingArgType:"ID!"},name:"RelayVideoCaptionRoute",type:"Node"}}(l.getFragment("caption"))}};f.exports=j}),null);
__d("VideoCaptionConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={DIALOG_HEIGHT:480,EDITOR_DIALOG_WIDTH:1e3,MENU_DIALOG_HEIGHT:430,UPLOADER_DIALOG_WIDTH:600}}),null);
__d("VideoCaptionRenderUtil",["fbt","LayerFadeOnHide","LayerFadeOnShow","React","SimpleXUIDialog","VideoCaptionConstants","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();i.prototype.renderDialog=function(j,k,l,m){return c("React").createElement(c("XUIDialog.react"),{behaviors:{LayerFadeOnHide:c("LayerFadeOnHide"),LayerFadeOnShow:c("LayerFadeOnShow")},shown:true,width:j,onToggle:m},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},k),c("React").createElement(c("XUIDialogBody.react"),{style:{height:c("VideoCaptionConstants").DIALOG_HEIGHT}},l))};i.prototype.renderAbortGenAutoCaption=function(j){var k=h._("Captions Have Not Finished Generating or Loading"),l=h._("Any captions that have already been generated will not be saved. To add captions to your video, you'll need to generate them again or upload an SRT files.");c("SimpleXUIDialog").showConfirm(l,k,function(m){if(m)j()})};function i(){}f.exports=new i()}),null);
__d("XLiveBroadcastCaptionEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/live/caption/editor/",{video_id:{type:"FBID"}})}),null);
__d("LiveVideoCaptionsSection.react",["fbt","AsyncRequest","AdsVideoCaptionLoadingView.react","JSResource","React","RelayDeferredContainer","RelayVideoCaptionRoute","VideoCaptionConstants","VideoCaptionRenderUtil","VideoCaptionPlacements","XUIButton.react","XLiveBroadcastCaptionEditorController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$LiveVideoCaptionsSection2=function(event){this.setState({showCaptionEditor:true})}.bind(this);this.$LiveVideoCaptionsSection4=function(m){this.setState({liveCaptions:m.getPayload()})}.bind(this);this.$LiveVideoCaptionsSection5=function(m){this.setState({showCaptionEditor:false})}.bind(this);this.state={liveCaptions:{},showCaptionEditor:false}}k.prototype.componentDidMount=function(){this.props.videoID&&this.$LiveVideoCaptionsSection1()};k.prototype.render=function(){var l=c("React").createElement(c("XUIButton.react"),{label:h._("Edit Live Captions"),use:"default",onClick:this.$LiveVideoCaptionsSection2});return c("React").createElement("div",null,l,this.$LiveVideoCaptionsSection3())};k.prototype.$LiveVideoCaptionsSection1=function(){var l=c("XLiveBroadcastCaptionEditorController").getURIBuilder().setFBID("video_id",this.props.videoID).getURI();new(c("AsyncRequest"))().setURI(l).setMethod("POST").setHandler(this.$LiveVideoCaptionsSection4).send()};k.prototype.$LiveVideoCaptionsSection3=function(){var l=this.state.liveCaptions;if(!this.state.showCaptionEditor||!l.id)return null;var m=new(c("RelayVideoCaptionRoute"))({caption_id:l.id,hide_apply_button:false,hide_save_button:true,placement:c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT,onExit:this.$LiveVideoCaptionsSection5}),n=h._("Edit Live Captions"),o=c("React").createElement(c("RelayDeferredContainer"),{loader:c("JSResource")("VideoCaptionEditorContainer.react").__setRef("LiveVideoCaptionsSection.react"),render:function p(q,r){return c("React").createElement(q,r)},renderLoading:function(){return c("React").createElement(c("AdsVideoCaptionLoadingView.react"),{onCancel:function(){this.setState({showCaptionEditor:false})}.bind(this)})}.bind(this),route:m});return c("VideoCaptionRenderUtil").renderDialog(c("VideoCaptionConstants").EDITOR_DIALOG_WIDTH,n,o,this.$LiveVideoCaptionsSection5)};f.exports=k}),null);
__d("VideoUploadAutoCaptionsSection.react",["ix","fbt","AdsVideoCaptionLoadingView.react","Image.react","InsightsLocaleNamesSwitch","JSResource","React","RelayDeferredContainer","RelayVideoCaptionRoute","Tooltip","VideoCaptionConstants","VideoCaptionEditEvents","VideoCaptionEditorLogger","VideoCaptionFile","VideoCaptionRenderUtil","VideoCaptionPlacements","VideoCaptionUtil","XUIButton.react","fbglyph","VideoCaptionEditorStateEnums"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("VideoCaptionEditorStateEnums").EditorStateEnum,m=c("InsightsLocaleNamesSwitch").module;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){__p&&__p();k.constructor.call(this,o);this.$VideoUploadAutoCaptionsSection3=function(event){var p=this.state.autoCaptions[0];this.setState({showCaptionEditor:true});this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").CLICK_EDIT_AUTO_CAPTION,p&&p.id,this.props.videoID,null,this.props.hasAutoCaption.toString(),c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}.bind(this);this.$VideoUploadAutoCaptionsSection6=function(){c("VideoCaptionRenderUtil").renderAbortGenAutoCaption(this.$VideoUploadAutoCaptionsSection7)}.bind(this);this.$VideoUploadAutoCaptionsSection7=function(){var p=this.state.autoCaptions[0];this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").ABORT_WAIT_GEN,p&&p.id,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT);this.$VideoUploadAutoCaptionsSection8()}.bind(this);this.$VideoUploadAutoCaptionsSection5=function(p,q){__p&&__p();var r,s=this;this.$VideoUploadAutoCaptionsSection8();if(p===l.SAVING)(function(){var u=s.state.autoCaptions[0].locale||"en_US",v=s.props.addedCaptions.filter(function(x){return x.getLocale()!==u});if(q){var w=new(c("VideoCaptionFile"))(q,u,m[u]);w.setIsAutoGenerated(true);w.setIsDefault(true);s.props.onSaveCaptions(v.concat([w]))}else s.props.onSaveCaptions(v)})();else{var t=this.state.autoCaptions[0];this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").CANCEL_EDIT,t&&t.id,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}}.bind(this);this.$VideoUploadAutoCaptionsSection1=new(c("VideoCaptionEditorLogger"))();this.state={autoCaptions:[],showCaptionEditor:false}}n.prototype.componentDidMount=function(){this.props.videoID&&this.$VideoUploadAutoCaptionsSection2()};n.prototype.componentDidUpdate=function(o){this.props.videoID&&!o.videoID&&this.$VideoUploadAutoCaptionsSection2()};n.prototype.$VideoUploadAutoCaptionsSection2=function(){c("VideoCaptionUtil").fetchAutoCaption(this.props.videoID,this.props.accessToken).then(function(o){o.data&&this.setState({autoCaptions:o.data});var p=o.data;if(p&&p[0]&&p[0].id)this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").FETCHED_SUCCESS,p.id,this.props.videoID,null,true.toString(),c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}.bind(this)).done();this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").RENDER_CAPTION_ENTRY,null,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)};n.prototype.render=function(){var o=void 0;if(this.props.hasAutoCaption)o=c("React").createElement(c("XUIButton.react"),{label:i._("Edit Captions"),use:"default",onClick:this.$VideoUploadAutoCaptionsSection3});else{var p=this.props.disabled?i._("We only support edit auto caption now and will support to edit all captions in the near future."):i._("Automatically generate captions");o=this.state.autoCaptions[0]?c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({disabled:this.props.disabled,image:c("React").createElement(c("Image.react"),{src:h("142451")}),label:i._("Generate"),href:"#",use:"default",onClick:this.$VideoUploadAutoCaptionsSection3},c("Tooltip").propsFor(p))):null}return c("React").createElement("div",null,o,this.$VideoUploadAutoCaptionsSection4())};n.prototype.$VideoUploadAutoCaptionsSection4=function(){var o=this.state.autoCaptions[0];if(!this.state.showCaptionEditor||!o.id)return null;var p=new(c("RelayVideoCaptionRoute"))({caption_id:o.id,hide_apply_button:true,hide_save_button:false,placement:c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT,onExit:this.$VideoUploadAutoCaptionsSection5}),q=i._("Review Captions"),r=c("React").createElement(c("RelayDeferredContainer"),{loader:c("JSResource")("VideoCaptionEditorContainer.react").__setRef("VideoUploadAutoCaptionsSection.react"),render:function s(t,u){return c("React").createElement(t,u)},renderLoading:function(){return c("React").createElement(c("AdsVideoCaptionLoadingView.react"),{onCancel:this.$VideoUploadAutoCaptionsSection6})}.bind(this),route:p});return c("VideoCaptionRenderUtil").renderDialog(c("VideoCaptionConstants").EDITOR_DIALOG_WIDTH,q,r,this.$VideoUploadAutoCaptionsSection5)};n.prototype.$VideoUploadAutoCaptionsSection8=function(){this.setState({showCaptionEditor:false})};f.exports=n}),null);
__d("VideoCopyrightReferenceFileExcludeSegmentRow.react",["cx","fbt","ClockFormatConverter","LeftRight.react","Keys","React","XUICloseButton.react","XUITextInput.react","Grid.react","VideoCopyrightMonitoringSelector.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("Grid.react").GridItem;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={startTime:this.props.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(this.props.startTimeInSec):"",endTime:this.props.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((this.props.startTimeInSec||0)+this.props.durationInSec):"",editingStartTime:false,editingEndTime:false},o}m.prototype.componentWillReceiveProps=function(n){"use strict";if(this.getErrorMessageOnStartTimeField()!=null||this.getErrorMessageOnEndTimeField()!=null)return;if(this.props.startTimeInSec===n.startTimeInSec&&this.props.durationInSec===n.durationInSec&&this.props.mediaType===this.props.mediaType)return;this.setState({startTime:n.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(n.startTimeInSec):"",endTime:n.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((n.startTimeInSec||0)+n.durationInSec):""})};m.prototype.getErrorMessageOnStartTimeField=function(){"use strict";if(c("ClockFormatConverter").validate(this.state.startTime)){var n=c("ClockFormatConverter").timestampToSeconds(this.state.startTime);if(n>this.props.totalVideoDurationInSec)return i._("Your video ends before this time code")}return null};m.prototype.getErrorMessageOnEndTimeField=function(){"use strict";__p&&__p();if(this.state.endTime=="")return null;if(c("ClockFormatConverter").validate(this.state.endTime)){var n=c("ClockFormatConverter").timestampToSeconds(this.state.endTime);if(n>this.props.totalVideoDurationInSec)return i._("Your video ends before this time code");if(this.state.startTime!=""&&c("ClockFormatConverter").validate(this.state.startTime)){var o=c("ClockFormatConverter").timestampToSeconds(this.state.startTime);if(n<o)return i._("This is before the start time of the segment you're trying to exclude");if(n==o)return i._("The start time and end time of your segment can't be the same")}}return null};m.prototype.getIncrementedOrDecrementedTime=function(n,o){"use strict";var p=c("ClockFormatConverter").timestampToSeconds(o);if(n===c("Keys").UP&&p<this.props.totalVideoDurationInSec)return c("ClockFormatConverter").secondsToTimestamp(p+1);else if(n===c("Keys").DOWN&&p>0)return c("ClockFormatConverter").secondsToTimestamp(p-1);return null};m.prototype.render=function(){"use strict";__p&&__p();return c("React").createElement(c("LeftRight.react"),{key:this.props.index,className:"_2xss"},c("React").createElement(c("VideoCopyrightMonitoringSelector.react"),{onChange:function(n){return this.props.onExcludedSegmentMonitoringTypeChange(this.props.index,n.value)}.bind(this),value:this.props.mediaType,disabled:false}),c("React").createElement(c("Grid.react"),{className:"_2xsu",cols:3},c("React").createElement(l,null,c("React").createElement(c("XUITextInput.react"),{className:"_2xst"+(this.state.editingStartTime?" _fgf":""),value:this.state.startTime,xuiError:this.getErrorMessageOnStartTimeField(),onBlur:function(){if(!c("ClockFormatConverter").validate(this.state.startTime))this.setState({startTime:this.props.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(this.props.startTimeInSec):""});this.setState({editingStartTime:false})}.bind(this),onChange:function(n){__p&&__p();var o=n.target.value;if(o===this.state.startTime)return;this.setState({startTime:o},function(){if(c("ClockFormatConverter").validate(this.state.startTime)){var p=c("ClockFormatConverter").normalizeMinutesTimestamp(this.state.startTime);this.props.onExcludedSegmentStartTimeChange(this.props.index,p);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.startTime)}}.bind(this))}.bind(this),onFocus:function(n){var o=n.target.value;if(c("ClockFormatConverter").validate(o)&&!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(o);this.setState({editingStartTime:true})}.bind(this),onKeyDown:function(n){var o=this.getIncrementedOrDecrementedTime(n.keyCode,this.state.startTime);if(o===null)return;this.setState({startTime:o},function(){this.props.onExcludedSegmentStartTimeChange(this.props.index,o);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.startTime)}.bind(this))}.bind(this),placeholder:i._("hh{Time separator}mm{Time separator}ss",[i.param("Time separator",c("ClockFormatConverter").TIME_SEPARATOR)])})),c("React").createElement(l,null,c("React").createElement(c("XUITextInput.react"),{className:"_2xst"+(this.state.editingEndTime?" _fgf":""),value:this.state.endTime,xuiError:this.getErrorMessageOnEndTimeField(),onBlur:function(){if(!c("ClockFormatConverter").validate(this.state.endTime))this.setState({endTime:this.props.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((this.props.startTimeInSec||0)+this.props.durationInSec):""});this.setState({editingEndTime:false})}.bind(this),onChange:function(n){__p&&__p();var o=n.target.value;if(o===this.state.endTime)return;this.setState({endTime:o},function(){if(c("ClockFormatConverter").validate(this.state.endTime)){var p=c("ClockFormatConverter").normalizeMinutesTimestamp(this.state.endTime);this.props.onExcludedSegmentEndTimeChange(this.props.index,p);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.endTime)}}.bind(this))}.bind(this),onFocus:function(n){var o=n.target.value;if(c("ClockFormatConverter").validate(o)&&!this.getErrorMessageOnEndTimeField())this.props.onUpdateSeekPlayerPositionInMS(o);this.setState({editingEndTime:true})}.bind(this),onKeyDown:function(n){var o=this.getIncrementedOrDecrementedTime(n.keyCode,this.state.endTime);if(o===null)return;this.setState({endTime:o},function(){this.props.onExcludedSegmentEndTimeChange(this.props.index,o);if(!this.getErrorMessageOnEndTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.endTime)}.bind(this))}.bind(this),placeholder:i._("hh{Time separator}mm{Time separator}ss",[i.param("Time separator",c("ClockFormatConverter").TIME_SEPARATOR)])})),c("React").createElement(l,null,c("React").createElement(c("XUICloseButton.react"),{className:"_2xsi",onClick:function(n){n.preventDefault();n.stopPropagation();this.props.onDeleteSegment(this.props.index)}.bind(this),size:"small"}))))};f.exports=m}),null);
__d("VideoReferenceMatchSegmentBar.react",["ix","cssVar","cx","FBMultiSegmentBar.react","Grid.react","Image.react","React","VideoUtils","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){"use strict";l.constructor.call(this,n);this.state=this.$VideoReferenceMatchSegmentBar1(n)}m.prototype.componentWillReceiveProps=function(n){"use strict";this.setState(this.$VideoReferenceMatchSegmentBar1(n))};m.prototype.$VideoReferenceMatchSegmentBar1=function(n){"use strict";var o=[],p=0;n.segments.forEach(function(q,r){var s=q.durationInSec,t=q.matchedStartTimeInSec,u=t+s,v=c("VideoUtils").formatTime(t)+" - "+c("VideoUtils").formatTime(u);p+=s;var w={startPercentage:t/this.props.totalTime*100,endPercentage:(t+s)/this.props.totalTime*100,tooltip:v};o.push(w)}.bind(this));return{segments:o,segmentsTotalTime:Math.min(this.props.totalTime,p)}};m.prototype.$VideoReferenceMatchSegmentBar2=function(n){"use strict";if(this.props.totalTime<=0)return"--%";n=Math.min(n,this.props.totalTime);var o=Math.round(n*100/this.props.totalTime);return o+"%"};m.prototype.$VideoReferenceMatchSegmentBar3=function(n){"use strict";return c("VideoUtils").formatTime(n)};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_35lq"},c("React").createElement(c("Grid.react"),{cols:4},c("React").createElement(c("Image.react"),{className:"_35lr",src:this.props.isAudio?h("142978"):h("141747")}),c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_35ls"},this.$VideoReferenceMatchSegmentBar3(this.state.segmentsTotalTime)),c("React").createElement(c("FBMultiSegmentBar.react"),{className:"_35lt _2xsl",segments:this.state.segments,segmentsColor:"#ffffff",highlightedSegmentsColor:"#ffffff"}),c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_35ls _35lu"},this.$VideoReferenceMatchSegmentBar2(this.state.segmentsTotalTime))))};f.exports=m}),null);
__d("ComposerVideoShowsPreviewState",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({VIDEO_PLAYER:"VIDEO_PLAYER",SIXTEEN_NINE:"SIXTEEN_NINE",SQUARE_CROPPER:"SQUARE_CROPPER"});f.exports=h}),null);
__d("ShowsUploadDialogNuxTour.react",["fbt","AdsBlueTipTour.react","AsyncRequest","React","XBasicFBNuxViewController","XUIText.react","ge"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=4918,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.$ShowsUploadDialogNuxTour1=function(){var n=c("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",k).getURI();new(c("AsyncRequest"))().setURI(n).send()};m.prototype.$ShowsUploadDialogNuxTour2=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Write a Video Title")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Titles will be displayed prominently on Facebook. They're an important way for viewers to discover your video.")))};m.prototype.$ShowsUploadDialogNuxTour3=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Select a Video Type")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Episode are the signature, recurring content of your show. Videos can be extras such as interviews, behind-the-scenes tours or bonus footage.")))};m.prototype.$ShowsUploadDialogNuxTour4=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Add Video Tags")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Listing topics related to your video is an important way for viewers to find your content. Tags also help make ads more relevant for your audience if you place ad breaks in your video.")))};m.prototype.$ShowsUploadDialogNuxTour5=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Create Seasons and Playlists")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("You can organize your videos into seasons or playlists around a theme. Seasons can only include episodes. Playlists can include episodes and any of your other videos.")))};m.prototype.$ShowsUploadDialogNuxTour6=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Add a Thumbnail")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Your video's thumbnail will represent your video across Facebook. Thumbnails must also be able to fit into a square format. Tip: Avoid text on your thumbnail.")))};m.prototype.render=function(){var n=m.componentsLoaded();if(!n)return null;return c("React").createElement(c("AdsBlueTipTour.react"),{steps:this.renderSteps(),onComplete:this.$ShowsUploadDialogNuxTour1,onXOut:this.$ShowsUploadDialogNuxTour1})};m.prototype.renderSteps=function(){var n=[{content:this.$ShowsUploadDialogNuxTour3(),context:c("ge")("selectVideoTypeStep"),position:"right",offsetX:-120,offsetY:-14},{content:this.$ShowsUploadDialogNuxTour2(),context:c("ge")("writeVideoTitle"),position:"right",offsetX:-170,offsetY:-12},{content:this.$ShowsUploadDialogNuxTour4(),context:c("ge")("addVideoTags"),position:"right",offsetX:-210,offsetY:-15},{content:this.$ShowsUploadDialogNuxTour5(),context:c("ge")("addToSeasonAndPlaylist"),position:"right",offsetX:-120,offsetY:2},{content:this.$ShowsUploadDialogNuxTour6(),context:c("ge")("customizeThumbnail"),position:"above",offsetX:280,offsetY:325}];return n};m.componentsLoaded=function(){return c("ge")("selectVideoTypeStep")!==null&&c("ge")("writeVideoTitle")!==null&&c("ge")("addVideoTags")!==null&&c("ge")("addToSeasonAndPlaylist")!==null&&c("ge")("customizeThumbnail")!==null};function m(){i.apply(this,arguments)}f.exports=m}),null);
__d("ComposerLiveVideoCaptionsField.react",["cx","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","LiveVideoCaptionsSection.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerLiveVideoCaptionsField",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{disabled:i.bool,videoID:i.string},statics:{calculateState:function k(l,m){}},render:function k(){return c("React").createElement("div",null,c("React").createElement(c("LiveVideoCaptionsSection.react"),{disabled:false,videoID:this.props.videoID,onSaveCaptions:this._onSaveCaptions}))},_onSaveCaptions:function k(l){l=l||[];c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,l)}});f.exports=j}),null);
__d("ComposerVideoUploadAutoCaptionsField.react",["cx","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","VideoCaption","VideoUploadAutoCaptionsSection.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerVideoUploadAutoCaptionsField",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:i.string,addedCaptions:i.arrayOf(i.instanceOf(c("VideoCaption"))).isRequired,className:i.string,disabled:i.bool,videoID:i.string},statics:{calculateState:function k(l,m){var n=c("ComposerVideoUploadStore").getLastCaptionUploadErrorMessage(l),o=false,p=false,q=m.addedCaptions;if(q&&q.length>0){o=q.some(function(r){return r.is_auto_generated});if(!o)p=q.some(function(r){return r.getLocale()==="en_US"})}return{autoCaptionDisabled:p,lastCaptionUploadErrorMessage:n,hasAutoCaption:o}}},render:function k(){return c("React").createElement("div",{className:"_4_90"},c("React").createElement(c("VideoUploadAutoCaptionsSection.react"),{accessToken:this.props.accessToken,addedCaptions:this.props.addedCaptions,disabled:this.state.autoCaptionDisabled,hasAutoCaption:this.state.hasAutoCaption,uploadErrorMessage:this.state.lastCaptionUploadErrorMessage,videoID:this.props.videoID,onSaveCaptions:this._onSaveCaptions}))},_onSaveCaptions:function k(l){l=l||[];c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,l)}});f.exports=j}),null);
__d("VideoCaptionList.react",["cx","fbt","ComposerLiveVideoCaptionsField.react","ComposerVideoUploadAutoCaptionsField.react","ComposerVideoUploadTooltip.react","FileInput.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","InfoTableSimpleRow.react","React","ReactDOM","Token.react","VideoCaption","XUIButton.react","XUINotice.react","XUISelector.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=c("XUISelector.react").Option;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$VideoCaptionList2=function(t){var u=this.$VideoCaptionList8.bind(this,t.getLocale());return c("React").createElement(c("Token.react"),{key:t.getLocale(),label:t.getLocaleName()+": "+t.getLocale(),removable:this.props.captionsEditable,onRemove:u})}.bind(this),this.$VideoCaptionList3=function(){return this.props.uploadErrorMessage?c("React").createElement(c("InfoTableSection.react"),null,c("React").createElement(c("InfoTableSimpleRow.react"),null,c("React").createElement(c("XUINotice.react"),{className:"_3-95",use:"warn"},this.props.uploadErrorMessage))):null}.bind(this),this.$VideoCaptionList5=function(){this.props.onUploadClick&&this.props.onUploadClick()}.bind(this),this.$VideoCaptionList8=function(t){this.props.onRemoveCaption(t)}.bind(this),this.$VideoCaptionList4=function(event){var t=event.target;if(t.value){this.props.onUploadCaption(t);this.refs.captionFileInput.getFileInput().clear()}}.bind(this),this.$VideoCaptionList7=function(t){this.props.onSetDefaultCaption(t.value)}.bind(this),p}n.prototype.componentDidUpdate=function(){if(this.refs.captionsList){var o=c("ReactDOM").findDOMNode(this.refs.captionsList),p=o.scrollHeight-o.clientHeight;o.scrollTop=p}};n.prototype.render=function(){var o=null,p=null;if(this.props.captions.length>0||this.props.liveCaptions.length>0)p=this.$VideoCaptionList1();if(this.props.captions.length>0)o=c("React").createElement("div",{ref:"captionsList",className:"_3di-"+(this.props.uploadErrorMessage&&this.props.uploadErrorMessage.length>0?" _5w5d":"")},this.props.captions.map(this.$VideoCaptionList2),c("React").createElement("div",{className:"clearfix"}));var q=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("You can include captions in multiple languages with your video by uploading a SubRip (.srt) file with it. Each SubRip file must be saved using the format: filename.[two-letter language code]_[two-letter country code].srt"),alignv:"bottom"}),r=this.props.showAutoCaptionsSection?c("React").createElement(c("ComposerVideoUploadAutoCaptionsField.react"),{accessToken:this.props.accessToken,addedCaptions:this.props.captions,disabled:false,videoID:this.props.videoID}):null;return c("React").createElement(c("InfoTable.react"),{className:this.props.className},this.$VideoCaptionList3(),c("React").createElement(c("InfoTableSection.react"),null,c("React").createElement(c("InfoTableRow.react"),{label:i._("Video Captions"),helpLink:q},c("React").createElement("div",{className:"_3-98"},o,c("React").createElement(c("FileInput.react"),{accept:".srt",ref:"captionFileInput",multiple:this.props.allowBulkUpload,onChange:this.$VideoCaptionList4,onClick:this.$VideoCaptionList5,disabled:!this.props.captionsEditable},c("React").createElement(c("XUIButton.react"),{size:"medium",use:"default",label:i._("Upload SRT File"),disabled:!this.props.captionsEditable,href:{url:"#"}})),r)),this.$VideoCaptionList6(),p))};n.prototype.$VideoCaptionList6=function(){if(this.props.liveCaptions.length<=0||!this.props.showLiveCaptionSection)return null;var o=c("React").createElement("div",{ref:"captionsList",className:"_3di-"+(this.props.uploadErrorMessage&&this.props.uploadErrorMessage.length>0?" _5w5d":"")},this.props.liveCaptions.map(this.$VideoCaptionList2),c("React").createElement("div",{className:"clearfix"})),p=c("React").createElement(c("ComposerLiveVideoCaptionsField.react"),{disabled:false,videoID:this.props.videoID}),q=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("These captions appear while your video is live. You can edit live captions after your broadcast is finished."),alignv:"bottom"});return c("React").createElement(c("InfoTableRow.react"),{label:i._("Live Video Captions"),helpLink:q},c("React").createElement("div",{className:"_3-98"},o,p))};n.prototype.$VideoCaptionList1=function(){if(!this.props.showDefaultLocaleRow)return null;var o=this.props.captions.concat(this.props.liveCaptions),p="none",q=o.map(function(s){if(s.getIsDefault())p=s.getLocale();return c("React").createElement(m,{value:s.getLocale(),key:s.getLocale()},s.getLocaleName()+": "+s.getLocale())});q.unshift(c("React").createElement(m,{value:"none",key:"none"},i._("None")));var r=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("You can choose a default language for captions to appear on videos when the preferred language isn't available."),alignv:"bottom"});return c("React").createElement(c("InfoTableRow.react"),{label:i._("Default Language"),helpLink:r},c("React").createElement(c("XUISelector.react"),{className:"_3-98",disabled:!this.props.captionsEditable,value:p,onChange:this.$VideoCaptionList7},q))};n.propTypes={accessToken:l.string,allowBulkUpload:l.bool,captions:l.arrayOf(l.instanceOf(c("VideoCaption"))).isRequired,liveCaptions:l.arrayOf(l.instanceOf(c("VideoCaption"))).isRequired,captionsEditable:l.bool.isRequired,showAutoCaptionsSection:l.bool,showDefaultLocaleRow:l.bool,showLiveCaptionSection:l.bool,uploadErrorMessage:l.string,videoID:l.string,onRemoveCaption:l.func.isRequired,onSetDefaultCaption:l.func.isRequired,onUploadCaption:l.func.isRequired,onUploadClick:l.func};n.defaultProps={captions:[],liveCaptions:[],uploadErrorMessage:"",allowBulkUpload:false,showDefaultLocaleRow:true};f.exports=n}),null);
__d("ComposerCharityTypeahead.react",["cx","fbt","React","XUITypeahead.react","FundraiserForStoryCharityPickerRelaySearchSource","SearchableEntry"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){__p&&__p();k.constructor.call(this,m);this.$ComposerCharityTypeahead2=function(n){var o=n.target.value;this.setState({query:o});if(!o&&this.props.onClear)this.props.onClear()}.bind(this);this.$ComposerCharityTypeahead3=function(n){this.setState({query:n.getTitle()});this.props.onSelect(n)}.bind(this);this.$ComposerCharityTypeahead1=new(c("FundraiserForStoryCharityPickerRelaySearchSource"))();this.state={query:""}}l.prototype.componentDidMount=function(){this.props.focusOnMount&&this.refs.typeahead&&this.refs.typeahead.focusInput()};l.prototype.render=function(){return c("React").createElement(c("XUITypeahead.react"),{className:"_5esx",onChange:this.$ComposerCharityTypeahead2,onSelectAttempt:this.$ComposerCharityTypeahead3,placeholder:this.props.placeholder||i._("Search for a nonprofit to support"),queryString:this.state.query,ref:"typeahead",searchSource:this.$ComposerCharityTypeahead1,showEntriesOnFocus:true})};f.exports=l}),null);
__d("ComposerReferenceFileExcludeSegmentsView.react",["ix","cx","fbt","ComposerVideoUploadSection.react","emptyFunction","Image.react","InputLabel.react","LeftRight.react","Link.react","React","VideoCopyrightMonitoringType","VideoReferenceMatchSegmentBar.react","XUIButton.react","XUIGrayText.react","Grid.react","VideoCopyrightReferenceFileExcludeSegmentRow.react","fbglyph","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("Grid.react").GridItem,n=c("React").PropTypes;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={isEditing:false},this.$ComposerReferenceFileExcludeSegmentsView1=function(){this.setState({isEditing:!this.state.isEditing})}.bind(this),q}o.prototype.$ComposerReferenceFileExcludeSegmentsView2=function(){"use strict";return c("React").createElement("div",{className:"_2xsf"},c("React").createElement(c("Grid.react"),{cols:3,spacing:"_2ph-"},c("React").createElement(m,{className:"_2xsh"},j._("Content type")),c("React").createElement(m,null,c("React").createElement("div",{className:"_2xsh"},j._("Start"))),c("React").createElement(m,null,c("React").createElement("div",{className:"_2xsh"},j._("End")))))};o.prototype.$ComposerReferenceFileExcludeSegmentsView3=function(){"use strict";if(!this.state.isEditing)return null;return c("React").createElement("div",{className:"_2xse"},this.$ComposerReferenceFileExcludeSegmentsView2(),this.props.excludedSegments.map(function(p,q){return p.included?null:this.$ComposerReferenceFileExcludeSegmentsView4(p,q)}.bind(this)),c("React").createElement(c("XUIButton.react"),{className:"_2xsr",label:c("React").createElement("fbtc",null,"Add"),labelIsHidden:false,onClick:function(p){p.preventDefault();p.stopPropagation();this.props.onAddNewExcludedSegmentEntry()}.bind(this),image:c("React").createElement(c("Image.react"),{src:h("123418")})}))};o.prototype.$ComposerReferenceFileExcludeSegmentsView4=function(p,q){"use strict";return c("React").createElement(c("VideoCopyrightReferenceFileExcludeSegmentRow.react"),{key:q,index:q,startTimeInSec:p.matchedStartTimeInSec,durationInSec:p.durationInSec,mediaType:p.mediaType,onExcludedSegmentMonitoringTypeChange:this.props.onExcludedSegmentMonitoringTypeChange,onExcludedSegmentStartTimeChange:this.props.onExcludedSegmentStartTimeChange,onExcludedSegmentEndTimeChange:this.props.onExcludedSegmentEndTimeChange,onDeleteSegment:this.props.onDeleteSegment,onUpdateSeekPlayerPositionInMS:this.props.onUpdateSeekPlayerPositionInMS,totalVideoDurationInSec:this.props.totalDurationInSec})};o.prototype.$ComposerReferenceFileExcludeSegmentsView5=function(){"use strict";__p&&__p();var p=[],q=[];this.props.excludedSegments.forEach(function(r){if(r.included||!r.durationInSec)return;if(r.mediaType!==c("VideoCopyrightMonitoringType").AUDIO_ONLY.value&&!!r.durationInSec&&r.referenceStartTimeInSec!=null)p.push({matchedStartTimeInSec:r.referenceStartTimeInSec,durationInSec:r.durationInSec,referenceStartTimeInSec:r.referenceStartTimeInSec,segmentSource:r.segmentSource,mediaType:r.mediaType});if(r.mediaType!==c("VideoCopyrightMonitoringType").VIDEO_ONLY.value&&!!r.durationInSec&&r.referenceStartTimeInSec!=null)q.push({matchedStartTimeInSec:r.referenceStartTimeInSec,durationInSec:r.durationInSec,referenceStartTimeInSec:r.referenceStartTimeInSec,segmentSource:r.segmentSource,mediaType:r.mediaType})});return c("React").createElement("div",null,c("React").createElement(c("Grid.react"),{cols:3,spacing:"_5r4u"},c("React").createElement(m,null,c("React").createElement(c("XUIGrayText.react"),{className:"_3-95 _2xsj",display:"block",size:"small"},j._("Stop detecting matching content for music or clips you don't exclusively own.")," ",c("React").createElement(c("Link.react"),{href:"https://facebook.exceedlms.com/student/catalog/show/182065",target:"_blank"},j._("Learn more.")))),c("React").createElement(m,{className:"_2xsk"},c("React").createElement("div",null,c("React").createElement(c("VideoReferenceMatchSegmentBar.react"),{totalTime:this.props.totalDurationInSec,segments:p,isAudio:false}),c("React").createElement(c("VideoReferenceMatchSegmentBar.react"),{totalTime:this.props.totalDurationInSec,segments:q,isAudio:true}))),c("React").createElement(m,null,c("React").createElement(c("XUIButton.react"),{className:"_2xsm",label:c("React").createElement("fbtc",null,"Edit"),labelIsHidden:true,onClick:function(r){r.preventDefault();r.stopPropagation();this.$ComposerReferenceFileExcludeSegmentsView1()}.bind(this),depressed:this.state.isEditing,image:this.props.isUpload?c("React").createElement(c("Image.react"),{src:h("123418")}):c("React").createElement(c("Image.react"),{src:h("123350")})}))),this.$ComposerReferenceFileExcludeSegmentsView3())};o.prototype.render=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:c("joinClasses")(this.props.className,"_4oto"),title:j._("Exclude segments you don't own")},c("React").createElement("div",{className:"_2xsn"},this.$ComposerReferenceFileExcludeSegmentsView5()))};o.defaultProps={totalDurationInSec:0,excludedSegments:[],isUpload:false,onAddNewExcludedSegmentEntry:c("emptyFunction"),onExcludedSegmentMonitoringTypeChange:c("emptyFunction"),onExcludedSegmentStartTimeChange:c("emptyFunction"),onExcludedSegmentEndTimeChange:c("emptyFunction"),onDeleteSegment:c("emptyFunction"),onUpdateSeekPlayerPositionInMS:c("emptyFunction")};o.propTypes={className:n.string,excludedSegments:n.array,isUpload:n.bool,onAddNewExcludedSegmentEntry:n.func,onExcludedSegmentMonitoringTypeChange:n.func,onExcludedSegmentStartTimeChange:n.func,onExcludedSegmentEndTimeChange:n.func,onDeleteSegment:n.func,onUpdateSeekPlayerPositionInMS:n.func,totalDurationInSec:n.number.isRequired};f.exports=o}),null);
__d("ComposerReferenceFileExcludeSegmentsContainer.react",["ClockFormatConverter","ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileExcludeSegmentsView.react","VideoCopyrightMonitoringType","VideoCopyrightSegmentSource","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileExcludeSegmentsContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{className:h.string,isUpload:h.bool,totalDurationInSec:h.number,logExcludeSegmentsUpdateEvent:h.func},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightExcludedSegments(k),n=c("VideoCopyrightUtils").convertExcludedSegmentsToCopyrightSegments(m.slice(0)),o=Math.round(c("ComposerVideoUploadStore").getVideoDurationInSec(k)||0);return{excludedOwnershipSegments:n,videoDurationInSecFromStore:o}}},onDeleteSegment:function j(k){var l=this.state.excludedOwnershipSegments;l[k].included=true;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onExcludedSegmentMonitoringTypeChange:function j(k,l){var m=this.state.excludedOwnershipSegments;if(m[k].mediaType!=l){m[k].mediaType=l;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments())}this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onExcludedSegmentStartTimeChange:function j(k,l){__p&&__p();var m=this.state.excludedOwnershipSegments,n=c("ClockFormatConverter").timestampToSeconds(l),o=this.calculateNewDurationOnStartTimeChange(k,l);m[k].referenceStartTimeInSec=n;m[k].durationInSec=o;var p=this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore;if(p&&p>0)if(n>=p){m[k].referenceStartTimeInSec=null;m[k].durationInSec=null}else if(n+o>p)m[k].durationInSec=null;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},calculateNewDurationOnStartTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments,n=c("ClockFormatConverter").timestampToSeconds(l);if(m[k].referenceStartTimeInSec==null||m[k].durationInSec==null)return null;var o=m[k].referenceStartTimeInSec||0,p=o-n,q=m[k].durationInSec||0,r=q+p;return r>0?r:null},calculateNewDurationOnEndTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments;if(m[k].referenceStartTimeInSec==null)return null;var n=m[k].referenceStartTimeInSec,o=c("ClockFormatConverter").timestampToSeconds(l),p=this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore;if(!o||o<=n)return null;else if(o>p)o=p;return o-n},onExcludedSegmentEndTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments,n=this.calculateNewDurationOnEndTimeChange(k,l);m[k].durationInSec=n;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onAddNewExcludedSegmentEntry:function j(){var k=this.state.excludedOwnershipSegments,l={mediaType:c("VideoCopyrightMonitoringType").VIDEO_AND_AUDIO.value,included:false,segmentSource:c("VideoCopyrightSegmentSource").PUBLISHER_DEFINED};k.push(l);c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onUpdateSeekPlayerPositionInMS:function j(k){c("ComposerVideoUploadActions").updatePlayerSeekPosition(this.context.composerID,c("ClockFormatConverter").timestampToMillis(k))},_getExcludedOwnershipSegments:function j(){return c("VideoCopyrightUtils").convertCopyrightSegmentsToExcludedSegments(this.state.excludedOwnershipSegments.slice(0))},render:function j(){return c("React").createElement(c("ComposerReferenceFileExcludeSegmentsView.react"),{className:this.props.className,excludedSegments:this.state.excludedOwnershipSegments,isUpload:this.props.isUpload,onExcludedSegmentMonitoringTypeChange:this.onExcludedSegmentMonitoringTypeChange,onExcludedSegmentStartTimeChange:this.onExcludedSegmentStartTimeChange,onExcludedSegmentEndTimeChange:this.onExcludedSegmentEndTimeChange,onAddNewExcludedSegmentEntry:this.onAddNewExcludedSegmentEntry,onDeleteSegment:this.onDeleteSegment,onUpdateSeekPlayerPositionInMS:this.onUpdateSeekPlayerPositionInMS,totalDurationInSec:this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore})}});i.defaultProps={excludedSegments:[]};f.exports=i}),null);
__d("ComposerReferenceFileUploadAttributionsTab.react",["cx","fbt","ix","ComposerVideoUploadSection.react","Image.react","MediaCopyrightAttributionType","VideoCopyrightAttributionInfoIcon.react","React","VideoCopyrightAttributionSelector.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){"use strict";l.constructor.call(this,n);this.$ComposerReferenceFileUploadAttributionsTab2=function(o,p){this.props.onAttributionChange(o);if(p&&p.attribution_type)this.setState({attributionType:p.attribution_type})}.bind(this);this.state={attributionType:c("MediaCopyrightAttributionType").VIDEO}}m.prototype.$ComposerReferenceFileUploadAttributionsTab1=function(){"use strict";return c("React").createElement("div",{className:"_2cc2"},c("React").createElement("div",{className:"_5sf4"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-95",display:"block",size:"small"},i._("Set up attributions to get credit for your work whenever videos that contain your content are posted. Once you assign an attribution to a reference file, a link to your video or Page will appear on every monitored video that includes your content.")),c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Apply Attribution"),tooltip:i._("Your attribution will appear below videos that match your reference files. You can direct viewers to a page, the original video or a related video.")},c("React").createElement(c("VideoCopyrightAttributionSelector.react"),{accessToken:this.props.accessToken,hasError:this.props.hasError,onChange:this.$ComposerReferenceFileUploadAttributionsTab2,pageID:this.props.targetID,selectedAttribution:this.props.attributionID}))))};m.prototype.$ComposerReferenceFileUploadAttributionsTab3=function(){"use strict";return c("React").createElement(c("Image.react"),{className:"_44x5",src:this.state.attributionType===c("MediaCopyrightAttributionType").VIDEO?j("395928"):j("395927")})};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:(!this.props.shown?"_2oq6":"")+" _63ex"},this.$ComposerReferenceFileUploadAttributionsTab1(),c("React").createElement("div",{className:"_44x6"},this.$ComposerReferenceFileUploadAttributionsTab3(),c("React").createElement(c("VideoCopyrightAttributionInfoIcon.react"),{className:"_1mu1"})))};f.exports=m}),null);
__d("ComposerReferenceFileUploadAttributionsTabContainer.react",["ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerReferenceFileUploadAttributionsTab.react","ComposerVideoUploadStore","ReactComponentWithPureRenderMixin","React"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadAttributionsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:h.string.isRequired,onLogEvent:h.func.isRequired,shown:h.bool,targetID:h.string.isRequired},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightAttributionID(k);return{attributionID:m}}},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadAttributionsTab.react"),{accessToken:this.props.accessToken,attributionID:this.state.attributionID,hasError:false,shown:!!this.props.shown,targetID:this.props.targetID,onAttributionChange:this.onAttributionChange})},onAttributionChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightAttributionID(this.context.composerID,k);this.props.onLogEvent("attribution_updated")}});f.exports=i}),null);
__d("ComposerVideoPlayer.react",["cx","fbt","BackgroundImage.react","CenteredContainer.react","FileInput.react","FileVideoThumbnail","Link.react","React","VideoAssetPlayer.react","VideoThumbnail","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes,m=465,n=285;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){__p&&__p();var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.getSelectedThumbnail=function(){return this.props.selectedThumbnail||this.props.thumbnails[0]}.bind(this),this.selectThumbnailByIndex=function(u){this.props.onThumbnailChange(this.props.thumbnails[u],u,this.props.thumbnails)}.bind(this),this.onPickerLeftClick=function(){var u=this.getSelectedThumbnailIndex()-1;if(u==-1)u=this.props.thumbnails.length-1;this.selectThumbnailByIndex(u);this.refs.videoPlayer.closePlayer()}.bind(this),this.onPickerRightClick=function(){var u=this.getSelectedThumbnailIndex()+1;if(u==this.props.thumbnails.length)u=0;this.selectThumbnailByIndex(u);this.refs.videoPlayer.closePlayer()}.bind(this),this.onFileInputChange=function(event){if(typeof URL.createObjectURL!=="function")return;if(event.target.files.length!==0){this.refs.videoPlayer.closePlayer();var u=new(c("FileVideoThumbnail"))(event.target.files[0]);this.props.onCustomThumbnailSelected(u);this.refs.customThumbnailFileInput.getFileInput().clear()}}.bind(this),this.getSelectedThumbnailIndex=function(){return this.props.selectedThumbnail===undefined?0:this.props.thumbnails.indexOf(this.props.selectedThumbnail)}.bind(this),this.renderThumbSection=function(){var u=this.getSelectedThumbnailIndex()+1,v=c("React").createElement(c("XUIText.react"),{className:"_58mb",key:"index",weight:"bold"},u+"/"+this.props.thumbnails.length),w=void 0;if(this.props.allowCustomThumbnail)w=c("React").createElement("div",{className:"_3ymm"},c("React").createElement(c("FileInput.react"),{accept:"image/*",ref:"customThumbnailFileInput",name:"custom_thumbnail",onChange:this.onFileInputChange},c("React").createElement(c("Link.react"),{className:"_uhl"},c("React").createElement("span",{className:"_44rr"}),i._("Custom"))));var x=c("React").createElement(c("Link.react"),{className:"_58mc",key:"left-arrow",onClick:this.onPickerLeftClick},c("React").createElement(c("CenteredContainer.react"),{className:"_58mp",vertical:true},c("React").createElement("div",{className:"_58m_"}))),y=c("React").createElement(c("Link.react"),{className:"_58n0",key:"right-arrow",onClick:this.onPickerRightClick},c("React").createElement(c("CenteredContainer.react"),{className:"_58n1",vertical:true},c("React").createElement("div",{className:"_58n2"})));return c("React").createElement("div",{className:"_4n8x"},c("React").createElement("div",{className:"_58n3"},w,y,x,v))}.bind(this),q}o.prototype.componentWillReceiveProps=function(p){"use strict";if(!!p.seekPositionInMs&&this.props.seekPositionInMs!==p.seekPositionInMs){this.refs.videoPlayer.seek(p.seekPositionInMs);this.refs.videoPlayer.playVideo();this.refs.videoPlayer.pause()}};o.prototype.render=function(){"use strict";var p=this.props.renderThumbnailControls?this.renderThumbSection():null;return c("React").createElement("div",{className:"_wde"},c("React").createElement(c("VideoAssetPlayer.react"),{ref:"videoPlayer",pageID:this.props.targetID,videoAssetID:this.props.videoID,playerWidth:m,playerHeight:n,rotation:this.props.rotation,hideCloseButton:true,className:"_54xx"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"contain",width:m,height:n,src:this.getSelectedThumbnail().getURL()})),p)};o.propTypes={onCustomThumbnailSelected:l.func.isRequired,onThumbnailChange:l.func.isRequired,selectedThumbnail:l.instanceOf(c("VideoThumbnail")),targetID:l.string,thumbnails:l.arrayOf(l.instanceOf(c("VideoThumbnail"))).isRequired,videoID:l.string.isRequired,renderThumbnailControls:l.bool,allowCustomThumbnail:l.bool,rotation:l.number,seekPositionInMs:l.number};o.defaultProps={isVideoAsset:false,renderThumbnailControls:true};f.exports=o}),null);
__d("ComposerVideoSquareThumbnailZoomCrop.react",["cx","BasicVector","PhotoZoomCropDimensions","PhotoZoomCropMixin","React","PhotoZoomCropImage.react","PhotoZoomCropSlider.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("React").PropTypes,j=i.shape({x:i.number.isRequired,y:i.number.isRequired}),k=c("React").createClass({displayName:"ComposerVideoSquareThumbnailZoomCrop",mixins:[c("PhotoZoomCropMixin")],propTypes:{center:j,cropAspectRatio:j,cropSizeRatio:j,cropSize:j,imageSize:i.instanceOf(c("BasicVector")).isRequired,messageText:i.string,onInitialZoomOrMove:i.func,overlay:i.element,src:i.oneOfType([i.string,i.object]),warningText:i.string},getInitialState:function l(){__p&&__p();var m=this.props,n=m.center,o=m.cropAspectRatio,p=m.cropSizeRatio,q=m.cropSize,r=m.imageSize;this._dims=new(c("PhotoZoomCropDimensions"))(r);if(n)this._dims.setCenter(n.x,n.y);if(q){this._dims.setSize(q.x,q.y);this._dims.setZoom(this._dims.getSize().x/r.x)}if(p){var s=p.x*r.x;this._dims.setZoom(this._dims.getSize().x/s)}if(o)this._dims.setRatio(o.x,o.y);var t=this._getDimensionsState();t.position=this._dims.getZoom();return t},render:function l(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_4liw")},c("React").createElement(c("PhotoZoomCropImage.react"),{className:"_1szc",dimensions:this._dims,enableDrag:this._dims.isCurrentlyDragable(),onMove:this._onMove,overlay:this.props.overlay,src:this.props.src}),c("React").createElement(c("PhotoZoomCropSlider.react"),{className:"_4lix",onZoom:this._onZoom,position:this.state.position,zoom:this.state.zoom,zoomRange:this._dims.getZoomRange()}),this._getMessage())},_onZoom:function l(m,n){if(this.props.onInitialZoomOrMove)this.props.onInitialZoomOrMove();this._handleZoom(m,n)},_onMove:function l(m,n){if(this.props.onInitialZoomOrMove)this.props.onInitialZoomOrMove();this._handleMove(m,n)},__getZoom:function l(){return this.state.zoom}});f.exports=k}),null);
__d("ComposerVideoSquareThumbnailCropper.react",["cx","BasicVector","ComposerVideoSquareThumbnailZoomCrop.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=256;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(n,o){j.constructor.call(this,n,o);this.$ComposerVideoSquareThumbnailCropper1=function(){if(!this.state.initialMove){this.setState({initialMove:true});this.props.onInitialZoomOrMove()}}.bind(this);this.state={initialMove:false}}m.prototype.getCropDimensions=function(){this.setState({initialMove:false});return this.refs.thumbCropper.getDimensions().clone()};m.prototype.render=function(){var n=this.props.selectedThumbnail?this.props.selectedThumbnail.getURL():null,o=this.props.width+"."+this.props.height,p=this.props.dimensions,q=p?p.getSize().x/(p.getZoom()*this.props.width):null;return c("React").createElement("div",null,c("React").createElement(c("ComposerVideoSquareThumbnailZoomCrop.react"),{className:"_1h95",ref:"thumbCropper",key:o,imageSize:new(c("BasicVector"))(this.props.width,this.props.height),center:p?{x:p.getCenter().x,y:p.getCenter().y}:null,cropSizeRatio:q?{x:q,y:q}:null,cropSize:{x:l,y:l},onInitialZoomOrMove:this.$ComposerVideoSquareThumbnailCropper1,src:n}))};f.exports=m}),null);
__d("ComposerVideoThumbnailSection.react",["ix","cx","fbt","invariant","BackgroundImage.react","BasicVector","ComposerVideoShowsPreviewState","ComposerVideoSquareThumbnailCropper.react","ComposerVideoThumbnailPicker.react","ComposerVideoUploadActions","Image.react","LeftRight.react","PhotoZoomCropDimensions","React","Tooltip.react","VideoAssetPlayer.react","XUISpinner.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("ComposerVideoShowsPreviewState"),o=c("React").PropTypes,p=100,q=56,r=56,s=465,t=285;l=babelHelpers.inherits(u,c("React").Component);m=l&&l.prototype;function u(v,w){__p&&__p();m.constructor.call(this,v,w);this.$ComposerVideoThumbnailSection4=function(){this.props.onSelectThumbnailPreview(n.SIXTEEN_NINE)}.bind(this);this.$ComposerVideoThumbnailSection5=function(){this.props.onSelectThumbnailPreview(n.SQUARE_CROPPER)}.bind(this);this.$ComposerVideoThumbnailSection6=function(x,y,z){this.setState({showSquareSpinner:true});this.$ComposerVideoThumbnailSection3(x,true);this.props.onThumbnailChange(x,y,z)}.bind(this);this.$ComposerVideoThumbnailSection7=function(x){this.setState({showSquareSpinner:true});this.$ComposerVideoThumbnailSection3(x,true);this.props.onCustomThumbnailSelected(x)}.bind(this);this.$ComposerVideoThumbnailSection8=function(){this.props.onSelectThumbnailPreview(n.VIDEO_PLAYER)}.bind(this);this.state=this.$ComposerVideoThumbnailSection1(v)}u.prototype.$ComposerVideoThumbnailSection1=function(v){var w=this.$ComposerVideoThumbnailSection2(v.squareThumbnailDimensions?v.squareThumbnailDimensions:new(c("PhotoZoomCropDimensions"))(new(c("BasicVector"))(p,q)));return{showSquareSpinner:false,squareThumbnailPosition:w,thumbnailWidth:0,thumbnailHeight:0,hideShowmark:false}};u.prototype.componentDidMount=function(){if(this.props.selectedThumbnail)this.$ComposerVideoThumbnailSection3(this.props.selectedThumbnail,false)};u.prototype.componentWillReceiveProps=function(v){var w=v.squareThumbnailDimensions;if(w&&w!==this.props.squareThumbnailDimensions)this.setState({squareThumbnailPosition:this.$ComposerVideoThumbnailSection2(w)});if(v.selectedThumbnail&&!this.props.selectedThumbnail&&this.props.isVideoUpload)this.$ComposerVideoThumbnailSection3(v.selectedThumbnail,true)};u.prototype.$ComposerVideoThumbnailSection3=function(v,w){var x=new Image();x.src=v.getURL();x.onload=function(){var y=new(c("PhotoZoomCropDimensions"))(new(c("BasicVector"))(x.width,x.height)),z=Math.min(x.width,x.height);y.setSize(z,z).setZoom(1);if(w)c("ComposerVideoUploadActions").updateSquareThumbnailDimensions(this.props.composerID,y);this.setState({showSquareSpinner:false,thumbnailWidth:x.width,thumbnailHeight:x.height})}.bind(this)};u.prototype.$ComposerVideoThumbnailSection2=function(v){var w=v.getSize().x/r;v=v.clone().setSize(r,r).setZoom(v.getZoom()/w);return v.getPosition()};u.prototype.getCropDimensions=function(){return this.refs.thumbCropper.getCropDimensions()};u.prototype.$ComposerVideoThumbnailSection9=function(v){switch(this.props.previewState){case n.VIDEO_PLAYER:this.props.videoID||k(0);return c("React").createElement(c("VideoAssetPlayer.react"),{ref:"videoPlayer",pageID:this.props.targetID,videoAssetID:this.props.videoID,playerWidth:s,playerHeight:t,hideCloseButton:true,onBeginPlayback:function(){this.setState({hideShowmark:true})}.bind(this),className:"_54xx"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"contain",width:s,height:t,src:v}));case n.SIXTEEN_NINE:return c("React").createElement(c("ComposerVideoThumbnailPicker.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:this.props.hasGeneratedThumbnails,onSelectedThumbnailsFromScrubber:this.props.onSelectedThumbnailsFromScrubber,onCustomThumbnailSelected:this.$ComposerVideoThumbnailSection7,onScrubbedThumbnailSave:this.props.onScrubbedThumbnailSave,onThumbnailChange:this.$ComposerVideoThumbnailSection6,pageID:this.props.targetID,scrubbedThumbnailTime:this.props.scrubbedThumbnailTime,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:this.props.showThumbnailScrubber,thumbnails:this.props.thumbnails,textOnRight:true,videoFile:this.props.videoFile});case n.SQUARE_CROPPER:return c("React").createElement(c("ComposerVideoSquareThumbnailCropper.react"),{ref:"thumbCropper",selectedThumbnail:this.props.selectedThumbnail,dimensions:this.props.squareThumbnailDimensions,onInitialZoomOrMove:this.props.onInitialZoomOrMove,width:this.state.thumbnailWidth,height:this.state.thumbnailHeight});default:return c("React").createElement("div",null)}};u.prototype.$ComposerVideoThumbnailSection10=function(v){return c("React").createElement("div",{className:"_1d7i"},c("React").createElement(c("Image.react"),{className:"_1moc",src:h("115342")}))};u.prototype.$ComposerVideoThumbnailSection11=function(){if(!this.props.showMarkURI||this.state.hideShowmark)return c("React").createElement("div",null);return c("React").createElement("div",{className:"_3e3b"},c("React").createElement(c("Image.react"),{className:"_3e3c"+(this.props.previewState===n.SQUARE_CROPPER?" _3e3d":""),src:this.props.showMarkURI}))};u.prototype.$ComposerVideoThumbnailSection12=function(){if(this.props.previewState===n.VIDEO_PLAYER)return null;var v=this.props.videoID?c("React").createElement(c("XUIText.react"),{className:"_1d7j",onClick:this.$ComposerVideoThumbnailSection8,size:"medium",display:"block"},j._("Exit")):null;return c("React").createElement(c("LeftRight.react"),{className:"_1d7n"},this.props.previewState===n.SIXTEEN_NINE?c("React").createElement(c("XUIText.react"),{size:"medium",display:"block"},j._("Editing")):c("React").createElement(c("Image.react"),{src:h("115340")}),v)};u.prototype.render=function(){var v=this.props.selectedThumbnail?this.props.selectedThumbnail.getURL():null,w=this.$ComposerVideoThumbnailSection12();return c("React").createElement("div",null,c("React").createElement("div",{className:"_x9k"},this.$ComposerVideoThumbnailSection9(v)),c("React").createElement(c("XUIText.react"),{size:"medium",weight:"bold"},c("React").createElement(c("Tooltip.react"),{position:"right",offset:12,tooltip:j._("Thumbnails represent your video when it's not autoplaying. Tip: Avoid text on your thumbnail.")},j._("Thumbnails"))),c("React").createElement("div",{className:"_3-8x"},c("React").createElement("div",{className:"_x9o"+(this.props.previewState===n.SIXTEEN_NINE?" _1d7r":"")},c("React").createElement("div",{className:"_1d7s"},c("React").createElement("div",{className:"_1d7t"},c("React").createElement(c("Image.react"),{onClick:this.$ComposerVideoThumbnailSection4,src:v,height:q,width:p,backgroundSize:"contain"}),this.props.previewState!==n.SIXTEEN_NINE?this.$ComposerVideoThumbnailSection10(false):null)),this.props.previewState===n.SIXTEEN_NINE?w:null),c("React").createElement("div",{className:"_x9p"+(this.props.previewState===n.SQUARE_CROPPER?" _1d7r":"")},c("React").createElement("div",{className:"_1d7s"},this.state.showSquareSpinner?c("React").createElement(c("XUISpinner.react"),{className:"_3-9b _3-8y",size:"large"}):c("React").createElement("div",{className:"_1d7t",style:{height:r,width:r}},c("React").createElement(c("Image.react"),{className:"_1h93",onClick:this.$ComposerVideoThumbnailSection5,src:this.props.squareThumbnailDimensions!==null||!this.props.squareThumbnailURI?v:this.props.squareThumbnailURI,style:this.props.squareThumbnailDimensions!==null?this.state.squareThumbnailPosition:{height:r,width:r}}),this.props.previewState!==n.SQUARE_CROPPER?this.$ComposerVideoThumbnailSection10(true):null)),this.props.previewState===n.SQUARE_CROPPER?w:null),this.$ComposerVideoThumbnailSection11()))};u.propTypes={className:o.string,canSeeUploadVideoDialogShowsNux:o.bool,allowCustomThumbnail:o.bool.isRequired,hasGeneratedThumbnails:o.bool,composerID:o.string.isRequired,selectedThumbnail:o.object,isVideoUpload:o.bool,previewState:o.string.isRequired,onSelectThumbnailPreview:o.func.isRequired,onThumbnailChange:o.func.isRequired,onCustomThumbnailSelected:o.func.isRequired,onScrubbedThumbnailSave:o.func.isRequired,onSelectedThumbnailsFromScrubber:o.func.isRequired,thumbnails:o.array.isRequired,showThumbnailScrubber:o.bool.isRequired,squareThumbnailURI:o.string,squareThumbnailDimensions:o.instanceOf(c("PhotoZoomCropDimensions")),videoFile:o.object};f.exports=u}),null);
__d("ComposerVideoUploadPreviewSection.react",["ix","cx","fbt","Promise","BUISwitch.react","CenteredContainer.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoPlayer.react","ComposerVideoShowsPreviewState","ComposerVideoThumbnailPicker.react","ComposerVideoThumbnailSection.react","ComposerVideoUploadActions","ComposerVideoUploadStore","EventListener","Image.react","Layout.react","LeftRight.react","React","ReactComposerContextTypes","ReactDOM","VideoUploadLogger","XUIGrayText.react","XUIText.react","fbglyph","generateVideoThumbnails","joinClasses","requiredIfPropIsFalsy"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("Layout.react").Column,l=c("ComposerVideoShowsPreviewState"),m=c("React").PropTypes;b.URL=b.URL||b.webkitURL;var n=10,o=5,p=100,q=56,r=80,s=50,t=c("React").createClass({displayName:"ComposerVideoUploadPreviewSection",_loadedmetadataListener:null,_cancelableThumbnailsPromise:null,contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function u(v,w){var x=c("ComposerVideoUploadStore").getThumbnail(v)||w.selectedThumbnail,y=c("ComposerVideoUploadStore").getCustomThumbnail(v),z=c("ComposerVideoUploadStore").getScrubbedThumbnail(v),A=c("ComposerVideoUploadStore").getGeneratedThumbnails(v),B=y?A.concat(y):A;B=z?B.concat(z):B;var C=c("ComposerVideoUploadStore").getSquareThumbnailDimensions(v),D=c("ComposerVideoUploadStore").getPlayerSeekPositionInMs(v),E=c("ComposerVideoUploadStore").getEnableThumbnailExperiment(v);if(w.thumbnails)B=y?w.thumbnails.concat(y):w.thumbnails;return{generatedThumbnails:A,selectedThumbnail:x,squareThumbnailDimensions:C,thumbnails:B,seekPositionInMs:D,enableThumbnailExperiment:E,thumbnailsPromise:null}},getAttachmentInitialState:function u(v,w){return{canGenerateThumbnails:true,showsPreviewState:w.isVideoUpload?l.SIXTEEN_NINE:l.VIDEO_PLAYER,squareApplyState:"NONE",videoUrl:this.generateVideoUrl(w.videoFile)}},getAttachmentWillReceivePropsState:function u(v,w,x){var y={};if(x.videoFile!==w.videoFile){c("ComposerVideoUploadActions").updateThumbnail(v,null);y.videoUrl=this.generateVideoUrl(w.videoFile)}return y},generateVideoUrl:function u(v){if(v&&b.URL&&b.URL.createObjectURL)return b.URL.createObjectURL(v);else return null}},propTypes:{currentAdBreak:m.number,canSeeUploadVideoDialogShowsNux:m.bool,allowCustomThumbnail:m.bool,generateThumbnails:m.bool,isShowPage:m.bool,showMarkURI:m.string,isSquareVideo:m.bool,isVideoUpload:m.bool,logger:m.object,renderThumbnailControls:m.bool,showThumbnailExperimentSection:m.bool,showThumbnailScrubber:m.bool,selectedThumbnail:m.object,squareThumbnailURI:m.string,targetID:m.string,thumbnails:m.array,videoFile:m.object,videoID:c("requiredIfPropIsFalsy")("isVideoUpload",m.string)},componentWillUnmount:function u(){if(this._loadedmetadataListener){this._loadedmetadataListener.remove();this._loadedmetadataListener=null}if(this._cancelableThumbnailsPromise)this._cancelableThumbnailsPromise.cancel()},componentDidMount:function u(){if(this.props.generateThumbnails){var v=c("ReactDOM").findDOMNode(this.refs.videoPlayer);if(v&&!this._loadedmetadataListener)this._loadedmetadataListener=c("EventListener").listen(v,"loadedmetadata",this.generateVideoThumbnails)}},_makeCancelable:function u(v){var w=false,x=new(c("Promise"))(function(y,z){v.then(function(A){return w?z({isCanceled:true}):y(A)})["catch"](function(A){return w?z({isCanceled:true}):z(A)})});return{promise:x,cancel:function y(){w=true}}},generateVideoThumbnails:function u(){__p&&__p();if(this.state.generatedThumbnails.length>0)return null;var v=this.context.composerID,w=c("ReactDOM").findDOMNode(this.refs.videoPlayer),x=c("ReactDOM").findDOMNode(this.refs.previewContainer),y=this.props.isSquareVideo?"cover":"contain",z=this.props.isSquareVideo?x.offsetWidth:x.offsetHeight,A=this._makeCancelable(c("generateVideoThumbnails")(w,x.offsetWidth,z,n,y));this._cancelableThumbnailsPromise=A;this._logEvent(c("VideoUploadLogger").EVENT_STARTED_GENERATE_THUMBNAILS);return A.promise.then(function(B){var C=B.thumbnails,D=B.selectedThumbnail;c("ComposerVideoUploadActions").updateThumbnail(v,D);c("ComposerVideoUploadActions").updateGeneratedThumbnails(v,C);this.setState({thumbnails:C,canGenerateThumbnails:true});this._logEvent(c("VideoUploadLogger").EVENT_FINISHED_GENERATE_THUMBNAILS)}.bind(this),function(){this.setState({canGenerateThumbnails:false});this._logEvent(c("VideoUploadLogger").EVENT_VIDEO_DIMENSIONS_UNREADABLE)}.bind(this))},_logEvent:function u(v){if(this.props.logger)this.props.logger.logEvent(v)},renderVideoPlayer:function u(){var v=this.props.videoID;if(!v)return c("React").createElement("div",null);return c("React").createElement(c("ComposerVideoPlayer.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,onCustomThumbnailSelected:this.onCustomThumbnailSelected,onThumbnailChange:this.onThumbnailChange,renderThumbnailControls:this.props.renderThumbnailControls,selectedThumbnail:this.getSelectedThumbnail(),targetID:this.props.targetID,thumbnails:this.state.thumbnails,videoID:v,seekPositionInMs:this.state.seekPositionInMs})},getSelectedThumbnail:function u(){return this.state.selectedThumbnail||this.state.thumbnails[0]},_renderThumbnailExperimentSection:function u(){if(!this.props.showThumbnailExperimentSection)return c("React").createElement("div",null);var v=this.state.enableThumbnailExperiment?j._("Experiment will be running for 3 days."):j._("Choose up to 5 thumbnails for this experiment to find out the best one."),w=[];for(var x=0;x<o;x++)w.push(c("React").createElement(c("Image.react"),{className:"_3aq0",width:r,height:s,src:null}));var y=this.state.enableThumbnailExperiment?c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},j._("Chosen Thumbnails for Experiment")),c("React").createElement(c("Layout.react"),null,c("React").createElement(k,null,w))):c("React").createElement("div",null);return c("React").createElement("div",{className:"_17vj"},c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},j._("Run Thumbnail Experiment")),c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{size:"small",shade:"light"},v)),c("React").createElement(c("BUISwitch.react"),{value:this.state.enableThumbnailExperiment,showLabel:true,onToggle:this.onEnableThumbnailExperimentChange}),y)},renderThumbnailPicker:function u(){var v=this.props.generateThumbnails&&this.state.canGenerateThumbnails,w=this.props.isShowPage?c("React").createElement(c("ComposerVideoThumbnailSection.react"),{composerID:this.context.composerID,allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:v,key:this.context.composerID,ref:"thumbnailSection",isVideoUpload:this.props.isVideoUpload,onCustomThumbnailSelected:this.onCustomThumbnailSelected,onInitialZoomOrMove:this._onInitialZoomOrMove,onScrubbedThumbnailSave:this._onScrubbedThumbnailSave,onSelectedThumbnailsFromScrubber:this.onSelectedThumbnailsFromScrubber,onSelectThumbnailPreview:this._onSelectThumbnailPreview,previewState:this.state.showsPreviewState,squareThumbnailDimensions:this.state.squareThumbnailDimensions,squareThumbnailURI:this.props.squareThumbnailURI,onThumbnailChange:this.onThumbnailChange,scrubbedThumbnailTime:this._getScrubbedThumbnailTime(),selectedThumbnail:this.getSelectedThumbnail(),showThumbnailScrubber:this.props.showThumbnailScrubber&&this.state.generatedThumbnails.length>0,thumbnails:this.state.thumbnails,targetID:this.props.targetID,videoFile:this.props.videoFile,videoID:this.props.videoID,showMarkURI:this.props.showMarkURI}):c("React").createElement(c("ComposerVideoThumbnailPicker.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:v,key:"thumbnailPicker",onCustomThumbnailSelected:this.onCustomThumbnailSelected,onScrubbedThumbnailSave:this._onScrubbedThumbnailSave,onSelectedThumbnailsFromScrubber:this.onSelectedThumbnailsFromScrubber,onThumbnailChange:this.onThumbnailChange,pageID:this.props.targetID,scrubbedThumbnailTime:this._getScrubbedThumbnailTime(),selectedThumbnail:this.getSelectedThumbnail(),showThumbnailScrubber:this.props.showThumbnailScrubber&&this.state.generatedThumbnails.length>0,thumbnails:this.state.thumbnails,videoFile:this.props.videoFile,enableThumbnailExperiment:this.state.enableThumbnailExperiment});return[w,c("React").createElement("video",{ref:"videoPlayer",className:"_2mpk",key:"videoPlayer",src:this.state.videoUrl})]},updateThumbnails:function u(v,w,x){this.setState({thumbnails:v,selectedThumbnail:w});c("ComposerVideoUploadActions").updateThumbnail(this.context.composerID,w,x)},_updateSquareThumbnail:function u(){c("ComposerVideoUploadActions").updateSquareThumbnailDimensions(this.context.composerID,this.refs.thumbnailSection.getCropDimensions());this.setState({squareApplyState:"APPLIED"})},_onSelectThumbnailPreview:function u(v){this.setState({showsPreviewState:v,squareApplyState:"NONE"})},_onInitialZoomOrMove:function u(){this.setState({squareApplyState:"EDITING"})},onCustomThumbnailSelected:function u(v){this._logEvent(c("VideoUploadLogger").EVENT_SELECTED_CUSTOM_THUMBNAIL);c("ComposerVideoUploadActions").updateCustomThumbnail(this.context.composerID,v);var w=this.state.generatedThumbnails.concat(v);this.updateThumbnails(w,v,false)},onSelectedThumbnailsFromScrubber:function u(v){__p&&__p();var w=[];if(v)v.then(function(x){__p&&__p();w=x.thumbnails;var y=this.state.generatedThumbnails.concat(w);if(w.length>1){var z=this.state.generatedThumbnails.length;c("ComposerVideoUploadActions").updateGeneratedThumbnails(this.context.composerID,y);this.updateThumbnails(y,y[z],false)}else if(w.length===1){var A=w[0];c("ComposerVideoUploadActions").updateScrubbedThumbnail(this.context.composerID,A);this.updateThumbnails(y,A,false)}}.bind(this)).done()},_onScrubbedThumbnailSave:function u(v){c("ComposerVideoUploadActions").updateScrubbedThumbnailTimestamp(this.context.composerID,v)},_getScrubbedThumbnailTime:function u(){return c("ComposerVideoUploadStore").getScrubbedThumbnailTimestamp(this.context.composerID)},onThumbnailChange:function u(v,w,x){if(!v)return;this.updateThumbnails(x,v,true)},onEnableThumbnailExperimentChange:function u(v){c("ComposerVideoUploadActions").updateEnableThumbnailExperiment(this.context.composerID,v);this.setState({enableThumbnailExperiment:!v})},_renderShowPagePreview:function u(){__p&&__p();var v=null;if(this.state.showsPreviewState===l.SQUARE_CROPPER&&this.state.squareApplyState!=="NONE")if(this.state.squareApplyState==="EDITING")v=c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_u6e",onClick:this._updateSquareThumbnail},j._("Apply"));else if(this.state.squareApplyState==="APPLIED")v=c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_43si"},c("React").createElement(c("Image.react"),{className:"_43sj",src:h("119374")}),j._("Applied"));var w="";switch(this.state.showsPreviewState){case l.VIDEO_PLAYER:w=j._("Video");break;case l.SIXTEEN_NINE:w=j._("Choose Thumbnail");break;case l.SQUARE_CROPPER:w=j._("Square Crop Thumbnail");break}return c("React").createElement("div",{className:"_3-8x"},this._renderThumbnailExperimentSection(),c("React").createElement(c("LeftRight.react"),{className:"_1elc"},c("React").createElement(c("XUIText.react"),{weight:"bold"},w),c("React").createElement("div",null,v)),c("React").createElement(c("CenteredContainer.react"),{ref:"previewContainer",className:c("joinClasses")("_5w5i","_3-8x"),vertical:true},this.renderThumbnailPicker()))},render:function u(){var v;if(this.props.isShowPage)return this._renderShowPagePreview();if(!this.props.isVideoUpload)v=this.renderVideoPlayer();else if(this.state.videoUrl)v=this.renderThumbnailPicker();return c("React").createElement("div",null,this._renderThumbnailExperimentSection(),c("React").createElement(c("CenteredContainer.react"),{ref:"previewContainer",className:"_5w5i",vertical:true},v))}});f.exports=t}),null);
__d("ComposerReferenceFileUploadRightsTabContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileUploadRightsTab.react","ComposerVideoUploadActions","ComposerVideoUploadPreviewSection.react","ComposerVideoUploadStore","React","ReactComposerContextTypes","ReferenceFingerprintPreviewSection.react","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadRightsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightMonitoringType(k)||c("VideoCopyrightUtils").DEFAULT_MONITORING_TYPE,n=c("ComposerVideoUploadStore").getCopyrightRuleID(k),o=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(k),p=c("ComposerVideoUploadStore").getAreCopyrightCountriesIncluded(k),q=c("ComposerVideoUploadStore").getIsCopyrightReferenceDisabled(k),r=c("ComposerVideoUploadStore").getCopyrightReferenceCategory(k);return{monitoringType:m,ownershipCountries:o.slice(),ruleID:n,areCountriesIncluded:p,isReferenceFileDisabled:q,selectedCategory:r}}},propTypes:{accessToken:h.string,generateThumbnails:h.bool,shouldShowDetectMatchSection:h.bool,isVideoUpload:h.bool,logger:h.object,onCreateNewMatchRule:h.func,onLogEvent:h.func.isRequired,selectedThumbnail:h.object,shown:h.bool,targetID:h.string,thumbnails:h.array,uiLogger:h.object,videoFile:h.object,videoID:h.string,showCategoryRequiredError:h.bool,disableEditReferenceCategory:h.bool},onMonitoringTypeChange:function j(event){c("ComposerVideoUploadActions").updateCopyrightMonitoringType(this.context.composerID,event.value);this.props.onLogEvent("monitoring_type_updated")},onGeoChange:function j(k,l){c("ComposerVideoUploadActions").updateCopyrightOwnershipCountries(this.context.composerID,k,l);this.props.onLogEvent("ownership_countries_updated")},onMatchRuleChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightRuleID(this.context.composerID,k)},onReferenceFileStatusChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceFileDisabled(this.context.composerID,!k);this.props.onLogEvent("is_reference_file_disabled_toggled")},onReferenceCategoryChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceCategory(this.context.composerID,k);this.props.onLogEvent("reference_category_updated")},renderPreviewSection:function j(){if(this.props.videoID||this.props.isVideoUpload)return c("React").createElement(c("ComposerVideoUploadPreviewSection.react"),{allowCustomThumbnail:false,generateThumbnails:this.props.generateThumbnails,isVideoUpload:this.props.isVideoUpload,logger:this.props.logger,renderThumbnailControls:false,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:false,thumbnails:this.props.thumbnails,videoID:this.props.videoID,videoFile:this.props.videoFile});else return c("React").createElement(c("ReferenceFingerprintPreviewSection.react"),null)},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadRightsTab.react"),{accessToken:this.props.accessToken,shown:this.props.shown,targetID:this.props.targetID||"",onCreateNewMatchRule:this.props.onCreateNewMatchRule,onGeoChange:this.onGeoChange,onMatchRuleChange:this.onMatchRuleChange,onMonitoringTypeChange:this.onMonitoringTypeChange,onReferenceCategoryChange:this.onReferenceCategoryChange,onReferenceFileStatusChange:this.onReferenceFileStatusChange,monitoringType:this.state.monitoringType,ownershipCountries:this.state.ownershipCountries,areCountriesIncluded:this.state.areCountriesIncluded,isReferenceFileDisabled:this.state.isReferenceFileDisabled,isVideoUpload:this.props.isVideoUpload,ruleID:this.state.ruleID,shouldShowDetectMatchSection:this.props.shouldShowDetectMatchSection,selectedCategory:this.state.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError,disableEditReferenceCategory:this.props.disableEditReferenceCategory},this.renderPreviewSection())}});f.exports=i}),null);
__d("ComposerReferenceFileUploadWhitelistTabContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileUploadWhitelistTab.react","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadWhitelistTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightWhitelistedPartners(k),n=c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(k);return{whitelistedPartners:m,whitelistedIGUserNames:n}}},propTypes:{onLogEvent:h.func.isRequired,shown:h.bool,canSeeIGMatches:h.bool},onFBWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedPartners(this.context.composerID,k);this.props.onLogEvent("whitelist_updated")},onIGWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedIGUserNames(this.context.composerID,k);this.props.onLogEvent("whitelist_ig_user_names_updated")},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadWhitelistTab.react"),{shown:this.props.shown,whitelistedPartners:this.state.whitelistedPartners,whitelistedIGUserNames:this.state.whitelistedIGUserNames,onIGWhitelistUpdated:this.onIGWhitelistUpdated,onFBWhitelistUpdated:this.onFBWhitelistUpdated,canSeeIGMatches:this.props.canSeeIGMatches})}});f.exports=i}),null);
__d("AdBreakAdminPreviewEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADMIN_SEND_NOTIFICATION:"admin_send_notification",ADMIN_SEND_NOTIFICATION_SUCCESS:"admin_send_notification_success",ADMIN_SEND_NOTIFICATION_FAILURE:"admin_send_notification_failure",ADMIN_REQUEST_SHAREABLE_LINK:"admin_request_shareable_link",ADMIN_REQUEST_SHAREABLE_LINK_SUCCESS:"admin_request_shareable_link_success",ADMIN_REQUEST_SHAREABLE_LINK_FAILURE:"admin_request_shareable_link_failure",SERVER_VIDEO_ENCODING_SUCCESS:"server_video_encoding_success",SERVER_VIDEO_ENCODING_FAILURE:"server_video_encoding_failure"})}),null);
__d("AdBreakAdminPreviewStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ENCODING:"encoding",NONE:"none",OK:"ok"})}),null);
__d("XAdBreakAdminPreviewNotificationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ad_breaks/admin_preview/notification/",{video_id:{type:"FBID",required:true},ad_break_time_offsets:{type:"IntVector"}})}),null);
__d("XAdBreakAdminPreviewShareController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ad_breaks/admin_preview/share/",{video_id:{type:"FBID",required:true},ad_break_time_offsets:{type:"IntVector"}})}),null);
__d("XAdBreakAdminPreviewStatusController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ad_breaks/admin_preview/status/",{video_id:{type:"FBID",required:true}})}),null);
__d("AdBreakAdminPreviewManager",["AdBreakAdminPreviewEvent","AdBreakAdminPreviewStatus","AdBreakAdminPreviewTypedLogger","AsyncRequest","AsyncResponse","XAdBreakAdminPreviewNotificationController","XAdBreakAdminPreviewShareController","XAdBreakAdminPreviewStatusController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=1e3;i.prototype.sendNotification=function(j,k,l,m){"use strict";__p&&__p();this.lastRequestTime=Date.now();new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_SEND_NOTIFICATION).setTimeConsumedInMs(null).log();var n=function(){new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_SEND_NOTIFICATION_SUCCESS).setTimeConsumedInMs(Date.now()-this.lastRequestTime).log();l()}.bind(this),o=function(){new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_SEND_NOTIFICATION_FAILURE).setTimeConsumedInMs(Date.now()-this.lastRequestTime).log();m()}.bind(this),p=c("XAdBreakAdminPreviewNotificationController").getURIBuilder().setFBID("video_id",j).setIntVector("ad_break_time_offsets",k).getURI();new(c("AsyncRequest"))(p).setHandler(function(q){if(q.payload.status===c("AdBreakAdminPreviewStatus").OK)n();else this.pollPreviewStatus(j,n,o)}.bind(this)).setErrorHandler(function(q){return o()}).send()};i.prototype.requestShareLink=function(j,k,l,m){"use strict";this.lastRequestTime=Date.now();new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_REQUEST_SHAREABLE_LINK).setTimeConsumedInMs(null).log();var n=function(p){new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_REQUEST_SHAREABLE_LINK_SUCCESS).setTimeConsumedInMs(Date.now()-this.lastRequestTime).log();l(p)}.bind(this),o=function(p){new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_REQUEST_SHAREABLE_LINK_FAILURE).setTimeConsumedInMs(Date.now()-this.lastRequestTime).log();m(p)}.bind(this);this.requestShareLinkWithoutLogging(j,k,n,o)};i.prototype.requestShareLinkWithoutLogging=function(j,k,l,m){"use strict";var n=c("XAdBreakAdminPreviewShareController").getURIBuilder().setFBID("video_id",j).setIntVector("ad_break_time_offsets",k).getURI();new(c("AsyncRequest"))(n).setHandler(function(o){if(o.payload.status===c("AdBreakAdminPreviewStatus").OK)l(o);else this.pollPreviewStatus(j,function(){return this.requestShareLinkWithoutLogging(j,k,l,m)}.bind(this),function(){return m(o)})}.bind(this)).setErrorHandler(function(o){return m(o)}).send()};i.prototype.pollPreviewStatus=function(j,k,l){"use strict";clearInterval(this.timer);this.timer=setInterval(function(){return this.getPreviewStatus(j,k,l)}.bind(this),h)};i.prototype.stopPolling=function(){"use strict";clearInterval(this.timer)};i.prototype.getPreviewStatus=function(j,k,l){"use strict";var m=c("XAdBreakAdminPreviewStatusController").getURIBuilder().setFBID("video_id",j).getURI();new(c("AsyncRequest"))(m).setHandler(function(n){if(n.payload.status===c("AdBreakAdminPreviewStatus").OK){clearInterval(this.timer);k()}}.bind(this)).setErrorHandler(function(n){clearInterval(this.timer);l()}.bind(this)).send()};function i(){"use strict"}f.exports=new i()}),null);
__d("ComposerVideoAdBreakAdminPreviewLoadingDialog.react",["cx","fbt","CenteredContainer.react","React","SUIBusinessTheme","SUISpinner.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCloseButton.react","XUIDialogFooter.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=475;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={shown:true},this.$ComposerVideoAdBreakAdminPreviewLoadingDialog1=function(){if(this.props.onClose)this.props.onClose()}.bind(this),o}m.prototype.show=function(){this.setState({shown:true})};m.prototype.hide=function(){this.setState({shown:false})};m.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),{label:i._("Loading"),layerHideOnBlur:false,shown:this.state.shown,width:l},c("React").createElement(c("CenteredContainer.react"),null,c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("div",{className:"_380g"},i._("Your preview is being prepared. This may take a moment..."),c("React").createElement(c("SUISpinner.react"),{className:"_3-9b",size:"small",theme:c("SUIBusinessTheme")})))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogCloseButton.react"),{onClick:this.$ComposerVideoAdBreakAdminPreviewLoadingDialog1})))};f.exports=m}),null);
__d("ComposerVideoAdBreakAdminPreviewNotificationHandler",["fbt","AdBreakAdminPreviewManager","ComposerVideoAdBreakAdminPreviewLoadingDialog.react","DOM","React","ReactDOM","SimpleXUIDialog","XUIDialogCloseButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(){__p&&__p();this.$ComposerVideoAdBreakAdminPreviewNotificationHandler2=function(){if(!this.loadingDialog)return;this.$ComposerVideoAdBreakAdminPreviewNotificationHandler4();var j=h._("A notification has been sent to your Facebook account. Please open Facebook on your phone to preview your video with ad breaks."),k=c("React").createElement(c("XUIDialogCloseButton.react"),null),l=h._("Mobile Ad Break Preview");c("SimpleXUIDialog").showEx(j,l,k)}.bind(this);this.$ComposerVideoAdBreakAdminPreviewNotificationHandler3=function(){if(!this.loadingDialog)return;this.$ComposerVideoAdBreakAdminPreviewNotificationHandler4();var j=h._("An error occurred while sending notification."),k=c("React").createElement(c("XUIDialogCloseButton.react"),null),l=h._("Mobile Ad Break Preview");c("SimpleXUIDialog").showEx(j,l,k)}.bind(this)}i.prototype.sendNotification=function(j,k){this.$ComposerVideoAdBreakAdminPreviewNotificationHandler1();c("AdBreakAdminPreviewManager").sendNotification(j,k,this.$ComposerVideoAdBreakAdminPreviewNotificationHandler2,this.$ComposerVideoAdBreakAdminPreviewNotificationHandler3)};i.prototype.$ComposerVideoAdBreakAdminPreviewNotificationHandler1=function(){var j=c("React").createElement(c("ComposerVideoAdBreakAdminPreviewLoadingDialog.react"),null);this.loadingDialog=c("ReactDOM").render(j,c("DOM").create("div"));this.loadingDialog.show()};i.prototype.$ComposerVideoAdBreakAdminPreviewNotificationHandler4=function(){if(this.loadingDialog){this.loadingDialog.hide();this.loadingDialog=null}};f.exports=new i()}),null);
__d("ComposerVideoAdBreakAdminPreviewShareDialog.react",["cx","fbt","AdBreakAdminPreviewManager","AsyncResponse","Clipboard","ComposerVideoAdBreakAdminPreviewLoadingDialog.react","FBClipboardLink.react","Image.react","Link.react","React","SUIBusinessTheme","SUIText.react","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={isLoading:false,shareURL:null,shown:false},this.hide=function(){this.setState({shown:false})}.bind(this),q}l.prototype.componentWillMount=function(){if(this.props.videoID){this.setState({isLoading:true});c("AdBreakAdminPreviewManager").requestShareLink(this.props.videoID,this.props.adBreakTimeOffsets,function(p){this.setState({isLoading:false,shareURL:p.payload.url})}.bind(this),function(p){this.setState({isLoading:false})}.bind(this))}};l.prototype.show=function(){this.setState({shown:true})};l.prototype.render=function(){if(this.state.isLoading)return c("React").createElement(c("ComposerVideoAdBreakAdminPreviewLoadingDialog.react"),{onClose:this.hide});var p=null;if(!this.state.shareURL)p=i._("Failed to load share link.");else p=c("React").createElement("div",{className:"_40s0"},c("React").createElement("div",{className:"_40s1"},c("React").createElement(m,null),c("React").createElement(n,{shareURL:this.state.shareURL}),c("React").createElement(o,null)),c("React").createElement(c("Image.react"),{className:"_40s7",src:"/images/aet/ShareAdPreview.png"}));return c("React").createElement(c("XUIDialog.react"),{layerHideOnBlur:false,shown:this.state.shown,width:700},c("React").createElement(c("XUIDialogTitle.react"),null,i._("Preview This Video with Ad Breaks")),c("React").createElement(c("XUIDialogBody.react"),null,p),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",label:i._("Done"),onClick:this.hide,use:"confirm"})))};function m(){return c("React").createElement("div",null,c("React").createElement(c("SUIText.react"),{display:"block",size:"small",theme:c("SUIBusinessTheme"),weight:"bold"},i._("Send Link")),c("React").createElement(c("SUIText.react"),{className:"_3-8x",display:"block",size:"small",theme:c("SUIBusinessTheme")},i._("Use this URL to preview this video with ad breaks on desktop. You can share this link with others.")))}function n(p){var q=null;if(c("Clipboard").isSupported())q=c("React").createElement(c("FBClipboardLink.react"),{value:p.shareURL},c("React").createElement(c("XUIButton.react"),{className:"_3-9b",label:i._("Copy"),use:"confirm"}));var r=c("React").createElement(c("XUITextInput.react"),{className:"_40s8",disabled:true,value:p.shareURL});if(c("Clipboard").isSupported())r=c("React").createElement(c("FBClipboardLink.react"),{value:p.shareURL},c("React").createElement(c("Link.react"),null,p.shareURL));return c("React").createElement("div",{className:"_2pie"},r,q)}function o(){return c("React").createElement("div",{className:"_2pie"},c("React").createElement(c("XUIGrayText.react"),{display:"block"},i._("A sample ad will play during your ad break placements.")))}f.exports=l}),null);
__d("ComposerVideoAdBreakAdminPreviewMenu.react",["ix","cx","fbt","AccessibleLayer","AdBreakAdminPreviewManager","ComposerVideoAdBreakAdminPreviewNotificationHandler","ComposerVideoAdBreakAdminPreviewShareDialog.react","ContextualLayerHideOnScroll","DateConsts","DOM","Image.react","LayerFadeOnHide","LayerFadeOnShow","LayerFitHeightToScreen","LayerHideOnBlur","LayerHideOnEscape","React","ReactDOM","ShimButton.react","SUIBusinessTheme","SUIButton.react","SUIGlyphIcon.react","SUIText.react","XUIContextualDialog.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;function m(){__p&&__p();l.constructor.call(this);this.$ComposerVideoAdBreakAdminPreviewMenu7=function(n){return c("React").createElement("div",{key:n.id},c("React").createElement("div",{className:"_-em"},c("React").createElement(c("SUIText.react"),{className:"_2pit",shade:"medium",theme:c("SUIBusinessTheme"),weight:"bold"},n.header)),c("React").createElement("div",null,n.items.map(this.$ComposerVideoAdBreakAdminPreviewMenu8,this)))}.bind(this);this.$ComposerVideoAdBreakAdminPreviewMenu8=function(n){return c("React").createElement(c("ShimButton.react"),{className:"_-en",key:n.id,onClick:function(event){return this.$ComposerVideoAdBreakAdminPreviewMenu9(event,n.onClick)}.bind(this)},c("React").createElement(c("Image.react"),{src:n.icon}),c("React").createElement(c("SUIText.react"),{className:"_2pit",shade:"medium",theme:c("SUIBusinessTheme"),weight:"bold"},n.title))}.bind(this);this.$ComposerVideoAdBreakAdminPreviewMenu6=function(n){this.setState({showMenu:n})}.bind(this);this.$ComposerVideoAdBreakAdminPreviewMenu5=function(event){this.setState({showMenu:!this.state.showMenu});event.stopPropagation()}.bind(this);this.$ComposerVideoAdBreakAdminPreviewMenu3=[{id:"share_preview_section",header:j._("Share Previews"),items:[{id:"share_a_link_menu_item",icon:h("124778"),title:j._("Share a Link"),onClick:function(){var n=c("React").createElement(c("ComposerVideoAdBreakAdminPreviewShareDialog.react"),{adBreakTimeOffsets:this.$ComposerVideoAdBreakAdminPreviewMenu11(),videoID:this.$ComposerVideoAdBreakAdminPreviewMenu10()});n=c("ReactDOM").render(n,c("DOM").create("div"));n.show()}.bind(this)}]},{id:"preview_on_device_section",header:j._("Preview on Device"),items:[{id:"send_notification_to_facebook_menu_item",icon:h("123839"),title:j._("Send Notification to Facebook"),onClick:function(){c("ComposerVideoAdBreakAdminPreviewNotificationHandler").sendNotification(this.$ComposerVideoAdBreakAdminPreviewMenu10(),this.$ComposerVideoAdBreakAdminPreviewMenu11())}.bind(this)}]}];this.state={showMenu:false}}m.prototype.componentWillUnmount=function(){c("AdBreakAdminPreviewManager").stopPolling()};m.prototype.render=function(){return c("React").createElement("div",null,this.$ComposerVideoAdBreakAdminPreviewMenu1(),this.$ComposerVideoAdBreakAdminPreviewMenu2(this.$ComposerVideoAdBreakAdminPreviewMenu3))};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu1=function(){return c("React").createElement(c("SUIButton.react"),{disabled:this.$ComposerVideoAdBreakAdminPreviewMenu4(),icon:c("React").createElement(c("SUIGlyphIcon.react"),{disabled:this.$ComposerVideoAdBreakAdminPreviewMenu4(),srcDefault:h("112854"),srcDisabled:h("125669")}),label:j._("Preview"),onClick:this.$ComposerVideoAdBreakAdminPreviewMenu5,ref:"button",theme:c("SUIBusinessTheme")})};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu2=function(n){if(this.$ComposerVideoAdBreakAdminPreviewMenu4())return null;return c("React").createElement(c("XUIContextualDialog.react"),{alignment:"right",behaviors:{AccessibleLayer:c("AccessibleLayer"),ContextualLayerHideOnScroll:c("ContextualLayerHideOnScroll"),LayerHideOnTransition:false,LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape"),LayerFadeOnShow:c("LayerFadeOnShow"),LayerFadeOnHide:c("LayerFadeOnHide"),LayerFitHeightToScreen:c("LayerFitHeightToScreen")},contextRef:function(){return this.refs.button}.bind(this),label:j._("Ad Break Admin Preview Menu"),onToggle:this.$ComposerVideoAdBreakAdminPreviewMenu6,position:"below",shown:this.state.showMenu,width:c("XUIContextualDialog.react").WIDTH.NORMAL},n.map(this.$ComposerVideoAdBreakAdminPreviewMenu7,this))};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu9=function(event,n){n();this.setState({showMenu:!this.state.showMenu});event.stopPropagation()};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu4=function(){return!this.$ComposerVideoAdBreakAdminPreviewMenu10()};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu10=function(){if(this.props.videoID)return this.props.videoID;if(this.props.uploadVideoID)return this.props.uploadVideoID;return null};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu11=function(){var n=[];if(!this.props.adBreaksDisabled)n=this.props.insertedAdBreaks.map(function(o){return Math.round(o.timeOffset*c("DateConsts").MS_PER_SEC)});return n};f.exports=m}),null);
__d("ComposerVideoAdBreaksTabAdvancedSettings.react",["ix","cx","fbt","Image.react","React","XUICardSection.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.state={expanded:false}}m.prototype.render=function(){var n=this.state.expanded?h("127423"):h("127393");return c("React").createElement("div",null,c("React").createElement(c("XUICardSection.react"),{className:"_489l",onClick:this.onClickHeader.bind(this)},c("React").createElement(c("XUIText.react"),{className:"_3-9a"},j._("ADVANCED SETTINGS")),c("React").createElement(c("Image.react"),{className:"_3-9a",src:n}),c("React").createElement("div",{className:"_636m"},this.props.secondary)),c("React").createElement("div",{className:"_438h"+(!this.state.expanded?" _489q":"")},this.props.children))};m.prototype.onClickHeader=function(){this.setState({expanded:!this.state.expanded})};f.exports=m}),null);
__d("ComposerVideoAdBreakInsertionDisabledView.react",["ix","cx","Image.react","React","XUIGrayText.react","XUIText.react","asset"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_1_hd"},c("React").createElement("div",{className:"_29_0"},c("React").createElement(c("Image.react"),{src:h("401154")}),c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold",className:"_3-9a"},this.props.errorMessageHeader)),c("React").createElement(c("XUIGrayText.react"),{size:"small"},this.props.errorMessageContent))};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);
__d("AdBreakOffsetEditorNuxAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LOG_VIEW:"log_view",DISMISS:"dismiss"})}),null);
__d("AdBreakOffsetSpinner.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=10;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$AdBreakOffsetSpinner1=function(){if(!this.props.disabled)this.props.onChange(this.props.value+k)}.bind(this),this.$AdBreakOffsetSpinner4=function(){if(!this.props.disabled)this.props.onChange(this.props.value-k)}.bind(this),this.$AdBreakOffsetSpinner2=function(){!this.props.disabled&&this.props.onFocus&&this.props.onFocus()}.bind(this),this.$AdBreakOffsetSpinner3=function(){!this.props.disabled&&this.props.onBlur&&this.props.onBlur()}.bind(this),n}l.prototype.render=function(){var m=this.props.disabled;return c("React").createElement("div",{className:"_3etf"},c("React").createElement("div",{className:(!m?"_2yv_":"")+(m?" _62dv":""),onMouseDown:this.$AdBreakOffsetSpinner1,onFocus:this.$AdBreakOffsetSpinner2,onBlur:this.$AdBreakOffsetSpinner3}),c("React").createElement("div",{className:(!m?"_2yw0":"")+(m?" _62dw":""),onMouseDown:this.$AdBreakOffsetSpinner4,onFocus:this.$AdBreakOffsetSpinner2,onBlur:this.$AdBreakOffsetSpinner3}))};f.exports=l}),null);
__d("XAdBreakOffsetEditorNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/instream_ads/ads_insertion/editor_nux/",{action:{type:"Enum",required:true,enumType:1}})}),null);
__d("ComposerVideoAdBreakInsertionSection.react",["cx","fbt","AdBreakOffsetEditorNuxAction","AdBreakOffsetSpinner.react","AsyncRequest","ComposerVideoUploadSection.react","DateConsts","React","Tooltip.react","VideoInstreamAdsConstants","VideoInstreamUtils","XAdBreakOffsetEditorNuxController","XUIAmbientNUX.react","XUIButton.react","XUIGrayText.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=1e5;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(n){__p&&__p();k.constructor.call(this,n);this.$ComposerVideoAdBreakInsertionSection4=function(event){this.setState({isInputtingCurrentAdBreak:true});this.props.onSetCurrentAdBreak(this.props.currentOffset,true,true)}.bind(this);this.$ComposerVideoAdBreakInsertionSection5=function(event){this.setState({isInputtingCurrentAdBreak:false});this.props.onSetCurrentAdBreak(this.props.currentOffset,false,false)}.bind(this);this.$ComposerVideoAdBreakInsertionSection6=function(event){var o=c("VideoInstreamUtils").convertFormattedTimeToSeconds(event.target.value);this.setState({value:event.target.value});if(o!==null){this.setState({currentTime:o});if(this.state.isInputtingCurrentAdBreak)this.props.onSetCurrentAdBreak(o,true,true)}}.bind(this);this.$ComposerVideoAdBreakInsertionSection8=function(o){var p=o/c("DateConsts").MS_PER_SEC;this.props.onSetCurrentAdBreak(p,true,true)}.bind(this);this.$ComposerVideoAdBreakInsertionSection12=function(){this.props.onInsertAdBreak&&this.props.onInsertAdBreak()}.bind(this);this.$ComposerVideoAdBreakInsertionSection13=function(){var o=c("XAdBreakOffsetEditorNuxController").getURIBuilder().setEnum("action",c("AdBreakOffsetEditorNuxAction").DISMISS).getURI();new(c("AsyncRequest"))().setMethod("POST").setURI(o).send();this.setState({showAdBreakOffsetEditorNux:false})}.bind(this);this.state={currentTime:0,value:"00:00.000",showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,isInputtingCurrentAdBreak:false}}m.prototype.componentWillReceiveProps=function(n){if(n.currentOffset!==null&&!this.state.isInputtingCurrentAdBreak)this.setState({currentTime:n.currentOffset,value:c("VideoInstreamUtils").convertTimestampToFormattedString(n.currentOffset)})};m.prototype.componentDidMount=function(){if(this.state.showAdBreakOffsetEditorNux)this.$ComposerVideoAdBreakInsertionSection1()};m.prototype.$ComposerVideoAdBreakInsertionSection2=function(){var n=c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration);return c("React").createElement(c("XUIGrayText.react"),{size:"small",display:"block"},i._({"*":"This video can have {number} ad breaks placed within the highlighted area of the video preview. Enter the time for each break.","_1":"This video can have 1 ad break placed within the highlighted area of the video preview. Enter the time for each break."},[i.plural(n,"number")]))};m.prototype.$ComposerVideoAdBreakInsertionSection3=function(){return c("React").createElement("div",{className:"_3-8x"},c("React").createElement("div",{className:"_4yj6"},c("React").createElement(c("XUITextInput.react"),{className:"_19jl",disabled:this.props.isPreviewingAdBreak,height:"short",placeholder:i._("00:00.000"),value:this.state.value,onFocus:this.$ComposerVideoAdBreakInsertionSection4,onBlur:this.$ComposerVideoAdBreakInsertionSection5,onChange:this.$ComposerVideoAdBreakInsertionSection6,onDownArrow:this.$ComposerVideoAdBreakInsertionSection7.bind(this,-10/c("DateConsts").MS_PER_SEC),onUpArrow:this.$ComposerVideoAdBreakInsertionSection7.bind(this,10/c("DateConsts").MS_PER_SEC)}),c("React").createElement("div",{className:"_4yj7",ref:"ad_break_offset_editor_nux"},c("React").createElement(c("AdBreakOffsetSpinner.react"),{disabled:this.props.isPreviewingAdBreak,onChange:this.$ComposerVideoAdBreakInsertionSection8,value:this.state.currentTime*c("DateConsts").MS_PER_SEC}))),this.$ComposerVideoAdBreakInsertionSection9(),c("React").createElement(c("Tooltip.react"),{alignH:"right",tooltip:this.$ComposerVideoAdBreakInsertionSection10(),position:"right"},c("React").createElement(c("XUIButton.react"),{className:"_gq_",disabled:this.$ComposerVideoAdBreakInsertionSection11(),label:i._("Add"),labelIsHidden:false,onClick:this.$ComposerVideoAdBreakInsertionSection12,type:"button"})))};m.prototype.$ComposerVideoAdBreakInsertionSection9=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.ad_break_offset_editor_nux}.bind(this),shown:this.state.showAdBreakOffsetEditorNux,position:"above",width:"custom",customwidth:300,onCloseButtonClick:this.$ComposerVideoAdBreakInsertionSection13},i._("Adjust the timing of your ad breaks more accurately. You can also use your keyboard's up and down arrow keys."))};m.prototype.render=function(){if(this.props.hidden)return null;return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Place Ad Breaks"),tooltip:i._({"*":{"*":"Ad breaks can be placed after the first {start time offset} seconds and must be at least {insertion interval} minutes apart. When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."}},[i.param("start time offset",c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC,[0]),i.param("insertion interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])])},c("React").createElement("div",{className:"_19jk"},this.$ComposerVideoAdBreakInsertionSection2(),this.$ComposerVideoAdBreakInsertionSection3()))};m.prototype.$ComposerVideoAdBreakInsertionSection7=function(n){if(this.props.isPreviewingAdBreak)return;var o=this.props.currentOffset+n;o=Math.max(o,0);o=Math.min(o,this.props.videoDuration);o=Math.round(o*l)/l;this.setState({currentTime:o,value:c("VideoInstreamUtils").convertTimestampToFormattedString(o)});this.props.onSetCurrentAdBreak(o,true,true)};m.prototype.$ComposerVideoAdBreakInsertionSection11=function(){return this.props.isPreviewingAdBreak||!c("VideoInstreamUtils").isInEligibleTimeSegments(this.state.currentTime,this.props.videoDuration,this.props.insertedAdBreaks)};m.prototype.$ComposerVideoAdBreakInsertionSection10=function(){__p&&__p();if(this.props.isPreviewingAdBreak)return null;var n=c("VideoInstreamUtils").getEligibleTimeSegments(this.props.insertedAdBreaks,this.props.videoDuration);if(n.length===0){var o=c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration);if(o>this.props.insertedAdBreaks.length)return i._({"*":"Ad breaks need to be at least {interval} minutes apart. Based on where you've placed your current ad breaks, there isn't space for another one."},[i.param("interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])]);return i._("You've reached your ad break limit for this video.")}var p=c("VideoInstreamUtils").isInEligibleTimeSegments(this.state.currentTime,this.props.videoDuration,this.props.insertedAdBreaks);if(p)return null;var q=c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC;if(this.state.currentTime<q)return i._({"*":"Ad breaks cannot be placed in the first {start time offset} seconds."},[i.param("start time offset",q,[0])]);var r=c("VideoInstreamAdsConstants").AD_INSERTION_END_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC;if(this.state.currentTime>this.props.videoDuration-r)return i._({"*":"Ad breaks cannot be placed in the last {end time offset} seconds."},[i.param("end time offset",r,[0])]);return i._({"*":"Ad breaks cannot be placed less than {insertion interval} minutes apart."},[i.param("insertion interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])])};m.prototype.$ComposerVideoAdBreakInsertionSection1=function(){var n=c("XAdBreakOffsetEditorNuxController").getURIBuilder().setEnum("action",c("AdBreakOffsetEditorNuxAction").LOG_VIEW).getURI();new(c("AsyncRequest"))().setMethod("POST").setURI(n).send()};m.defaultProps={showAdBreakOffsetEditorNux:false};f.exports=m}),null);
__d("ComposerVideoAdBreakPageOnboardingSection.react",["cx","fbt","AdBreakPageOnboardingConstants","AdBreakPageOnboardingType","AdBreakPageOnboardingTypedLogger","ComposerVideoUploadSection.react","React","XAdBreakPageOnboardingController","XUIButton.react","XUIGrayText.react","goURI"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$ComposerVideoAdBreakPageOnboardingSection1=function(){new(c("AdBreakPageOnboardingTypedLogger"))().setPageID(this.props.creatorID).setAdBreakPageOnboardingEventType(c("AdBreakPageOnboardingType").COMPOSER_ENTRY_POINT).log();var r=c("XAdBreakPageOnboardingController").getURIBuilder().setFBID("creator_id",this.props.creatorID).setEnum("entrypoint",c("AdBreakPageOnboardingConstants").FROM_COMPOSER).getURI();c("goURI")(r,true)}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Earn Money With Ads")},c("React").createElement(c("XUIGrayText.react"),{size:"small",display:"block"},i._("Set up ad breaks to start earning money from your videos. You can choose when to start each break, which pauses your video so that a short ad can play.")),c("React").createElement(c("XUIButton.react"),{className:"_3oop _3-8x _3-95",onClick:this.$ComposerVideoAdBreakPageOnboardingSection1,label:i._("Get Started"),type:"button"}))};f.exports=l}),null);
__d("ComposerVideoGeneralPlayer.react",["cx","AsyncRequest","EventListener","React","ReactDOM","VideoData","XVideoDataController","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){__p&&__p();j.constructor.call(this,l);this.$ComposerVideoGeneralPlayer4=function(m){var n=new(c("VideoData"))(JSON.parse(m.payload.responseText)),o=n.hasHD()?n.getPlayableSrcHD():n.getPlayableSrcSD();if(!o){this.$ComposerVideoGeneralPlayer5();return}this.setState({videoUrl:o})}.bind(this);this.$ComposerVideoGeneralPlayer5=function(){this.setState({hasError:true,videoLoaded:false})}.bind(this);this.$ComposerVideoGeneralPlayer3=function(){this.setState({videoLoaded:true})}.bind(this);this.state=this.$ComposerVideoGeneralPlayer1()}k.prototype.$ComposerVideoGeneralPlayer1=function(){var l=null;if(this.props.videoFile)l=this.$ComposerVideoGeneralPlayer2(this.props.videoFile);return{hasError:false,videoLoaded:false,videoUrl:l}};k.prototype.componentDidMount=function(){c("EventListener").listen(c("ReactDOM").findDOMNode(this.refs.preview),"loadeddata",this.$ComposerVideoGeneralPlayer3);if(!this.state.videoUrl&&this.props.videoID){var l=c("XVideoDataController").getURIBuilder().setString("video_id",this.props.videoID).getURI();new(c("AsyncRequest"))().setMethod("GET").setURI(l).setReadOnly(true).setOption("suppressEvaluation",true).setAllowCrossPageTransition(true).setHandler(this.$ComposerVideoGeneralPlayer4).setErrorHandler(this.$ComposerVideoGeneralPlayer5).send()}};k.prototype.render=function(){var l=this.props.defaultMuted!==null?this.props.defaultMuted:true;return c("React").createElement("div",null,c("React").createElement("video",{ref:"preview",crossOrigin:"anonymous",className:c("joinClasses")(this.props.className,"_5rm1"),src:this.state.videoUrl,muted:l}))};k.prototype.$ComposerVideoGeneralPlayer2=function(l){if(l&&b.URL&&b.URL.createObjectURL)return b.URL.createObjectURL(l);else return null};f.exports=k}),null);
__d("ComposerVideoAdBreakPreviewContainer.react",["cx","fbt","CenteredContainer.react","ComposerVideoGeneralPlayer.react","DateConsts","EmbeddedVideoControls.react","EventListener","InstreamPlacement","InstreamVideoAdBreak","React","ReactDOM","SubscriptionsHandler","VideoComponentClickPlayPause.react","VideoComponentCommercialBreakStartingIndicator.react","VideoComponentCommercialBreakVideoAdOverlay.react","VideoComponentCommercialBreakVodTransitionOverlay.react","VideoComponentContextMenu.react","VideoComponentEmbeddedControls.react","VideoComponentScrubberPreview.react","VideoComponentVodWithCommercialBreak.react","VideoComponentWithCommercialBreak.react","VideoComponentWithInstreamVideo.react","VideoComponentWithSpacePlayPause.react","VideoData","VideoFrameBuffer","VideoPlayer.react","VideoPlayerMetaData","VideoPlayerOrigins","VideoPlayerReactExperiments","VideoPlayerReason","XUISpinner.react","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=3e3,m=.5,n=false,o=60,p=60,q=1e6,r=.001;j=babelHelpers.inherits(s,c("React").Component);k=j&&j.prototype;function s(t){__p&&__p();k.constructor.call(this,t);this.$ComposerVideoAdBreakPreviewContainer16=function(){if(this.$ComposerVideoAdBreakPreviewContainer12){var u=this.$ComposerVideoAdBreakPreviewContainer12.videoHeight,v=this.$ComposerVideoAdBreakPreviewContainer12.videoWidth,w={video_id:"",original_height:u,original_width:v,aspect_ratio:v/u,sd_src:this.$ComposerVideoAdBreakPreviewContainer14,stream_type:"progressive",player_version_overwrite:"pleasantville"};this.setState({videoData:new(c("VideoData"))(w)})}}.bind(this);this.$ComposerVideoAdBreakPreviewContainer18=function(){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer4>=this.$ComposerVideoAdBreakPreviewContainer3.length){this.$ComposerVideoAdBreakPreviewContainer4=0;return}var u=document.createElement("canvas");u.width=p;u.height=o;var v=new(c("VideoFrameBuffer"))(u,this.$ComposerVideoAdBreakPreviewContainer10,"cover");v.updateFrameBuffer();this.$ComposerVideoAdBreakPreviewContainer3[this.$ComposerVideoAdBreakPreviewContainer4].thumbnailURL=u.toDataURL("image/jpeg");this.$ComposerVideoAdBreakPreviewContainer4+=1;this.$ComposerVideoAdBreakPreviewContainer20()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer17=function(){__p&&__p();if(!this.$ComposerVideoAdBreakPreviewContainer11)throw new Error("_setup must be called after video is mounted.");this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"timeupdate",function(){if(this.$ComposerVideoAdBreakPreviewContainer11.currentTime!==this.state.position)this.props.onSetCurrentAdBreak(this.$ComposerVideoAdBreakPreviewContainer11.currentTime,false,false);this.setState({position:this.$ComposerVideoAdBreakPreviewContainer11.currentTime});this.$ComposerVideoAdBreakPreviewContainer29(this.$ComposerVideoAdBreakPreviewContainer11.currentTime)}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"progress",function(){this.setState({buffered:this.$ComposerVideoAdBreakPreviewContainer11.buffered.end(0)})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"ended",function(){this.setState({playing:false})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"pause",function(){this.setState({playing:false})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"play",function(){this.setState({playing:true})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"volumechange",function(){this.setState({muted:this.$ComposerVideoAdBreakPreviewContainer11.muted})}.bind(this)));this.setState({duration:this.$ComposerVideoAdBreakPreviewContainer11.duration});this.props.onSetVideoDuration(this.$ComposerVideoAdBreakPreviewContainer11.duration)}.bind(this);this.$ComposerVideoAdBreakPreviewContainer25=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.play()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer24=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.pause()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer26=function(u){if(this.$ComposerVideoAdBreakPreviewContainer11){this.$ComposerVideoAdBreakPreviewContainer11.currentTime=u;this.setState({position:this.$ComposerVideoAdBreakPreviewContainer11.currentTime});var v=Math.round(u*q)/q;this.props.onSetCurrentAdBreak(v,false,!this.state.playing)}}.bind(this);this.$ComposerVideoAdBreakPreviewContainer27=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.muted=!this.state.muted}.bind(this);this.$ComposerVideoAdBreakPreviewContainer28=function(u){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.volume=u}.bind(this);this.$ComposerVideoAdBreakPreviewContainer3=[];this.$ComposerVideoAdBreakPreviewContainer4=0;this.$ComposerVideoAdBreakPreviewContainer5=[];this.$ComposerVideoAdBreakPreviewContainer7=false;this.$ComposerVideoAdBreakPreviewContainer9=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer;if(this.$ComposerVideoAdBreakPreviewContainer9){this.$ComposerVideoAdBreakPreviewContainer1=this.$ComposerVideoAdBreakPreviewContainer15(this.props.insertedAdBreaks,this.props.isAdBreakDisabled);if(this.props.videoFile)this.$ComposerVideoAdBreakPreviewContainer14=b.URL.createObjectURL(this.props.videoFile)}this.state={buffered:0,duration:0,hasScheduledToShowAdPreview:false,muted:n,playAdPreview:false,playing:false,position:0,videoData:null}}s.prototype.componentDidMount=function(){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer9)if(this.props.videoID)c("VideoPlayerMetaData").genVideoData(this.props.videoID).then(function(t){return this.setState({videoData:t})}.bind(this)).done();else this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer12,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer16));else{this.$ComposerVideoAdBreakPreviewContainer11=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer13.refs.preview);this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer17))}this.$ComposerVideoAdBreakPreviewContainer10=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer6.refs.preview);if(this.$ComposerVideoAdBreakPreviewContainer10)this.$ComposerVideoAdBreakPreviewContainer8=c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer10,"seeked",this.$ComposerVideoAdBreakPreviewContainer18)};s.prototype.componentDidUpdate=function(t,u){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer13&&!this.$ComposerVideoAdBreakPreviewContainer11){this.$ComposerVideoAdBreakPreviewContainer11=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer13.refs.video);this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer17));if(this.$ComposerVideoAdBreakPreviewContainer9&&!this.$ComposerVideoAdBreakPreviewContainer2){this.$ComposerVideoAdBreakPreviewContainer2=new(c("SubscriptionsHandler"))();this.$ComposerVideoAdBreakPreviewContainer2.addSubscriptions(this.$ComposerVideoAdBreakPreviewContainer13.vpc.addListener("commercialBreak/vodBreakStarting",function(){if(!this.props.isPreviewingAdBreak)this.props.onSetIsPreviewingAdBreak(true)}.bind(this)),this.$ComposerVideoAdBreakPreviewContainer13.vpc.addListener("playRequested",function(v){if(this.props.isPreviewingAdBreak&&v===c("VideoPlayerReason").COMMERCIAL_BREAK)this.props.onSetIsPreviewingAdBreak(false)}.bind(this)))}}};s.prototype.componentWillReceiveProps=function(t){__p&&__p();if(t.shouldUpdateVideoPosition){var u=t.currentAdBreak;if(this.$ComposerVideoAdBreakPreviewContainer11&&u!==null&&u!==undefined){this.$ComposerVideoAdBreakPreviewContainer11.pause();if(!t.shouldPauseVideo)this.$ComposerVideoAdBreakPreviewContainer11.play();this.$ComposerVideoAdBreakPreviewContainer11.currentTime=u}}var v=t.insertedAdBreaks;this.$ComposerVideoAdBreakPreviewContainer1=this.$ComposerVideoAdBreakPreviewContainer15(v,t.isAdBreakDisabled);if(this.$ComposerVideoAdBreakPreviewContainer10&&v!==null&&v!==undefined){this.$ComposerVideoAdBreakPreviewContainer19(v);if(!this.$ComposerVideoAdBreakPreviewContainer7)this.$ComposerVideoAdBreakPreviewContainer20()}};s.prototype.componentWillUnmount=function(){this.$ComposerVideoAdBreakPreviewContainer5.forEach(function(event){return event.remove()});if(this.$ComposerVideoAdBreakPreviewContainer8)this.$ComposerVideoAdBreakPreviewContainer8.remove();if(this.$ComposerVideoAdBreakPreviewContainer2)this.$ComposerVideoAdBreakPreviewContainer2.release()};s.prototype.render=function(){return c("React").createElement(c("CenteredContainer.react"),{className:"_5w5i",vertical:true},this.$ComposerVideoAdBreakPreviewContainer9?this.$ComposerVideoAdBreakPreviewContainer21():this.$ComposerVideoAdBreakPreviewContainer22())};s.prototype.$ComposerVideoAdBreakPreviewContainer22=function(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_3d4u"+(!this.state.playAdPreview?" _bfe":"")},c("React").createElement("text",{className:"_bfg"},i._("Your 15 sec ad break will occur here"))),c("React").createElement(c("ComposerVideoGeneralPlayer.react"),{ref:function(t){this.$ComposerVideoAdBreakPreviewContainer13=t}.bind(this),videoFile:this.props.videoFile,videoID:this.props.videoID,defaultMuted:n}),this.$ComposerVideoAdBreakPreviewContainer23(),c("React").createElement(c("EmbeddedVideoControls.react"),{allowFullscreen:false,allowEnqueuing:false,areHLSActive:false,areSubtitlesActive:false,bufferedPosition:this.state.buffered,doesFullscreenEnterTahoe:false,displayElapsedTime:true,displayMilliseconds:true,finishedPlaying:false,hasHD:false,hasScrubberPreview:false,hasSubtitles:false,hasWatchAndScroll:false,hidden:this.state.playAdPreview,hidePlaybackControl:false,hidePlaybackScrubber:false,hideRemainingTime:false,hideSettings:true,insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isCommercialBreak:false,isEmbedded:false,isFullscreen:false,isHD:false,isInline:true,isLive:false,isSphericalVideo:false,isMuted:this.state.muted,isPlaying:this.state.playing,isSidePaneOpen:false,isSlidingWNSEligible:false,onEnterTahoe:c("emptyFunction"),onEnterWatchAndScroll:c("emptyFunction"),onPause:this.$ComposerVideoAdBreakPreviewContainer24,onPlay:this.$ComposerVideoAdBreakPreviewContainer25,onScrubBegin:c("emptyFunction"),onScrubEnd:this.$ComposerVideoAdBreakPreviewContainer26,onSeek:c("emptyFunction"),onSettingsNUXClose:c("emptyFunction"),onToggleFullscreen:c("emptyFunction"),onToggleHD:c("emptyFunction"),onToggleHLS:c("emptyFunction"),onToggleMuted:this.$ComposerVideoAdBreakPreviewContainer27,onToggleSubtitles:c("emptyFunction"),onVolumeChange:this.$ComposerVideoAdBreakPreviewContainer28,onEnqueueVideo:c("emptyFunction"),permalinkURL:"",playbackDuration:this.state.duration,playbackPosition:this.state.position,previewThumbnailInformation:{},scrubberPreviewSprites:{},volume:this.$ComposerVideoAdBreakPreviewContainer11?this.$ComposerVideoAdBreakPreviewContainer11.volume:0}))};s.prototype.$ComposerVideoAdBreakPreviewContainer21=function(){var t=this.state.videoData;return c("React").createElement("div",null,!t&&!this.props.videoID&&c("React").createElement("video",{className:"_3iej",ref:function(u){this.$ComposerVideoAdBreakPreviewContainer12=u}.bind(this),src:this.$ComposerVideoAdBreakPreviewContainer14}),!t?c("React").createElement(c("XUISpinner.react"),{background:"light",size:"large"}):c("React").createElement(c("VideoPlayer.react"),{ref:function(u){this.$ComposerVideoAdBreakPreviewContainer13=u}.bind(this),className:"_5rm1",videoData:t,playerOrigin:c("VideoPlayerOrigins").COMPOSER,height:284,width:465,autoplay:false},c("React").createElement(c("VideoComponentEmbeddedControls.react"),{adBreaks:{insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isPreviewingAdBreak:this.props.isPreviewingAdBreak},displayElapsedTime:true,displayMilliseconds:true,showFullscreenButton:false,showSettingsButton:false}),c("React").createElement(c("VideoComponentContextMenu.react"),null),c("React").createElement(c("VideoComponentClickPlayPause.react"),null),c("React").createElement(c("VideoComponentWithSpacePlayPause.react"),null),c("React").createElement(c("VideoComponentScrubberPreview.react"),null),c("React").createElement(c("VideoComponentWithInstreamVideo.react"),{shouldUsePreviewConfig:true,thumbnailURLForPreview:this.props.thumbnailURLForPreview}),c("React").createElement(c("VideoComponentWithCommercialBreak.react"),null),c("React").createElement(c("VideoComponentVodWithCommercialBreak.react"),{adBreaks:this.$ComposerVideoAdBreakPreviewContainer1}),c("React").createElement(c("VideoComponentCommercialBreakVideoAdOverlay.react"),{adsStopped:!this.props.isPreviewingAdBreak}),c("React").createElement(c("VideoComponentCommercialBreakVodTransitionOverlay.react"),null),c("React").createElement(c("VideoComponentCommercialBreakStartingIndicator.react"),{adsStopped:!this.props.isPreviewingAdBreak})),this.$ComposerVideoAdBreakPreviewContainer23())};s.prototype.$ComposerVideoAdBreakPreviewContainer23=function(){return c("React").createElement(c("ComposerVideoGeneralPlayer.react"),{className:"_3lqa",ref:function(t){this.$ComposerVideoAdBreakPreviewContainer6=t}.bind(this),videoFile:this.props.videoFile,videoID:this.props.videoID,defaultMuted:true})};s.prototype.$ComposerVideoAdBreakPreviewContainer15=function(t,u){if(!t||u)return[];return t.map(function(v,w){return new(c("InstreamVideoAdBreak"))({instreamPlacement:c("InstreamPlacement").MID_ROLL,index:0,timeOffsetInMs:v.timeOffset*c("DateConsts").MS_PER_SEC,adBreakDurationInMs:null,adBreakAutoInsertionVersion:null,isAdBreakAutoInserted:false})})};s.prototype.$ComposerVideoAdBreakPreviewContainer19=function(t){this.$ComposerVideoAdBreakPreviewContainer3=this.$ComposerVideoAdBreakPreviewContainer3.concat(t.filter(function(u){if(u.thumbnailURL!==null)return false;this.$ComposerVideoAdBreakPreviewContainer3.forEach(function(v){if(u.timeOffset===v.timeOffset)return false;return true});return true}.bind(this)))};s.prototype.$ComposerVideoAdBreakPreviewContainer20=function(){__p&&__p();this.$ComposerVideoAdBreakPreviewContainer7=true;if(this.$ComposerVideoAdBreakPreviewContainer4>=this.$ComposerVideoAdBreakPreviewContainer3.length){if(this.$ComposerVideoAdBreakPreviewContainer3.length!==0)this.props.onSetThumbnailURLForAdBreak(this.$ComposerVideoAdBreakPreviewContainer3);this.$ComposerVideoAdBreakPreviewContainer3=[];this.$ComposerVideoAdBreakPreviewContainer7=false;this.$ComposerVideoAdBreakPreviewContainer4=0;return}this.$ComposerVideoAdBreakPreviewContainer10.currentTime=this.$ComposerVideoAdBreakPreviewContainer3[this.$ComposerVideoAdBreakPreviewContainer4].timeOffset};s.prototype.$ComposerVideoAdBreakPreviewContainer29=function(t){__p&&__p();if(!this.$ComposerVideoAdBreakPreviewContainer11||!this.props.insertedAdBreaks||this.props.isAdBreakDisabled||this.$ComposerVideoAdBreakPreviewContainer9)return;this.props.insertedAdBreaks.forEach(function(u){__p&&__p();if(u.timeOffset<=t||u.timeOffset-t>=m||this.state.hasScheduledToShowAdPreview)return;this.setState({hasScheduledToShowAdPreview:true});setTimeout(function(){this.$ComposerVideoAdBreakPreviewContainer11.pause();this.setState({playAdPreview:true});setTimeout(function(){this.setState({playAdPreview:false,hasScheduledToShowAdPreview:false});this.$ComposerVideoAdBreakPreviewContainer11.currentTime=u.timeOffset+r;this.$ComposerVideoAdBreakPreviewContainer11.play()}.bind(this),l)}.bind(this),(u.timeOffset-t)*c("DateConsts").MS_PER_SEC)}.bind(this))};f.exports=s}),null);
__d("ComposerVideoAdBreak.react",["ix","cx","fbt","Image.react","React","Tooltip.react","VideoInstreamAdsConstants","VideoInstreamUtils","VideoPlayerReactExperiments","XUIButton.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;function m(o){if(c("VideoInstreamAdsConstants").IS_INSERTION_RULE_V2_LAUNCHED&&o.isAdBreakViolatingInsertionRules)return c("React").createElement("div",{className:"_4gs3"},c("React").createElement(c("Tooltip.react"),{tooltip:c("React").createElement("div",{style:{maxWidth:"200px"}},j._("The placement of this ad break is not eligible for monetization."))},c("React").createElement(c("Image.react"),{src:h("117758")})));return null}k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.render=function(){"use strict";var o=c("VideoInstreamUtils").convertTimestampToFormattedString(this.props.adBreak.timeOffset),p=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer,q=this.props.currentPreviewIndex!==null,r=this.props.currentPreviewIndex===this.props.index;return c("React").createElement("div",{className:"_5r95"+(q&&!r?" _3bbq":"")},c("React").createElement("div",{className:"_4gs4"},c("React").createElement(c("XUIButton.react"),{className:"_9gb"+(q?" _3bbq":""),label:this.props.index+1,type:"button",onClick:this.props.onDeleteClick.bind(this,this.props.index)}),c("React").createElement(c("XUIText.react"),{size:"medium",className:"_5r97"},o)),c("React").createElement("div",{className:"_4gs4"},c("React").createElement(m,{isAdBreakViolatingInsertionRules:this.props.isAdBreakViolatingInsertionRules}),c("React").createElement("div",{className:"_2f48",onClick:this.props.onPreviewClick.bind(this,this.props.index),role:"presentation"},c("React").createElement("div",{className:p?"_41gm":""},c("React").createElement("div",{className:p&&!r?"_41gn":""}),c("React").createElement("div",{className:p&&r?"_41go":""})),c("React").createElement(c("Image.react"),{className:"_5r96",src:this.props.adBreak.thumbnailURL}))))};function n(){"use strict";k.apply(this,arguments)}f.exports=n}),null);
__d("ComposerVideoAdBreakThumbnailsPreviewSection.react",["cx","fbt","BUISwitch.react","ComposerVideoAdBreak.react","LayerFadeOnHide","React","ReactDOM","VideoInstreamUtils","VideoPlayerReactExperiments","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogConfirmButton.react","XUIDialogTitle.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer?7:3,m=1;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){"use strict";__p&&__p();k.constructor.call(this,o);this.$ComposerVideoAdBreakThumbnailsPreviewSection4=function(p,event){event.stopPropagation();this.props.onDeleteAdBreak(p)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection5=function(p){if(this.props.isPreviewingAdBreak&&p===this.state.currentPreviewIndex){this.props.onSetIsPreviewingAdBreak(false);this.setState({currentPreviewIndex:null});return}var q=this.props.insertedAdBreaks[p];this.props.onSetCurrentAdBreak(q.timeOffset-l,true,false);this.setState({currentPreviewIndex:p});this.props.onSetIsPreviewingAdBreak(c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection9=function(p){if(!p)this.setState({showDisableAdBreaksDialog:true});else this.props.onUpdateAdBreaksStatus(!p)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection8=function(p){this.setState({showDisableAdBreaksDialog:p})}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection7=function(){this.props.onUpdateAdBreaksStatus(!this.props.adBreaksDisabled);this.setState({showDisableAdBreaksDialog:false})}.bind(this);this.state={currentPreviewIndex:null,showDisableAdBreaksDialog:false}}n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection3=function(){"use strict";this.$ComposerVideoAdBreakThumbnailsPreviewSection2=null;var o=this.props.isPreviewingAdBreak?this.state.currentPreviewIndex:null,p=this.props.insertedAdBreaks.map(function(q,r){var s=this.props.lastInsertedAdBreak!==null&&this.props.lastInsertedAdBreak!==undefined&&this.props.lastInsertedAdBreak.timeOffset===q.timeOffset;return c("React").createElement(c("ComposerVideoAdBreak.react"),{key:r,adBreak:q,currentPreviewIndex:o,index:r,isAdBreakViolatingInsertionRules:c("VideoInstreamUtils").isAdBreakViolatingInsertionRules(this.props.insertedAdBreaks,r,this.props.videoDuration),onDeleteClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection4,onPreviewClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection5,ref:function(t){if(s)this.$ComposerVideoAdBreakThumbnailsPreviewSection2=c("ReactDOM").findDOMNode(t)}.bind(this)})}.bind(this));return p};n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection6=function(){"use strict";if(!this.state.showDisableAdBreaksDialog)return null;if(!this.props.adBreaksExperimentMetadata||!this.props.adBreaksExperimentMetadata.isEligibleCreator||this.props.adBreaksExperimentMetadata.isExpired||!this.props.adBreaksExperimentEnabled){this.$ComposerVideoAdBreakThumbnailsPreviewSection7();return null}return c("React").createElement(c("XUIDialog.react"),{causalElementRef:function(){return this.refs.toggle}.bind(this),shown:this.state.showDisableAdBreaksDialog,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},width:645,onToggle:this.$ComposerVideoAdBreakThumbnailsPreviewSection8},c("React").createElement(c("XUIDialogTitle.react"),null,c("React").createElement("span",null,"Turn Off Ad Breaks?")),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("div",null,"If holdout testing is currently running for this video, turning off ad breaks will immediately end the holdout test and disable holdout testing permanently for this video.")),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogCancelButton.react"),null),c("React").createElement(c("XUIDialogConfirmButton.react"),{action:"confirm",use:"confirm",onClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection7})))};n.prototype.componentDidUpdate=function(){"use strict";var o=this.$ComposerVideoAdBreakThumbnailsPreviewSection1,p=this.$ComposerVideoAdBreakThumbnailsPreviewSection2;if(o!==null&&o!==undefined&&p!==null&&p!==undefined)o.scrollTop=p.offsetTop};n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection10=function(){"use strict";__p&&__p();var o=this.props,p=o.currentOffset,q=o.insertedAdBreaks;if(!p||!q)return null;for(var r=0;r<q.length;r++){var s=q[r].timeOffset;if(p>=s-l&&p<=s+m)return r}return null};n.prototype.componentWillUpdate=function(o,p){"use strict";if(!o.isPreviewingAdBreak){if(this.state.currentPreviewIndex!==null&&p.currentPreviewIndex!==null)this.setState({currentPreviewIndex:null})}else if(this.state.currentPreviewIndex===null&&p.currentPreviewIndex===null)this.setState({currentPreviewIndex:this.$ComposerVideoAdBreakThumbnailsPreviewSection10()})};n.prototype.render=function(){"use strict";if(this.props.hidden||this.props.insertedAdBreaks.length===0)return null;return c("React").createElement("div",{className:"_5r94 _1_hd",ref:function(o){return this.$ComposerVideoAdBreakThumbnailsPreviewSection1=o}.bind(this)},c("React").createElement("div",{className:"_3-95"},c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},i._("Ad Breaks")),c("React").createElement("div",{className:"_3bbp _3-8_"},c("React").createElement(c("BUISwitch.react"),{value:!this.props.adBreaksDisabled,onToggle:this.$ComposerVideoAdBreakThumbnailsPreviewSection9,disabled:this.props.isPreviewingAdBreak,ref:"toggle"})),this.$ComposerVideoAdBreakThumbnailsPreviewSection6()),c("React").createElement("div",{className:this.props.adBreaksDisabled?"_3bbq":""},this.$ComposerVideoAdBreakThumbnailsPreviewSection3()))};f.exports=n}),null);
__d("ComposerVideoAdBreakVideoRightsSection.react",["cx","fbt","ComposerVideoUploadSection.react","React","XUIButton.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Content Ownership Rights")},c("React").createElement(c("XUIGrayText.react"),{size:"small",display:"block"},i._("To include ad breaks, you agree that you have the rights to use all of the content in your video.")),c("React").createElement(c("XUIButton.react"),{className:"_3oop _3-8x _3-95",label:i._("I Agree"),labelIsHidden:false,onClick:this.props.onAgree,type:"button"}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoInstreamAdsBlockListSettings.react",["cx","fbt","ComposerVideoUploadTooltip.react","PagesSettingsInstreamAdsBlockListContainer","React","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=c("React").createElement("div",{className:"_46v-"},c("React").createElement("div",{className:"_46w0"},c("React").createElement(c("XUIText.react"),null,i._("Block Lists For Ad Breaks")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Use block lists to prevent certain types of ads from appearing in your videos. Block lists can be applied to specific videos or to all videos on your Page.")}))),n=this.props.targetIsVideoAssetId?[this.props.targetIsVideoAssetId]:[],o=c("React").createElement("div",{className:"_46v_"},c("React").createElement(c("PagesSettingsInstreamAdsBlockListContainer"),{appliable:true,currentPageId:this.props.currentPageId,targetIsVideoAssetIds:n}));return c("React").createElement("div",{className:"_46vz"},m,o)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoInstreamAdsExperimentalSection.react",["cx","fbt","AdBreakExperimentalTextUtils","AdsCurrencyFormatter","ComposerVideoUploadTooltip.react","HubbleConstants","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","Link.react","React","XPagesManagerInsightsController","XUICheckboxInput.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=1e4;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.state={experimentState:this.props.enabled,initialExperimentState:this.props.enabled};this.props.onAdBreaksEnableExperimentChange(this.props.enabled);this.props.onSetAdBreaksRevenueLoss(l)}m.prototype.render=function(){if(!this.props.metadata||!this.props.metadata.isEligibleCreator)return null;var n=c("React").createElement("div",{className:"_46v-"},c("React").createElement("div",{className:"_46w0"},c("React").createElement(c("XUIText.react"),null,i._("Viewer Holdout Testing")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:c("AdBreakExperimentalTextUtils").getHoldoutToolTipContentForVideo()}))),o=c("React").createElement("div",{className:"_46v_"},this.$ComposerVideoInstreamAdsExperimentalSection1());return c("React").createElement("div",{className:"_46vz"},n,o)};m.prototype.$ComposerVideoInstreamAdsExperimentalSection1=function(){if(this.props.metadata.isExpired)return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Test results are available in your")),c("React").createElement(c("Link.react"),{className:"_1er8",href:this.$ComposerVideoInstreamAdsExperimentalSection2()},"Page's Insights."));else if(this.state.initialExperimentState&&this.props.metadata.isStarted)return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("A holdout test is in progress for this video."))),c("React").createElement("div",{className:"_1er9"},c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.experimentState,onClick:this.$ComposerVideoInstreamAdsExperimentalSection3.bind(this)}),c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Turn off test and disable holdout testing permanently for this video."))));else return c("React").createElement("div",null,c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.experimentState,onClick:this.$ComposerVideoInstreamAdsExperimentalSection4.bind(this)}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Enable holdout testing to learn how your video performs when there are ad breaks. The test will automatically turn off when the test group with ad breaks earns {revenueThreshold}.",[i.param("revenueThreshold",this.$ComposerVideoInstreamAdsExperimentalSection5(l))])))))};m.prototype.$ComposerVideoInstreamAdsExperimentalSection4=function(event){this.setState({experimentState:!this.state.experimentState});this.props.onAdBreaksEnableExperimentChange(event.target.checked)};m.prototype.$ComposerVideoInstreamAdsExperimentalSection3=function(event){this.setState({experimentState:!this.state.experimentState});this.props.onAdBreaksEnableExperimentChange(!event.target.checked)};m.prototype.$ComposerVideoInstreamAdsExperimentalSection2=function(){return c("XPagesManagerInsightsController").getURIBuilder().setString("page_token",this.props.pageId).setString("section",c("HubbleConstants").NAV_SECTIONS.AD_BREAKS).getURI()};m.prototype.$ComposerVideoInstreamAdsExperimentalSection5=function(n){return c("AdsCurrencyFormatter").formatCurrencyWithOptionalDecimals("USD",n,true)};f.exports=m}),null);
__d("ComposerVideoAdBreaksTabContainer.react",["cx","AdBreaksDemonetizationNotice.react","ComposerVideoAdBreakActions","ComposerVideoAdBreakAdminPreviewMenu.react","ComposerVideoAdBreakInsertionDisabledView.react","ComposerVideoAdBreakInsertionSection.react","ComposerVideoAdBreakPageOnboardingSection.react","ComposerVideoAdBreakPreviewContainer.react","ComposerVideoAdBreakStore","ComposerVideoAdBreakThumbnailsPreviewSection.react","ComposerVideoAdBreakVideoRightsSection.react","ComposerVideoAdBreaksTabAdvancedSettings.react","ComposerVideoInstreamAdsBlockListSettings.react","ComposerVideoInstreamAdsExperimentalSection.react","ComposerVideoUploadStore","React","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerVideoAdBreaksTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoAdBreakStore"))],statics:{calculateState:function k(l,m){var n=c("ComposerVideoAdBreakStore").getAdBreaksStatus(l),o=c("ComposerVideoAdBreakStore").getAdBreaksExperimentEnabled(l),p=c("ComposerVideoAdBreakStore").getAdBreaksExperimentRevenueLossThreshold(l),q=c("ComposerVideoAdBreakStore").getAdBreakTabState(l,m.serverSideDisabledReasons),r=c("ComposerVideoAdBreakStore").getCurrentAdBreak(l),s=c("ComposerVideoAdBreakStore").getInsertedAdBreaks(l),t=c("ComposerVideoAdBreakStore").getLastInsertedAdBreak(l),u=c("ComposerVideoAdBreakStore").getShouldDisableAdBreakInsertion(l,m.serverSideDisabledReasons),v=c("ComposerVideoAdBreakStore").getVideoDuration(l),w=c("ComposerVideoAdBreakStore").getVideoRightsAgreed(l);return{adBreaksDisabled:n,adBreaksExperimentEnabled:o,adBreaksExperimentRevenueLossThreshold:p,adBreakTabState:q,currentAdBreak:r,insertedAdBreaks:s,lastInsertedAdBreak:t,shouldDisableAdInsertionTab:u,videoDuration:v,videoRightsAgreed:w}}},propTypes:{adBreaksExperimentPublicMetadata:i.object,isDemonetized:i.bool,isEditing:i.bool.isRequired,pageId:i.string.isRequired,serverSideDisabledReasons:i.array,shouldShowPageOnboardingForAdBreak:i.bool,shown:i.bool.isRequired,showAdBreakAdminPreviewSettings:i.bool,showAdBreakOffsetEditorNux:i.bool,uploadVideoID:i.string,videoAssetID:i.string,videoFile:i.object,videoID:i.string},componentWillUpdate:function k(l,m){if(!this.state.shouldDisableAdInsertionTab&&m.shouldDisableAdInsertionTab&&this.state.isPreviewingAdBreak&&m.isPreviewingAdBreak){this._onSetIsPreviewingAdBreak(false);this.setState({shouldUpdateVideoPosition:true,shouldPauseVideo:true})}},render:function k(){return c("React").createElement("div",{className:this._shouldShowAdvancedSettings()?"_427i":""},c("React").createElement("div",{className:(!this.props.shown?"_2oq6":"")+" _19jn"},this._renderMetadataSection(),this._renderPreviewSection(),this._renderAdvancedSection()),this._renderDemonetizationNotice())},_renderMetadataSection:function k(){var l=null;if(this.props.shouldShowPageOnboardingForAdBreak)l=c("React").createElement(c("ComposerVideoAdBreakPageOnboardingSection.react"),{creatorID:this.props.pageId});else if(this.state.shouldDisableAdInsertionTab)l=c("React").createElement(c("ComposerVideoAdBreakInsertionDisabledView.react"),{errorMessageContent:this.state.adBreakTabState.errorMessageContent,errorMessageHeader:this.state.adBreakTabState.errorMessageHeader});else if(!this.state.videoRightsAgreed)l=c("React").createElement(c("ComposerVideoAdBreakVideoRightsSection.react"),{onAgree:this._onAgree});return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hc"},c("React").createElement("div",{className:"_5r7-"},l,c("React").createElement(c("ComposerVideoAdBreakInsertionSection.react"),{hidden:!this.state.videoRightsAgreed||this.state.shouldDisableAdInsertionTab||this.props.shouldShowPageOnboardingForAdBreak,insertedAdBreaks:this.state.insertedAdBreaks,isPreviewingAdBreak:this.state.isPreviewingAdBreak,videoDuration:this.state.videoDuration,currentOffset:this.state.currentAdBreak,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,onInsertAdBreak:this._onInsertAdBreak,onSetCurrentAdBreak:this._onSetCurrentAdBreak})),c("React").createElement(c("ComposerVideoAdBreakThumbnailsPreviewSection.react"),{adBreaksDisabled:this.state.adBreaksDisabled,adBreaksExperimentEnabled:this.state.adBreaksExperimentEnabled,adBreaksExperimentMetadata:this.props.adBreaksExperimentPublicMetadata,currentOffset:this.state.currentAdBreak,hidden:!this.state.videoRightsAgreed||this.state.shouldDisableAdInsertionTab||this.props.shouldShowPageOnboardingForAdBreak,insertedAdBreaks:this.state.insertedAdBreaks,isPreviewingAdBreak:this.state.isPreviewingAdBreak,lastInsertedAdBreak:this.state.lastInsertedAdBreak,videoDuration:this.state.videoDuration,onDeleteAdBreak:this._onDeleteAdBreak,onSetCurrentAdBreak:this._onSetCurrentAdBreak,onSetIsPreviewingAdBreak:this._onSetIsPreviewingAdBreak,onUpdateAdBreaksStatus:this._onUpdateAdBreaksStatus})))},_renderPreviewSection:function k(){var l=this.state.shouldDisableAdInsertionTab||this.props.shouldShowPageOnboardingForAdBreak||!this.state.videoRightsAgreed?null:this.state.insertedAdBreaks,m=c("ComposerVideoUploadStore").getThumbnail(this.context.composerID);return c("React").createElement(c("ComposerVideoAdBreakPreviewContainer.react"),{currentAdBreak:this.state.currentAdBreak,insertedAdBreaks:l,isAdBreakDisabled:this.state.adBreaksDisabled,isPreviewingAdBreak:this.state.isPreviewingAdBreak,shouldPauseVideo:this.state.shouldPauseVideo,shouldUpdateVideoPosition:this.state.shouldUpdateVideoPosition,thumbnailURLForPreview:m&&m.getURL(),videoFile:this.props.videoFile,videoID:this.props.videoID,onSetCurrentAdBreak:this._onSetCurrentAdBreak,onSetIsPreviewingAdBreak:this._onSetIsPreviewingAdBreak,onSetThumbnailURLForAdBreak:this._onSetThumbnailURLForAdBreak,onSetVideoDuration:this._onSetVideoDuration})},_renderAdvancedSection:function k(){if(!this._shouldShowAdvancedSettings())return null;var l=null;if(this.props.showAdBreakAdminPreviewSettings)l=c("React").createElement(c("ComposerVideoAdBreakAdminPreviewMenu.react"),{adBreaksDisabled:this.state.adBreaksDisabled,insertedAdBreaks:this.state.insertedAdBreaks,uploadVideoID:this.props.uploadVideoID,videoID:this.props.videoID});return c("React").createElement(c("ComposerVideoAdBreaksTabAdvancedSettings.react"),{secondary:l},this._renderAdBreaksExperimentSection(),this._renderAdBreaksBlockListSection())},_renderDemonetizationNotice:function k(){if(!this._shouldShowDemonetizationNotice())return null;return c("React").createElement(c("AdBreaksDemonetizationNotice.react"),{isHidden:!this.props.shown})},_renderAdBreaksExperimentSection:function k(){if(this.state.adBreaksDisabled||this.state.insertedAdBreaks.length===0)return null;return c("React").createElement(c("ComposerVideoInstreamAdsExperimentalSection.react"),{enabled:this.state.adBreaksExperimentEnabled,metadata:this.props.adBreaksExperimentPublicMetadata,onAdBreaksEnableExperimentChange:this._onAdBreaksEnableExperimentChange,onSetAdBreaksRevenueLoss:this._onSetAdBreaksRevenueLoss,pageId:this.props.pageId,revenueThreshold:this.state.adBreaksExperimentRevenueLossThreshold})},_renderAdBreaksBlockListSection:function k(){return c("React").createElement(c("ComposerVideoInstreamAdsBlockListSettings.react"),{currentPageId:this.props.pageId,targetIsVideoAssetId:this.props.videoAssetID?this.props.videoAssetID:this.props.videoID})},_onAgree:function k(){c("ComposerVideoAdBreakActions").setVideoRightsAgreed(this.context.composerID,true)},_onInsertAdBreak:function k(){c("ComposerVideoAdBreakActions").insertCurrentAdBreak(this.context.composerID)},_onSetCurrentAdBreak:function k(l,m,n){c("ComposerVideoAdBreakActions").setCurrentAdBreak(this.context.composerID,l);this.setState({shouldUpdateVideoPosition:m,shouldPauseVideo:n})},_onSetIsPreviewingAdBreak:function k(l){this.setState({isPreviewingAdBreak:l})},_onSetThumbnailURLForAdBreak:function k(l){c("ComposerVideoAdBreakActions").setThumbnailURLForAdBreak(this.context.composerID,l)},_onSetVideoDuration:function k(l){c("ComposerVideoAdBreakActions").setVideoDuration(this.context.composerID,l)},_onDeleteAdBreak:function k(l){c("ComposerVideoAdBreakActions").deleteAdBreak(this.context.composerID,l)},_onUpdateAdBreaksStatus:function k(l){c("ComposerVideoAdBreakActions").updateAdBreaksStatus(this.context.composerID,l)},_onAdBreaksEnableExperimentChange:function k(l){c("ComposerVideoAdBreakActions").setAdBreaksExperimentEnabled(this.context.composerID,l)},_onSetAdBreaksRevenueLoss:function k(l){c("ComposerVideoAdBreakActions").setAdBreaksExperimentRevenueLossThreshold(this.context.composerID,l)},_shouldShowDemonetizationNotice:function k(){return!!this.props.isDemonetized},_shouldShowAdvancedSettings:function k(){return!this.state.shouldDisableAdInsertionTab}});f.exports=j}),null);
__d("ComposerVideoUploadCustomLabels.react",["cx","fbt","ComposerVideoUploadTooltip.react","React","SearchableEntry","WebAsyncSearchSource","XUIText.react","XUITokenizer.react","XVideoCustomLabelsTypeaheadController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={entries:this.props.customLabels.map(function(n){return new(c("SearchableEntry"))({uniqueID:n,title:n})}),queryString:"",searchSource:this.$ComposerVideoUploadCustomLabels1.bind(this)()}}l.prototype.render=function(){var m=[],n={},o=this.state.queryString.trim();if(o){m=[new(c("SearchableEntry"))({uniqueID:o,title:o})];n[o]=o}return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},i._("Custom Labels")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Describe your videos with custom labels. Unlike content tags, custom labels are not published and only appear in insights data."),alignV:"above",alignH:"right"})),c("React").createElement(c("XUITokenizer.react"),{additionalEntries:m,disabled:!this.props.editable,entries:this.state.entries,excludedEntries:n,onQueryStringChange:this.$ComposerVideoUploadCustomLabels2.bind(this),onAddEntryAttempt:this.$ComposerVideoUploadCustomLabels3.bind(this),onRemoveEntryAttempt:this.$ComposerVideoUploadCustomLabels4.bind(this),queryString:this.state.queryString,placeholder:i._("Add a custom label (Optional)"),searchSource:this.state.searchSource,showEntriesOnFocus:true}))};l.prototype.$ComposerVideoUploadCustomLabels3=function(m){var n=this.state.entries,o=n.some(function(p){return p.getUniqueID()===m.getUniqueID()});if(!o)n.push(m);this.setState({entries:n,queryString:""});this.props.onCustomLabelsChange(n.map(function(p){return p.getUniqueID()}))};l.prototype.$ComposerVideoUploadCustomLabels4=function(m){var n=this.state.entries,o=n.some(function(p){return p.getUniqueID()===m.getUniqueID()});if(o)n.splice(n.indexOf(m),1);this.setState({entries:n,queryString:""});this.props.onCustomLabelsChange(n.map(function(p){return p.getUniqueID()}))};l.prototype.$ComposerVideoUploadCustomLabels2=function(event){this.setState({queryString:event.target.value})};l.prototype.$ComposerVideoUploadCustomLabels1=function(){var m=c("XVideoCustomLabelsTypeaheadController").getURIBuilder().setFBID("profile_id",this.props.targetID).getURI();return new(c("WebAsyncSearchSource"))({bootstrapRequests:[{uri:m}],getAllForEmptyQuery:true})};f.exports=l}),null);
__d("ComposerVideoUploadUtils",["fbt"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={getDistributionSummaryItems:function j(k,l,m,n,o){__p&&__p();var p=[];if(k&&!n)p.push(h._("Will appear on your Page's Videos tab, but not News Feed or Timeline"));if(l)p.push(h._("Video will not be available to users under 18."));if(!m)p.push(h._("Embedding on third-party websites is not allowed"));if(n){p.push(h._("Add as a secret video that is unpublished and non-searchable"));if(o)p.push(h._("Likes, comments and sharing are turned off"))}if(p.length===0)p.push(h._("Standard distribution with no restrictions"));return p}};f.exports=i}),null);
__d("ComposerVideoUploadAdvancedTab.react",["cx","fbt","BUITextInput_DEPRECATED.react","ComposerCharityTypeahead.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadCustomLabels.react","ComposerVideoUploadStore","ComposerVideoUploadTooltip.react","ComposerVideoUploadUtils","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","Link.react","React","ReactComposerContextTypes","SearchableEntry","Tooltip.react","VideoPermalinkText.react","XUICheckboxInput.react","XUISelector.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("XUISelector.react").Option,k=c("React").PropTypes,l=c("React").createClass({displayName:"ComposerVideoUploadAdvancedTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function m(n,o){var p=c("ComposerVideoUploadStore").getCopyrighted(n),q=c("ComposerVideoUploadStore").getSpherical(n),r=c("ComposerVideoUploadStore").getEmbeddable(n),s=c("ComposerVideoUploadStore").getInternalSetting(n),t=c("ComposerVideoUploadStore").getFteOnly(n),u=c("ComposerVideoUploadStore").getExternalVideoID(n),v=c("ComposerVideoUploadStore").getCustomLabels(n),w=c("ComposerVideoUploadStore").getExcludeNewsfeed(n),x=c("ComposerVideoUploadStore").getFundraiserForStoryCharityID(n);return{copyrighted:p,spherical:q,isFTEOnly:t,isInternalVideo:s,embeddableForEdit:r,externalVideoID:u,customLabels:v,excludeFromNewsfeed:w,fundraiserForStoryCharityID:x}},getAttachmentInitialState:function m(n,o){return{blockSocialActions:false,distribution:"everywhere",disturbing:false,embeddable:true,excludeFromNewsfeed:false,isSecretVideo:false,baseProgress:0,isInternalVideo:false,isFTEOnly:false,embeddableForEdit:true,externalVideoID:"",customLabels:[],wasCopyrighted:c("ComposerVideoUploadStore").getCopyrighted(n),fundraiserForStoryCharityID:c("ComposerVideoUploadStore").getFundraiserForStoryCharityID(n)}}},propTypes:{canEditCustomLabels:k.bool,canEditExternalVideoID:k.bool,canEditFundraiserForStoryCharityID:k.bool,isEditing:k.bool,isPageTrailer:k.bool,isVideoUpload:k.bool,isShowPage:k.bool,showCopyrightSection:k.bool,showCustomLabels:k.bool,showExternalVideoIDSection:k.bool,showDisturbingSection:k.bool,showAdvancedTabSphericalCheckbox:k.bool,showSecretVideoOption:k.bool,showInternalVideoSettings:k.bool,targetID:k.string,toggleRightsTab:k.func.isRequired,toggleSphericalTab:k.func.isRequired,shown:k.bool,wasCopyrighted:k.bool},updateStoreDistributionValuesWithCustomOptions:function m(){this.updateStoreDistributionValues(this.state.blockSocialActions,this.state.disturbing,this.state.embeddable,this.state.excludeFromNewsfeed,this.state.isSecretVideo,this.state.isInternalVideo,this.state.isFTEOnly)},onExcludeFromNewsfeedOptionChange:function m(event){this.setState({excludeFromNewsfeed:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onDisturbingOptionChange:function m(event){this.setState({disturbing:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onEmbeddableOptionChange:function m(event){this.setState({embeddable:!event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onSecretVideoOptionChange:function m(event){this.setState({isSecretVideo:event.target.checked,blockSocialActions:event.target.checked,excludeFromNewsfeed:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onInternalVideoOptionChange:function m(event){this.setState({isInternalVideo:event.target.checked,isFTEOnly:event.target.checked?this.state.isFTEOnly:false},this.updateStoreDistributionValuesWithCustomOptions)},onFTEVideoOptionChange:function m(event){this.setState({isFTEOnly:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onSocialActionsOptionChange:function m(event){this.setState({blockSocialActions:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onExternalVideoIDChange:function m(event){var n=event.target.value,o=this.context.composerID;c("ComposerVideoUploadActions").updateExternalVideoID(o,n);this.setState({externalVideoID:n})},onCustomLabelsChange:function m(n){this.setState({customLabels:n});c("ComposerVideoUploadActions").updateCustomLabels(this.context.composerID,n)},updateStoreDistributionValues:function m(n,o,p,q,r,s,t){var u=this.context.composerID;c("ComposerVideoUploadActions").updateBlockSocialActions(u,n);c("ComposerVideoUploadActions").updateDisturbing(u,o);c("ComposerVideoUploadActions").updateEmbeddable(u,p);c("ComposerVideoUploadActions").updateExcludeNewsfeed(u,q);c("ComposerVideoUploadActions").updateIsSecretVideo(u,r);c("ComposerVideoUploadActions").updateInternalVideoSettings(u,s);c("ComposerVideoUploadActions").updateFTEOnly(u,t)},renderDistributionSelector:function m(){if(this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement(c("XUISelector.react"),{onChange:this.onDistributionChange,value:this.state.distribution},c("React").createElement(j,{value:"everywhere"},i._("Everywhere")),c("React").createElement(j,{value:"exclude_newsfeed"},i._("Exclude from News Feed")),c("React").createElement(j,{value:"custom"},i._("Custom")))},renderDistributionEditComponent:function m(){return c("React").createElement("div",{className:"_1_hg"},this.renderDistributionHeader(),this.renderDistributionHelperText(),this.renderEditEmbeddableOption(),this.renderInternalSettingsOption(),this.renderVideoPermalinkSection())},renderEditEmbeddableOption:function m(){return c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.embeddableForEdit,onChange:this.onEditEmbeddableOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Prohibit embedding")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, third-party websites can embed your video. Check to prohibit embedding."),alignv:"bottom"})))},onEditEmbeddableOptionChange:function m(event){c("ComposerVideoUploadActions").updateEmbeddable(this.context.composerID,!event.target.checked)},renderCustomDistributionOptions:function m(){return c("React").createElement("div",{className:"_2t3n"},this.renderExcludeFromNewsfeedOption(),this.renderDisturbingOption(),this.renderEmbeddableOption(),this.renderSecretVideoOption(),this.renderInternalSettingsOption())},renderInternalSettingsOption:function m(){if(!this.props.showInternalVideoSettings)return[];var n=!this.state.isInternalVideo,o=this.props.isEditing;return[c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"internal_video",className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isInternalVideo,onChange:this.onInternalVideoOptionChange,disabled:o}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(o?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Is Internal Video")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Internal videos are only available to FB employees including contractors."),alignv:"bottom"}))),c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"fte_only",className:"_2t3o _2t3r"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isFTEOnly,onChange:this.onFTEVideoOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("FTE And Interns Only")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Restrict access to the internal video to full-time employees and interns only"),alignv:"bottom"})))]},renderExcludeFromNewsfeedOption:function m(){var n=this.state.isSecretVideo;return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.excludeFromNewsfeed,onChange:this.onExcludeFromNewsfeedOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Exclude from News Feed")),this.renderExcludeFromNewsfeedTooltip()))},renderEmbeddableOption:function m(){return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.embeddable,onChange:this.onEmbeddableOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Prohibit embedding")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, third-party websites can embed your video. Check to prohibit embedding."),alignv:"bottom"})))},renderDisturbingOption:function m(){if(!this.props.showDisturbingSection)return null;return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.disturbing,onChange:this.onDisturbingOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Show graphic content warning")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Displays a warning and turns off autoplay. Graphic content will be hidden from people 18 and under."),alignv:"bottom"})))},renderSecretVideoOption:function m(){if(!this.props.showSecretVideoOption)return[];var n=!this.state.isSecretVideo;return[c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"secret_video",className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isSecretVideo,onChange:this.onSecretVideoOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Add as secret video")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Secret videos are only available on embeds and to the person that has the link to the video."),alignv:"bottom"}))),c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"social_actions",className:"_2t3o _2t3r"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.blockSocialActions,onChange:this.onSocialActionsOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Block social actions")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Blocking social actions will disallow likes and comments"),alignv:"bottom"})))]},isEmptyCustomDistribution:function m(){if(this.isCustomDistribution()&&!this.state.excludeFromNewsfeed&&!this.state.disturbing&&this.state.embeddable&&!this.state.isSecretVideo)return true;else return false},onCopyrightedChange:function m(event){c("ComposerVideoUploadActions").updateCopyrighted(this.context.composerID,event.target.checked);this.props.toggleRightsTab(event.target.checked)},renderCopyrightSection:function m(){if(!this.props.showCopyrightSection||!this.props.isEditing&&!this.props.isVideoUpload)return null;return c("React").createElement("div",{className:"_3guc"},c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},i._("Rights Management"))),c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"small"},i._("Facebook can alert you if anyone posts a video that matches this one"))),c("React").createElement("div",null,c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.copyrighted,onChange:this.onCopyrightedChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Monitor for matching uploads")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Identifies other Facebook videos that include all or part of this video"),alignH:"right"})))))},getDistributionSummaryItems:function m(){if(this.isCustomDistribution())return c("ComposerVideoUploadUtils").getDistributionSummaryItems(this.state.excludeFromNewsfeed,this.state.disturbing,this.state.embeddable,this.state.isSecretVideo,this.state.blockSocialActions);else if(this.isExcludeFromNewsfeedDistribution())return c("ComposerVideoUploadUtils").getDistributionSummaryItems(true,false,true,false,false);else return c("ComposerVideoUploadUtils").getDistributionSummaryItems(false,false,true,false,false)},isCustomDistribution:function m(){return this.state.distribution==="custom"},isExcludeFromNewsfeedDistribution:function m(){return this.state.distribution==="exclude_newsfeed"},_shouldShowDistributionSection:function m(){if(this.props.isPageTrailer)return false;return true},onDistributionChange:function m(event){if(event.value==="exclude_newsfeed")this.updateStoreDistributionValues(false,false,true,true,false,false,false);else if(event.value==="custom")this.updateStoreDistributionValuesWithCustomOptions();else this.updateStoreDistributionValues(false,false,true,false,false,false,false);this.setState({distribution:event.value})},renderDistributionSummary:function m(){if(this.isEmptyCustomDistribution())return c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"small"},i._("Use of these options reduces the number of views your video will receive.")));var n=this.getDistributionSummaryItems(),o=n.map(function(p,q){return c("React").createElement("li",{key:q},c("React").createElement(c("XUIText.react"),{size:"small"},p))});return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},i._("Distribution Summary")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("A summary of where your video will appear, based on the distribution options you selected.")})),c("React").createElement("ul",{className:"_59uq"},o))},onSphericalChange:function m(event){c("ComposerVideoUploadActions").updateSpherical(this.context.composerID,event.target.checked);this.props.toggleSphericalTab(event.target.checked)},renderSphericalSection:function m(){if(!this.props.showAdvancedTabSphericalCheckbox)return null;return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement(c("InputLabel_DEPRECATED.react"),{display:"inline"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.spherical,onChange:this.onSphericalChange,disabled:!this.props.isVideoUpload}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(!this.props.isVideoUpload?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("This video was recorded in 360\u00b0 format")))),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("360 Video is a special format that enables a user-controlled, spherical perspective.").toString(),alignH:"right",className:"_3iot"})),c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"small"},c("React").createElement(c("Link.react"),{href:"/help/828417127257368",target:"_blank"},i._("Learn more about 360 Video in the Help Center")))))},renderDistributionHeader:function m(){return c("React").createElement("div",{className:"_1_hd _5m7y"},c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},i._("Distribution")))},renderExcludeFromNewsfeedTooltip:function m(){if(this.props.isShowPage)return c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, the episode or video will not appear in people's News Feed"),alignv:"bottom"});return c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, video posts will be shown on people's News Feed."),alignv:"bottom"})},renderDistributionHelperText:function m(){return c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"small"},i._("Choose where you want this video to appear.")))},renderExternalId:function m(){if(!this.props.canEditExternalVideoID&&!this.state.externalVideoID)return null;var n=c("React").createElement(c("BUITextInput_DEPRECATED.react"),{height:"xtall",className:"_3xjx _26uc",placeholder:i._("Add an asset management code (Optional)"),onChange:this.onExternalVideoIDChange,value:this.state.externalVideoID,disabled:!this.props.canEditExternalVideoID});return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},i._("Universal Video Identifier")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If there is an unique code associated with this video in your own video content management system, you can add it here. This is for your own use; Facebook will not use this data."),alignV:"above",alignH:"right"})),n)},_onSelectCharity:function m(n){var o=n.getUniqueID();c("ComposerVideoUploadActions").updateFundraiserForStoryCharityID(this.context.composerID,o)},_onClearCharity:function m(){c("ComposerVideoUploadActions").updateFundraiserForStoryCharityID(this.context.composerID,null)},renderFundraiserSection:function m(){if(!this.props.canEditFundraiserForStoryCharityID)return null;var n=i._("Add a button to raise money for a nonprofit (Optional)");return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"small",weight:"bold"},i._("Donate Button"))),c("React").createElement("div",{className:"_2cg4 _3xjx"},c("React").createElement(c("ComposerCharityTypeahead.react"),{onSelect:this._onSelectCharity,onClear:this._onClearCharity,focusOnMount:false,placeholder:n})))},renderCustomLabels:function m(){if(!this.props.showCustomLabels)return null;return c("React").createElement(c("ComposerVideoUploadCustomLabels.react"),{customLabels:this.state.customLabels?this.state.customLabels:[],editable:this.props.canEditCustomLabels,onCustomLabelsChange:this.onCustomLabelsChange,targetID:this.props.targetID})},renderDistribution:function m(){if(this.props.isEditing)return this.renderDistributionEditComponent();else{var n;if(this.isCustomDistribution()||this.props.isShowPage)n=this.renderCustomDistributionOptions();return c("React").createElement("div",{className:"_1_hg"},this.renderDistributionHeader(),this.renderDistributionHelperText(),this.renderDistributionSelector(),n,c("React").createElement("div",{className:"_1_hd _5m7z"},this.renderDistributionSummary()))}},renderVideoPermalinkSection:function m(){if(!this.props.isEditing||!this.props.isSecret)return null;return c("React").createElement("div",{className:"_4x8f"},i._("The secret video is available at this location"),c("React").createElement(c("VideoPermalinkText.react"),{targetID:this.context.targetID,videoID:this.props.videoID}))},render:function m(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",{className:"_1_he"+(!this.props.shown?" _2oq6":"")},c("React").createElement("div",{className:"_1_hg"},this.renderCopyrightSection()));return c("React").createElement("div",{className:"_1_he"+(!this.props.shown?" _2oq6":"")},this._shouldShowDistributionSection()?this.renderDistribution():null,c("React").createElement("div",{className:"_1_hg"+(this._shouldShowDistributionSection()?" _5m8o":"")},this.renderSphericalSection(),this.renderCopyrightSection(),this.renderExternalId(),this.renderCustomLabels(),this.renderFundraiserSection()))}});f.exports=l}),null);
__d("ComposerVideoUploadBasicTab.react",["cx","fbt","BUITextInput_DEPRECATED.react","ComposerVideoShowsActions","InputLabel.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadPreviewSection.react","ComposerVideoUploadSection.react","ComposerVideoUploadStore","ComposerVideoUploadTooltip.react","GamesTypeahead.react","Image.react","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","React","ReactComposerContextTypes","ShowsUploadDialogNuxTour.react","SimpleNUXMessage","SimpleNUXMessageTypes","VideoContentCategorySelector.react","VideoContentCategoryType","VideoContentTagSelectorToken.react","VideoFeedType","VideoUploadVideoListSectionContainer.react","VideoUploadVideoTypeSectionContainer.react","XUIAmbientNUX.react","XUICheckboxInput.react","XUIText.react","requiredIfPropIsFalsy"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ComposerVideoUploadBasicTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function l(m,n){var o=c("ComposerVideoUploadStore").getTitle(m),p=c("ComposerVideoUploadStore").getCategory(m)||c("VideoContentCategoryType").OTHER.value,q=c("ComposerVideoUploadStore").getContentTags(m),r=c("ComposerVideoUploadStore").getFeedType(m),s=r===c("VideoFeedType").HIGHLIGHTED.index,t=c("ComposerVideoUploadStore").getEpisodeData(m),u=t&&t.isEpisode,v=c("ComposerVideoUploadStore").getExcludeNewsfeed(m),w=c("ComposerVideoUploadStore").getVideoDurationInSec(m),x=c("ComposerVideoUploadStore").getShareToParentPageOptionSelected(m);return{category:p,contentTags:q,highlightedInFeed:s,title:o,isEpisode:u,excludeNewsfeed:v,durationInSec:w,shareToParentPageOptionSelected:x}}},propTypes:{accessToken:j.string,allowCustomThumbnail:j.bool,canSeeUploadVideoDialogShowsNux:j.bool,compactMode:j.bool,generateThumbnails:j.bool,improvedContentTags:j.bool,isCarouselPreviewEditing:j.bool,isDisabled:j.bool,isPageTrailer:j.bool,isShowPage:j.bool,isSquareVideo:j.bool,isVideoUpload:j.bool,logger:j.object,makeTitleMandatory:j.bool,parentPageName:j.string,parentPageProfilePic:j.string,selectedThumbnail:j.object,showAutoCaptionsSection:j.bool,showThumbnailExperimentSection:j.bool,showCategorySelector:j.bool,showFeedTypeCheckbox:j.bool,showHighlightedVideosNux:j.bool,shown:j.bool,showShareToParentPageOption:j.bool,showTagSelector:j.bool,showTagSelectorNux:j.bool,showTagSelectorToken:j.bool,showThumbnailScrubber:j.bool,squareThumbnailURI:j.string,showMarkURI:j.string,minEpisodeDuration:j.number,targetID:j.string,thumbnails:j.array,uiLogger:j.object,videoFile:j.object,videoID:c("requiredIfPropIsFalsy")("isVideoUpload",j.string),showGamesTypeahead:j.bool},getInitialState:function l(){return{shouldShowHighlightedVideosNux:this.props.showHighlightedVideosNux,shouldShowTitleRequiredNux:!c("SimpleNUXMessage").hasUserSeenMessage(c("SimpleNUXMessageTypes").VIDEO_MANDATORY_TITLE)&&this.props.makeTitleMandatory,shouldShowTitleErrorMessage:false,componentsLoaded:false}},componentDidMount:function l(){if(this.props.isShowPage)c("ComposerVideoShowsActions").initialize(this.context.composerID,this.context.composerType,!this.props.isVideoUpload)},_getTitleErrorMessage:function l(){if(!this.state.title&&this.state.shouldShowTitleErrorMessage){if(this.props.isShowPage)return i._("Title is required for videos in Show Page");if(this.props.isPageTrailer)return i._("Title is required for the Show Trailer")}return null},_renderTitleSection:function l(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);var m=i._("Title"),n=i._("Write a title"),o=null;if(this.props.isPageTrailer)m=i._("Trailer Title");if(this.props.isPageTrailer||this.props.isShowPage||this.props.makeTitleMandatory)o=i._("(required)");return c("React").createElement("div",{id:"writeVideoTitle"},c("React").createElement(c("ComposerVideoUploadSection.react"),{title:m,subtitle:o},c("React").createElement(c("BUITextInput_DEPRECATED.react"),{disabled:this.props.isDisabled,height:"xtall",className:"_3xjx _3xjy",placeholder:n,onChange:this.onTitleChange,onBlur:function(){return this.setState({shouldShowTitleErrorMessage:true})}.bind(this),ref:"video_title",value:this.state.title,xuiError:this._getTitleErrorMessage()})))},_renderMetadataSection:function l(){__p&&__p();if(this.props.compactMode)return c("React").createElement("div",null);var m;if(this.props.showTagSelectorToken)m=this._renderTagSection();else m=this._renderCategorySection();var n=null;if(this.props.showFeedTypeCheckbox)n=this._renderFeedSection();return c("React").createElement("div",null,c("React").createElement("div",{className:"_3xjw _1_hc"+(this.props.showShareToParentPageOption?" _3yq7":"")+(!this.props.showTabSelector?" _vev":"")},c("React").createElement("div",{className:"_5sf4"+(this.props.showShareToParentPageOption?" _4btb":"")},this._renderVideoTypeSection(),this._renderTitleSection(),m,this._renderVideoGameSection(),n,this._renderVideoListSection(),this._renderExcludeNewsFeedSection(),this._renderShareOnParentPageSection())))},_logEvent:function l(m){if(this.props.logger)this.props.logger.logEvent(m)},_onHighlightedVideosNuxDismiss:function l(){this.setState({shouldShowHighlightedVideosNux:false});this.props.onHighlightedVideosNuxDismiss()},_onTitleRequiredNuxDismiss:function l(){c("SimpleNUXMessage").markMessageSeenByUser(c("SimpleNUXMessageTypes").VIDEO_MANDATORY_TITLE);this.setState({shouldShowTitleRequiredNux:false})},renderLayers:function l(){if(!this.state.shouldShowHighlightedVideosNux&&!this.state.shouldShowTitleRequiredNux)return null;if(this.state.shouldShowTitleRequiredNux)return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.video_title}.bind(this),shown:true,position:"left",width:"custom",customwidth:250,onCloseButtonClick:this._onTitleRequiredNuxDismiss,key:"videoTitleNux"},c("React").createElement(c("XUIText.react"),{display:"block",size:"large",headingLevel:1},i._("Titles Are Now Required")),c("React").createElement(c("XUIText.react"),{size:"medium"},i._("All video uploads must now include a title. The title appears with your video on Facebook.")));else if(this.state.shouldShowHighlightedVideosNux)return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.highlighted_video_checkbox}.bind(this),shown:true,width:"custom",customwidth:384,position:"right",offsetX:168,onCloseButtonClick:this._onHighlightedVideosNuxDismiss,key:"videoLibraryNux"},i._("Highlight your best non-promotional videos so they appear more prominently in your video channel."));return null},_renderFeedSection:function l(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8y",title:i._("Highlight Video"),tooltip:i._("Highlight your best non-promotional videos so they appear more prominently in your video channel.")},c("React").createElement("span",null,c("React").createElement(c("XUICheckboxInput.react"),{className:"_3-8_",checked:this.state.highlightedInFeed,onChange:this.onFeedTypeChange,ref:"highlighted_video_checkbox"}),c("React").createElement(c("XUIText.react"),{size:"small"},i._("Highlight in your video channel"))))},_renderCategorySection:function l(){if(!this.props.showCategorySelector||this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Video Category"),tooltip:i._("Select a category that matches the content of your video")},c("React").createElement(c("VideoContentCategorySelector.react"),{onChange:this.onCategoryChange,value:this.state.category}))},_renderTagSection:function l(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);return c("React").createElement("div",{id:"addVideoTags"},c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Tags"),tooltip:i._("Tags help make your video more discoverable. They aren't displayed to the public.")},c("React").createElement(c("VideoContentTagSelectorToken.react"),{accessToken:this.props.accessToken,improvedContentTags:this.props.improvedContentTags,logger:this.props.uiLogger,onChange:this.onContentTagChange,showTagSelectorNux:this.props.showTagSelectorNux,value:this.state.contentTags})))},_renderVideoGameSection:function l(){if(this.props.isCarouselPreviewEditing||!this.props.isVideoUpload||!this.props.showGamesTypeahead)return c("React").createElement("div",null);return c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Video Game"),tooltip:i._("Add the video game featured in the content of this video")},c("React").createElement(c("GamesTypeahead.react"),{className:"_oie",clearOnSelect:false,filterVideoTags:true,includeSeries:false,onGameSelect:this.onGameChange,placeholder:i._("Tag a game (ex: Overwatch)"),tallInput:true})))},_renderVideoTypeSection:function l(){if(!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{id:"selectVideoTypeStep"},c("React").createElement(c("VideoUploadVideoTypeSectionContainer.react"),{pageID:this.props.targetID,composerID:this.context.composerID,duration:this.state.durationInSec,minEpisodeDuration:this.props.minEpisodeDuration}))},_renderVideoListSection:function l(){if(!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{id:"addToSeasonAndPlaylist"},c("React").createElement(c("VideoUploadVideoListSectionContainer.react"),{pageID:this.props.targetID,composerID:this.context.composerID}))},_renderExcludeNewsFeedSection:function l(){if(!this.props.isVideoUpload||!this.props.isPageTrailer)return c("React").createElement("div",null);var m=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, the episode or video will not appear in people's News Feed"),alignH:"left"});if(this.props.isPageTrailer)m=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, your trailer will not appear in News Feed"),alignH:"left"});return c("React").createElement("div",{className:"_3-8-"},c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.excludeNewsfeed,onChange:this.onExcludeNewsfeedChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Exclude from News Feed")),m)))},_renderShareOnParentPageSection:function l(){if(!this.props.showShareToParentPageOption||!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{className:"_3-8y"},c("React").createElement(c("InputLabel.react"),{label:i._("Share this episode to {parent page name} when you publish",[i.param("parent page name",this.props.parentPageName)])},c("React").createElement(c("XUICheckboxInput.react"),{onChange:this.onSelectShareToParentPageOption})),this.state.shareToParentPageOptionSelected?c("React").createElement("label",{className:"_4btg"},c("React").createElement("textarea",{className:"_4bth",onChange:this.onSelectShareToParentTextChange,placeholder:i._("Say something about this episode..."),resize:"none",rows:3,shouldAutoGrow:false}),c("React").createElement(c("Image.react"),{className:"_4bti",src:this.props.parentPageProfilePic})):null)},onCategoryChange:function l(event){c("ComposerVideoUploadActions").updateCategory(this.context.composerID,event.value)},onContentTagChange:function l(event){c("ComposerVideoUploadActions").updateContentTags(this.context.composerID,event)},onGameChange:function l(event){c("ComposerVideoUploadActions").updateGame(this.context.composerID,event)},onTitleChange:function l(event){c("ComposerVideoUploadActions").updateTitle(this.context.composerID,event.target.value);this.setState({title:event.target.value,shouldShowTitleErrorMessage:true})},onFeedTypeChange:function l(event){var m=event.target.checked?c("VideoFeedType").HIGHLIGHTED.index:c("VideoFeedType").NOT_HIGHLIGHTED.index;c("ComposerVideoUploadActions").updateFeedType(this.context.composerID,m);this.setState({highlightedInFeed:event.target.checked})},onExcludeNewsfeedChange:function l(event){var m=event.target.checked;c("ComposerVideoUploadActions").updateExcludeNewsfeed(this.context.composerID,m);this.setState({excludeNewsfeed:event.target.checked})},onSelectShareToParentPageOption:function l(event){var m=event.target.checked;c("ComposerVideoUploadActions").updateShareToParentPageOptionSelected(this.context.composerID,m);this.setState({shareToParentPageOptionSelected:m})},onSelectShareToParentTextChange:function l(event){c("ComposerVideoUploadActions").updateShareToParentPageText(this.context.composerID,event.target.value)},renderPreviewSection:function l(){return c("React").createElement("div",{id:"customizeThumbnail"},c("React").createElement(c("ComposerVideoUploadPreviewSection.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,generateThumbnails:this.props.generateThumbnails,isShowPage:this.props.isShowPage||this.props.isPageTrailer,showMarkURI:this.props.showMarkURI,isSquareVideo:this.props.isSquareVideo,isVideoUpload:this.props.isVideoUpload,squareThumbnailURI:this.props.squareThumbnailURI,logger:this.props.logger,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:this.props.showThumbnailScrubber,targetID:this.props.targetID,thumbnails:this.props.thumbnails,videoID:this.props.videoID,videoFile:this.props.videoFile,showThumbnailExperimentSection:this.props.showThumbnailExperimentSection}))},_renderNuxTour:function l(){if(this.props.isShowPage&&this.props.canSeeUploadVideoDialogShowsNux)return c("React").createElement(c("ShowsUploadDialogNuxTour.react"),null);return null},render:function l(){return c("React").createElement("div",{className:"_4q0-"+(this.props.showShareToParentPageOption?" _3yq9":"")+(this.props.compactMode?" _2d5h":"")+(!this.props.shown?" _2oq6":"")},this._renderMetadataSection(),this.renderPreviewSection(),this.renderLayers(),this._renderNuxTour())}});f.exports=k}),null);
__d("ComposerVideoUploadCaptionsTab.react",["cx","fbt","invariant","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoTabsIdentifiers","ComposerVideoUploadStore","ComposerVideoUploadActions","React","ReactComposerContextTypes","VideoCaptionList.react","VideoCaptionFile","VideoComposerDialogCaptionsContainer.react","VideoUploadUILoggerEvents","VideoUploadUIError"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("React").PropTypes,l=c("React").createClass({displayName:"ComposerVideoUploadCaptionsTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function m(n,o){var p=c("ComposerVideoUploadStore").getCaptions(n),q=c("ComposerVideoUploadStore").getLiveCaptions(n),r=c("ComposerVideoUploadStore").getLastCaptionUploadErrorMessage(n),s=c("ComposerVideoUploadStore").getVideoDurationInSec(n);return{captions:p,liveCaptions:q,lastCaptionUploadErrorMessage:r,videoDurationInSec:s}}},propTypes:{accessToken:k.string,isDisabled:k.bool,logger:k.object,showAutoCaptionsSection:k.bool,showDefaultLocaleRow:k.bool,showLiveCaptionSection:k.bool,shown:k.bool,videoFile:k.object,videoID:k.string,pageID:k.string,shouldShowNewCaptionsFlow:k.bool,isVideoUploaded:k.bool},_onRemoveCaption:function m(n){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_REMOVED);var o=this.state.captions.filter(function(q){return n!=q.getLocale()});c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,o);var p=this.state.liveCaptions.filter(function(q){return n!=q.getLocale()});c("ComposerVideoUploadActions").updateLiveCaptions(this.context.composerID,p)},_onUploadClick:function m(){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_UPLOAD_BUTTON_CLICKED)},_onUploadCaption:function m(n){__p&&__p();var o=n.files,p=this.state.captions.slice(0),q=this.state.liveCaptions.slice(0),r=false,s=null,t=null;Array.from(o).forEach(function(u){__p&&__p();this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_SELECTED);var v=c("VideoCaptionFile").fromFile(u),w=this._getCaptionError(v,p,q);if(w){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_ERROR,w);s=w;t=v}else{p.push(v);r=true}}.bind(this));if(r)c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,p);if(s)c("ComposerVideoUploadActions").updateLastCaptionUploadErrorMessage(this.context.composerID,this._getCaptionErrorMessage(s,t))},_getCaptionError:function m(n,o,p){var q=null;if(!n)q=c("VideoUploadUIError").CAPTION_ERROR_WRONG_FORMAT;else if(this._isDuplicateLocale(n.getLocale(),o)||this._isDuplicateLocale(n.getLocale(),p))q=c("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE;return q},_getCaptionErrorMessage:function m(n,o){switch(n){case c("VideoUploadUIError").CAPTION_ERROR_WRONG_FORMAT:return i._("You uploaded a .SRT file with an incorrect file name. Please use this format: filename{suffix}",[i.param("suffix",".en_US.srt")]);case c("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE:return i._("You have already added a caption file for {language}. Please remove the older caption file before adding a new one.",[i.param("language",o.getLocaleName())]);default:return i._("There was an error uploading your caption file.")}},_isDuplicateLocale:function m(n,o){return o.some(function(p){return p.getLocale()===n})},_onChangeDefaultLocale:function m(n){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_DEFAULT_LOCALE_CHANGED);var o=this.state.captions.slice(0);o.forEach(function(q){q.setIsDefault(n==q.getLocale())});c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,o);var p=this.state.liveCaptions.slice(0);p.forEach(function(q){q.setIsDefault(n==q.getLocale())});c("ComposerVideoUploadActions").updateLiveCaptions(this.context.composerID,p)},_renderCaptions:function m(){var n=this.state.captions,o=this.props.videoFile;if(o)o instanceof File||j(0);var p=this.props.shouldShowNewCaptionsFlow?c("React").createElement(c("VideoComposerDialogCaptionsContainer.react"),{accessToken:this.props.accessToken,videoFile:o,video_id:this.props.videoID?this.props.videoID:"",composerID:this.context.composerID,pageID:this.props.pageID?this.props.pageID:"",isVideoUploaded:this.props.isVideoUploaded===true,logger:this.props.logger,videoDurationInSec:this.state.videoDurationInSec}):c("React").createElement(c("VideoCaptionList.react"),{accessToken:this.props.accessToken,allowBulkUpload:true,className:"_4vnn",captions:n,captionsEditable:!this.props.isDisabled,liveCaptions:this.state.liveCaptions,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showDefaultLocaleRow:this.props.showDefaultLocaleRow,showLiveCaptionSection:this.props.showLiveCaptionSection,videoID:this.props.videoID,onUploadClick:this._onUploadClick,onRemoveCaption:this._onRemoveCaption,onUploadCaption:this._onUploadCaption,onSetDefaultCaption:this._onChangeDefaultLocale,uploadErrorMessage:this.state.lastCaptionUploadErrorMessage});return c("React").createElement("div",null,p)},_logEvent:function m(n,o){if(this.props.logger)this.props.logger.logEvent(n,c("ComposerVideoTabsIdentifiers").CAPTIONS,o)},render:function m(){return c("React").createElement("div",{className:(!this.props.shouldShowNewCaptionsFlow?"_4vnp":"")+(!this.props.shown?" _2oq6":"")+(this.props.shouldShowNewCaptionsFlow?" _1vbd":"")},c("React").createElement("div",{className:"_4vnq"},this._renderCaptions()))}});f.exports=l}),null);
__d("ComposerVideoUploadPermissionsTab.react",["cx","fbt","BUISwitch.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoTabsIdentifiers","ComposerVideoUploadActions","ComposerVideoUploadStore","FixedDataTable.react","FixedDataTableColumn.react","Link.react","PageSettingsRef","React","ReactComposerContextTypes","VideoUploadUILoggerEvents","XPagesManagerSettingsController","XUIGrayText.react","XUIText.react","XUIButton.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=54,k=666,l=28,m=52,n=235,o=c("React").PropTypes,p=c("React").createClass({displayName:"ComposerVideoUploadPermissionsTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function q(r,s){var t=c("ComposerVideoUploadStore").getPermissions(r);return{permissions:t}}},propTypes:{canCrosspostOutsideBusiness:o.bool,isDisabled:o.bool,logger:o.object,shown:o.bool,showCrosspostingHelpCenter:o.bool,targetID:o.string.isRequired},onPermissionsChange:function q(r,s){this._logEvent(c("VideoUploadUILoggerEvents").PERMISSIONS_CHANGED);var t=this.state.permissions;t[s].allow=r;this.setState({permissions:t});c("ComposerVideoUploadActions").updatePermissions(this.context.composerID,t)},_getColumnsConfig:function q(){var r=[{cellRenderer:function(s,t,u,v){return c("React").createElement("div",null,c("React").createElement(c("BUISwitch.react"),{value:s,onToggle:function(){return this.onPermissionsChange(!s,v)}.bind(this)}))}.bind(this),key:"allow",label:i._("Allow"),width:j,visible:true},{cellRenderer:function s(t){return c("React").createElement("div",null,t)},width:k,key:"business",label:i._("Business"),visible:!this.props.canCrosspostOutsideBusiness},{cellRenderer:function s(t){return c("React").createElement("div",null,t)},width:k,key:"name",label:i._("Other Pages"),visible:this.props.canCrosspostOutsideBusiness}];return r.filter(function(s){return s.visible})},_renderColumns:function q(){var r=this._getColumnsConfig();return r.map(function(s){return c("React").createElement(c("FixedDataTableColumn.react"),{width:s.width,key:s.key,dataKey:s.key,label:s.label,cellRenderer:s.cellRenderer})})},_renderTitle:function q(){if(this.props.canCrosspostOutsideBusiness){var r=c("XPagesManagerSettingsController").getURIBuilder().setString("page_token",this.props.targetID).setString("tab","video_crossposting").setString("ref",c("PageSettingsRef").VIDEO_COMPOSER).getURI(),s=c("React").createElement(c("Link.react"),{href:r,target:"_blank"},i._("Settings")),t=c("React").createElement(c("Link.react"),{href:"/help/678485232304895",target:"_blank"},i._("Help Center"));return i._("Allow other Pages to use this video in their posts. Add Pages in {Link. =Settings}. Learn more about crossposting in the {Link. =Help Center}.",[i.param("Link. =Settings",s),i.param("Link. =Help Center",t)])}else{var u=null;if(this.props.showCrosspostingHelpCenter)u=c("React").createElement(c("Link.react"),{href:"/business/help/457328234477362",target:"_blank"},i._("Learn more"));return i._("Allow other Pages within your Business Manager to use this video. {Link. =Learn more}.",[i.param("Link. =Learn more",u)])}},_renderNoPermissions:function q(){if(this.state.permissions.length>0)return null;return c("React").createElement("div",{className:"_4pbx"},c("React").createElement(c("XUIText.react"),{display:"block",size:"medium",weight:"normal"},i._("Share Your Video With Other Pages")),c("React").createElement(c("XUIGrayText.react"),{className:"_3-8y",display:"block",size:"small",weight:"normal"},i._("You can choose to crosspost videos with any Page and have access to total performance insights.")),c("React").createElement(c("XUIGrayText.react"),{className:"_3-8w",display:"block",size:"small",weight:"normal"},i._("You control which of your videos are allowed to be crossposted.")),c("React").createElement(c("XUIButton.react"),{className:"_3-8y",href:"/help/678485232304895",label:i._("Learn More"),size:"medium"}))},_renderBody:function q(){var r=this._getColumnsConfig().reduce(function(u,v){return u+v.width},0),s=this.state.permissions.length>0,t=this.state.permissions.length>0?n:l+2;return c("React").createElement("div",{className:"_4vov"+(!s?" _4pby":"")},c("React").createElement(c("FixedDataTable.react"),{width:r,height:t,rowsCount:this.state.permissions.length,rowGetter:function(u){return this.state.permissions[u]}.bind(this),headerHeight:l,rowHeight:m},this._renderColumns()),this._renderNoPermissions())},_logEvent:function q(r,s){if(this.props.logger)this.props.logger.logEvent(r,c("ComposerVideoTabsIdentifiers").PERMISSIONS,s)},render:function q(){return c("React").createElement("div",{className:"_4vp0"+(!this.props.shown?" _2oq6":"")+" _4vp1"},c("React").createElement("div",{className:"_4vp2"},this._renderTitle()),this._renderBody())}});f.exports=p}),null);
__d("ComposerVideoUploadRightsTabContainer.react",["ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadRightsTab.react","ComposerVideoUploadStore","ReactComponentWithPureRenderMixin","React","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerVideoUploadRightsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:h.string,onCreateNewMatchRule:h.func.isRequired,onLogEvent:h.func.isRequired,shown:h.bool,targetID:h.string.isRequired,showAttributionsSection:h.bool,showCategoryRequiredError:h.bool,canSeeIGMatches:h.bool},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightMonitoringType(k)||c("VideoCopyrightUtils").DEFAULT_MONITORING_TYPE,n=c("ComposerVideoUploadStore").getCopyrightRuleID(k),o=c("ComposerVideoUploadStore").getCopyrightWhitelistedPartners(k),p=c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(k),q=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(k),r=c("ComposerVideoUploadStore").getAreCopyrightCountriesIncluded(k),s=c("ComposerVideoUploadStore").getCopyrightReferenceCategory(k),t=c("ComposerVideoUploadStore").getCopyrightAttributionID(k);return{attributionID:t,monitoringType:m,ownershipCountries:q,areCountriesIncluded:r,ruleID:n,whitelistedIGUserNames:p,whitelistedPartners:o,selectedCategory:s}}},render:function j(){return c("React").createElement(c("ComposerVideoUploadRightsTab.react"),{accessToken:this.props.accessToken,attributionID:this.state.attributionID,hasAttributionError:false,shown:this.props.shown,targetID:this.props.targetID,onAttributionChange:this.onAttributionChange,onCreateNewMatchRule:this.props.onCreateNewMatchRule,onGeoChange:this.onGeoChange,onMatchRuleChange:this.onMatchRuleChange,onMonitoringTypeChange:this.onMonitoringTypeChange,onReferenceCategoryChange:this.onReferenceCategoryChange,whitelistedIGUserNames:this.state.whitelistedIGUserNames,onIGWhitelistUpdated:this.onIGWhitelistUpdated,onFBWhitelistUpdated:this.onFBWhitelistUpdated,monitoringType:this.state.monitoringType,ownershipCountries:this.state.ownershipCountries,areCountriesIncluded:this.state.areCountriesIncluded,ruleID:this.state.ruleID,whitelistedPartners:this.state.whitelistedPartners,selectedCategory:this.state.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError,showAttributionsSection:this.props.showAttributionsSection,canSeeIGMatches:this.props.canSeeIGMatches})},onMonitoringTypeChange:function j(event){c("ComposerVideoUploadActions").updateCopyrightMonitoringType(this.context.composerID,event.value);this.props.onLogEvent("monitoring_type_updated")},onFBWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedPartners(this.context.composerID,k.slice());this.props.onLogEvent("whitelist_updated")},onIGWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedIGUserNames(this.context.composerID,k);this.props.onLogEvent("whitelist_ig_users_updated")},onGeoChange:function j(k,l){c("ComposerVideoUploadActions").updateCopyrightOwnershipCountries(this.context.composerID,k,l);this.props.onLogEvent("ownership_countries_updated")},onMatchRuleChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightRuleID(this.context.composerID,k);this.props.onLogEvent("rule_updated")},onAttributionChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightAttributionID(this.context.composerID,k);this.props.onLogEvent("attribution_updated")},onReferenceCategoryChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceCategory(this.context.composerID,k);this.props.onLogEvent("reference_category_updated")}});f.exports=i}),null);
__d("ComposerVideoUploadDetails.react",["ix","cx","fbt","xuiglyph","ActorURI","Arbiter","AsyncDialog","AsyncRequest","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileExcludeSegmentsContainer.react","ComposerReferenceFileUploadAttributionsTabContainer.react","ComposerReferenceFileUploadRightsTabContainer.react","ComposerReferenceFileUploadWhitelistTabContainer.react","ComposerVideoAdBreaksTabContainer.react","ComposerVideoAdBreakStore","ComposerVideoTabsIdentifiers","ComposerVideoUploadActions","ComposerVideoUploadAdvancedTab.react","ComposerVideoUploadBasicTab.react","ComposerVideoUploadCaptionsTab.react","ComposerVideoUploadPermissionsTab.react","ComposerVideoUploadRightsTabContainer.react","ComposerVideoUploadSphericalControlsTabContainer.react","ComposerVideoUploadStore","DOM","DOMScroll","FileInput.react","Image.react","PopoverMenu.react","ProfileVideoWWWFrontendActionTypedLogger","ProgressBar.react","PublishingToolsWebdriverTestDataIDs","React","ReactLayeredComponentMixin_DEPRECATED","ReactXUIMenu","UserAgent","VideoCopyrightRuleDialogSource","VideoCopyrightRuleTemplateBlankSelectDialog","VideoCopyrightUITypedLogger","VideoUploadFileValidator","VideoUploadLogger","VideoUploadUILogger","VideoUploadUILoggerEvents","XEmbeddedVideoEmbedDialogController","XUIAmbientNUX.react","XUIButton.react","XUIMenuSeparator.react","XUINotice.react","XUIPageNavigation.react","XVideoCopyrightRuleDialogController","dotAccess","intlNumUtils","nullthrows","requiredIfPropIsTruthy"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=c("ReactXUIMenu").Item,m=c("XUIPageNavigation.react").Group,n=c("XUIPageNavigation.react").Item,o=c("React").PropTypes,p=c("React").createClass({displayName:"ComposerVideoUploadDetails",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"),c("ComposerVideoAdBreakStore")),c("ReactLayeredComponentMixin_DEPRECATED")],statics:{calculateState:function q(r,s){var t=c("ComposerVideoUploadStore").getEpisodeData(r),u=c("ComposerVideoUploadStore").getTitle(r).trim(),v=s.isShowPage&&(u===""||!t||t.isEpisode===undefined||t.isEpisode===null),w=s.isPageTrailer&&u==="",x=s.makeTitleMandatory&&u==="";return{shown:true,showRightsTab:c("ComposerVideoUploadStore").getCopyrighted(r),showSphericalTab:c("ComposerVideoUploadStore").getSpherical(r),shouldDisableAdInsertionTab:c("ComposerVideoAdBreakStore").getShouldDisableAdBreakInsertion(r,s.adBreaksTabDisabledReasons),permissions:c("ComposerVideoUploadStore").getPermissions(r)||[],isFeatured:c("ComposerVideoUploadStore").getIsFeaturedVideo(r),embeddable:c("ComposerVideoUploadStore").getEmbeddable(r),isRequiredFieldsMissingForShowsVideo:v,isTitleMissingForShowTrailer:w,isTitleMandatoryAndMissing:x}},getAttachmentWillReceivePropsState:function q(r,s,t){var u={baseProgress:0};if(!t.showUploadProgressBar&&s.showUploadProgressBar)u.baseProgress=t.progress;if(t.videoFile!==s.videoFile){u.baseProgress=0;c("ComposerVideoUploadActions").updateGeneratedThumbnails(r,[])}return u},getAttachmentInitialState:function q(r,s){var t=c("ComposerVideoUploadStore").getPermissions(r)||[];return{editorTab:s.isReferenceVideo?c("ComposerVideoTabsIdentifiers").RIGHTS:s.editorTab,initialPermissionsAllowState:t.map(function(u){return u.allow})}}},propTypes:{accessToken:o.string,allowCustomThumbnail:o.bool,canCrosspostOutsideBusiness:o.bool,canEditCustomLabels:o.bool,canEditExternalVideoID:o.bool,canEditFundraiserForStoryCharityID:o.bool,isDemonetized:o.bool,showAdBreaksTab:o.bool,adBreaksTabDisabledReasons:o.array,composerID:o.string,showAdBreakAdminPreviewSettings:o.bool,showAdBreakOffsetEditorNux:o.bool,defaultCategory:o.number,editorTab:o.string,generateThumbnails:o.bool,improvedContentTags:o.bool,isCarouselPreviewEditing:o.bool,isEditing:o.bool.isRequired,canMakeFeatured:o.bool,isReferenceVideo:o.bool,isProfileVideo:o.bool,isSecret:o.bool,isUserUploadFlow:o.bool,isVideoUpload:o.bool,logger:o.instanceOf(c("VideoUploadLogger")),onVideoFileInputChange:o.func,onMakeFeaturedVideo:o.func,pageAccessToken:o.string,postPending:o.bool,progress:o.number,selectedThumbnail:o.object,canEditAdBreaksTabBlockListContent:o.bool.isRequired,adBreaksExperimentPublicMetadata:o.object,showAutoCaptionsSection:o.bool,showLiveCaptionSection:o.bool,showCaptionsTab:o.bool,showCopyrightSection:o.bool,showCrosspostingHelpCenter:o.bool,showCustomLabels:o.bool,showDisturbingSection:o.bool,showExternalVideoIDSection:o.bool,showFeedTypeCheckbox:o.bool,showHighlightedVideosNux:o.bool,showInternalVideoSettings:o.bool,showPermissionsTab:o.bool,showAdvancedTabSphericalCheckbox:o.bool,showSphericalControlsTab:o.bool,showTagSelectorNux:o.bool,showTagSelectorToken:o.bool,showThumbnailExperimentSection:o.bool,showThumbnailScrubber:o.bool,showAttributionsSection:o.bool,showUploadProgressBar:o.bool,squareThumbnailURI:o.string,stage:o.oneOf(["idle","uploading","upload-finished","upload-failed","processing","processingFinished","posting","finished","post-failed"]).isRequired,thumbnail:o.object,UILogger:o.instanceOf(c("VideoUploadUILogger")),uploadVideoID:o.string,videoAssetID:o.string,videoFile:o.object,videoID:c("requiredIfPropIsTruthy")("isEditing",o.string),videoUrlHD:o.string,videoUrlSD:o.string,showOmnistabSection:o.bool,hasOmnistabEncoding:o.bool,expirableCrosspostsCount:o.number,showCrosspostedPermissionsNUX:o.bool,useEmbedOptions:o.bool,embedUrl:o.string,isShowPage:o.bool,isPageTrailer:o.bool,showMarkURI:o.string,minEpisodeDuration:o.number,canSeeUploadVideoDialogShowsNux:o.bool,shouldShowPageOnboardingForAdBreak:o.bool,showCategoryRequiredError:o.bool,isMonetizationOnboarded:o.bool,canSeeNewMatchRuleDialog:o.bool,makeTitleMandatory:o.bool,showShareToParentPageOption:o.bool,parentPageName:o.string,parentPageProfilePic:o.string,shouldShowNewCaptionsFlow:o.bool,canSeeIGMatches:o.bool,showGamesTypeahead:o.bool},getDefaultProps:function q(){return{accessToken:null,allowCustomThumbnail:false,canCrosspostOutsideBusiness:false,canEditAdBreaksTabBlockListContent:false,canEditCustomLabels:false,canEditExternalVideoID:false,canEditFundraiserForStoryCharityID:false,showAdBreaksTab:false,adBreaksTabDisabledReasons:null,canMakeFeatured:false,editorTab:c("ComposerVideoTabsIdentifiers").BASIC,generateThumbnails:false,hasOmnistabEncoding:false,improvedContentTags:false,isCarouselPreviewEditing:false,isEditing:false,isPageTrailer:false,isProfileVideo:false,isReferenceVideo:false,isSecret:false,isUserUploadFlow:false,isVideoUpload:false,makeTitleMandatory:false,showAdBreakAdminPreviewSettings:false,showAdBreakOffsetEditorNux:false,showAdvancedTabSphericalCheckbox:false,showCaptionsTab:false,showCopyrightSection:false,showCrosspostingHelpCenter:false,showCrosspostedPermissionsNUX:false,showCustomLabels:false,showDisturbingSection:false,showExternalVideoIDSection:false,showFeedTypeCheckbox:false,showHighlightedVideosNux:false,showInternalVideoSettings:false,showPermissionsTab:false,showSecretVideoOption:true,showSphericalControlsTab:false,showThumbnailExperimentSection:false,showThumbnailScrubber:false,showUploadProgressBar:false,shouldShowPageOnboardingForAdBreak:false,showCategoryRequiredError:false,stage:"idle",showShareToParentPageOption:false,parentPageName:null,parentPageProfilePic:null,showAttributionsSection:false,canSeeIGMatches:false,showGamesTypeahead:false}},componentWillReceiveProps:function q(r){if(r.dialogVisible&&!this.props.dialogVisible){this.forceUpdate();if(!this.props.isVideoUpload)this.refs.tabbar.resizeNavbarGroups()}},_shouldDisablePostButton:function q(){return this.state.isRequiredFieldsMissingForShowsVideo||this.state.isTitleMissingForShowTrailer||this.state.isTitleMandatoryAndMissing},_getDisabledErrorMessage:function q(){return this.state.isTitleMandatoryAndMissing?j._("To publish, your video needs a title"):null},componentDidUpdate:function q(){c("Arbiter").inform("composer/disablePostButton",{disabled:this._shouldDisablePostButton(),errorMessage:this._getDisabledErrorMessage()});window.dispatchEvent(new Event("componentDidUpdate"))},reset:function q(){this.setState({editorTab:this.props.isReferenceVideo?c("ComposerVideoTabsIdentifiers").RIGHTS:c("ComposerVideoTabsIdentifiers").BASIC,shown:true,showCategoryRequiredError:false})},_logEvent:function q(r){if(this.props.logger)this.props.logger.logEvent(r)},logCopyrightEvent:function q(r){var s=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(this.context.composerID).join(","),t=(c("ComposerVideoUploadStore").getCopyrightWhitelistedPartners(this.context.composerID)||[]).map(function(A){return A.id}).join(","),u=(c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(this.context.composerID)||[]).join(","),v=c("ComposerVideoUploadStore").getCopyrightRuleID(this.context.composerID),w=c("ComposerVideoUploadStore").getCopyrightMonitoringType(this.context.composerID),x=c("ComposerVideoUploadStore").getCopyrighted(this.context.composerID),y=c("ComposerVideoUploadStore").getCopyrightExcludedSegments(this.context.composerID),z=y.map(function(A){return[A.start_time_in_sec,A.duration_in_sec,A.media_type].join(",")}).join(";");new(c("VideoCopyrightUITypedLogger"))().setEvent(r).setSource(this.props.isEditing?"video_edit_dialog":"video_upload_composer").setCopyrightContentID(this.props.videoID).setCopyrightChecked(x).setRightsHolderID(this._getTargetID()).setMonitoringType(w).setIsReference(this.props.isReferenceVideo).setOwnershipCountries(s).setWhitelistedIds(t).setWhitelistedIgUserIds(u).setRuleID(v).setMessage(z).log()},logExcludeSegmentsUpdateEvent:function q(){this.logCopyrightEvent("exclude_segments_updated")},isDisabled:function q(){return this.state.stage==="posting"},onTabClick:function q(r){if(this.props.UILogger)this.props.UILogger.logEvent(c("VideoUploadUILoggerEvents").TAB_SWITCH,r);var s={editorTab:r,hidePermissionsNUX:this.state.hidePermissionsNUX};if(r===c("ComposerVideoTabsIdentifiers").PERMISSIONS)s.hidePermissionsNUX=true;this.setState(s)},_toggleRightsTab:function q(r){this.logCopyrightEvent("copyright_toggled");this.setState({showRightsTab:r},function(){if(r===true)this.onTabClick(c("ComposerVideoTabsIdentifiers").RIGHTS)}.bind(this))},_toggleSphericalTab:function q(r){this.setState({showSphericalTab:r})},onVideoFileInputChange:function q(event){this._logEvent(c("VideoUploadLogger").EVENT_REPLACE_VIDEO);if(this.props.isProfileVideo)new(c("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("replace_profile_video").setSessionID(this.props.composerID).log();var r=this.props.onVideoFileInputChange;if(r){var s=this.refs.videoFileInput.getFileInput();r(s)}},_getTargetID:function q(){return c("dotAccess")(this.props,"config.targetID")||this.props.targetID},getExpirableCrosspostCount:function q(){var r=0;if(!this.props.canCrosspostOutsideBusiness)r=this.props.expirableCrosspostsCount||0;else{var s=this.state.permissions,t=this.state.initialPermissionsAllowState;for(var u=0;u<s.length;u++)if(!s[u].allow&&t[u]&&s[u].expirable_posts_count)r+=s[u].expirable_posts_count}return r},hasRemovedBusinessSharing:function q(){return this.state.permissions.some(function(r,s){return!r.allow&&this.state.initialPermissionsAllowState[s]}.bind(this))},hasAddedBusinessSharing:function q(){return this.state.permissions.some(function(r,s){return r.allow&&!this.state.initialPermissionsAllowState[s]}.bind(this))},_downloadURL:function q(r){var s=c("DOM").create("a");s.download="";s.href=r;s.click()},_getDownloadMenuItemProps:function q(r){return c("UserAgent").isBrowser("Firefox")?{href:r,target:"_blank"}:{onclick:this._downloadURL.bind(this,r)}},_renderEditMenu:function q(){__p&&__p();var r=this.props.videoUrlSD,s=this.props.videoUrlHD,t=null,u=null;if(r!=null)t=c("React").createElement(l,this._getDownloadMenuItemProps(r),j._("Download SD"));if(s!=null)u=c("React").createElement(l,this._getDownloadMenuItemProps(s),j._("Download HD"));var v=null,w=null,x=this.state.isFeatured;if(this.props.onMakeFeaturedVideo&&this.props.canMakeFeatured&&!x){w=c("React").createElement(c("XUIMenuSeparator.react"),null);v=c("React").createElement(l,{onclick:this.props.onMakeFeaturedVideo},j._("Make Featured Video"))}var y=null,z=null;if(this.props.useEmbedOptions&&this.state.embeddable){y=c("React").createElement(c("XUIMenuSeparator.react"),null);var A=c("XEmbeddedVideoEmbedDialogController").getURIBuilder().setString("url",this.props.embedUrl).getURI();z=c("React").createElement(l,{href:A,rel:"dialog"},j._("Embed"))}var B=c("React").createElement(c("ReactXUIMenu"),null,v,z,y||w,t,u);return c("React").createElement(c("PopoverMenu.react"),{className:"_1j9",alignh:"right",menu:B},c("React").createElement(c("XUIButton.react"),{className:"_2pi7",image:c("React").createElement(c("Image.react"),{src:h("89847")}),label:j._("Settings"),labelIsHidden:true}))},renderTabbedEditor:function q(){__p&&__p();var r=void 0;if(this.props.showCaptionsTab)r=c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").CAPTIONS},j._("Captions"));var s;if(this.props.showPermissionsTab)s=c("React").createElement(n,{ref:"permissionsTabItem",href:"#",key:c("ComposerVideoTabsIdentifiers").PERMISSIONS},j._("Crossposting"));var t=null;if(this.props.showAdBreaksTab)t=c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADBREAKS},c("React").createElement("div",{className:this.state.shouldDisableAdInsertionTab?"_2kln":""}),j._("Ad Breaks"));return c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").BASIC,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").BASIC},j._("Basic")),r,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADVANCED},j._("Advanced")),this.state.showSphericalTab&&this.props.showSphericalControlsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").SPHERICAL},j._("360 Controls")):null,s,this.state.showRightsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")):null,t),this.props.isEditing?this._renderEditMenu():c("React").createElement("span",null)),this.renderBasicTab(),this.renderCaptionsTab(),this.renderAdvancedTab(),this.renderSphericalControlsTab(),this.renderPermissionsTab(),this.renderRightsTab(),this.renderAdBreaksTab())},hidePermissionsNux:function q(){this.setState({hidePermissionsNUX:true})},renderExcludeSegmentSection:function q(){if(this.props.showCopyrightSection)return c("React").createElement(c("ComposerReferenceFileExcludeSegmentsContainer.react"),{isUpload:!this.props.isEditing,logExcludeSegmentsUpdateEvent:this.logExcludeSegmentsUpdateEvent});return null},renderReferenceFileEditor:function q(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").RIGHTS,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")),this.props.showAttributionsSection?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ATTRIBUTIONS},j._("Attributions")):null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").WHITELIST},j._("Permissions")))),this.renderReferenceFileRightsTab(),this.renderReferenceFileWhitelistTab(),this.renderReferenceFileAttributionsTab()),this.renderExcludeSegmentSection())},renderRightsTab:function q(){if(!this.state.showRightsTab)return null;return c("React").createElement(c("ComposerVideoUploadRightsTabContainer.react"),{accessToken:this.props.pageAccessToken,onCreateNewMatchRule:this.createNewMatchRule,targetID:this._getTargetID(),onLogEvent:this.logCopyrightEvent,shown:!!this.state.showRightsTab&&this.state.editorTab===c("ComposerVideoTabsIdentifiers").RIGHTS,showAttributionsSection:this.props.showAttributionsSection,showCategoryRequiredError:this.props.showCategoryRequiredError,canSeeIGMatches:this.props.canSeeIGMatches})},renderReferenceFileRightsTab:function q(){return c("React").createElement(c("ComposerReferenceFileUploadRightsTabContainer.react"),{accessToken:this.props.pageAccessToken,targetID:this._getTargetID(),generateThumbnails:this.props.generateThumbnails,thumbnails:this.props.thumbnails,logger:this.props.logger,onCreateNewMatchRule:this.createNewMatchRule,videoFile:this.props.videoFile,selectedThumbnail:this.props.selectedThumbnail,showTabSelector:!this.props.isUserUploadFlow,videoID:this.props.videoID,isVideoUpload:this.props.isVideoUpload,onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").RIGHTS,showCategoryRequiredError:this.props.showCategoryRequiredError})},renderReferenceFileWhitelistTab:function q(){return c("React").createElement(c("ComposerReferenceFileUploadWhitelistTabContainer.react"),{onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").WHITELIST,canSeeIGMatches:this.props.canSeeIGMatches})},renderReferenceFileAttributionsTab:function q(){if(!this.props.showAttributionsSection)return null;return c("React").createElement(c("ComposerReferenceFileUploadAttributionsTabContainer.react"),{accessToken:c("nullthrows")(this.props.pageAccessToken),onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").ATTRIBUTIONS,targetID:this._getTargetID()})},renderLayers:function q(){if(!this.props.showCrosspostedPermissionsNUX||!this.props.showPermissionsTab||this.state.hidePermissionsNUX||!this.refs.permissionsTabItem)return null;return{tabNUX:c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.permissionsTabItem}.bind(this),onCloseButtonClick:function(){return this.hidePermissionsNux()}.bind(this),position:"below",alignment:"center",shown:!this.state.hidePermissionsNUX},j._("NEW! Now you can allow any Page to use your videos in their posts."))}},renderAdBreaksTab:function q(){if(!this.props.showAdBreaksTab)return null;return c("React").createElement(c("ComposerVideoAdBreaksTabContainer.react"),{adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,isEditing:this.props.isEditing,pageId:this._getTargetID(),serverSideDisabledReasons:this.props.adBreaksTabDisabledReasons,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,shown:this.state.editorTab==c("ComposerVideoTabsIdentifiers").ADBREAKS,uploadVideoID:this.props.uploadVideoID,videoAssetID:this.props.videoAssetID,videoFile:this.props.videoFile,videoID:this.props.videoID})},renderBasicTab:function q(){return c("React").createElement(c("ComposerVideoUploadBasicTab.react"),{accessToken:this.props.pageAccessToken?this.props.pageAccessToken:this.props.accessToken,allowCustomThumbnail:this.props.allowCustomThumbnail,compactMode:this.props.compactMode,generateThumbnails:this.props.generateThumbnails,improvedContentTags:this.props.improvedContentTags,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isDisabled:this.isDisabled(),isPageTrailer:this.props.isPageTrailer,isShowPage:this.props.isShowPage,isSquareVideo:this.props.isProfileVideo,isVideoUpload:this.props.isVideoUpload,logger:this.props.logger,makeTitleMandatory:this.props.makeTitleMandatory,selectedThumbnail:this.props.selectedThumbnail,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showCategorySelector:!this.props.isUserUploadFlow,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").BASIC,showTabSelector:!this.props.isUserUploadFlow,showTagSelectorNux:this.props.showTagSelectorNux,showTagSelectorToken:this.props.showTagSelectorToken,showHighlightedVideosNux:this.props.showHighlightedVideosNux,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,showThumbnailScrubber:this.props.showThumbnailScrubber,squareThumbnailURI:this.props.squareThumbnailURI,onHighlightedVideosNuxDismiss:this.props.onHighlightedVideosNuxDismiss,targetID:this._getTargetID(),thumbnails:this.props.thumbnails,uiLogger:this.props.UILogger,videoFile:this.props.videoFile,videoID:this.props.videoID,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,showThumbnailExperimentSection:this.props.showThumbnailExperimentSection,showShareToParentPageOption:this.props.showShareToParentPageOption,parentPageName:this.props.parentPageName,parentPageProfilePic:this.props.parentPageProfilePic,showGamesTypeahead:this.props.showGamesTypeahead})},_getCaptionsFlowVideoID:function q(){var r=!this.props.videoID&&this.props.shouldShowNewCaptionsFlow,s=r?this.props.uploadVideoID:this.props.videoID;return s||""},renderCaptionsTab:function q(){var r=!this.props.isSharedAsset,s=this.props.stage==="upload-finished"&&this._getCaptionsFlowVideoID()!==""||this.props.isEditing;return c("React").createElement(c("ComposerVideoUploadCaptionsTab.react"),{accessToken:this.props.pageAccessToken?this.props.pageAccessToken:this.props.accessToken,isDisabled:this.isDisabled(),logger:this.props.UILogger,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showDefaultLocaleRow:r,showLiveCaptionSection:this.props.showLiveCaptionSection,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").CAPTIONS,videoFile:this.props.videoFile,videoID:this._getCaptionsFlowVideoID(),pageID:this._getTargetID(),shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,isVideoUploaded:s})},renderAdvancedTab:function q(){return c("React").createElement(c("ComposerVideoUploadAdvancedTab.react"),{canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,canEditFundraiserForStoryCharityID:this.props.canEditFundraiserForStoryCharityID,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isEditing:this.props.isEditing,isPageTrailer:this.props.isPageTrailer,isSecret:this.props.isSecret,isVideoUpload:this.props.isVideoUpload,isShowPage:this.props.isShowPage,renderDistribution:this.renderDistribution,showCopyrightSection:this.props.showCopyrightSection,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showInternalVideoSettings:this.props.showInternalVideoSettings,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").ADVANCED,showSecretVideoOption:this.props.showSecretVideoOption,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showSphericalControlsTab:this.props.showSphericalControlsTab,targetID:this._getTargetID(),toggleRightsTab:this._toggleRightsTab,toggleSphericalTab:this._toggleSphericalTab,videoID:this.props.videoID,showDisturbingSection:this.props.showDisturbingSection})},renderSphericalControlsTab:function q(){if(!this.props.showSphericalControlsTab)return null;return c("React").createElement(c("ComposerVideoUploadSphericalControlsTabContainer.react"),{showOmnistabSection:this.props.showOmnistabSection,hasOmnistabEncoding:this.props.hasOmnistabEncoding,isEditing:this.props.isEditing,shown:!!this.state.showSphericalTab&&this.state.editorTab===c("ComposerVideoTabsIdentifiers").SPHERICAL,videoFile:this.props.videoFile,videoID:this.props.videoID,targetID:this._getTargetID(),onTabClick:this.onTabClick,isPageComposer:true})},renderPermissionsTab:function q(){if(!this.props.showPermissionsTab)return null;return c("React").createElement(c("ComposerVideoUploadPermissionsTab.react"),{canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,isDisabled:this.isDisabled(),logger:this.props.UILogger,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").PERMISSIONS,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,targetID:this._getTargetID()})},renderCarouselPreviewEditor:function q(){if(!this.props.showCopyrightSection)return c("React").createElement("div",{className:"_1_ha _5j6r"},this.renderBasicTab());return c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").BASIC,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").BASIC},j._("Basic")),this.props.showCopyrightSection?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADVANCED},j._("Advanced")):null,this.state.showRightsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")):null)),this.renderBasicTab(),this.renderAdvancedTab(),this.renderRightsTab())},renderUserUploadFlowEditor:function q(){return c("React").createElement("div",{className:"_1_ha"},this.renderBasicTab())},toggleVisible:function q(r){this.setState({shown:r})},openCreateNewMatchRuleDialog:function q(){__p&&__p();var r=c("dotAccess")(this.props,"config.targetID")||this.props.targetID;if(this.props.canSeeNewMatchRuleDialog)c("VideoCopyrightRuleTemplateBlankSelectDialog").show(r,this.props.pageAccessToken,this.props.isMonetizationOnboarded);else{var s=c("XVideoCopyrightRuleDialogController").getURIBuilder().setFBID("page_id",r).setEnum("source",c("VideoCopyrightRuleDialogSource").COMPOSER).setString("access_token",this.props.pageAccessToken).getURI();s=c("ActorURI").create(s,r);c("AsyncDialog").send(new(c("AsyncRequest"))(s),function(t){this.toggleVisible(false);var u=t.subscribe("hide",function(){this.toggleVisible(true);if(u){u.unsubscribe();u=null}}.bind(this))}.bind(this))}},createNewMatchRule:function q(){this.logCopyrightEvent("create_new_match_rule_clicked");if(c("DOMScroll").getScrollState().y!==0){c("DOMScroll").scrollToTop();setTimeout(this.openCreateNewMatchRuleDialog,500)}else this.openCreateNewMatchRuleDialog()},_navigateToBasicTab:function q(){this.setState({editorTab:c("ComposerVideoTabsIdentifiers").BASIC})},calculatePerceivedProgress:function q(){if(this.state.baseProgress===100)return 100;var r=this.state.baseProgress,s=100-r,t=this.props.progress?this.props.progress:0;return(t-r)*100/s},renderProgressBar:function q(){var r;if(!this.props.showUploadProgressBar)return null;var s=this.calculatePerceivedProgress(),t=c("intlNumUtils").formatNumber(s,1);if(s)r=j._("{percent}\u0025",[j.param("percent",t)]);return c("React").createElement("div",{"data-testid":s>=100?c("PublishingToolsWebdriverTestDataIDs").VIDEO_UPLOAD_COMPLETE_BAR:null,className:"_5w5h"+(!!s?" _3ufe":"")},c("React").createElement(c("ProgressBar.react"),{value:s,label:r}))},renderErrorNotice:function q(r,s){var t;if(s)t=c("React").createElement("div",{className:"_1gip"},c("React").createElement(c("FileInput.react"),{ref:"videoFileInput",onChange:this.onVideoFileInputChange},c("React").createElement(c("XUIButton.react"),{href:"#",label:j._("Replace Video")})));return c("React").createElement(c("XUINotice.react"),{use:"warn",className:"_3edu"},t,r)},renderErrorMessage:function q(r){if(!this.props.errorMessage)return null;return this.renderErrorNotice(this.props.errorMessage,r)},renderWarningMessages:function q(){var r=[];if(this.hasAddedBusinessSharing())r.push(c("React").createElement(c("XUINotice.react"),{key:"addedBusinessSharing",className:"_3-8y",use:"notify"},j._("By allowing other Pages to use this video, their Page admins will be able to see this post and use this video, even before it is published.")));var s=this.getExpirableCrosspostCount();if(this.hasRemovedBusinessSharing()&&s>0)r.push(c("React").createElement(c("XUINotice.react"),{key:"removedBusinessSharing",className:"_3-8y",use:"notify"},j._({"post":"By removing permission to use this video, {posts} post on other Pages that use it will be unpublished automatically.","posts":"By removing permission to use this video, {posts} posts on other Pages that use it will be unpublished automatically."},[j.param("posts",s),j["enum"](s===1?"post":"posts",{post:"post",posts:"posts"})])));return r},render:function q(){__p&&__p();var r=void 0,s=void 0,t=void 0;if(this.props.isReferenceVideo)t=this.renderReferenceFileEditor();else if(this.props.isCarouselPreviewEditing)t=this.renderCarouselPreviewEditor();else if(!this.props.isUserUploadFlow)t=this.renderTabbedEditor();else t=this.renderUserUploadFlowEditor();if(this.props.stage==="idle")return c("React").createElement("div",null);else if(this.props.stage==="post-failed"||this.props.stage==="upload-failed")r=this.renderErrorMessage(c("VideoUploadFileValidator").canReplaceVideoForError(this.props.errorCode));else s=this.renderProgressBar();return c("React").createElement("div",{className:"_5w5j"+(!this.state.shown?" _u_u":"")},t,s,r,this.renderWarningMessages())}});f.exports=p}),null);
__d("ComposerXVideoUploadWrapperMixin",["Arbiter","DOMContainer.react","React","SubscriptionsHandler","VideoUploadProgressBar","VideoUploadFile","VideoUploadUILogger","VideoUploadUILoggerEvents"],(function a(b,c,d,e,f,g){__p&&__p();var h={componentWillUnmount:function i(){this.subscriptionsHandler.release()},getInitialState:function i(){return{fileInput:null,stage:"idle",progress:0,videoFile:null}},addSubscriptions:function i(){this.subscriptionsHandler=new(c("SubscriptionsHandler"))();this.subscriptionsHandler.addSubscriptions(this.props.videoUploader.subscribe("upload-requested",this.handleUploadRequested),this.props.videoUploader.subscribe("upload-started",this.handleUploadStarted),this.props.videoUploader.subscribe("upload-finished",this.handleUploadFinished),this.props.videoUploader.subscribe("upload-failed",this.handleUploadFailed),this.props.videoUploader.subscribe("upload-progressed",this.handleUploadProgress),this.props.videoUploader.subscribe("post-started",this.handlePostStarted),this.props.videoUploader.subscribe("post-finished",this.handlePostFinished),this.props.videoUploader.subscribe("post-failed",this.handlePostFailed))},handleUploadRequested:function i(){this.setState({errorMessage:null})},handleUploadStarted:function i(){this.setState({stage:"uploading"})},handleUploadFinished:function i(){this.setState({stage:"upload-finished"})},convertErrorMessageToReact:function i(j){if(Array.isArray(j))return j.map(function(k,l){if(k instanceof Node)return c("React").createElement(c("DOMContainer.react"),{key:l},k);else return k});else if(j&&j.__html)return c("React").createElement("span",{dangerouslySetInnerHTML:j});else return c("React").createElement("span",{dangerouslySetInnerHTML:{__html:j}})},handleUploadFailed:function i(j,k){k=k||{};this.setState({stage:"upload-failed",videoID:k.video_id,errorMessage:this.convertErrorMessageToReact(k.error_description),errorCode:k.error_code})},onFileSelected:function i(j,k){this.videoFileSelected=true;var l=k.fileInput,m=l.getInput(),n;if(m.files&&m.files.length>0)n=m.files[0];this.setState({fileInput:l,videoFile:n,progress:0},this.uploadVideo);c("Arbiter").inform("videoUpload/started",{composerID:this.state.originalComposerID})},onFileDropped:function i(j,k){this.videoFileSelected=true;var l;if(k.files)l=k.files[0];this.setState({fileInput:null,videoFile:l},this.uploadVideo);c("Arbiter").inform("videoUpload/started",{composerID:this.state.originalComposerID})},uploadVideo:function i(){__p&&__p();if(!this.props.videoUploader)return;var j;if(this.state.videoFile)j=c("VideoUploadFile").fromFile(this.state.videoFile);else j=c("VideoUploadFile").fromFileInput(this.state.fileInput.getInput());this.props.videoUploader.upload(j);var k=this.props.videoUploader.getLoggerData(),l=new(c("VideoUploadUILogger"))({waterfall_id:k.waterfall_id,actor_id:k.actor_id,target_id:k.target_id,target_type:k.target_type,composer_entry_point_ref:k.composer_entry_point_ref});this.setState({logger:this.props.videoUploader.getLogger&&this.props.videoUploader.getLogger(),UILogger:l});l.logEvent(c("VideoUploadUILoggerEvents").VIDEO_FILE_SELECTED)},handleUploadProgress:function i(event,j){var k=c("VideoUploadProgressBar").computeProgress(j.start_offset,j.sent_bytes,j.file_size,0,0);this.setState({progress:k})},handlePostStarted:function i(){this.setState({stage:"posting"})},handlePostFinished:function i(j,k){this.setState({stage:"finished",videoID:k.video_id})},handlePostFailed:function i(j,k){this.setState({stage:"post-failed",videoID:k.video_id,errorMessage:k.error_description,errorCode:k.error_code})}};f.exports=h}),null);
__d("VideoSphericalMetadataInjector",["FullBox","HDLRBox","ISOVideoBox","ISOVideoBoxConstants","ISOVideoBoxPath","ISOVideoFile","Map","SphericalVideoHotspotType","SphericalVideoMetadataTags","UUIDBox","VideoSphericalMetadataUtil","XMLBox","shallowArrayEqual"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h='<?xml version="1.0"?><rdf:SphericalVideo xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:GSpherical="http://ns.google.com/videos/1.0/spherical/">',i='<?xml version="1.0"?><rdf:SphericalVideo xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:FBSpherical="https://www.facebook.com/help/828417127257368">',j="</rdf:SphericalVideo>",k="face",l="GPAC face Handler",m={convertVerticalFOVToXML:function n(o){if(o)return"<"+c("SphericalVideoMetadataTags").FBSPHERICAL.INITIAL_VERTICAL_FOV_DEGREES+">"+(""+o)+("</"+c("SphericalVideoMetadataTags").FBSPHERICAL.INITIAL_VERTICAL_FOV_DEGREES+">");return null},convertFBGuideMetadataToXML:function n(o){__p&&__p();var p=null;if(o&&o.keyframes.length>0){p="";for(var q=o.keyframes,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;p+="<Keyframe>"+("<yaw>"+u.yaw+"</yaw>")+("<pitch>"+u.pitch+"</pitch>")+("<fov>"+u.fov+"</fov>")+("<timestamp>"+u.timestamp+"</timestamp>")+"</Keyframe>"}p="<"+c("SphericalVideoMetadataTags").FBSPHERICAL.GUIDE+">"+(""+p)+("</"+c("SphericalVideoMetadataTags").FBSPHERICAL.GUIDE+">")}return p},convertFBHotspotMetadataToXML:function n(o){__p&&__p();var p=null;if(o&&o.hotspots&&o.hotspots.length>0){var q=o.hotspots;p="";for(var r=q,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v.content,x="",y="";if(Object.prototype.hasOwnProperty.call(w,"linkAction")&&w.linkAction)y="<LinkAction"+(' url="'+w.linkAction.url+'"')+(' trigger="'+w.linkAction.trigger+'"')+" />";switch(w.type){case c("SphericalVideoHotspotType").TEXT:x="<Text"+(' id="'+w.id+'"')+(' alignment="'+w.alignment+'"')+(' width="'+w.width+'"')+(' height="'+w.height+'"')+(' color="'+w.color+'"')+(' fontWeight="'+w.fontWeight+'"')+(' fontSize="'+w.fontSize+'"')+(' fontFamily="'+w.fontFamily+'"')+(' backgroundColor="'+w.backgroundColor+'"')+(' animation="'+w.animation+'">')+(""+w.text)+(""+y)+"</Text>";break;case c("SphericalVideoHotspotType").IMAGE:x="<Image"+(' id="'+w.id+'"')+(' width="'+w.width+'"')+(' height="'+w.height+'"')+(' animation="'+w.animation+'">')+(""+w.imageData)+(""+y)+"</Image>";break}p+="<Hotspot"+(' yaw="'+v.yaw+'"')+(' pitch="'+v.pitch+'"')+(' startTime="'+v.startTime+'"')+(' endTime="'+v.endTime+'">')+(""+x)+"</Hotspot>"}p="<"+c("SphericalVideoMetadataTags").FBSPHERICAL.HOTSPOT+">"+(""+p)+("</"+c("SphericalVideoMetadataTags").FBSPHERICAL.HOTSPOT+">")}return p},convertSphericalMetadataToXML:function n(o){__p&&__p();var p=new(c("Map"))().set(c("SphericalVideoMetadataTags").GSPHERICAL.INITIAL_VIEW_PITCH_DEGREES,o.initialPitch).set(c("SphericalVideoMetadataTags").GSPHERICAL.INITIAL_VIEW_HEADING_DEGREES,o.initialYaw).set(c("SphericalVideoMetadataTags").GSPHERICAL.PROJECTION_TYPE,o.projectionType).set(c("SphericalVideoMetadataTags").GSPHERICAL.SPHERICAL,"true").set(c("SphericalVideoMetadataTags").GSPHERICAL.STEREO_MODE,o.stereoMode).set(c("SphericalVideoMetadataTags").GSPHERICAL.STITCHED,"true").set(c("SphericalVideoMetadataTags").GSPHERICAL.STITCHING_SOFTWARE,o.stitchingSoftware),q="";for(var r=p.entries(),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v[0],x=v[1];if(x!==null&&x!==undefined)q+="<"+w+">"+x+"</"+w+">"}var y="",z=o.extraTagXML||"";if(q)y=h+q+z+j;var A=void 0,B=this.convertVerticalFOVToXML(o.initialFOV),C=this.convertFBGuideMetadataToXML(o.guideData),D=this.convertFBHotspotMetadataToXML(o.fbHotspotMetadata);if(B||C||D)A=i+("<"+c("SphericalVideoMetadataTags").FBSPHERICAL.SPHERICAL+">true</"+c("SphericalVideoMetadataTags").FBSPHERICAL.SPHERICAL+">")+(B||"")+(C||"")+(D||"")+j;return{GSphericalXML:y,FBSphericalXML:A}},injectMetadata:function n(o,p,q){__p&&__p();var r=this.convertSphericalMetadataToXML(p),s=r.GSphericalXML,t=r.FBSphericalXML,u=new(c("UUIDBox"))({boxtype:"uuid",extraFields:{usertype:c("ISOVideoBoxConstants").GSPHERICAL_UUID,data:c("VideoSphericalMetadataUtil").stringToArrayBuffer(s)}});if(t){var v=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak").addPath("uuid",1),w=o.findBoxAtExactLocation(v);if(w instanceof c("UUIDBox")&&c("shallowArrayEqual")(w.getExtraFields().usertype,c("ISOVideoBoxConstants").FBSPHERICAL_UUID))o.removeBoxAtLocation(v)}var x=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak").addPath("uuid",0),y=o.findBoxAtExactLocation(x);if(y instanceof c("UUIDBox")&&c("shallowArrayEqual")(y.getExtraFields().usertype,c("ISOVideoBoxConstants").GSPHERICAL_UUID))o.removeBoxAtLocation(x);var z=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak");o.injectBoxAtLocation(u,z);if(t){var A=new(c("UUIDBox"))({boxtype:"uuid",extraFields:{usertype:c("ISOVideoBoxConstants").FBSPHERICAL_UUID,data:c("VideoSphericalMetadataUtil").stringToArrayBuffer(t)}}),B=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak");o.injectBoxAtLocation(A,B)}if(q&&!p.fbSpatialAudioMetadata&&!p.ytSpatialAudioMetadata)this.injectBasicSpatialAudioMetadata(o)},injectBasicSpatialAudioMetadata:function n(o){__p&&__p();var p=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak",1),q=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak",2),r=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak",3),s=o.findBoxAtExactLocation(p),t=o.findBoxAtExactLocation(q),u=o.findBoxAtExactLocation(r);if(!s||!t||!u)return false;var v=o.findBoxes("meta");for(var w=v,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z,B=A.getChildren();if(B.length===2&&B[0]instanceof c("HDLRBox")&&B[0].getExtraFields().handler_type===k&&B[0].getExtraFields().name()===l)return false}var C=this.createBasicSpatialAudioBoxes();o.injectBoxAtLocation(C[0],new(c("ISOVideoBoxPath"))().addPath("moov"));o.injectBoxAtLocation(C[1],p);o.injectBoxAtLocation(C[2],q);o.injectBoxAtLocation(C[3],r);return true},createBasicSpatialAudioBoxes:function n(){__p&&__p();var o="<fb360>\n\t<audio>",p="\t</audio>\n</fb360>",q=o+'\t\t<encoder_metadata name="FB Metadata Injector">\n</encoder_metadata>'+p,r=o+'\t\t<AudioChannelConfiguration schemeIdUri="tag:facebook.com,2016-08-16:fb360:audio:channel_layout" value="tbe_8a" />'+p,s=o+'\t\t<AudioChannelConfiguration schemeIdUri="tag:facebook.com,2016-08-16:fb360:audio:channel_layout" value="tbe_8b" />'+p,t=o+'\t\t<AudioChannelConfiguration schemeIdUri="tag:facebook.com,2016-08-16:fb360:audio:channel_layout" value="nda" />'+p,u={boxtype:"meta",extraFields:{}},v=new(c("FullBox"))(u),w=new(c("FullBox"))(u),x=new(c("FullBox"))(u),y=new(c("FullBox"))(u),z={boxtype:"hdlr",extraFields:{handler_type:k,name:l}},A=new(c("HDLRBox"))(z),B=new(c("HDLRBox"))(z),C=new(c("HDLRBox"))(z),D=new(c("HDLRBox"))(z),E={boxtype:"xml ",extraFields:{xml_string:q}},F={boxtype:"xml ",extraFields:{xml_string:r}},G={boxtype:"xml ",extraFields:{xml_string:s}},H={boxtype:"xml ",extraFields:{xml_string:t}},I=new(c("XMLBox"))(E),J=new(c("XMLBox"))(F),K=new(c("XMLBox"))(G),L=new(c("XMLBox"))(H);v.addChild(A);v.addChild(I);w.addChild(B);w.addChild(J);x.addChild(C);x.addChild(K);y.addChild(D);y.addChild(L);return[v,w,x,y]}};f.exports=m}),null);
__d("ComposerXVideoUploadAttachmentForDialog",["fbt","Arbiter","AsyncRequest","Button","ReactComposerStatusStore","ComposerVideoAdBreakStore","ComposerVideoUploadActions","ComposerVideoUploadDetails.react","ComposerVideoUploadSphericalStore","ComposerVideoUploadStore","ComposerWaterfallEvent","ComposerXAttachmentUtils","ComposerXController","ComposerXVideoUploadAttachment","ComposerXVideoUploadWrapperMixin","PagesSettingsInstreamAdsBlockListStore","ProfileVideoWWWFrontendActionTypedLogger","React","ReactDOM","ReactComposerContextProviderMixin","SubscriptionsHandler","URI","VideoContainerType","VideoCopyrightUploadSettings","VideoLibraryNuxAction","VideoLibraryNuxType","VideoSphericalMetadataInjector","VideoSphericalMetadataReaderController","XVideoLibraryNuxController","ComposerVideoUploadSphericalAction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").createClass({displayName:"Wrapper",mixins:[c("ReactComposerContextProviderMixin"),c("ComposerXVideoUploadWrapperMixin")],getInitialState:function m(){return{shown:true,showCategoryRequiredError:false}},componentDidMount:function m(){if(!this._filesAddedSubscription)this._filesAddedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesAdded/"+this.props.originalComposerID+"/videoupload",this.onFileSelected);if(!this.filesDroppedSubscription)this.filesDroppedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesDropped/"+this.props.originalComposerID+"/videoupload",this.onFileDropped);this.addSubscriptions()},updateSpherical:function m(n){c("ComposerVideoUploadActions").updateSpherical(this.getChildContext().composerID,n)},updateOriginalSphericalMetadata:function m(n){c("ComposerVideoUploadSphericalAction").updateOriginalSphericalMetadata(this.getChildContext().composerID,n)},show:function m(){this.setState({shown:true})},hide:function m(){this.setState({shown:false})},reset:function m(){if(this.refs.videoUploadDetails)this.refs.videoUploadDetails.reset()},_onVideoFileInputChange:function m(n){this.props.onVideoFileInputChange(n);this.onFileSelected("",{fileInput:n})},render:function m(){if(!this.state.shown)return null;return c("React").createElement(c("ComposerVideoUploadDetails.react"),{ref:"videoUploadDetails",accessToken:this.props.accessToken,allowCustomThumbnail:this.props.allowCustomThumbnail,canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,canEditFundraiserForStoryCharityID:this.props.canEditFundraiserForStoryCharityID,compactMode:this.props.compactMode,composerID:this.props.originalComposerID,config:this.props.config,errorCode:this.state.errorCode,errorMessage:this.state.errorMessage,generateThumbnails:this.props.generateThumbnails,hideDescriptionEditor:true,improvedContentTags:this.props.improvedContentTags,isReferenceVideo:this.props.isReferenceVideo,isProfileVideo:this.props.isProfileVideo,isUserUploadFlow:this.props.isUserUploadFlow,isVideoUpload:true,logger:this.state.logger,mentionsSearchSource:this.props.mentionsSearchSource,onHighlightedVideosNuxDismiss:this.props.onHighlightedVideosNuxDismiss,onVideoFileChange:this.props.onVideoFileChange,onVideoFileInputChange:this._onVideoFileInputChange,pageAccessToken:this.props.pageAccessToken,postPending:this.props.postPending,progress:this.state.progress,showCaptionsTab:this.props.showCaptionsTab,showCopyrightSection:this.props.showCopyrightSection,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,showDisturbingSection:this.props.showDisturbingSection,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,showHighlightedVideosNux:this.props.showHighlightedVideosNux,showInternalVideoSettings:this.props.showInternalVideoSettings,showPermissionsTab:this.props.showPermissionsTab,showSecretVideoOption:this.props.showSecretVideoOption,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showSphericalControlsTab:this.props.showSphericalControlsTab,showTagSelectorNux:this.props.showTagSelectorNux,showTagSelectorToken:this.props.showTagSelectorToken,showThumbnailScrubber:this.props.showThumbnailScrubber,showUploadProgressBar:this.props.showUploadProgressBar,showCrosspostedPermissionsNUX:this.props.showCrosspostedPermissionsNUX,stage:this.state.stage,tagsSearchSource:this.props.tagsSearchSource,UILogger:this.state.UILogger,uploadVideoID:this.props.uploadVideoID,useSimpleVersion:this.props.useSimpleVersion,videoFile:this.state.videoFile,showOmnistabSection:this.props.showOmnistabSection,showAdBreaksTab:this.props.showAdBreaksTab,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,isShowPage:this.props.isShowPage,isPageTrailer:this.props.isPageTrailer,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,canExcludeSegments:this.props.canExcludeSegments,showThumbnailExperimentSection:this.props.showThumbnailExperimentSection,showCategoryRequiredError:this.state.showCategoryRequiredError,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,isMonetizationOnboarded:this.props.isMonetizationOnboarded,canSeeNewMatchRuleDialog:this.props.canSeeNewMatchRuleDialog,makeTitleMandatory:this.props.makeTitleMandatory,showShareToParentPageOption:this.props.showShareToParentPageOption,parentPageName:this.props.parentPageName,parentPageProfilePic:this.props.parentPageProfilePic,showAttributionsSection:this.props.showAttributionsSection,shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,canSeeIGMatches:this.props.canSeeIGMatches,showGamesTypeahead:this.props.showGamesTypeahead})}});i=babelHelpers.inherits(l,c("ComposerXVideoUploadAttachment"));j=i&&i.prototype;function l(m,n){"use strict";__p&&__p();j.constructor.call(this,m,n);this.$ComposerXVideoUploadAttachmentForDialog1=n.accessToken;this.$ComposerXVideoUploadAttachmentForDialog2=n.actorID;this.$ComposerXVideoUploadAttachmentForDialog3=n.allowCustomThumbnail;this.$ComposerXVideoUploadAttachmentForDialog4=n.alwaysShowUploadProgressBar;this.$ComposerXVideoUploadAttachmentForDialog5=n.compactMode;this.$ComposerXVideoUploadAttachmentForDialog6=n.composerType;this.$ComposerXVideoUploadAttachmentForDialog7=n.defaultCategory;this.$ComposerXVideoUploadAttachmentForDialog8=n.generateThumbnails;this.$ComposerXVideoUploadAttachmentForDialog9=n.isReferenceVideo;this.$ComposerXVideoUploadAttachmentForDialog10=n.isProfileVideo;this.$ComposerXVideoUploadAttachmentForDialog11=n.initialCopyrightData;this.$ComposerXVideoUploadAttachmentForDialog12=n.isUserUploadFlow;this.$ComposerXVideoUploadAttachmentForDialog13=n.mentionsSearchSource;this.$ComposerXVideoUploadAttachmentForDialog14=n.originalComposerID;this.$ComposerXVideoUploadAttachmentForDialog15=n.pageAccessToken;this.$ComposerXVideoUploadAttachmentForDialog16=n.showCaptionsTab;this.$ComposerXVideoUploadAttachmentForDialog17=n.showCopyrightSection;this.$ComposerXVideoUploadAttachmentForDialog18=n.showDisturbingSection;this.$ComposerXVideoUploadAttachmentForDialog19=n.showFeedTypeCheckbox;this.$ComposerXVideoUploadAttachmentForDialog20=n.showHighlightedVideosNux;this.$ComposerXVideoUploadAttachmentForDialog21=n.showInternalVideoSettings;this.$ComposerXVideoUploadAttachmentForDialog22=n.showPermissionsTab;this.$ComposerXVideoUploadAttachmentForDialog23=n.showSecretVideoOption;this.$ComposerXVideoUploadAttachmentForDialog24=n.showAdvancedTabSphericalCheckbox;this.$ComposerXVideoUploadAttachmentForDialog25=n.showSphericalControlsTab;this.$ComposerXVideoUploadAttachmentForDialog26=n.showTagSelector;this.$ComposerXVideoUploadAttachmentForDialog27=n.showTagSelectorNux;this.$ComposerXVideoUploadAttachmentForDialog28=n.showTagSelectorToken;this.$ComposerXVideoUploadAttachmentForDialog29=n.showThumbnailScrubber;this.$ComposerXVideoUploadAttachmentForDialog30=n.tagsSearchSource;this.$ComposerXVideoUploadAttachmentForDialog31=n.targetData;this.$ComposerXVideoUploadAttachmentForDialog32=n.useSimpleVersion;this.$ComposerXVideoUploadAttachmentForDialog33=n.videoUploadContainer;this.$ComposerXVideoUploadAttachmentForDialog34=n.sharedWithBusiness;this.$ComposerXVideoUploadAttachmentForDialog35=n.business;this.$ComposerXVideoUploadAttachmentForDialog36=n.showCrosspostedPermissionsNUX;this.$ComposerXVideoUploadAttachmentForDialog37=n.showCrosspostingHelpCenter;this.$ComposerXVideoUploadAttachmentForDialog38=n.canCrosspostOutsideBusiness;this.$ComposerXVideoUploadAttachmentForDialog39=n.crosspostingConfig;this.$ComposerXVideoUploadAttachmentForDialog40=n.canEditCustomLabels;this.$ComposerXVideoUploadAttachmentForDialog41=n.canEditExternalVideoID;this.$ComposerXVideoUploadAttachmentForDialog42=n.canEditFundraiserForStoryCharityID;this.$ComposerXVideoUploadAttachmentForDialog43=n.showCustomLabels;this.$ComposerXVideoUploadAttachmentForDialog44=n.showExternalVideoIDSection;this.$ComposerXVideoUploadAttachmentForDialog45=n.showOmnistabSection;this.$ComposerXVideoUploadAttachmentForDialog46=n.showAdBreaksTab;this.$ComposerXVideoUploadAttachmentForDialog47=n.canEditAdBreaksTabBlockListContent;this.$ComposerXVideoUploadAttachmentForDialog48=n.showAdBreakAdminPreviewSettings;this.$ComposerXVideoUploadAttachmentForDialog49=n.showAdBreakOffsetEditorNux;this.$ComposerXVideoUploadAttachmentForDialog50=n.isShowPage;this.$ComposerXVideoUploadAttachmentForDialog51=n.isPageTrailer;this.$ComposerXVideoUploadAttachmentForDialog52=n.showMarkURI;this.$ComposerXVideoUploadAttachmentForDialog53=n.minEpisodeDuration;this.$ComposerXVideoUploadAttachmentForDialog54=n.canSeeUploadVideoDialogShowsNux;this.$ComposerXVideoUploadAttachmentForDialog55=n.adBreaksExperimentPublicMetadata;this.$ComposerXVideoUploadAttachmentForDialog56=n.canExcludeSegments;this.$ComposerXVideoUploadAttachmentForDialog57=n.showThumbnailExperimentSection;this.$ComposerXVideoUploadAttachmentForDialog58=n.showGamesTypeahead;this.$ComposerXVideoUploadAttachmentForDialog59=n.shouldShowPageOnboardingForAdBreak;this.$ComposerXVideoUploadAttachmentForDialog60=n.isMonetizationOnboarded;this.$ComposerXVideoUploadAttachmentForDialog61=n.canSeeNewMatchRuleDialog;this.$ComposerXVideoUploadAttachmentForDialog62=n.makeTitleMandatory;this.$ComposerXVideoUploadAttachmentForDialog63=n.showShareToParentPageOption;this.$ComposerXVideoUploadAttachmentForDialog64=n.parentPageName;this.$ComposerXVideoUploadAttachmentForDialog65=n.parentPageProfilePic;this.$ComposerXVideoUploadAttachmentForDialog66=n.showAttributionsSection;this.$ComposerXVideoUploadAttachmentForDialog67=n.improvedContentTags;this.$ComposerXVideoUploadAttachmentForDialog68=n.shouldShowNewCaptionsFlow;this.$ComposerXVideoUploadAttachmentForDialog69=n.canSeeIGMatches}l.prototype.$ComposerXVideoUploadAttachmentForDialog70=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog20=false;var m=c("XVideoLibraryNuxController").getURIBuilder().setEnum("action",c("VideoLibraryNuxAction").DISMISS).setEnum("nux_type",c("VideoLibraryNuxType").HIGHLIGHTED_VIDEOS_NUX).getURI();new(c("AsyncRequest"))().setURI(m).send()};l.prototype.$ComposerXVideoUploadAttachmentForDialog71=function(){"use strict";var m=c("XVideoLibraryNuxController").getURIBuilder().setEnum("action",c("VideoLibraryNuxAction").IMPRESSION).setEnum("nux_type",c("VideoLibraryNuxType").HIGHLIGHTED_VIDEOS_NUX).getURI();new(c("AsyncRequest"))().setURI(m).send()};l.prototype.initFileSubscription=function(){"use strict";if(!this.filesAddedSubscription)this.filesAddedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesAdded/"+this.$ComposerXVideoUploadAttachmentForDialog14+"/videoupload",this.$ComposerXVideoUploadAttachmentForDialog72.bind(this,this.onFileSelected));if(!this.filesDroppedSubscription)this.filesDroppedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesDropped/"+this.$ComposerXVideoUploadAttachmentForDialog14+"/videoupload",this.$ComposerXVideoUploadAttachmentForDialog72.bind(this,this.onFileDropped))};l.prototype.getVideoStoreData=function(){"use strict";__p&&__p();var m=["areCopyrightCountriesIncluded","ad_breaks","ad_breaks_block_lists","captions","civic_product_source","composertags_with","content_category","content_tags","copyrighted","copyrightRuleID","copyrightMonitoringType","copyrightWhitelistedPartners","copyrightWhitelistedIGUserNames","copyrightOwnershipCountries","copyrightExcludedSegments","copyrightAttributionID","crossposting_config","custom_labels","guide_enabled","guide_keyframes","disturbing","embeddable","feed_type","fov","free_form_tags","fte_only","external_video_id","initialHeading","initialPitch","internal_video","monitoring_type","no_story","shared_with_business","secret","social_actions","spherical","thumb","thumbnail_type","user_uploaded_custom_thumbnail_timestamp","user_scrubbed_thumbnail_timestamp","video_title","enable_omnistab","projection","stereoMode","hotspotXML","sponsor_relationship","episode_data_json","direct_share_status","square_custom_thumbnail_dimensions","enable_ad_breaks_experiment","ad_breaks_experiment_revenue_loss_threshold","videoDurationInSec","selectedCategory","enable_thumbnail_experiment","fundraiser_for_story_charity_id","share_to_parent_page_option_selected","share_to_parent_page_text","gameID"];return c("ComposerVideoUploadStore").getPostData(this.getComposerID()).then(function(n){__p&&__p();var o=c("ComposerVideoUploadSphericalStore").getPostData(this.getComposerID());if(o.hotspots)o.hotspotXML=c("VideoSphericalMetadataInjector").convertFBHotspotMetadataToXML(o.hotspots);Object.assign(n,o);Object.assign(n,c("ComposerVideoAdBreakStore").getPostData(this.getComposerID()));var p=c("PagesSettingsInstreamAdsBlockListStore").getComposerBlockListIdsToApply();if(p)Object.assign(n,{ad_breaks_block_lists:p});return m.reduce(function(q,r){__p&&__p();if(r in n)q[r]=n[r];if(this.$ComposerXVideoUploadAttachmentForDialog9){q.video_container=c("VideoContainerType").COPYRIGHT_REFERENCE_VIDEO;q.copyrighted=true}if(q.copyrighted){q.access_token=this.$ComposerXVideoUploadAttachmentForDialog15;q.create_copyright_via_api=true}if(q.copyrightExcludedSegments){var s=q.copyrightExcludedSegments.filter(function(t){return!t.included&&t.start_time_in_sec!=null&&t.duration_in_sec!=null});s.forEach(function(t){return delete t.included});q.copyrightExcludedSegments=s}return q}.bind(this),{})}.bind(this))["catch"](function(n){return false})};l.prototype.onCancel=function(m,n){"use strict";__p&&__p();if(n.composerID==this.$ComposerXVideoUploadAttachmentForDialog14){if(this.fileInput&&!this.fileInput.input)this.fileInput=null;this.videoUploader.cancel();this.isUploading=false;c("ComposerXController").reset(this.getComposerID());this.logComposerWaterfallEvent(c("ComposerWaterfallEvent").VIDEO_REMOVE);this.clear()}};l.prototype.initWithComponents=function(){"use strict";__p&&__p();c("Button").setEnabled(this.submitButton,false);this.videoFileSelected=false;this.uploadFinished=false;if(this.tagger)this.tagger.init(this);this.subscriptionsHandler=new(c("SubscriptionsHandler"))();this.initFileSubscription();this.initVideoUploader();this.videoUploader.subscribe("metadata-parsed",function(event,n){return this.$ComposerXVideoUploadAttachmentForDialog73(n)}.bind(this));if(!this.$ComposerXVideoUploadAttachmentForDialog74)this.$ComposerXVideoUploadAttachmentForDialog74=c("Arbiter").subscribe("videoUpload/cancel",this.onCancel.bind(this));var m;if(this.$ComposerXVideoUploadAttachmentForDialog9)m=h._("Add a title (optional)");else if(this.$ComposerXVideoUploadAttachmentForDialog10)m=h._("Add a description...");else m=h._("Say something about this video. This description will appear with your video across Facebook.");if(this.getComponent("maininput")!=null){c("ComposerXAttachmentUtils").initMentions(this.getComponent("maininput"),m,this.getComposerRoot());c("ComposerXAttachmentUtils").setValueForMentions(this.getComponent("maininput"),c("ReactComposerStatusStore").getMessageText(this.$ComposerXVideoUploadAttachmentForDialog14))}this.setInitialData();this.renderReactComponent();if(this.$ComposerXVideoUploadAttachmentForDialog20){this.$ComposerXVideoUploadAttachmentForDialog71();this.$ComposerXVideoUploadAttachmentForDialog20=false}};l.prototype.setInitialData=function(){"use strict";c("ComposerVideoUploadActions").updateCategory(this.getComposerID(),this.$ComposerXVideoUploadAttachmentForDialog7);this.updatePermissions();this.updateCopyrightSettings()};l.prototype.renderReactComponent=function(){"use strict";var m={composerID:this.getComposerID(),targetID:this.$ComposerXVideoUploadAttachmentForDialog31.targetID,actorID:this.$ComposerXVideoUploadAttachmentForDialog2,composerType:this.$ComposerXVideoUploadAttachmentForDialog6},n;if(this.$ComposerXVideoUploadAttachmentForDialog4)n=true;else n=this.$ComposerXVideoUploadAttachmentForDialog75;var o=this.videoUploader&&this.videoUploader.getUploadSession(),p=o&&o.getVideoID();c("ReactDOM").render(c("React").createElement(k,{ref:function(q){return this.$ComposerXVideoUploadAttachmentForDialog76=q}.bind(this),accessToken:this.$ComposerXVideoUploadAttachmentForDialog1,allowCustomThumbnail:this.$ComposerXVideoUploadAttachmentForDialog3,canCrosspostOutsideBusiness:this.$ComposerXVideoUploadAttachmentForDialog38,canEditCustomLabels:this.$ComposerXVideoUploadAttachmentForDialog40,adBreaksExperimentPublicMetadata:this.$ComposerXVideoUploadAttachmentForDialog55,canEditExternalVideoID:this.$ComposerXVideoUploadAttachmentForDialog41,canEditFundraiserForStoryCharityID:this.$ComposerXVideoUploadAttachmentForDialog42,compactMode:this.$ComposerXVideoUploadAttachmentForDialog5,config:m,contextConfig:m,generateThumbnails:this.$ComposerXVideoUploadAttachmentForDialog8,improvedContentTags:this.$ComposerXVideoUploadAttachmentForDialog67,isProfileVideo:this.$ComposerXVideoUploadAttachmentForDialog10,isReferenceVideo:this.$ComposerXVideoUploadAttachmentForDialog9,isUserUploadFlow:this.$ComposerXVideoUploadAttachmentForDialog12,logger:this.$ComposerXVideoUploadAttachmentForDialog77,mentionsSearchSource:this.$ComposerXVideoUploadAttachmentForDialog13,onVideoFileInputChange:this.$ComposerXVideoUploadAttachmentForDialog78.bind(this),onHighlightedVideosNuxDismiss:this.$ComposerXVideoUploadAttachmentForDialog70.bind(this),originalComposerID:this.$ComposerXVideoUploadAttachmentForDialog14,pageAccessToken:this.$ComposerXVideoUploadAttachmentForDialog15,postPending:this.postPending,showCaptionsTab:this.$ComposerXVideoUploadAttachmentForDialog16,showCopyrightSection:this.$ComposerXVideoUploadAttachmentForDialog17,showCustomLabels:this.$ComposerXVideoUploadAttachmentForDialog43,showDisturbingSection:this.$ComposerXVideoUploadAttachmentForDialog18,showExternalVideoIDSection:this.$ComposerXVideoUploadAttachmentForDialog44,showFeedTypeCheckbox:this.$ComposerXVideoUploadAttachmentForDialog19,showHighlightedVideosNux:this.$ComposerXVideoUploadAttachmentForDialog20,showInternalVideoSettings:this.$ComposerXVideoUploadAttachmentForDialog21,showPermissionsTab:this.$ComposerXVideoUploadAttachmentForDialog22,showSecretVideoOption:this.$ComposerXVideoUploadAttachmentForDialog23,showAdvancedTabSphericalCheckbox:this.$ComposerXVideoUploadAttachmentForDialog24,showSphericalControlsTab:this.$ComposerXVideoUploadAttachmentForDialog25,showTagSelector:this.$ComposerXVideoUploadAttachmentForDialog26,showTagSelectorNux:this.$ComposerXVideoUploadAttachmentForDialog27,showTagSelectorToken:this.$ComposerXVideoUploadAttachmentForDialog28,showThumbnailScrubber:this.$ComposerXVideoUploadAttachmentForDialog29,showUploadProgressBar:n,showCrosspostedPermissionsNUX:this.$ComposerXVideoUploadAttachmentForDialog36,showCrosspostingHelpCenter:this.$ComposerXVideoUploadAttachmentForDialog37,tagsSearchSource:this.$ComposerXVideoUploadAttachmentForDialog30,uploadVideoID:p,useSimpleVersion:this.$ComposerXVideoUploadAttachmentForDialog32,videoUploader:this.videoUploader,showOmnistabSection:this.$ComposerXVideoUploadAttachmentForDialog45,showAdBreaksTab:this.$ComposerXVideoUploadAttachmentForDialog46,canEditAdBreaksTabBlockListContent:this.$ComposerXVideoUploadAttachmentForDialog47,showAdBreakAdminPreviewSettings:this.$ComposerXVideoUploadAttachmentForDialog48,showAdBreakOffsetEditorNux:this.$ComposerXVideoUploadAttachmentForDialog49,isShowPage:this.$ComposerXVideoUploadAttachmentForDialog50,isPageTrailer:this.$ComposerXVideoUploadAttachmentForDialog51,showMarkURI:this.$ComposerXVideoUploadAttachmentForDialog52,minEpisodeDuration:this.$ComposerXVideoUploadAttachmentForDialog53,canSeeUploadVideoDialogShowsNux:this.$ComposerXVideoUploadAttachmentForDialog54,canExcludeSegments:this.$ComposerXVideoUploadAttachmentForDialog56,showThumbnailExperimentSection:this.$ComposerXVideoUploadAttachmentForDialog57,showGamesTypeahead:this.$ComposerXVideoUploadAttachmentForDialog58,shouldShowPageOnboardingForAdBreak:this.$ComposerXVideoUploadAttachmentForDialog59,isMonetizationOnboarded:this.$ComposerXVideoUploadAttachmentForDialog60,canSeeNewMatchRuleDialog:this.$ComposerXVideoUploadAttachmentForDialog61,makeTitleMandatory:this.$ComposerXVideoUploadAttachmentForDialog62,showShareToParentPageOption:this.$ComposerXVideoUploadAttachmentForDialog63,parentPageName:this.$ComposerXVideoUploadAttachmentForDialog64,parentPageProfilePic:this.$ComposerXVideoUploadAttachmentForDialog65,showAttributionsSection:this.$ComposerXVideoUploadAttachmentForDialog66,shouldShowNewCaptionsFlow:this.$ComposerXVideoUploadAttachmentForDialog68,canSeeIGMatches:this.$ComposerXVideoUploadAttachmentForDialog69}),this.$ComposerXVideoUploadAttachmentForDialog33)};l.prototype.$ComposerXVideoUploadAttachmentForDialog72=function(m,n,o){"use strict";var p=o.fileInput.input,q=document.createElement("video"),r=this.getComposerID(),s=URL.createObjectURL(p.files[0]);q.src=s;q.ondurationchange=function(){c("ComposerVideoUploadActions").updateVideoDurationInSec(r,this.duration)};m.call(this,n,o);if(this.$ComposerXVideoUploadAttachmentForDialog76)this.$ComposerXVideoUploadAttachmentForDialog76.show()};l.prototype.$ComposerXVideoUploadAttachmentForDialog78=function(m){"use strict";this.onFileSelected("",{fileInput:m})};l.prototype.$ComposerXVideoUploadAttachmentForDialog73=function(m){"use strict";__p&&__p();if(m&&this.$ComposerXVideoUploadAttachmentForDialog76){var n=m.format.isSpherical;this.$ComposerXVideoUploadAttachmentForDialog76.updateSpherical(n);if(n){var o=c("VideoSphericalMetadataReaderController").objectToRawSphericalMetadata(m);new(c("VideoSphericalMetadataReaderController"))({sourceType:"metadata",metadata:o}).getFileMetadata().then(function(p){return this.$ComposerXVideoUploadAttachmentForDialog76.updateOriginalSphericalMetadata(p)}.bind(this)).done()}}};l.prototype.isCopyrightDataValid=function(m){"use strict";if(m.copyrighted&&!m.selectedCategory)return false;return true};l.prototype.validateData=function(m){"use strict";__p&&__p();if(!j.validateData.call(this,m))return false;if(!this.isCopyrightDataValid(m)){this.hideThrobber();c("Button").setEnabled(this.submitButton,true);this.$ComposerXVideoUploadAttachmentForDialog76.setState({showCategoryRequiredError:true});return false}if(m.guide_enabled&&m.guide_keyframes.length===0){c("Button").setEnabled(this.submitButton,true);var n={error_description:h._("Guide must have at least one point of interest."),error_code:"VIDEO__INVALID_GUIDE_DATA"};this.$ComposerXVideoUploadAttachmentForDialog76.handlePostFailed("post-failed",n);return false}if(m.cta_url&&!c("URI").isValidURI(m.cta_url)){c("Button").setEnabled(this.submitButton,true);var o={error_description:h._("The provided link is not a valid URI.")};this.$ComposerXVideoUploadAttachmentForDialog76.handlePostFailed("post-failed",o);return false}return true};l.prototype.handleUploadFinished=function(){"use strict";if(this.fileInput&&!this.fileInput.input)this.fileInput=null;j.handleUploadFinished.call(this)};l.prototype.handlePostFinished=function(event,m){"use strict";j.handlePostFinished.call(this,event,m);this.clear()};l.prototype.updatePermissions=function(){"use strict";var m=[];if(this.$ComposerXVideoUploadAttachmentForDialog38)m=this.$ComposerXVideoUploadAttachmentForDialog39;else if(this.$ComposerXVideoUploadAttachmentForDialog35!==""){var n={allow:this.$ComposerXVideoUploadAttachmentForDialog34,business:this.$ComposerXVideoUploadAttachmentForDialog35};m.push(n)}c("ComposerVideoUploadActions").updatePermissions(this.getComposerID(),m)};l.prototype.updateCopyrightSettings=function(){"use strict";__p&&__p();if(!this.$ComposerXVideoUploadAttachmentForDialog11||!this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").USE_CUSTOM])return;var m=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").ALLOW_AUTO_MONITORING],n=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").MONITORING_TYPE],o=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").MATCH_RULE],p=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").OWNERSHIP_COUNTRIES],q=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").ARE_COUNTRIES_INCLUDED];if(m)c("ComposerVideoUploadActions").updateCopyrighted(this.getComposerID(),m);if(n)c("ComposerVideoUploadActions").updateCopyrightMonitoringType(this.getComposerID(),n);if(o)c("ComposerVideoUploadActions").updateCopyrightRuleID(this.getComposerID(),o);if(p)c("ComposerVideoUploadActions").updateCopyrightOwnershipCountries(this.getComposerID(),p,q)};l.prototype.clear=function(){"use strict";__p&&__p();if(this.$ComposerXVideoUploadAttachmentForDialog76)this.$ComposerXVideoUploadAttachmentForDialog76.reset();var m=this.getComposerID();c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.setInitialData();if(this.$ComposerXVideoUploadAttachmentForDialog76)this.$ComposerXVideoUploadAttachmentForDialog76.hide()};l.prototype.showUploadProgressBar=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog75=true;this.renderReactComponent()};l.prototype.hideUploadProgressBar=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog75=false;this.renderReactComponent()};l.prototype.handleUploadFailed=function(event,m){"use strict";if(this.$ComposerXVideoUploadAttachmentForDialog10)new(c("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("profile_video_upload_error").setSessionID(this.$ComposerXVideoUploadAttachmentForDialog14).setUploadError(m.error_summary).log();this.isUploading=false;c("Button").setEnabled(this.submitButton,false)};l.prototype.handlePostFailed=function(event,m){"use strict";c("ComposerXController").hideAttachmentThrobber(this.getComposerID());c("Button").setEnabled(this.submitButton,true)};l.prototype.showThrobber=function(){"use strict";c("Arbiter").inform("videoUpload/showThrobber",{composerID:this.$ComposerXVideoUploadAttachmentForDialog14})};l.prototype.hideThrobber=function(){"use strict";c("Arbiter").inform("videoUpload/hideThrobber",{composerID:this.$ComposerXVideoUploadAttachmentForDialog14})};f.exports=l}),null);