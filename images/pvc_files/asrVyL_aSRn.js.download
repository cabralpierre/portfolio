if (self.CavalryLogger) { CavalryLogger.start_js(["W9v9D"]); }

__d("TimelineMapScrollableArea",["Animation","ArbiterMixin","CSS","DOM","Event","Run","Scroll","SimpleDrag","Style","UserAgent","Vector","$","shield"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){i&&this.init(c("$")(i),j)}Object.assign(h.prototype,c("ArbiterMixin"),{init:function i(j,k){__p&&__p();var l,m=this;k=k||{};this._elem=j;this._wrap=c("DOM").find(j,"div.fbScrollableAreaWrap");this._body=c("DOM").find(this._wrap,"div.fbScrollableAreaBody");this._track=c("DOM").find(j,"div.fbScrollableAreaTrack");this._gripper=c("DOM").find(this._track,"div.fbScrollableAreaGripper");this._options=k;this.adjustGripper();this._listeners=[c("Event").listen(this._wrap,"scroll",this._handleScroll.bind(this))];if(k.fade!==false)this._listeners.push(c("Event").listen(j,"mouseenter",c("shield")(this.adjustGripper,this)),c("Event").listen(j,"mouseenter",c("shield")(this.showScrollbar,this)),c("Event").listen(j,"mousemove",this._handleMousemove.bind(this)),c("Event").listen(j,"mouseleave",c("shield")(this.hideScrollbar,this)));if(k.fade!==undefined)this._listeners.push(c("Event").listen(this._track,"click",this.clickToScroll.bind(this)));if(k.verticalscroll)(function(){var n=c("UserAgent").isBrowser("Firefox")?"DOMMouseScroll":"WheelEvent"in window?"wheel":"mousewheel",o=m.mouseWheel.bind(m),p=m._wrap,q={remove:function r(){p.removeEventListener(n,o)}};m._listeners.push(c("Event").listen(p,"mouseenter",function(){if(p.scrollWidth>p.clientWidth)p.addEventListener(n,o)}),c("Event").listen(p,"mouseleave",q.remove),q)})();this.initDrag();if(!k.persistent)c("Run").onLeave(this.destroy.bind(this))},getRoot:function i(){return this._elem},initDrag:function i(){__p&&__p();var j=new(c("SimpleDrag"))(this._gripper);j.subscribe("start",function(k,event){__p&&__p();if(!(event.which&&event.which===1||event.button&&event.button===1))return;this.inform("dragstart");var l=c("Vector").getEventPosition(event).x,m=this._gripper.offsetLeft,n=j.subscribe("update",function(p,q){var r=c("Vector").getEventPosition(q).x-l,s=this._elem.clientWidth,t=this._body.offsetWidth,u=this._track.offsetWidth,v=s/t*u,w=t-this._wrap.offsetWidth,x=m+r,y=u-v;x=Math.max(Math.min(x,y),0);var z=x/y*w;c("Scroll").setLeft(this._wrap,z)}.bind(this)),o=j.subscribe("end",function(){j.unsubscribe(n);j.unsubscribe(o);this.inform("dragend")}.bind(this))}.bind(this))},adjustGripper:function i(){__p&&__p();var j=this._elem.clientWidth,k=this._body.offsetWidth,l=this._track.offsetWidth,m=j/k*l;if(m<l){c("Style").set(this._gripper,"width",m+"px");var n=c("Scroll").getLeft(this._wrap)/k*l;c("Style").set(this._gripper,"left",n+"px");c("CSS").show(this._gripper)}else c("CSS").hide(this._gripper);this._checkContentBoundaries();return this},_checkContentBoundaries:function i(){var j=c("Scroll").getLeft(this._wrap),k=this._wrap.scrollWidth-this._wrap.clientWidth;c("CSS").conditionClass(this._elem,"contentBefore",j>0);c("CSS").conditionClass(this._elem,"contentAfter",j<k)},destroy:function i(){this._listeners.forEach(function(j){j.remove()});this._listeners.length=0},_handleMousemove:function i(event){var j=c("Vector").getElementPosition(this._track).y,k=c("Vector").getElementDimensions(this._track).y;if(Math.abs(j+k/2-c("Vector").getEventPosition(event).y)<25)this.showScrollbar(false);else this.hideScrollbar()},_handleScroll:function i(event){this.adjustGripper();if(this._options.fade!==false)this.showScrollbar()},hideScrollbar:function i(){__p&&__p();if(!this._scrollbarVisible)return this;this._scrollbarVisible=false;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null}this._hideTimeout=setTimeout(function(){if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null}this._scrollbarAnimation=new(c("Animation"))(this._track).from("opacity",1).to("opacity",0).duration(250).ondone(c("CSS").addClass.bind(null,this._track,"invisible_elem")).go()}.bind(this),750);return this},showScrollbar:function i(j){__p&&__p();if(this._scrollbarVisible)return this;this._scrollbarVisible=true;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null}if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null}this.adjustGripper();c("Style").set(this._track,"opacity",1);c("CSS").removeClass(this._track,"invisible_elem");if(j!==false)this.hideScrollbar();return this},clickToScroll:function i(event){var j=c("Vector").getEventPosition(event).x,k=this._elem.clientWidth,l=this._body.offsetWidth,m=this._track.offsetWidth,n=k/l*m,o=c("Vector").getElementPosition(this._gripper);if(j>=o.x&&j<=o.x+n)return;var p=j<o.x?-1:1,q=this._wrap.offsetWidth*.8*p;this.scrollBy(q)},scrollBy:function i(j){this.setScroll(c("Scroll").getLeft(this._wrap)+j)},getMaxBodyOffset:function i(){return this._body.offsetWidth-this._wrap.offsetWidth},setScroll:function i(j){var k=j;k=Math.max(Math.min(k,this.getMaxBodyOffset()),0);c("Scroll").setLeft(this._wrap,k)},scrollIntoView:function i(j){var k=this._wrap.clientWidth,l=j.offsetWidth,m=c("Scroll").getLeft(this._wrap),n=m+k,o=j.offsetLeft,p=o+l;if(o<m||k<l)this.setScroll(o);else if(p>n)this.setScroll(m+(p-n))},mouseWheel:function i(event){__p&&__p();event.deliberateSync=true;if(this.getMaxBodyOffset()<=0)return;var j=0;if(event.wheelDelta){var k=event.wheelDelta;if(event.wheelDeltaX&&event.wheelDeltaY)k=Math.abs(event.wheelDeltaX)>Math.abs(event.wheelDeltaY)?event.wheelDeltaX:event.wheelDeltaY;j=-k*10/40}else if(event.detail)j=event.detail*10;this.scrollBy(j);event.prevent()}});f.exports=b.TimelineMapScrollableArea||h}),null);
__d("MNPageComposerUtils",[],(function a(b,c,d,e,f,g){"use strict";h.prototype.shouldShowMessagingButton=function(i,j,k,l,m,n,o){var p=i&&i>1&&o!=null&&o;return p||!(i&&i>1||j&&j>1||!i&&!j||k||l||m||n)};function h(){}f.exports=new h()}),null);
__d("ReactComposerCollageDragHandler",["Map","Vector"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(m){return m.reduce(function(n,o){return n+o})}function i(m){var n=m.length;if(n===0)return null;var o=h(m.map(function(q){return q.x}))/n,p=h(m.map(function(q){return q.y}))/n;return new(c("Vector"))(o,p)}function j(m){__p&&__p();var n=m.length;if(n===0)return null;var o=0,p=0;for(var q=0;q<n;q++){var r=m.item(q);o+=r.pageX;p+=r.pageY}return new(c("Vector"))(o/n,p/n)}function k(event){return event.buttons!==undefined?event.buttons&1:event.button===0&&event.type!=="mouseup"}function l(m,n,o,p){this.$ReactComposerCollageDragHandler1=m;this.$ReactComposerCollageDragHandler2=n;this.$ReactComposerCollageDragHandler3=o;this.$ReactComposerCollageDragHandler4=p;this.$ReactComposerCollageDragHandler7=false;this.$ReactComposerCollageDragHandler5=new(c("Map"))()}l.prototype.onMouseDown=function(event){if(k(event)){this.$ReactComposerCollageDragHandler7=true;this.$ReactComposerCollageDragHandler8(event);this.$ReactComposerCollageDragHandler2(this.$ReactComposerCollageDragHandler1,this.$ReactComposerCollageDragHandler6)}};l.prototype.onMouseUp=function(event){if(!k(event)&&this.$ReactComposerCollageDragHandler7){this.$ReactComposerCollageDragHandler7=false;this.$ReactComposerCollageDragHandler8(event);this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,this.$ReactComposerCollageDragHandler6)}};l.prototype.onMouseMove=function(event){if(!k(event))this.$ReactComposerCollageDragHandler7=false;if(this.$ReactComposerCollageDragHandler7){var m=this.$ReactComposerCollageDragHandler8(event);this.$ReactComposerCollageDragHandler3(this.$ReactComposerCollageDragHandler1,this.$ReactComposerCollageDragHandler6,m)}};l.prototype.onBlur=function(event){if(this.$ReactComposerCollageDragHandler7)this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,this.$ReactComposerCollageDragHandler6);this.$ReactComposerCollageDragHandler7=false;this.$ReactComposerCollageDragHandler6=null;if(this.$ReactComposerCollageDragHandler5.size>0)this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,j(Array.from(this.$ReactComposerCollageDragHandler5.values())));this.$ReactComposerCollageDragHandler5=new(c("Map"))()};l.prototype.onTouchStart=function(event){if(this.$ReactComposerCollageDragHandler5.size===0){var m=j(event.targetTouches);this.$ReactComposerCollageDragHandler2(this.$ReactComposerCollageDragHandler1,m)}this.$ReactComposerCollageDragHandler9(event)};l.prototype.onTouchMove=function(event){var m=j(event.targetTouches),n=this.$ReactComposerCollageDragHandler9(event);this.$ReactComposerCollageDragHandler3(this.$ReactComposerCollageDragHandler1,m,n)};l.prototype.onTouchEnd=function(event){this.$ReactComposerCollageDragHandler9(event);if(!event.targetTouches.length)this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,j(event.changedTouches))};l.prototype.onTouchCancel=function(event){this.$ReactComposerCollageDragHandler9(event);if(!event.targetTouches.length)this.$ReactComposerCollageDragHandler4(this.$ReactComposerCollageDragHandler1,j(event.changedTouches))};l.prototype.$ReactComposerCollageDragHandler8=function(event){var m=new(c("Vector"))(event.pageX,event.pageY),n=null;if(this.$ReactComposerCollageDragHandler6)n=m.sub(this.$ReactComposerCollageDragHandler6);this.$ReactComposerCollageDragHandler6=m;return n};l.prototype.$ReactComposerCollageDragHandler9=function(event){__p&&__p();event.preventDefault();var m=[],n=this.$ReactComposerCollageDragHandler5;this.$ReactComposerCollageDragHandler5=new(c("Map"))();for(var o=0;o<event.targetTouches.length;o++){var p=event.targetTouches.item(o),q=new(c("Vector"))(p.pageX,p.pageY),r=n.get(p.identifier);this.$ReactComposerCollageDragHandler5.set(p.identifier,q);if(r)m.push(q.sub(r))}var s=i(m);return s};f.exports=l}),null);
__d("CommerceProductTaggerType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:"none",SHOP_PAGE:"shop_page",NON_SHOP_PAGE:"non_shop_page",INFLUENCER_PAGE:"influencer_page"})}),null);
__d("ReactComposerPhotoActionButton.react",["cx","React","Tooltip","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=c("joinClasses")(this.props.className,"_jfh");return c("React").createElement("button",babelHelpers["extends"]({className:m,onClick:this.props.onClick,tabIndex:"0","aria-label":this.props.tooltip},c("Tooltip").propsFor(this.props.tooltip)),c("React").createElement("div",{className:this.props.iconClassName}))};function l(){i.apply(this,arguments)}l.propTypes={tooltip:k.node,className:k.string,onClick:k.func,iconClassName:k.string};f.exports=l}),null);
__d("ReactComposerPhotoEditActionButton.react",["cx","fbt","React","ReactComposerPhotoActionButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Edit Photo");return c("React").createElement(c("ReactComposerPhotoActionButton.react"),{className:"_4_z4",onClick:this.props.onClick,tooltip:n,iconClassName:"_4_z5"})};function m(){j.apply(this,arguments)}m.propTypes={onClick:l.func};f.exports=m}),null);
__d("ReactComposerMediaAttachmentActionType",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({SET_MEDIA_CONFIG:null},"ReactComposerMediaAttachmentActionType")}),null);
__d("ReactComposerMediaAttachmentStore",["ReactComposerMediaAttachmentActionType","ReactComposerStoreBase"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerStoreBase"));i=h&&h.prototype;function j(){"use strict";var k=void 0;i.constructor.call(this,function(){return{createAlbumLink:null,taggingDataSource:null,videoUploader:null,videoProgressBar:null,videoProgressBarInstance:null}},function(l){switch(l.type){case c("ReactComposerMediaAttachmentActionType").SET_MEDIA_CONFIG:k&&k.$ReactComposerMediaAttachmentStore1(l);break}});k=this}j.prototype.getCreateAlbumLink=function(k){"use strict";return this.getComposerData(k).createAlbumLink};j.prototype.getTaggingDataSource=function(k){"use strict";return this.getComposerData(k).taggingDataSource};j.prototype.getVideoUploader=function(k){"use strict";return this.getComposerData(k).videoUploader};j.prototype.getVideoProgressBarInstance=function(k){"use strict";return this.getComposerData(k).videoProgressBarInstance};j.prototype.getVideoProgressBar=function(k){"use strict";return this.getComposerData(k).videoProgressBar};j.prototype.$ReactComposerMediaAttachmentStore1=function(k){"use strict";var l=this.getComposerData(k.composerID);l.createAlbumLink=k.config.createAlbumLink;l.taggingDataSource=k.config.taggingDataSource;l.videoUploader=k.config.videoUploader;l.videoProgressBar=k.config.videoProgressBar;l.videoProgressBarInstance=k.config.videoProgressBarInstance;this.emitChange(k.composerID)};f.exports=new j()}),null);
__d("ReactComposerFaceboxTaggerTypeaheadPresenter",["cx","React","XUITypeaheadView.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",{className:"_3ntx"},c("React").createElement(c("XUITypeaheadView.react"),this.props))};function k(){i.apply(this,arguments)}var l={ViewRenderer:k,useLayer:true};f.exports=l}),null);
__d("ReactComposerPhotoFaceboxTagger.react",["cx","fbt","React","ReactComposerFaceboxTaggerTypeaheadPresenter","XUITypeahead.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={query:""},this.$ReactComposerPhotoFaceboxTagger1=function(s){this.props.onTagAdded(this.props.faceboxID,s.getUniqueID(),s.getTitle())}.bind(this),this.$ReactComposerPhotoFaceboxTagger2=function(event){this.setState({query:event.target.value})}.bind(this),o}m.prototype.render=function(){var n=i._("Who is this?");return c("React").createElement(c("XUITypeahead.react"),{className:"_xgd",queryString:this.state.query,placeholder:n,onSelectAttempt:this.$ReactComposerPhotoFaceboxTagger1,onChange:this.$ReactComposerPhotoFaceboxTagger2,searchSource:this.props.dataSource,highlightOnSelect:true,showEntriesOnFocus:true,autoHighlight:true,selectOnTab:true,focusedOnInit:true,presenter:c("ReactComposerFaceboxTaggerTypeaheadPresenter")})};m.propTypes={faceboxID:l.string.isRequired,dataSource:l.object.isRequired,onTagAdded:l.func.isRequired};f.exports=m}),null);
__d("ReactComposerQAndAActionType",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({SET_QANDA_CONFIG:null},"ReactComposerQAndAActionType")}),null);
__d("ReactComposerQAndAStore",["ReactComposerQAndAActionType","ReactComposerStoreBase"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerStoreBase"));i=h&&h.prototype;function j(){"use strict";var k=void 0;i.constructor.call(this,function(){return{photoLimit:1,profilePicURI:null,profileURI:null,faceboxDataSource:null}},function(l){switch(l.type){case c("ReactComposerQAndAActionType").SET_QANDA_CONFIG:k&&k.$ReactComposerQAndAStore1(l);break}});k=this}j.prototype.getPhotoLimit=function(k){"use strict";return this.getComposerData(k).photoLimit};j.prototype.getProfilePicSrc=function(k){"use strict";return this.getComposerData(k).profilePicSrc};j.prototype.getProfileURI=function(k){"use strict";return this.getComposerData(k).profileURI};j.prototype.getFaceboxDataSource=function(k){"use strict";return this.getComposerData(k).faceboxDataSource};j.prototype.$ReactComposerQAndAStore1=function(k){"use strict";var l=this.validateAction(k,["composerID","config"]),m=l[0],n=l[1],o=this.getComposerData(m);o.photoLimit=n.photoLimit;o.profilePicSrc=n.profilePicSrc;o.profileURI=n.profileURI;o.faceboxDataSource=n.faceboxDataSource;this.emitChange(k.composerID)};f.exports=new j()}),null);
__d("ReactComposerPhotoFaceboxTaggerContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaAttachmentStore","ReactComposerPhotoFaceboxTagger.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerQAndAStore"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerPhotoFaceboxTaggerContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactComposerMediaAttachmentStore"),c("ReactComposerQAndAStore"))],propTypes:{faceboxID:h.string.isRequired,onTagAdded:h.func.isRequired},statics:{calculateState:function j(k){var l=c("ReactComposerMediaAttachmentStore").getTaggingDataSource(k)||c("ReactComposerQAndAStore").getFaceboxDataSource(k);l&&l.bootstrap();return{dataSource:l}}},render:function j(){return c("React").createElement(c("ReactComposerPhotoFaceboxTagger.react"),{faceboxID:this.props.faceboxID,dataSource:this.state.dataSource,onTagAdded:this.props.onTagAdded})}});f.exports=i}),null);
__d("CommerceSelfServeNUXType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADD_SHIPPING_OPTIONS_PUX:"add_shipping_options_pux",ADMIN_PAYMENTS_NAV_ITEM_NUX:"admin_payments_nav_item_nux",COLLECTION_SHARE_UPSELL:"collection_share_upsell",COMMERCE_INTRO_LANDING_NUX:"commerce_intro_landing_nux",COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON:"composer_product_photo_tagger_button",COMPOSER_PRODUCT_TAGGER_BUTTON:"composer_product_tagger_button",DISCOUNT_CODES_UPSELL:"discount_codes_upsell",FIRST_ORDER_BANNER:"first_order_banner",FIRST_ORDER_MODAL:"first_order_modal",INVOICE_PAYMENTS_CONFIRM_PUX:"invoice_payments_confirm_pux",INVOICE_PAYMENTS_CREATION_PUX:"invoice_payments_creation_pux",INVOICE_PAYMENTS_INVOICE_CREATION_BUTTON:"invoice_payments_invoice_creation_button",INVOICE_PAYMENTS_PAGE_LANDING_UPSELL:"invoice_payments_page_landing_upsell",PHOTO_VIEWER_PRODUCT_TAGGER_BUTTON:"photo_viewer_product_tagger_button",PRODUCT_ATTACHMENT_COMPOSER:"product_attachment_composer_nux",SHOP_NOW_CTA:"shop_now_cta",SHOP_TAB_IN_PUBLISHING_TOOLS:"shop_tab_pt_self_serve_nux",SHOP_TAB_ON_PAGE:"shop_tab_page_self_serve_nux",VIDEO_COMPOSER_PRODUCT_TAGGER_BUTTON:"video_composer_product_tagger_button",VIDEO_EDITOR_PRODUCT_TAGGER_BUTTON:"video_editor_product_tagger_button",VIDEO_COMPOSER_MESSENGER_PROMPT_BUTTON:"video_composer_messenger_prompt_button",PHOTO_COMPOSER_MESSENGER_PROMPT_BUTTON:"photo_composer_messenger_prompt_button",PRODUCT_TAG_PAGE_LANDING_UPSELL:"product_tag_page_landing_upsell"})}),null);
__d("XCommerceSelfServeMerchantNUXSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/commerce/self-serve/merchant/mark-nux-seen/",{page_id:{type:"Int",required:true},nux_type:{type:"Enum",required:true,enumType:1},event:{type:"Enum",defaultValue:"Actn_NuxSeen",enumType:1}})}),null);
__d("ReactComposerPhotoProductTagActionButton.react",["cx","fbt","AsyncRequest","CommerceProductTaggerType","CommerceSelfServeNUXType","React","ReactComposerPhotoActionButton.react","ReactComposerTaggerActions","ReactComposerTaggerType","XCommerceSelfServeMerchantNUXSeenController","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$ReactComposerPhotoProductTagActionButton2=function(){var s=c("XCommerceSelfServeMerchantNUXSeenController").getURIBuilder().setInt("page_id",this.props.pageID).setEnum("nux_type",c("CommerceSelfServeNUXType").COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON).getURI();new(c("AsyncRequest"))(s).send();this.props.onHideNux()}.bind(this),o}m.prototype.render=function(){var n=i._("Tag Products");return c("React").createElement("div",null,c("React").createElement(c("ReactComposerPhotoActionButton.react"),{ref:"fbReactComposerPhotoActionbutton",className:"_a69"+(this.props.hasTag?" _a6b":""),tooltip:n,iconClassName:"_a6_",onClick:this.props.onClick}),this.$ReactComposerPhotoProductTagActionButton1())};m.prototype.$ReactComposerPhotoProductTagActionButton1=function(){if(!this.props.showNux)return null;var n=this.props.productTaggerType,o=n===c("CommerceProductTaggerType").SHOP_PAGE?i._("Tag products from your shop in this photo"):i._("Tag products in this photo");return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.fbReactComposerPhotoActionbutton}.bind(this),onCloseButtonClick:this.$ReactComposerPhotoProductTagActionButton2,position:"right",shown:true,width:"auto"},o)};m.propTypes={composerID:l.string.isRequired,pageID:l.string.isRequired,productTaggerType:l.string.isRequired,hasTag:l.bool.isRequired,onClick:l.any,onHideNux:l.func.isRequired,showNux:l.bool.isRequired};f.exports=m}),null);
__d("ReactComposerPhotoTagActionButton.react",["cx","fbt","React","ReactComposerPhotoActionButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Tag");return c("React").createElement(c("ReactComposerPhotoActionButton.react"),{className:"_cwf"+(this.props.hasTag?" _cwh":""),tooltip:n,iconClassName:"_cwg",onClick:this.props.onClick})};function m(){j.apply(this,arguments)}m.propTypes={hasTag:l.bool.isRequired,onClick:l.any};f.exports=m}),null);
__d("ReactComposerPhotoTaggedFaceboxSummary.react",["cx","fbt","ix","Image.react","LeftRight.react","React","TooltipLink.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerPhotoTaggedFaceboxSummary1=function(){this.props.onTagRemoved(this.props.faceboxID,this.props.taggedSubjectID)}.bind(this),p}n.prototype.render=function(){var o=i._("Edit Name");return c("React").createElement(c("LeftRight.react"),{className:"_31bg"},c("React").createElement("div",{className:"_31bh"},this.props.taggedValue),c("React").createElement(c("TooltipLink.react"),{alignH:"center",position:"below",tooltip:o,onClick:this.$ReactComposerPhotoTaggedFaceboxSummary1},c("React").createElement(c("Image.react"),{src:j("76906")})))};n.propTypes={faceboxID:m.string.isRequired,onTagRemoved:m.func.isRequired,taggedSubjectID:m.string.isRequired,taggedValue:m.string.isRequired};f.exports=n}),null);
__d("ReactComposerPhotoTagger.react",["cx","fbt","ActorURI","AsyncRequest","CommerceProductTaggerType","ContextualLayerAutoFlip","Image.react","ImageBlock.react","immutable","LayerHideOnBlur","LayerHideOnEscape","LayerTabIsolation","ModalPhotoEditorTabName","PhotoEditorTargetType","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPhotoActions","ReactComposerPhotoEditActionButton.react","ReactComposerPhotoFaceboxTaggerContainer.react","ReactComposerPhotoProductTagActionButton.react","ReactComposerPhotoStore","ReactComposerPhotoTagActionButton.react","ReactComposerPhotoTaggedFaceboxSummary.react","ReactLayeredComponentMixin_DEPRECATED","XStickerPhotoEditorController","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIDialogCloseButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=268,l=32,m=c("React").createClass({displayName:"ReactComposerPhotoTagger",_photoEditorRequest:undefined,contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactLayeredComponentMixin_DEPRECATED"),c("ReactComponentWithPureRenderMixin")],propTypes:{canTagFromModal:j.bool,draggingPhotos:j.bool,enableFaceboxTagger:j.bool.isRequired,disablePhotoEditing:j.bool.isRequired,faceboxes:j.instanceOf(c("immutable").Map).isRequired,onEditClick:j.func,onHideProductTaggerNux:j.func.isRequired,onTagAdded:j.func.isRequired,onTagIntent:j.func,onTagRemoved:j.func.isRequired,originalID:j.string,photoID:j.string.isRequired,productTaggerType:j.string.isRequired,shown:j.bool.isRequired,showProductTaggerNux:j.bool.isRequired},getDefaultProps:function n(){return{shown:false}},componentWillReceiveProps:function n(o){if(!this.props.draggingPhotos&&o.draggingPhotos)c("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,null)},render:function n(){__p&&__p();var o=null,p=this.props.productTaggerType!==c("CommerceProductTaggerType").NONE;if(p)o=this._onProductTagClick;else if(this.props.canTagFromModal)o=this._onTagClick;var q=null;if(p)q=c("React").createElement(c("ReactComposerPhotoProductTagActionButton.react"),{composerID:this.context.composerID,productTaggerType:this.props.productTaggerType,pageID:this.context.targetID,hasTag:c("ReactComposerPhotoStore").hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:o,onHideNux:this.props.onHideProductTaggerNux,showNux:this.props.showProductTaggerNux});else if(this.props.enableFaceboxTagger)q=c("React").createElement(c("ReactComposerPhotoTagActionButton.react"),{hasTag:c("ReactComposerPhotoStore").hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:o});var r=this.props.disablePhotoEditing?null:c("React").createElement(c("ReactComposerPhotoEditActionButton.react"),{onClick:this._onEditClick});return c("React").createElement("div",{className:"_jfi"+(p?" uiContextualLayerParent":""),onClick:this._onClick,role:"presentation",tabIndex:"-1"},q,r)},renderLayers:function n(){if(!this.props.shown||!this.props.enableFaceboxTagger)return null;return{dialog:this._getDialog()}},_getDialog:function n(){return c("React").createElement(c("XUIContextualDialog.react"),{ref:"dialog",shown:this.props.shown,onToggle:this._onDialogToggled,contextRef:function(){return this}.bind(this),position:"below",alignment:"center",width:k,behaviors:{LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape"),ContextualLayerAutoFlip:c("ContextualLayerAutoFlip"),LayerTabIsolation:c("LayerTabIsolation")}},c("React").createElement(c("XUIContextualDialogBody.react"),null,this._getDialogBody()),c("React").createElement(c("XUIContextualDialogFooter.react"),null,c("React").createElement(c("XUIDialogCloseButton.react"),{use:"confirm",label:"Close",onClick:this._onCloseButtonClicked})))},_getDialogBody:function n(){if(this.props.faceboxes.size===0)return i._("We could not find any faces to tag.");return this.props.faceboxes.valueSeq().map(function(o){var p=o.taggedSubjectID?c("React").createElement(c("ReactComposerPhotoTaggedFaceboxSummary.react"),{faceboxID:o.id,onTagRemoved:this.props.onTagRemoved,taggedSubjectID:o.taggedSubjectID,taggedValue:o.taggedValue}):c("React").createElement(c("ReactComposerPhotoFaceboxTaggerContainer.react"),{faceboxID:o.id,onTagAdded:this.props.onTagAdded});return c("React").createElement(c("ImageBlock.react"),{key:o.id,className:"_qv7"},c("React").createElement(c("Image.react"),{className:"_qv8",height:l,src:o.croppedURI,width:l}),p)}.bind(this))},_onCloseButtonClicked:function n(){c("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,null)},_onDialogToggled:function n(o){if(!o)this._onCloseButtonClicked()},_onClick:function n(){this.props.onTagIntent&&this.props.onTagIntent();c("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,this.props.photoID)},_onTagClick:function n(event){this._onEditClick(event,null,c("ModalPhotoEditorTabName").TAG)},_onProductTagClick:function n(event){this._onEditClick(event,null,c("ModalPhotoEditorTabName").PRODUCT_TAG)},_onEditClick:function n(event,o,p){__p&&__p();event.stopPropagation();if(this._photoEditorRequest)return;c("ReactComposerPhotoActions").startPhotoEdit(this.context.composerID,this.props.photoID);var q=c("XStickerPhotoEditorController").getURIBuilder().setString("grid_id",this.context.composerID).setEnum("target_type",c("PhotoEditorTargetType").COMPOSER).setInt("latest_fbid",this.props.photoID).setInt("photo_fbid",this.props.originalID||this.props.photoID).setEnum("initial_tab",p).getURI();q=c("ActorURI").create(q,this.context.actorID);this._photoEditorRequest=new(c("AsyncRequest"))(q).setFinallyHandler(function(){this._photoEditorRequest=null;c("ReactComposerPhotoActions").finishLoadingPhotoEdit(this.context.composerID,this.props.photoID)}.bind(this));this._photoEditorRequest&&this._photoEditorRequest.send();this.props.onEditClick&&this.props.onEditClick()}});f.exports=m}),null);
__d("ReactComposerCollagePhoto.react",["cx","BootloadedComponent.react","CircularProgressBar.react","CommerceProductTaggerType","Image.react","immutable","JSResource","React","ReactComposerCollageDragHandler","ReactComposerContextTypes","ReactComposerPhotoTagger.react","SphericalMediaGyroIcon.react","XUICloseButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){__p&&__p();var m={height:this.props.containerHeight,overflow:"hidden",position:"relative",width:this.props.containerWidth},n=Boolean(this.props.isSpherical||this.props.sphericalPhotoID),o=void 0,p=void 0,q=void 0,r=void 0,s=void 0;if(!n){s=this.$ReactComposerCollagePhoto1();if(!this.props.isDragging)r=this.$ReactComposerCollagePhoto2()}else r=this.$ReactComposerCollagePhoto3();if(!this.props.isDragging)o=this.$ReactComposerCollagePhoto4();if(this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit||this.props.uploading&&this.props.uploadProgress===100)q=this.$ReactComposerCollagePhoto5();if(this.props.uploading&&this.props.uploadProgress<100)p=c("React").createElement(c("CircularProgressBar.react"),{percentComplete:this.props.uploadProgress});var t="_jfc _4c06";return c("React").createElement("div",{ref:"root",className:t,onMouseDown:function(u){return this.props.dragHandler.onMouseDown(u)}.bind(this),onMouseUp:function(u){return this.props.dragHandler.onMouseUp(u)}.bind(this),onMouseMove:function(u){return this.props.dragHandler.onMouseMove(u)}.bind(this),onTouchStart:function(u){return this.props.dragHandler.onTouchStart(u)}.bind(this),onTouchMove:function(u){return this.props.dragHandler.onTouchMove(u)}.bind(this),onTouchEnd:function(u){return this.props.dragHandler.onTouchEnd(u)}.bind(this),onTouchCancel:function(u){return this.props.dragHandler.onTouchCancel(u)}.bind(this),style:m},s,c("React").createElement("div",{onMouseDown:function u(v){return v.stopPropagation()}},o,r),q,p)};l.prototype.$ReactComposerCollagePhoto5=function(){return c("React").createElement("div",{className:"_do4"},c("React").createElement("div",{className:"_do5"},c("React").createElement("div",{className:"_do6"})))};l.prototype.$ReactComposerCollagePhoto2=function(){if(!this.props.posting&&!this.props.uploading)return c("React").createElement(c("ReactComposerPhotoTagger.react"),{draggingPhotos:false,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:!this.props.enablePhotoEditing,faceboxes:this.props.faceboxes,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,showProductTaggerNux:false,onHideProductTaggerNux:this.props.onHideProductTaggerNux,photoID:this.props.photoID,shown:this.props.showPhotoTagger});return null};l.prototype.$ReactComposerCollagePhoto3=function(){if(this.props.uploading)return c("React").createElement("div",null,this.$ReactComposerCollagePhoto1(),c("React").createElement(c("SphericalMediaGyroIcon.react"),{className:"_jk8"}));var m=!(this.props.posting||this.props.uploading||this.props.isDragging);return c("React").createElement("div",null,c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ReactComposerSphericalPhoto.react").__setRef("ReactComposerCollagePhoto.react"),bootloadPlaceholder:this.$ReactComposerCollagePhoto5(),loadingElement:this.$ReactComposerCollagePhoto5(),className:"_5g6c",containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,height:this.props.height,imageStyle:this.props.style,photoID:this.props.photoID,showEditButton:m,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.props.imageSrc,uploadID:this.props.uploadID,width:this.props.width}))};l.prototype.$ReactComposerCollagePhoto4=function(){if(!this.props.posting)return c("React").createElement(c("XUICloseButton.react"),{className:"_jfe",onClick:this.props.onRemoveButtonClicked,onMouseDown:function m(n){return n.stopPropagation()},size:"medium",shade:"light"});return null};l.prototype.$ReactComposerCollagePhoto1=function(){return c("React").createElement(c("Image.react"),{src:this.props.fileURL,width:this.props.width,height:this.props.height,style:this.props.style})};function l(){i.apply(this,arguments)}l.defaultProps={width:0,height:0,photoID:"",style:{},posting:false,showPhotoTagger:false,enableFaceboxTagger:false,productTaggerType:c("CommerceProductTaggerType").NONE,enablePhotoEditing:true,isSpherical:false};l.propTypes={uploadID:k.string.isRequired,uploading:k.bool.isRequired,photoID:k.string,width:k.number.isRequired,height:k.number.isRequired,containerWidth:k.number.isRequired,containerHeight:k.number.isRequired,dragHandler:k.instanceOf(c("ReactComposerCollageDragHandler")).isRequired,isDragging:k.bool.isRequired,fileURL:k.string.isRequired,style:k.object.isRequired,uploadProgress:k.number.isRequired,faceboxes:k.instanceOf(c("immutable").Map),imageSrc:k.string,isLoadingPhotoEdit:k.bool,isRecognizingFaceboxes:k.bool,isSpherical:k.bool,sphericalPhotoID:k.string,enableFaceboxTagger:k.bool.isRequired,enablePhotoEditing:k.bool.isRequired,productTaggerType:k.string.isRequired,onHideProductTaggerNux:k.func.isRequired,showPhotoTagger:k.bool.isRequired,onTagAdded:k.func.isRequired,onTagRemoved:k.func.isRequired};l.contextTypes=c("ReactComposerContextTypes");f.exports=l}),null);
__d("ReactComposerCollagePhotoContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerCollageDragHandler","ReactComposerCollagePhoto.react","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPhotoActions","ReactComposerPhotoStore","ReactComposerPhotoUploadState","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerCollagePhotoContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactComposerStore"),c("ReactComposerPhotoStore"),c("ReactComposerMediaUploadStore"))],propTypes:{upload:h.object.isRequired,itemWidth:h.number.isRequired,itemHeight:h.number.isRequired,opacity:h.number,enableFaceboxTagger:h.bool,enablePhotoEditing:h.bool,dragHandler:h.instanceOf(c("ReactComposerCollageDragHandler")).isRequired,isDragging:h.bool,productTaggerType:h.string,focus:h.object.isRequired,containerWidth:h.number.isRequired,containerHeight:h.number.isRequired,isSpherical:h.bool,onRemoveItem:h.func},statics:{calculateState:function j(k,l){var m=l.upload,n=this._overallProgress(m);if(m.state==c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_DONE){var o=c("ReactComposerPhotoStore").getPhoto(k,l.upload.photoID),p=c("ReactComposerPhotoStore").getPhotoBeingTagged(k)===l.upload.photoID;return{uploading:false,overallProgress:n,faceboxes:o.faceboxes,isLoadingPhotoEdit:o.isLoadingPhotoEdit,isRecognizingFaceboxes:o.isRecognizingFaceboxes,isSpherical:m.isSpherical,isSphericalDisabled:Boolean(m.sphericalPhotoID),sphericalPhotoID:m.sphericalPhotoID,showPhotoTagger:p,imageSrc:o.imageSrc}}else return{isSpherical:m.isSpherical,uploading:true,overallProgress:n}},_overallProgress:function j(k){switch(k.state){case c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_RESIZE_STARTED:return.1*k.progress;case c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING:return.1*100+.9*k.progress;case c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_DONE:return 100;default:return 0}}},render:function j(){var k=this._calculateSmallestFitSize(this.props.containerWidth,this.props.containerHeight),l=this._generateStyle(k,this.props.containerWidth,this.props.containerHeight);return c("React").createElement(c("ReactComposerCollagePhoto.react"),{ref:"container",uploadID:this.props.upload.id,photoID:this.props.upload.photoID,width:k.width,height:k.height,dragHandler:this.props.dragHandler,isDragging:this.props.isDragging,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,fileURL:this.props.upload.fileURL,style:l,posting:this.state.posting,uploading:this.state.uploading,uploadProgress:this.state.overallProgress,faceboxes:this.state.faceboxes,imageSrc:this.state.imageSrc,isLoadingPhotoEdit:this.state.isLoadingPhotoEdit,isRecognizingFaceboxes:this.state.isRecognizingFaceboxes,isSpherical:this.state.isSpherical,sphericalPhotoID:this.state.sphericalPhotoID,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onEditClick:this._onEditClick,showPhotoTagger:this.state.showPhotoTagger,onHideProductTaggerNux:this._onHideProductTaggerNux,onTagAdded:this._onTagAdded,onTagRemoved:this._onTagRemoved,onRemoveButtonClicked:this._onRemoveButtonClicked})},_calculateSmallestFitSize:function j(k,l){var m=this.props,n=m.itemWidth,o=m.itemHeight;if(this.state.isSpherical&&this.state.uploading){o=this.props.upload.height;n=this.props.upload.width}var p=Math.max(k/n,l/o);return{width:Math.round(n*p),height:Math.round(o*p)}},_generateStyle:function j(k,l,m){var n=(k.width-l)/k.width*50,o=(k.height-m)/k.height*50,p=this.props.focus.x>=50?Math.min(this.props.focus.x,50+n):Math.max(this.props.focus.x,50-n),q=this.props.focus.y>=50?Math.min(this.props.focus.y,50+o):Math.max(this.props.focus.y,50-o),r="translate(-"+p+"%, -"+q+"%)",s={position:"absolute",left:"50%",top:"50%",WebkitTransformOrigin:"0% 0%",MozTransformOrigin:"0% 0%",msTransformOrigin:"0% 0%",WebkitTransform:r,MozTransform:r,msTransform:r};if(this.props.opacity)s.opacity=this.props.opacity;return s},_onRemoveButtonClicked:function j(){this.props.onRemoveItem&&this.props.onRemoveItem(this.props.upload.id);if(this.state.uploading)c("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.upload.id);else c("ReactComposerPhotoActions").removePhoto(this.context.composerID,this.props.upload.photoID,this.props.upload.id)},_onTagRemoved:function j(k,l){c("ReactComposerPhotoActions").untagFacebox(this.context.composerID,this.props.upload.photoID,k,l)},_onTagAdded:function j(k,l,m){c("ReactComposerPhotoActions").tagFacebox(this.context.composerID,this.props.upload.photoID,k,l,m)},_onHideProductTaggerNux:function j(){},_onEditClick:function j(){}});i.contextTypes=c("ReactComposerContextTypes");f.exports=i}),null);
__d("ReactComposerCollageVideo.react",["cx","CircularProgressBar.react","React","ReactComposerCollageDragHandler","XUICloseButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$ReactComposerCollageVideo2=function(r){var s=this.refs.video_element,t=this.refs.play_button;if(s.paused){s.play();t.style.display="none"}else{s.pause();t.style.display="block"}r.stopPropagation()}.bind(this),n}l.prototype.render=function(){__p&&__p();var m={height:this.props.containerHeight,overflow:"hidden",position:"relative",width:this.props.containerWidth},n=void 0;if(!this.props.posting)n=c("React").createElement(c("XUICloseButton.react"),{className:"_1sju",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"});var o=this.$ReactComposerCollageVideo1();return c("React").createElement("div",{ref:"root",className:"_1sjs _3dx6",style:m,onMouseDown:function(p){return this.props.dragHandler.onMouseDown(p)}.bind(this),onMouseUp:function(p){return this.props.dragHandler.onMouseUp(p)}.bind(this),onMouseMove:function(p){return this.props.dragHandler.onMouseMove(p)}.bind(this),onTouchStart:function(p){return this.props.dragHandler.onTouchStart(p)}.bind(this),onTouchMove:function(p){return this.props.dragHandler.onTouchMove(p)}.bind(this),onTouchEnd:function(p){return this.props.dragHandler.onTouchEnd(p)}.bind(this),onTouchCancel:function(p){return this.props.dragHandler.onTouchCancel(p)}.bind(this)},c("React").createElement("div",{onMouseDown:function p(q){return q.stopPropagation()}},n),o,c("React").createElement("div",{className:"_1oxz",onClick:this.$ReactComposerCollageVideo2,onMouseDown:function p(q){return q.stopPropagation()},ref:"play_button",role:"button",tabIndex:"0"}),c("React").createElement(c("CircularProgressBar.react"),{percentComplete:50*Math.log10(Math.max(1,this.props.uploadProgress))}))};l.prototype.$ReactComposerCollageVideo1=function(){return c("React").createElement("video",{ref:"video_element",loop:true,muted:true,src:this.props.fileURL,width:this.props.width,height:this.props.height,style:this.props.style})};l.defaultProps={width:0,height:0,style:{},posting:false};l.propTypes={width:k.number.isRequired,height:k.number.isRequired,containerWidth:k.number.isRequired,containerHeight:k.number.isRequired,dragHandler:k.instanceOf(c("ReactComposerCollageDragHandler")).isRequired,fileURL:k.string.isRequired,style:k.object.isRequired,uploadProgress:k.number.isRequired};f.exports=l}),null);
__d("ReactComposerCollageVideoContainer.react",["React","ReactComposerCollageDragHandler","ReactComposerCollageVideo.react","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerCollageVideoContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactComposerStore"),c("ReactComposerMediaUploadStore"))],propTypes:{upload:h.object.isRequired,itemWidth:h.number.isRequired,itemHeight:h.number.isRequired,fileURL:h.string.isRequired,dragHandler:h.instanceOf(c("ReactComposerCollageDragHandler")).isRequired,opacity:h.number,focus:h.object.isRequired,containerWidth:h.number.isRequired,containerHeight:h.number.isRequired,onRemoveItem:h.func},statics:{calculateState:function j(k,l){return{overallProgress:l.upload.progress||0}}},render:function j(){var k=this._calculateSmallestFitSize(this.props.containerWidth,this.props.containerHeight),l=this._generateStyleFromFocus(k,this.props.containerWidth,this.props.containerHeight);if(this.props.opacity)l.opacity=this.props.opacity;return c("React").createElement("div",null,c("React").createElement(c("ReactComposerCollageVideo.react"),{ref:"container",width:k.width,height:k.height,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,dragHandler:this.props.dragHandler,fileURL:this.props.fileURL,style:l,uploadProgress:this.state.overallProgress,posting:this.state.posting,onRemoveButtonClicked:this._onRemoveButtonClicked}))},_calculateSmallestFitSize:function j(k,l){var m=Math.max(k/this.props.itemWidth,l/this.props.itemHeight);return{width:Math.round(this.props.itemWidth*m),height:Math.round(this.props.itemHeight*m)}},_generateStyleFromFocus:function j(k,l,m){var n=(k.width-l)/k.width*50,o=(k.height-m)/k.height*50,p=this.props.focus.x>=50?Math.min(this.props.focus.x,50+n):Math.max(this.props.focus.x,50-n),q=this.props.focus.y>=50?Math.min(this.props.focus.y,50+o):Math.max(this.props.focus.y,50-o),r="translate(-"+p+"%, -"+q+"%)";return{position:"absolute",left:"50%",top:"50%",WebkitTransformOrigin:"0% 0%",MozTransformOrigin:"0% 0%",msTransformOrigin:"0% 0%",WebkitTransform:r,MozTransform:r,msTransform:r}},_onRemoveButtonClicked:function j(){this.props.onRemoveItem&&this.props.onRemoveItem(this.props.upload.id);c("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.upload.id)}});f.exports=i}),null);
__d("ReactComposerDraggableCollageItem.react",["cx","React","ReactComponentWithPureRenderMixin","ReactComposerCollageDragHandler","ReactComposerCollagePhotoContainer.react","ReactComposerCollageVideoContainer.react","ReactComposerContextTypes","ReactComposerMediaUploadType"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=0,k=0,l={x:50,y:50},m=c("React").createClass({displayName:"ReactComposerDraggableCollageItem",_dragHandler:undefined,_grabbed:undefined,_scrollParent:undefined,contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{upload:i.object.isRequired,itemWidth:i.number.isRequired,itemHeight:i.number.isRequired,width:i.number.isRequired,height:i.number.isRequired,isDragging:i.bool,opacity:i.number,focus:i.object.isRequired,onGrab:i.func.isRequired,onDrag:i.func.isRequired,onDrop:i.func.isRequired,onRemoveItem:i.func,enableFaceboxTagger:i.bool,enablePhotoEditing:i.bool,productTaggerType:i.string},getDefaultProps:function n(){return{width:j,height:k,focus:l,isDragging:false}},render:function n(){var o=this._dragHandler;if(!o){o=new(c("ReactComposerCollageDragHandler"))(this.props.upload.id,this.props.onGrab,this.props.onDrag,this.props.onDrop);this._dragHandler=o}var p=(this.props.isDragging?"_5uy":"")+" _3imc";return c("React").createElement("div",{className:p,key:this.props.upload.id,ref:"draggable_media"},this._getInnerMediaComponent(o))},_getInnerMediaComponent:function n(o){if(this.props.upload.mediaType==c("ReactComposerMediaUploadType").VIDEO)return this._getInnerVideoComponent(o);return this._getInnerPhotoComponent(o)},_getInnerVideoComponent:function n(o){return c("React").createElement(c("ReactComposerCollageVideoContainer.react"),{key:this.props.upload.id,upload:this.props.upload,itemWidth:this.props.itemWidth,itemHeight:this.props.itemHeight,opacity:this.props.opacity,fileURL:this.props.upload.fileURL,focus:l,containerWidth:this.props.width,containerHeight:this.props.height,dragHandler:o,onRemoveItem:this.props.onRemoveItem})},_getInnerPhotoComponent:function n(o){return c("React").createElement(c("ReactComposerCollagePhotoContainer.react"),{key:this.props.upload.id,upload:this.props.upload,itemWidth:this.props.itemWidth,itemHeight:this.props.itemHeight,opacity:this.props.opacity,dragHandler:o,isDragging:this.props.isDragging,focus:l,containerWidth:this.props.width,containerHeight:this.props.height,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,onRemoveItem:this.props.onRemoveItem,productTaggerType:this.props.productTaggerType})}});f.exports=m}),null);
__d("ReactComposerCollage.react",["immutable","Map","React","ReactComposerDraggableCollageItem.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){if(this.props.mediaUploads.size===0)return null;var l={marginLeft:5};if(!this.props.styleInfos)return null;var m=babelHelpers["extends"]({},l,{position:"relative",width:this.props.width,height:this.props.height});return c("React").createElement("div",{style:{margin:"auto",width:this.props.scaleFactor*100+"%"}},c("React").createElement("div",{style:m},this.$ReactComposerCollage1()))};k.prototype.$ReactComposerCollage1=function(){var l=this.props.mediaUploads.sortBy(function(n){return n.id}),m=[];l.forEach(function(n){var o=this.$ReactComposerCollage2(n);if(o)m.push(o)}.bind(this));return m};k.prototype.$ReactComposerCollage2=function(l){var m=this.props.styleInfos;if(!m)return null;var n=m.get(l.id);if(!n)return null;var o=this.$ReactComposerCollage3(n),p={left:o.left,top:o.top,height:o.height,width:o.width,zIndex:o.zIndex,position:"absolute"};return c("React").createElement("div",{style:p,key:l.id},this.$ReactComposerCollage4(l,o,n))};k.prototype.$ReactComposerCollage3=function(l){var m=l.dragEffectPercent/100,n=1.075*m+1*(1-m),o=.9*m+1*(1-m);o=Math.round(o*100)/100;var p=Math.round(m*80)+20,q=Math.round(l.height*n),r=Math.round(l.width*n),s=babelHelpers["extends"]({},l,{height:q,top:Math.round(l.centerY-q/2),width:r,left:Math.round(l.centerX-r/2),zIndex:p});if(o<1)s.opacity=o;return s};k.prototype.$ReactComposerCollage5=function(l){var m=l.width,n=l.height;if(l.isSpherical)m=n=Math.min(m,n);return{width:m,height:n}};k.prototype.$ReactComposerCollage4=function(l,m,n){var o=Math.round(n.dragEffectPercent)>0,p=this.$ReactComposerCollage5(l);return c("React").createElement(c("ReactComposerDraggableCollageItem.react"),{key:l.id,upload:l,itemWidth:p.width,itemHeight:p.height,width:m.width,height:m.height,opacity:m.opacity,isDragging:o,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop,onRemoveItem:this.props.onRemoveItem})};function k(){h.apply(this,arguments)}k.propTypes={styleInfos:j.instanceOf(c("Map")),mediaUploads:j.instanceOf(c("immutable").List).isRequired,enableFaceboxTagger:j.bool,enablePhotoEditing:j.bool,productTaggerType:j.string,width:j.number,height:j.number,onDrag:j.func,onDrop:j.func,onGrab:j.func,onRemoveItem:j.func};f.exports=k}),null);
__d("ReactComposerCollageAnimationUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=Object.prototype.hasOwnProperty,i={equal:function j(k,l){return Math.abs(k-l)<.5},isZero:function j(k){if(typeof k!=="object"||k===null)return false;var l=Object.keys(k);for(var m=0;m<l.length;m++)if(!this.equal(k[l[m]],0))return false;return true},isEqual:function j(k,l){if(typeof k!=="object"||k===null||typeof l!=="object"||l===null)return false;var m=Object.keys(k),n=Object.keys(l);if(m.length!==n.length)return false;for(var o=0;o<m.length;o++)if(!h.call(l,m[o])||!this.equal(k[m[o]],l[m[o]]))return false;return true}};f.exports=i}),null);
__d("ReactComposerCollageAnimationController",["Map","ReactComposerCollageAnimationUtils","performanceNow","requestAnimationFrame"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=.1,i=2e3,j=1,k={springConstant:300,dampingConstant:25},l={springConstant:300,dampingConstant:25},m={springConstant:200,dampingConstant:16},n=new(c("Map"))([["centerX",k],["centerY",k],["height",l],["width",l],["dragEffectPercent",m]]),o={centerX:true,centerY:true,height:false,width:false};function p(q,r,s,t,u,v){this.$ReactComposerCollageAnimationController7=false;this.$ReactComposerCollageAnimationController8=0;this.$ReactComposerCollageAnimationController1=q;this.$ReactComposerCollageAnimationController2=r;this.$ReactComposerCollageAnimationController3=s;this.$ReactComposerCollageAnimationController4=t;this.$ReactComposerCollageAnimationController5=u;this.$ReactComposerCollageAnimationController6=v}p.prototype.startAnimating=function(){if(this.$ReactComposerCollageAnimationController7)return;this.$ReactComposerCollageAnimationController7=true;this.$ReactComposerCollageAnimationController8=c("performanceNow")();c("requestAnimationFrame")(function(){return this.$ReactComposerCollageAnimationController9()}.bind(this))};p.prototype.stopAnimating=function(){this.$ReactComposerCollageAnimationController7=false};p.prototype.$ReactComposerCollageAnimationController9=function(){__p&&__p();if(!this.$ReactComposerCollageAnimationController7)return;var q=false,r=c("performanceNow")(),s=(r-this.$ReactComposerCollageAnimationController8)/1e3;s=Math.min(s,h);this.$ReactComposerCollageAnimationController8=r;var t=this.$ReactComposerCollageAnimationController1(),u=this.$ReactComposerCollageAnimationController3(),v=this.$ReactComposerCollageAnimationController5(),w=this.$ReactComposerCollageAnimationController6();t.forEach(function(x,y){__p&&__p();var z=u.get(y)||{},A=v.get(y);if(!A)return;var B=w.get(y),C=this.$ReactComposerCollageAnimationController10(x,A,z),D=this.$ReactComposerCollageAnimationController11(z,C,s,B),E=this.$ReactComposerCollageAnimationController12(x,D,s,B,A);this.$ReactComposerCollageAnimationController13(x,E,A,z);if(!c("ReactComposerCollageAnimationUtils").isZero(D)){q=true;u.set(y,D)}if(!c("ReactComposerCollageAnimationUtils").isEqual(x,E)){q=true;if(B){var F=E.width-x.width,G=E.height-x.height,H=F*((B.x-x.centerX)/(x.width||1)),I=G*((B.y-x.centerY)/(x.height||1));E.centerX-=H;E.centerY-=I}}t.set(y,E)}.bind(this));if(q&&this.$ReactComposerCollageAnimationController7){this.$ReactComposerCollageAnimationController2(t);this.$ReactComposerCollageAnimationController4(u);c("requestAnimationFrame")(function(){return this.$ReactComposerCollageAnimationController9()}.bind(this))}else this.$ReactComposerCollageAnimationController7=false};p.prototype.$ReactComposerCollageAnimationController13=function(q,r,s,t){n.forEach(function(u,v){var w=Math.abs(q[v]-r[v]),x=Math.abs(s[v]-r[v]);if(w<j&&x<.5){r[v]=s[v];t[v]=0}})};p.prototype.$ReactComposerCollageAnimationController10=function(q,r,s){var t={};n.forEach(function(u,v){t[v]=u.springConstant*(r[v]-q[v])-u.dampingConstant*(s[v]||0)});return t};p.prototype.$ReactComposerCollageAnimationController11=function(q,r,s,t){var u={};n.forEach(function(v,w){u[w]=t&&o[w]?0:Math.max(-i,Math.min(i,(q[w]||0)+r[w]*s))});return u};p.prototype.$ReactComposerCollageAnimationController12=function(q,r,s,t,u){var v={};n.forEach(function(w,x){var y=q[x]+r[x]*s,z=this.$ReactComposerCollageAnimationController14(y,q[x],u[x]);v[x]=t&&o[x]?q[x]:z}.bind(this));return v};p.prototype.$ReactComposerCollageAnimationController14=function(q,r,s){var t=Math.abs(q-s),u=Math.abs(r-s);if(t>u){var v=u/10;return q>s?s+v:s-v}else return q};f.exports=p}),null);
__d("ReactComposerCollageContainer.react",["immutable","Map","React","ReactComponentWithPureRenderMixin","ReactComposerCollage.react","ReactComposerCollageAnimationController","ReactComposerCollageUtils","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactDOM","Vector","VelocityTracker"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=500,j=c("React").createClass({displayName:"ReactComposerCollageContainer",_orderedUploads:c("immutable").List(),_width:i,_layoutConfig:null,_currentStyles:new(c("Map"))(),_targetLocations:new(c("Map"))(),_currentVelocities:new(c("Map"))(),_dragPoints:new(c("Map"))(),_velocityTrackers:new(c("Map"))(),_animationController:null,_allowLayoutChanges:true,contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{containerWidth:h.number,scaleFactor:h.number,mediaUploads:h.instanceOf(c("immutable").List).isRequired,enableFaceboxTagger:h.bool,productTaggerType:h.string,disablePhotoEditing:h.bool,showSellUploadLink:h.bool},getInitialState:function k(){this._currentStyles=new(c("Map"))();return{currentStyles:new(c("Map"))()}},componentWillMount:function k(){this._updateVarsFromProps(this.props);this._animationController&&this._animationController.startAnimating()},componentWillUnmount:function k(){this._animationController&&this._animationController.stopAnimating()},componentWillReceiveProps:function k(l){this._updateVarsFromProps(l)},_getCollageItemStyles:function k(){return this._currentStyles},_setCollageItemStyles:function k(l){this._currentStyles=l;this.setState({currentStyles:l});this.forceUpdate()},_getCollageItemVelocities:function k(){return this._currentVelocities},_setCollageItemVelocities:function k(l){this._currentVelocities=l},_getCollageItemDestinations:function k(){return this._targetLocations},_getCollageItemDragPoints:function k(){return this._dragPoints},_updateVarsFromProps:function k(l){__p&&__p();if(!this._animationController)this._animationController=new(c("ReactComposerCollageAnimationController"))(function(){return this._getCollageItemStyles()}.bind(this),function(n){return this._setCollageItemStyles(n)}.bind(this),function(){return this._getCollageItemVelocities()}.bind(this),function(n){return this._setCollageItemVelocities(n)}.bind(this),function(){return this._getCollageItemDestinations()}.bind(this),function(){return this._getCollageItemDragPoints()}.bind(this));this._width=l.containerWidth*l.scaleFactor-10;var m=l.mediaUploads.filter(function(n){return!!n.width&&!!n.height});this._onNewOrderedUploads(m)},_onNewOrderedUploads:function k(l){this._orderedUploads=l;this._recomputeStyles()},_recomputeStyles:function k(){__p&&__p();var l,m=this;if(this._orderedUploads.size>0)(function(){__p&&__p();var n=[];if(m._orderedUploads.size===1){m._layoutConfig=null;n=c("ReactComposerCollageUtils").getSingleItemStyleInfo(m._orderedUploads.first(),m._width)}else{m._layoutConfig=c("ReactComposerCollageUtils").getCollageLayoutConfig(m._orderedUploads,m._width);n=m._layoutConfig.getItemStyleInfos()}var o=new(c("Map"))(),p=m._currentStyles,q=false;m._orderedUploads.forEach(function(r,s){var t=n[s],u={centerX:t.left+t.width/2,centerY:t.top+t.height/2,width:t.width,height:t.height,dragEffectPercent:this._dragPoints.get(r.id)?100:0};o.set(r.id,u);if(!p.get(r.id)){var v=babelHelpers["extends"]({},u,{width:0,height:0});p.set(r.id,v);q=true}}.bind(m));m._targetLocations=o;if(q)m._setCollageItemStyles(p);m._animationController&&m._animationController.startAnimating()})();else{this._layoutConfig=null;this._targetLocations=new(c("Map"))();this._currentVelocities=new(c("Map"))()}},render:function k(){if(!this._orderedUploads||!this._orderedUploads.size)return null;var l=0;if(this._layoutConfig)l=this._layoutConfig.getCalculatedHeight();else this.state.currentStyles.forEach(function(m){l=m.height});return c("React").createElement(c("ReactComposerCollage.react"),{styleInfos:this.state.currentStyles,mediaUploads:this._orderedUploads,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,width:this._width,height:l,scaleFactor:this.props.scaleFactor,onRemoveItem:function(m){return this._onRemoveItem(m)}.bind(this)})},_onGrab:function k(l,m){if(this._orderedUploads.size<2)return;var n=c("Vector").getElementPosition(c("ReactDOM").findDOMNode(this)),o=m.sub(n);this._dragPoints.set(l,o);this._recomputeStyles();var p=new(c("VelocityTracker"))();p.update(o.x,o.y);this._velocityTrackers.set(l,p)},_onRemoveItem:function k(l){this._currentStyles["delete"](l);this._currentVelocities["delete"](l);this._dragPoints["delete"](l)},_onDrag:function k(l,m,n){__p&&__p();if(this._orderedUploads.size<2)return;var o=this._currentStyles,p=babelHelpers["extends"]({},o.get(l));p.centerX+=n.x;p.centerY+=n.y;o.set(l,p);this._setCollageItemStyles(o);var q=c("Vector").getElementPosition(c("ReactDOM").findDOMNode(this)),r=m.sub(q);this._dragPoints.set(l,r);var s=this._velocityTrackers.get(l);s&&s.update(r.x,r.y);var t=this._orderedUploads;if(!t)return;if(!this._allowLayoutChanges){var u=true;this._dragPoints.forEach(function(y,z){if(!y)return;var A=t.findIndex(function(D){return D.id===z}),B=o.get(z);if(!B)return;var C=this._getCollageIndex(t,B.centerX,B.centerY);if(C!==A)u=false}.bind(this));if(u)this._allowLayoutChanges=true;else return}var v=t.findIndex(function(y){return y.id===l}),w=this._getCollageIndex(t,p.centerX,p.centerY);if(w!==0&&!w)return;if(v==w&&v>=0&&w>=0)return;var x=t.splice(v,1,t.get(w)).splice(w,1,t.get(v));this._allowLayoutChanges=false;this._onNewOrderedUploads(x)},_onDrop:function k(l,m){__p&&__p();if(this._orderedUploads.size<2)return;this._dragPoints.set(l,null);this._recomputeStyles();var n=this._velocityTrackers.get(l);this._velocityTrackers.set(l,null);var o=this._currentVelocities.get(l);if(o){o.centerX=n?n.getVelocityX():0;o.centerY=n?n.getVelocityY():0;this._currentVelocities.set(l,o)}var p=this._orderedUploads;if(!p)return;var q=p.map(function(r){return r.id});c("ReactComposerMediaUploadActions").reorderMedias(this.context.composerID,q)},_getCollageIndex:function k(l,m,n){var o=c("ReactComposerCollageUtils").getCollageLayoutConfig(l,this._width);return o&&o.getIndexForPoint(m,n)}});f.exports=j}),null);
__d("ReactComposerCollagePlusButton.react",["cx","fbt","Link.react","React","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerLoggingName","ReactComposerMediaFilePickerController.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.composerConfig.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA];return c("React").createElement(c("ReactComposerMediaFilePickerController.react"),{containerClassName:"_kqb",loggingName:c("ReactComposerLoggingName").MEDIA_COLLAGE_PLUS_BUTTON,disableFaceRecognition:!this.props.enableFaceboxTagger,mediaAcceptParam:this.props.composerConfig.mediaAcceptParam,mediaConfig:n,photoLimit:n.photoLimit,targetData:this.props.composerConfig.targetData},c("React").createElement(c("Link.react"),null,c("React").createElement("span",{className:"_kqk"}),i._("Add more photos \/ videos")))};function m(){j.apply(this,arguments)}m.propTypes={composerConfig:c("ReactComposerConfig").isRequired,enableFaceboxTagger:l.bool};f.exports=m}),null);
__d("ReactComposerCrossPostToInstagramRow.react",["cx","fbt","FBToggleSwitch.react","LeftFillRightFitLayout.react","PagesComposerActions","React","XUICardSection.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$ReactComposerCrossPostToInstagramRow1=function(r){c("PagesComposerActions").setInstagramCrossPosting(this.props.composerID,r)}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("XUICardSection.react"),{className:"_1nth"},c("React").createElement(c("LeftFillRightFitLayout.react"),null,c("React").createElement("div",null,c("React").createElement("div",{className:"_1nti"}),c("React").createElement("div",{className:"_1ntj"},i._("Post this photo to Instagram?"))),c("React").createElement("div",{className:"_1ntk"},c("React").createElement(c("FBToggleSwitch.react"),{onToggle:this.$ReactComposerCrossPostToInstagramRow1}))))};f.exports=l}),null);
__d("ReactComposerMediaAttachmentButtons.react",["cx","fbt","ComposerTargetData","DOMContainer.react","FileInput.react","Grid.react","ReactComposerContextTypes","ReactComposerLoggingActions","ReactComposerLoggingName","ReactComposerMediaUtils","Link.react","ReactComponentWithPureRenderMixin","React","VideoUploadConfig"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("Grid.react").GridItem,k=c("React").PropTypes,l=c("React").createClass({displayName:"ReactComposerMediaAttachmentButtons",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{createAlbumLink:k.any,mediaAcceptParam:k.shape({photos:k.string,both:k.string}).isRequired,onFilesSelected:k.func.isRequired,showUploadPhotosButton:k.bool,targetData:k.instanceOf(c("ComposerTargetData")).isRequired},getDefaultProps:function m(){return{mediaAcceptParam:{}}},getInitialState:function m(){return{createAlbumLink:null}},componentDidMount:function m(){var n=c("React").createElement(c("DOMContainer.react"),{className:"_3mc1",display:"block"},this.props.createAlbumLink);this.setState({createAlbumLink:n})},render:function m(){var n=[];n.push(this._getUploadPhotosButton());if(this.state.createAlbumLink)n.push(c("React").createElement(j,{className:"_4l9a",key:"createAlbum"},c("React").createElement(c("Link.react"),{className:"_2709"},this.state.createAlbumLink)));return c("React").createElement("div",{className:"_4l99"},c("React").createElement(c("Grid.react"),{className:"_2707",cols:n.length},n.filter(function(o){return o!=null})))},_getUploadPhotosButton:function m(){if(!this.props.showUploadPhotosButton)return null;var n=this.props.targetData.targetSupportsMultiplePhotos,o=this.props.mediaAcceptParam.both,p=void 0,q=c("VideoUploadConfig").allowMultimedia&&this.props.targetData.targetSupportsMultiMedia;if(n)if(q)p=i._("Upload Photos\/Videos");else p=i._("Upload Photos\/Video");else p=i._("Upload Photo\/Video");return c("React").createElement(j,{className:"_4l9a",key:"uploadPhoto"},c("React").createElement(c("FileInput.react"),{accept:o,multiple:n,name:"composer_photo",onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:"fileInput","data-testid":"media-attachment-add-photo"},c("React").createElement(c("Link.react"),{className:"_2709"},c("React").createElement("div",{className:"_270a"},p))))},_onUploadPhotosClick:function m(){c("ReactComposerLoggingActions").mediaUploadInputClicked(this.context.composerID,c("ReactComposerLoggingName").MEDIA_ATTACHMENT_UPLOAD_BUTTON)},_onFilesSelected:function m(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());c("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput())}});f.exports=l}),null);
__d("ReactComposerFailedVideoXUploadContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerFailedMediaUpload.react","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUtils"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerFailedVideoXUploadContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{error:h.object.isRequired,filename:h.string,uploadID:h.string.isRequired},render:function j(){return c("React").createElement(c("ReactComposerFailedMediaUpload.react"),babelHelpers["extends"]({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick}))},_onDismissClick:function j(){c("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)},_onRetryClick:function j(){var k=c("ReactComposerMediaUploadStore").getMediaUpload(this.context.composerID,this.props.uploadID).fileUpload;k.manuallyRetried=true;var l=c("ReactComposerMediaUtils").getVideoXUploader(this.context.composerID);l.uploadVideo(k)}});f.exports=i}),null);
__d("ReactComposerNUXActionType",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({NUX_WAS_SHOWN:null,NUX_WAS_SEEN:null,NUX_WAS_HIDDEN:null},"ReactComposerNUXActionType")}),null);
__d("ReactComposerNUXStore",["AsyncRequest","CommerceSelfServeNUXType","Map","ReactComposerNUXActionType","ReactComposerStoreBase","SimpleNUXMessageTypes"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerStoreBase"));i=h&&h.prototype;function j(){"use strict";__p&&__p();var k=void 0;i.constructor.call(this,function(){return{nuxes:new(c("Map"))()}},function(l){switch(l.type){case c("ReactComposerNUXActionType").NUX_WAS_SHOWN:k&&k.$ReactComposerNUXStore1(l);break;case c("ReactComposerNUXActionType").NUX_WAS_SEEN:k&&k.$ReactComposerNUXStore2(l);break;case c("ReactComposerNUXActionType").NUX_WAS_HIDDEN:k&&k.$ReactComposerNUXStore3(l);break}});k=this}j.prototype.hasNUXBeenSeen=function(k,l){"use strict";return this.$ReactComposerNUXStore4(k,l).seen};j.prototype.getNUXShownPhotoID=function(k,l){"use strict";return this.$ReactComposerNUXStore4(k,l).photoID};j.prototype.$ReactComposerNUXStore1=function(k){"use strict";var l=this.validateAction(k,["composerID","nuxType","photoID"]),m=l[0],n=l[1],o=l[2],p=this.$ReactComposerNUXStore4(m,n);p.photoID=o;this.emitChange(m)};j.prototype.$ReactComposerNUXStore2=function(k){"use strict";var l=this.validateAction(k,["composerID","nuxType"]),m=l[0],n=l[1],o=this.$ReactComposerNUXStore4(m,n);o.seen=true;if(n!==c("CommerceSelfServeNUXType").COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON&&n!==c("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX)new(c("AsyncRequest"))("/ajax/photos/composer/mark_nux_seen.php").setData({type:n}).send();this.emitChange(m)};j.prototype.$ReactComposerNUXStore3=function(k){"use strict";var l=this.validateAction(k,["composerID","nuxType"]),m=l[0],n=l[1],o=this.$ReactComposerNUXStore4(m,n);o.photoID=null;this.emitChange(m)};j.prototype.$ReactComposerNUXStore4=function(k,l){"use strict";var m=this.getComposerData(k),n=m.nuxes.get(l);if(!n){n={seen:false,photoID:null};m.nuxes.set(l,n)}return n};f.exports=new j()}),null);
__d("ReactComposerNUXActions",["ReactComposerDispatcher","ReactComposerNUXActionType","ReactComposerNUXStore"],(function a(b,c,d,e,f,g){c("ReactComposerNUXStore");var h={nuxWasShown:function i(j,k,l){c("ReactComposerDispatcher").dispatch({composerID:j,type:c("ReactComposerNUXActionType").NUX_WAS_SHOWN,nuxType:k,photoID:l})},nuxWasSeen:function i(j,k){c("ReactComposerDispatcher").dispatch({composerID:j,type:c("ReactComposerNUXActionType").NUX_WAS_SEEN,nuxType:k})},nuxWasHidden:function i(j,k){c("ReactComposerDispatcher").dispatch({composerID:j,type:c("ReactComposerNUXActionType").NUX_WAS_HIDDEN,nuxType:k})}};f.exports=h}),null);
__d("ReactComposerPhoto.react",["cx","fbt","ix","CommerceProductTaggerType","Image.react","ImageBlock.react","immutable","LoadingIndicator.react","React","ReactComposerContextTypes","ReactComposerMediaConfig","ReactComposerPhotoTagger.react","ReactComposerPhotoThumbnail.react","ReactComposerStore","FluxContainer","ReactFragment","XUIAmbientNUX.react","XUICloseButton.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;m.getStores=function(){return[c("ReactComposerStore")]};m.calculateState=function(n,o){return{posting:c("ReactComposerStore").isPosting(n)}};m.prototype.$ReactComposerPhoto1=function(){var n=this.context.gks.local_image_display?this.props.fileURL:null;return c("React").createElement(c("ReactComposerPhotoThumbnail.react"),{bgClassName:"_1a__",bgURL:n,height:c("ReactComposerMediaConfig").photo.thumbHeight,imgSrc:this.props.thumbSrc,width:c("ReactComposerMediaConfig").photo.thumbWidth,alt:this.props.label})};m.prototype.render=function(){var n={width:c("ReactComposerMediaConfig").photo.thumbWidth,height:c("ReactComposerMediaConfig").photo.thumbHeight},o=this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit?c("React").createElement("div",{className:"_jff"},c("React").createElement(c("LoadingIndicator.react"),{className:"_jfg",size:"small",color:"white"})):null,p=this.props.showProductTaggerNux?"_jfc"+(this.props.isRecognizingFaceboxes?" _jfd":"")+" _43p_":"_jfc"+(this.props.isRecognizingFaceboxes?" _jfd":""),q=void 0,r=void 0;if(!this.state.posting){q=c("React").createElement(c("XUICloseButton.react"),{className:"_jfe",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"});r=c("React").createElement(c("ReactComposerPhotoTagger.react"),{canTagFromModal:this.props.canTagFromModal,draggingPhotos:this.props.draggingPhotos,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,faceboxes:this.props.faceboxes,onEditClick:this.props.onEditClick,onHideProductTaggerNux:this.props.onHideProductTaggerNux,onTagIntent:this.props.onTagIntent,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,originalID:this.props.originalID,photoID:this.props.photoID,shown:this.props.showPhotoTagger,showProductTaggerNux:this.props.showProductTaggerNux})}return c("React").createElement("span",null,c("React").createElement("div",{ref:"root",className:p,style:n},this.$ReactComposerPhoto1(),this.props.disableRemovePhotos?null:q,o,r),this.renderLayers())};m.prototype.renderLayers=function(){return c("ReactFragment").create({taggingNUX:this.props.enableFaceboxTagger?this.$ReactComposerPhoto2():null,stickersNUX:this.props.disablePhotoEditing?null:this.$ReactComposerPhoto3()})};m.prototype.$ReactComposerPhoto2=function(){return c("React").createElement(c("XUIContextualDialog.react"),{contextRef:function(){return this.refs.root}.bind(this),position:"below",alignment:"left",shown:this.props.showTaggingNUX,width:300},c("React").createElement(c("XUIContextualDialogBody.react"),null,c("React").createElement(c("XUICloseButton.react"),{className:"rfloat",onClick:this.props.onTaggingNUXClose}),c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{weight:"bold",display:"block"},i._("Now It's Easier to Tag Photos.")),i._("Click photos with a {tagging_badge_icon} to review tag suggestions or add, edit, and remove tags. When you post the photo, your tags will be applied.",[i.param("tagging_badge_icon",c("React").createElement(c("Image.react"),{className:"_2z-r",src:j("95679")}))]))))};m.prototype.$ReactComposerPhoto3=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"right",contextRef:function(){return this.refs.root}.bind(this),onCloseButtonClick:this.props.onStickersNUXClose,position:"below",shown:this.props.showStickersNUX},c("React").createElement(c("ImageBlock.react"),{spacing:"medium"},c("React").createElement(c("Image.react"),{src:j("95645")}),c("React").createElement("div",{className:"_21ft"},c("React").createElement("div",{className:"_21fs"},i._("New! Add Stickers!")),i._("You can now add stickers to your photos"))))};function m(){k.apply(this,arguments)}m.defaultProps={enableFaceboxTagger:true,productTaggerType:c("CommerceProductTaggerType").NONE,disablePhotoEditing:false};m.contextTypes=c("ReactComposerContextTypes");f.exports=f.exports=c("FluxContainer").create(m,{withContext:true,withProps:true})}),null);
__d("ReactComposerPhotoContainer.react",["cx","BootloadedComponent.react","CommerceSelfServeNUXType","ComposerNUXType","FluxContainer","immutable","JSResource","LoadingIndicator.react","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerNUXActions","ReactComposerNUXStore","ReactComposerPhoto.react","ReactComposerPhotoActions","ReactComposerPhotoStore","ReactDOM"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(){__p&&__p();var l;(l=j.constructor).call.apply(l,[this].concat(Array.prototype.slice.call(arguments)));this.$ReactComposerPhotoContainer7=function(){this.$ReactComposerPhotoContainer9()}.bind(this);this.$ReactComposerPhotoContainer6=function(){if(this.props.photoID)c("ReactComposerPhotoActions").removePhoto(this.context.composerID,this.props.photoID,this.props.uploadID);else c("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}.bind(this);this.$ReactComposerPhotoContainer9=function(){c("ReactComposerNUXActions").nuxWasSeen(this.context.composerID,c("ComposerNUXType").ADD_STICKERS_NUX)}.bind(this);this.$ReactComposerPhotoContainer10=function(m,n,o){if(!(this.state.isSpherical||this.props.sphericalPhotoID)&&this.props.photoID)c("ReactComposerPhotoActions").tagFacebox(this.context.composerID,this.props.photoID,m,n,o)}.bind(this);this.$ReactComposerPhotoContainer1=function(){c("ReactComposerNUXActions").nuxWasSeen(this.context.composerID,c("ComposerNUXType").TAGGING_FLYOUT_NUX)}.bind(this);this.$ReactComposerPhotoContainer11=function(){if(this.state.showTaggingNUX)this.$ReactComposerPhotoContainer1()}.bind(this);this.$ReactComposerPhotoContainer12=function(m,n){if(!(this.state.isSpherical||this.props.sphericalPhotoID)&&this.props.photoID)c("ReactComposerPhotoActions").untagFacebox(this.context.composerID,this.props.photoID,m,n)}.bind(this);this.$ReactComposerPhotoContainer8=function(){c("ReactComposerNUXActions").nuxWasSeen(this.context.composerID,c("CommerceSelfServeNUXType").COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON)}.bind(this);this.beforeCalculateInitialState(this.context.composerID,this.props);this.state=k.calculateState(this.state,this.props,this.context);this.$ReactComposerPhotoContainer1=this.$ReactComposerPhotoContainer1.bind(this)}k.getStores=function(){return[c("ReactComposerNUXStore"),c("ReactComposerPhotoStore")]};k.prototype.beforeCalculateInitialState=function(l,m){__p&&__p();if(m.photoID){var n=c("ReactComposerPhotoStore").getPhoto(l,m.photoID);if(n){var o=k.$ReactComposerPhotoContainer2(l,n,m.nuxConfig,m.index),p=!o&&k.$ReactComposerPhotoContainer3(l,n,m.nuxConfig,m.index);if(o)c("ReactComposerNUXActions").nuxWasShown(l,c("ComposerNUXType").ADD_STICKERS_NUX,n.id);if(p)c("ReactComposerNUXActions").nuxWasShown(l,c("ComposerNUXType").TAGGING_FLYOUT_NUX,n.id)}}};k.calculateState=function(l,m,n){var o=n.composerID;if(m.photoID){var p=c("ReactComposerPhotoStore").getPhoto(o,m.photoID);if(p){var q=this.$ReactComposerPhotoContainer2(o,p,m.nuxConfig,m.index),r=!q&&this.$ReactComposerPhotoContainer3(o,p,m.nuxConfig,m.index),s=c("ReactComposerPhotoStore").getPhotoBeingTagged(o)===m.photoID,t=m.showProductTaggerNux===true&&this.$ReactComposerPhotoContainer4(o);return{faceboxes:p.faceboxes,isLoadingPhotoEdit:p.isLoadingPhotoEdit,isRecognizingFaceboxes:p.isRecognizingFaceboxes,isSpherical:Boolean(p.cubestripURI),showPhotoTagger:s,showProductTaggerNux:t,showStickersNUX:q,showTaggingNUX:r,thumbSrc:p.thumbSrc}}}return{faceboxes:c("immutable").Map(),isLoadingPhotoEdit:false,isRecognizingFaceboxes:false,isSpherical:m.isSpherical,showPhotoTagger:false,showProductTaggerNux:!!m.showProductTaggerNux,showStickersNUX:false,showTaggingNUX:false,thumbSrc:""}};k.$ReactComposerPhotoContainer5=function(l,m,n,o,p){var q=c("ReactComposerNUXStore").getNUXShownPhotoID(l,o),r=c("ReactComposerNUXStore").hasNUXBeenSeen(l,o);return!!n[o]&&!r&&(!q||q===m.id)&&p===0};k.$ReactComposerPhotoContainer2=function(l,m,n,o){return this.$ReactComposerPhotoContainer5(l,m,n,c("ComposerNUXType").ADD_STICKERS_NUX,o)};k.$ReactComposerPhotoContainer3=function(l,m,n,o){return this.$ReactComposerPhotoContainer5(l,m,n,c("ComposerNUXType").TAGGING_FLYOUT_NUX,o)&&m.faceboxes.size>0};k.$ReactComposerPhotoContainer4=function(l){return!c("ReactComposerNUXStore").hasNUXBeenSeen(l,c("CommerceSelfServeNUXType").COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON)};k.prototype.componentDidMount=function(){setTimeout(function(){var l=this.props.dragHandler;l&&l.add(c("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)};k.prototype.componentWillUnmount=function(){setTimeout(function(){var l=this.props.dragHandler;l&&l.remove(c("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)};k.prototype.render=function(){if(this.state.isSpherical||this.props.sphericalPhotoID){var l=c("React").createElement("div",{className:"_30t9"},c("React").createElement(c("LoadingIndicator.react"),{className:"_4qlq",size:"small",color:"white"}));return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ReactComposerSphericalPhoto.react").__setRef("ReactComposerPhotoContainer.react"),bootloadPlaceholder:l,className:"_4j47 _jfc",showEditButton:true,fileURL:this.props.fileURL,alt:this.props.label,onRemoveButtonClicked:this.$ReactComposerPhotoContainer6,photoID:this.props.photoID,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.state.thumbSrc,uploadID:this.props.uploadID,sphericalImage:this.props.sphericalImage,useLocalSphericalImage:this.props.useLocalSphericalImage,ref:"container"})}else return c("React").createElement(c("ReactComposerPhoto.react"),babelHelpers["extends"]({},this.props,this.state,{onEditClick:this.$ReactComposerPhotoContainer7,onHideProductTaggerNux:this.$ReactComposerPhotoContainer8,onRemoveButtonClicked:this.$ReactComposerPhotoContainer6,onStickersNUXClose:this.$ReactComposerPhotoContainer9,onTagAdded:this.$ReactComposerPhotoContainer10,onTagIntent:this.$ReactComposerPhotoContainer11,onTaggingNUXClose:this.$ReactComposerPhotoContainer1,onTagRemoved:this.$ReactComposerPhotoContainer12,ref:"container"}))};k.contextTypes=c("ReactComposerContextTypes");f.exports=c("FluxContainer").create(k,{withContext:true,withProps:true})}),null);
__d("ReactComposerPhotoUploadPlaceholder.react",["cx","ix","CircularProgressBar.react","Image.react","LoadingIndicator.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPhotoUploadState","XUICloseButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ReactComposerPhotoUploadPlaceholder",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{onRemoveButtonClicked:j.func.isRequired,uploadID:j.string.isRequired,uploadState:j.oneOf(Object.keys(c("ReactComposerPhotoUploadState"))).isRequired,uploadProgress:j.number,isSpherical:j.bool,fileURL:j.string},render:function l(){__p&&__p();var m=null,n=null,o=this.props.uploadState,p=o===c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_RESIZE_STARTED,q=o===c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING;if((p||q)&&!this.props.isDocument){var r="_1b01"+(p?" _1b02":"")+(q?" _1b03":"");m=c("React").createElement(c("CircularProgressBar.react"),{percentComplete:this.props.uploadProgress,className:r})}else n=c("React").createElement(c("LoadingIndicator.react"),{className:"_1b00",color:"white",size:"medium"});var s=void 0;if(this.props.isSpherical)s=c("React").createElement(c("Image.react"),{className:"_1az2",src:i("95829"),alt:"360 Photo"});var t={};if(this.context.gks.local_image_display&&this.props.fileURL)t={backgroundImage:"url("+this.props.fileURL+")"};return c("React").createElement("div",{className:"_50_c _1a__",style:t},c("React").createElement(c("XUICloseButton.react"),{className:"_1b04",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"dark"}),s,m,n)}});f.exports=k}),null);
__d("ReactComposerPhotoUploadPlaceholderContainer.react",["DocumentUploadConfig","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPhotoUploadPlaceholder.react","ReactComposerPropsAndStoreBasedStateMixin"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerPhotoUploadPlaceholderContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactComposerMediaUploadStore"))],propTypes:{uploadID:h.string.isRequired},statics:{calculateState:function j(k,l){var m=c("ReactComposerMediaUploadStore").getMediaUpload(k,l.uploadID);return{uploadProgress:m.progress,uploadState:m.state,isSpherical:m.isSpherical,isDocument:m.fileUpload&&c("DocumentUploadConfig").isSupported(m.fileUpload.getFile().type)}}},render:function j(){return c("React").createElement(c("ReactComposerPhotoUploadPlaceholder.react"),babelHelpers["extends"]({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked}))},_onRemoveButtonClicked:function j(){c("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}});f.exports=i}),null);
__d("ReactComposerVideoXActionButton.react",["cx","React","Tooltip","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=c("joinClasses")(this.props.className,"_sru");return c("React").createElement("button",babelHelpers["extends"]({className:m,onClick:this.props.onClick,"aria-label":this.props.tooltip},c("Tooltip").propsFor(this.props.tooltip)),c("React").createElement("div",{className:this.props.iconClassName}))};function l(){i.apply(this,arguments)}l.propTypes={tooltip:k.node,className:k.string,onClick:k.func,iconClassName:k.string};f.exports=l}),null);
__d("ReactComposerVideoXEditActionButton.react",["cx","fbt","ReactComposerVideoXActionButton.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Edit Video");return c("React").createElement(c("ReactComposerVideoXActionButton.react"),{className:"_3x9-",iconClassName:"_3x9_",onClick:this.props.onClick,tooltip:n})};function m(){j.apply(this,arguments)}m.propTypes={onClick:l.func};f.exports=m}),null);
__d("ReactComposerVideoX.react",["cx","ix","fbt","Image.react","BackgroundImage.react","React","ReactComposerMediaConfig","XUICloseButton.react","ReactComposerVideoXEditActionButton.react","ReactComposerVideoXEditDialogGatedModule","ReactComposerVideoXEditDialogActions","SimpleNUXMessage","SimpleNUXMessageTypes","XUIAmbientNUX.react","ReactComposerNUXActions","ProfileCustomVideoThumbnailTypedLogger","ProfileCustomVideoThumbnailEvent"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("ReactComposerVideoXEditDialogGatedModule").module,n=c("React").PropTypes;k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$ReactComposerVideoX1=function(){c("ReactComposerVideoXEditDialogActions").showDialog(this.props.composerID,this.props.uploadID);new(c("ProfileCustomVideoThumbnailTypedLogger"))().setVideoID(this.props.videoID).setEvent(c("ProfileCustomVideoThumbnailEvent").OPEN_EDIT_DIALOG).log();c("ReactComposerVideoXEditDialogActions").saveThumbnailState(this.props.composerID,this.props.uploadID);if(this.props.showThumbnailNux)this.$ReactComposerVideoX2()}.bind(this),this.$ReactComposerVideoX2=function(){c("SimpleNUXMessage").markMessageSeenByUser(c("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX);c("ReactComposerNUXActions").nuxWasSeen(this.props.composerID,c("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX)}.bind(this),q}o.prototype.render=function(){__p&&__p();var p={width:c("ReactComposerMediaConfig").photo.thumbWidth,height:c("ReactComposerMediaConfig").photo.thumbHeight},q="_1sjs"+(this.props.isRecognizingFaceboxes?" _1sjt":""),r=void 0,s=void 0,t=void 0,u=void 0,v=void 0;if(!this.props.posting){r=c("React").createElement(c("XUICloseButton.react"),{className:"_1sju",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"});s=m?c("React").createElement(c("ReactComposerVideoXEditActionButton.react"),{onClick:this.$ReactComposerVideoX1,ref:"editButton"}):null;var w=this.props.uploadIndex>1?"left":"right";v=m?c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.editButton}.bind(this),position:w,width:"auto",shown:this.props.showThumbnailNux,onCloseButtonClick:this.$ReactComposerVideoX2,key:"ambientNUX"},j._("New! Choose a thumbnail that"),c("React").createElement("br",null),j._("shows what your video is about.")):null;t=m?c("React").createElement(m,{composerID:this.props.composerID,uploadID:this.props.uploadID,videoID:this.props.videoID,videoURL:this.props.videoURL,allowTextOnThumbnail:this.props.allowTextOnThumbnail}):null;u=m?c("React").createElement("div",{className:"_nai"}):null}var x=m?null:c("React").createElement("div",{className:"_2v_s"}),y=this.props.isSpherical?c("React").createElement(c("Image.react"),{className:"_jk8",src:i("95829")}):null;return c("React").createElement("div",{className:"uiContextualLayerParent"},c("React").createElement("div",{ref:"root",className:q,style:p},c("React").createElement(c("BackgroundImage.react"),{alt:this.props.label,src:this.props.thumbSrc,width:c("ReactComposerMediaConfig").photo.thumbWidth,height:c("ReactComposerMediaConfig").photo.thumbHeight,backgroundSize:this.props.usingPlaceholderThumbnail?"cover":"contain",className:!this.props.usingPlaceholderThumbnail?"_33by":""}),u,x,r,s,v,t,y))};o.propTypes={label:n.string,onRemoveButtonClicked:n.func.isRequired,thumbSrc:n.string.isRequired,posting:n.bool.isRequired};f.exports=o}),null);
__d("ReactComposerVideoXContainer.react",["cx","EventListener","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","ReactComposerVideoX.react","ReactDOM","ReactComposerVideoXEditDialogActions","generateVideoThumbnails","ReactComposerNUXActions","ReactComposerNUXStore","SimpleNUXMessage","SimpleNUXMessageTypes","VideoThumbnailDimensions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=100,k=100,l="/images/icons/timeline/placeholder/placeholder-movies.png",m=c("React").createClass({displayName:"ReactComposerVideoXContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactComposerStore"),c("ReactComposerNUXStore"))],_loadedmetadataListener:null,propTypes:{dragHandler:i.shape({add:i.func.isRequired,remove:i.func.isRequired}),label:i.string,photoID:i.string.isRequired,uploadID:i.string.isRequired,fileURL:i.string.isRequired,isSpherical:i.bool,allowTextOnThumbnail:i.bool},statics:{calculateState:function n(o,p){var q=c("ReactComposerMediaUploadStore").getMediaUpload(o.toString(),p.uploadID),r=c("ReactComposerMediaUploadStore").getUploadIndex(o.toString(),p.uploadID),s=q&&q.thumbSrc?q.thumbSrc:l,t=c("SimpleNUXMessage").hasUserSeenMessage(c("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX),u=c("ReactComposerNUXStore").getNUXShownPhotoID(o,c("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX),v=!t&&(!u||u===p.photoID);if(v&&!u)c("ReactComposerNUXActions").nuxWasShown(o,c("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX,p.photoID);return{posting:c("ReactComposerStore").isPosting(o),thumbSrc:s,showThumbnailNux:v,uploadIndex:r}}},componentDidMount:function n(){var o=c("ReactDOM").findDOMNode(this.refs.videoPlayer);if(this.state.thumbSrc===l)this._loadedmetadataListener=c("EventListener").listen(o,"loadedmetadata",this.generateVideoThumbnails);setTimeout(function(){var p=this.props.dragHandler;p&&p.add(c("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)},generateVideoThumbnails:function n(){var o=c("ReactDOM").findDOMNode(this.refs.videoPlayer);c("generateVideoThumbnails")(o,k,j,1).done(function(p){c("ReactComposerMediaUploadActions").setVideoThumbnail(this.context.composerID,this.props.uploadID,p.thumbnails[0].getURL())}.bind(this));c("generateVideoThumbnails")(o,c("VideoThumbnailDimensions").GENERATED_THUMBNAIL_WIDTH,c("VideoThumbnailDimensions").GENERATED_THUMBNAIL_HEIGHT,10,"contain").done(function(p){c("ReactComposerVideoXEditDialogActions").updateGeneratedThumbnails(p.thumbnails,this.context.composerID,this.props.uploadID)}.bind(this));if(o instanceof HTMLVideoElement)c("ReactComposerVideoXEditDialogActions").setVideoDimensions(o.videoWidth,o.videoHeight,this.context.composerID,this.props.uploadID)},componentWillUnmount:function n(){if(this._loadedmetadataListener){this._loadedmetadataListener.remove();this._loadedmetadataListener=null}setTimeout(function(){var o=this.props.dragHandler;o&&o.remove(c("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)},render:function n(){return c("React").createElement("div",null,c("React").createElement(c("ReactComposerVideoX.react"),{label:this.props.label,posting:this.state.posting,thumbSrc:this.state.thumbSrc,usingPlaceholderThumbnail:this.state.thumbSrc===l,onRemoveButtonClicked:this._onRemoveButtonClicked,composerID:this.context.composerID,uploadID:this.props.uploadID,uploadIndex:this.state.uploadIndex,isSpherical:this.props.isSpherical,videoID:this.props.photoID,showThumbnailNux:this.state.showThumbnailNux,videoURL:this.props.fileURL,allowTextOnThumbnail:this.props.allowTextOnThumbnail,ref:"container"}),this._getVideoElement())},_getVideoElement:function n(){return c("React").createElement("video",{ref:"videoPlayer",className:"_2mpk",src:this.props.fileURL})},_onRemoveButtonClicked:function n(){c("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID);c("ReactComposerVideoXEditDialogActions").removeDialogState(this.context.composerID,this.props.uploadID);var o=c("ReactComposerNUXStore").getNUXShownPhotoID(this.context.composerID,c("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX);if(o==this.props.photoID)c("ReactComposerNUXActions").nuxWasHidden(this.context.composerID,c("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX)}});f.exports=m}),null);
__d("ReactComposerVideoXUploadPlaceholder.react",["cx","CircularProgressBar.react","LoadingIndicator.react","ProgressBar.react","React","ReactComposerPhotoUploadState","XUICloseButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){__p&&__p();var m=null,n=null,o=null,p=this.props.uploadState,q=p===c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING,r=50*Math.log10(Math.max(1,parseInt(this.props.uploadProgress,10)));if(this.props.useRealProgressPercentage)r=parseFloat(this.props.uploadProgress);if(q){var s="_5t36"+(q?" _5t3f":"");m=c("React").createElement(c("CircularProgressBar.react"),{percentComplete:r,className:s})}else{o=c("React").createElement(c("XUICloseButton.react"),{className:"_5t3o",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"dark"});n=c("React").createElement(c("LoadingIndicator.react"),{className:"_1b00",color:"white",size:"medium"})}return c("React").createElement("div",{className:"_5t3l"},o,m,n)};function l(){i.apply(this,arguments)}l.propTypes={onRemoveButtonClicked:k.func.isRequired,uploadID:k.string.isRequired,uploadState:k.oneOf(Object.keys(c("ReactComposerPhotoUploadState"))).isRequired,uploadProgress:k.number,canSeeCircularProgress:k.bool,useRealProgressPercentage:k.bool};f.exports=l}),null);
__d("ReactComposerVideoXUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerVideoXUploadPlaceholder.react"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerVideoXUploadPlaceholderContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactComposerMediaUploadStore"))],propTypes:{uploadID:h.string.isRequired},statics:{calculateState:function j(k,l){var m=c("ReactComposerMediaUploadStore").getMediaUpload(k,l.uploadID);return{uploadProgress:m.progress,uploadState:m.state,useRealProgressPercentage:m.useRealProgressPercentage}}},render:function j(){return c("React").createElement(c("ReactComposerVideoXUploadPlaceholder.react"),babelHelpers["extends"]({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked}))},_onRemoveButtonClicked:function j(){c("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}});f.exports=i}),null);
__d("ReactComposerDraggableMedia.react",["cx","fbt","Draggable","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerFailedPhotoUploadContainer.react","ReactComposerFailedVideoXUploadContainer.react","ReactComposerMediaUploadActions","ReactComposerMediaUploadType","ReactComposerPhotoActions","ReactComposerPhotoContainer.react","ReactComposerPhotoUploadPlaceholderContainer.react","ReactComposerPhotoUploadState","ReactComposerVideoXContainer.react","ReactComposerVideoXUploadPlaceholderContainer.react","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","SimpleNUXMessage","SimpleNUXMessageTypes","Vector","XUIAmbientNUX.react","throttle"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=200,l=5,m=c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_DONE,n=c("React").createClass({displayName:"ReactComposerDraggableMedia",_draggable:undefined,_grabbed:undefined,_scrollParent:undefined,contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{enableFaceboxTagger:j.bool,productTaggerType:j.string,disablePhotoEditing:j.bool,mediaConfig:j.object.isRequired,upload:j.object.isRequired,nuxConfig:j.object.isRequired,showSphericalSingletonNux:j.bool,draggingPhotos:j.bool,enableMediaDragging:j.bool,disableRemovePhotos:j.bool,index:j.number,updateComponentPosition:j.func.isRequired,onGrab:j.func.isRequired,onDrag:j.func.isRequired,onDrop:j.func.isRequired},getInitialState:function o(){return{dragging:false,showSphericalSingletonNux:false}},componentWillReceiveProps:function o(p){if(this.props.index!==p.index&&p.index!==undefined)setTimeout(this._updateComponentPosition,0);if(!this.props.showSphericalSingletonNux&&p.showSphericalSingletonNux&&!c("SimpleNUXMessage").hasUserSeenMessage(c("SimpleNUXMessageTypes").SPHERICAL_SINGLETON_NUX))this.setState({showSphericalSingletonNux:true})},componentDidUpdate:function o(p){if(this.props.enableMediaDragging&&p.upload.state!==m&&this.props.upload.state===m&&!this.props.disableRemovePhotos)this._createDraggable();else if(p.upload.state===m&&this.props.upload.state!==m)this._draggable&&this._draggable.destroy()},componentDidMount:function o(){this._scrollParent=this._findScrollParent();if(this.props.enableMediaDragging&&this.props.upload.state===m&&!this.props.disableRemovePhotos)this._createDraggable();setTimeout(this._updateComponentPosition,0)},componentWillUnmount:function o(){this._draggable&&this._draggable.destroy()},render:function o(){var p=(this.state.dragging?"_2pkn":"")+" _2pko",q=this.props.upload,r=!q.isSpherical&&q.photoID?q.photoID:q.id;return c("React").createElement("div",{className:p,key:r,onClick:this._onClick,ref:"draggable_media",role:"presentation"},this._getInnerMediaComponent())},renderLayers:function o(){return{sphericalSingletonNux:this._sphericalSingletonNux()}},_sphericalSingletonNux:function o(){if(!this.props.showSphericalSingletonNux)return null;return c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"left",contextRef:function(){return this.refs.draggable_media}.bind(this),shown:this.state.showSphericalSingletonNux,position:"below",onCloseButtonClick:this._onSphericalSingletonNuxClose,width:"auto"},i._("Post this photo individually to view in 360\u00b0"))},_onSphericalSingletonNuxClose:function o(){this.setState({showSphericalSingletonNux:false});c("SimpleNUXMessage").markMessageSeenByUser(c("SimpleNUXMessageTypes").SPHERICAL_SINGLETON_NUX)},_getInnerMediaComponent:function o(){if(this.props.upload.mediaType==c("ReactComposerMediaUploadType").VIDEO)return this._getInnerVideoComponent();return this._getInnerPhotoComponent()},_getInnerVideoComponent:function o(){var p=this.props.upload;if(p.state===m){var q=this._getDragHandler();return c("React").createElement("div",{"data-testid":"media-attachment-video"},c("React").createElement(c("ReactComposerVideoXContainer.react"),{isSpherical:p.isSphericalVideo,dragHandler:q,key:p.photoID,label:p.filename,photoID:p.photoID,uploadID:p.id,fileURL:p.fileURL,allowTextOnThumbnail:this.props.mediaConfig.allowTextOnVideoThumbnail}))}if(p.state===c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_FAILED)return c("React").createElement(c("ReactComposerFailedVideoXUploadContainer.react"),{key:p.id,error:p.error,filename:p.filename,uploadID:p.id});return c("React").createElement(c("ReactComposerVideoXUploadPlaceholderContainer.react"),{key:p.id,uploadID:p.id})},_getInnerPhotoComponent:function o(){var p=this.props.upload;if(p.state===c("ReactComposerPhotoUploadState").PHOTO_UPLOAD_FAILED)return c("React").createElement(c("ReactComposerFailedPhotoUploadContainer.react"),{error:p.error,filename:p.filename,key:p.id,mediaConfig:this.props.mediaConfig,uploadID:p.id});if(p.state===m||p.isSpherical&&p.useLocalSphericalImage&&p.fileURL){var q=this._getDragHandler(),r=!p.isSpherical&&p.photoID?p.photoID:p.id;return c("React").createElement("div",{"data-testid":"media-attachment-photo"},c("React").createElement(c("ReactComposerPhotoContainer.react"),{canTagFromModal:this.props.mediaConfig.canTagFromModal,draggingPhotos:this.props.draggingPhotos,dragHandler:q,enableFaceboxTagger:this.props.enableFaceboxTagger,label:p.filename,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,disableRemovePhotos:this.props.disableRemovePhotos,key:r,nuxConfig:this.props.nuxConfig,originalID:p.originalPhotoID,photoID:p.photoID,showProductTaggerNux:this.props.nuxConfig.showProductPhotoTaggerNux&&this.props.index===0,index:this.props.index,sphericalPhotoID:p.sphericalPhotoID,uploadID:p.id,fileURL:p.fileURL,sphericalImage:p.sphericalImage,isSpherical:p.isSpherical,useLocalSphericalImage:p.useLocalSphericalImage}))}return c("React").createElement(c("ReactComposerPhotoUploadPlaceholderContainer.react"),{key:p.id,uploadID:p.id,fileURL:p.fileURL})},_getDragHandler:function o(){var p=this;return{add:function q(r){p._draggable&&p._draggable.addHandle(r)},remove:function q(r){p._draggable&&p._draggable.removeHandle(r)}}},_createDraggable:function o(){this._draggable=new(c("Draggable"))(c("ReactDOM").findDOMNode(this)).setNamespace("ReactComposer").setUseAbsolute(true).setAvoidKillingEvents(true).setGutter(l).setGrabHandler(this._onGrab).setDragHandler(c("throttle")(this._onDrag,k)).setDropHandler(this._onDrop);this._updateComponentPosition()},_updateComponentPosition:function o(){var p=c("ReactDOM").findDOMNode(this),q=c("Vector").getElementPosition(p);q=this._compensateForScroll(p,q);this.props.updateComponentPosition(this.props.upload.id||this.props.upload.photoID,q,c("Vector").getElementDimensions(p))},_compensateForScroll:function o(p,q){return this._scrollParent?q.add(this._scrollParent.scrollLeft,this._scrollParent.scrollTop):q},_findScrollParent:function o(){__p&&__p();var p=c("ReactDOM").findDOMNode(this);if(p.closest)return p.closest(".fbScrollableAreaWrap");else{var q=document.querySelectorAll(".fbScrollableAreaWrap");while(p&&p.nodeType===1){var r=0;while(q[r]){if(q[r]===p)return p;r++}p=p.parentNode}return null}},_onGrab:function o(){if(this.state.dragging)return;this._grabbed=true;var p=c("ReactDOM").findDOMNode(this);this.props.onGrab(this.props.upload.id||this.props.upload.photoID,p)},_onDrag:function o(p){if(!this._grabbed)return;this.setState({dragging:true});var q=c("ReactDOM").findDOMNode(this);p=this._compensateForScroll(q,p);this.props.onDrag(p)},_onDrop:function o(p){this._draggable&&this._draggable.resetPosition();this.setState({dragging:false});this._grabbed=false;var q=c("ReactComposerMediaUploadActions").mediaMoved,r=c("ReactDOM").findDOMNode(this);p=this._compensateForScroll(r,p);this.props.onDrop(p,q)},_onClick:function o(){c("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,this.props.upload.photoID)}});f.exports=n}),null);
__d("ReactComposerGenericPhotoUploadLink.react",["cx","Link.react","React","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m=c("joinClasses")("__9u",this.props.className);return c("React").createElement(c("Link.react"),{className:m},this.props.children)};function l(){"use strict";i.apply(this,arguments)}l.propTypes={className:k.string};l.defaultProps={className:"__9t"};f.exports=l}),null);
__d("ReactComposerMediaScrollableArea.react",["React","ReactComponentWithPureRenderMixin","ReactDOM","TimelineMapScrollableArea","joinClasses"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=h.oneOfType([h.string,h.number]),j=c("React").createClass({displayName:"ReactComposerMediaScrollableArea",_scrollableArea:c("TimelineMapScrollableArea"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{children:h.array.isRequired,getAddMoreDOM:h.func,height:i.isRequired,persistent:h.bool,photosCount:h.number,scrollbar:h.oneOf(["native","fade","nofade"]).isRequired,verticalScroll:h.bool,width:i.isRequired},getDefaultProps:function k(){return{scrollbar:"native",width:"100%"}},componentDidMount:function k(){this._scrollableArea=new(c("TimelineMapScrollableArea"))(c("ReactDOM").findDOMNode(this.refs.container),{fade:this.props.scrollbar==="fade",persistent:this.props.persistent,verticalscroll:this.props.verticalScroll});this._scrollAddButtonIntoView()},componentDidUpdate:function k(l,m){if(this.props.photosCount>l.photosCount)this._scrollAddButtonIntoView()},componentWillUnmount:function k(){this._scrollableArea.destroy()},render:function k(){var l=c("joinClasses")(this.props.className,this.props.scrollbar),m={height:this.props.height,width:this.props.width},n=this.props.height-(this.props.scrollbar==="fade"?0:10),o={height:n};return c("React").createElement("div",{className:l,ref:"container"},c("React").createElement("div",{className:"fbScrollableArea",style:m},c("React").createElement("div",{className:"fbScrollableAreaWrap"},c("React").createElement("div",{className:"fbScrollableAreaBody",style:o},c("React").createElement("div",{className:"fbScrollableAreaContent"},this.props.children))),this._getTrack()))},_getTrack:function k(){if(this.props.scrollbar==="native")return null;return c("React").createElement("div",{className:"fbScrollableAreaTrack invisible_elem"},c("React").createElement("div",{className:"fbScrollableAreaGripper"}))},_scrollAddButtonIntoView:function k(){this.props.getAddMoreDOM&&this.props.getAddMoreDOM()&&this._scrollableArea.scrollIntoView(this.props.getAddMoreDOM())}});f.exports=j}),null);
__d("ReactComposerMediaUploadsGrid.react",["cx","fbt","FileInput.react","immutable","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerDraggableMedia.react","ReactComposerGenericPhotoUploadLink.react","ReactComposerLoggingActions","ReactComposerLoggingName","ReactComposerMediaScrollableArea.react","ReactComposerMediaUtils","ReactDOM","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=112,l=c("React").createClass({displayName:"ReactComposerMediaUploadsGrid",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{enableFaceboxTagger:j.bool,productTaggerType:j.string,disablePhotoEditing:j.bool,disableRemovePhotos:j.bool,addMorePhotosConfig:j.shape({maxPhotos:j.number}).isRequired,mediaAcceptParam:j.string,mediaConfig:j.object.isRequired,nuxConfig:j.object.isRequired,onFilesSelected:j.func,canUploadMultiplePhotos:j.bool,uploads:j.instanceOf(c("immutable").List).isRequired,sphericalSingletonNuxUpload:j.object,onDrop:j.func,photoUploadLink:j.element,scrollableAreaHeight:j.number.isRequired,sourceIndex:j.number,targetIndex:j.number,updateComponentPosition:j.func.isRequired},getDefaultProps:function m(){return{addMorePhotosConfig:{},canUploadMultiplePhotos:false,photoUploadLink:c("React").createElement(c("ReactComposerGenericPhotoUploadLink.react"),null),scrollableAreaHeight:k,showSellUploadLink:false}},render:function m(){return c("React").createElement("div",{className:"_kkp"},c("React").createElement("div",{className:c("joinClasses")("_kkq",this.props.className)},c("React").createElement(c("ReactComposerMediaScrollableArea.react"),{fade:true,getAddMoreDOM:this._getAddMoreDOM,height:this.props.scrollableAreaHeight,photosCount:this.props.uploads.size,scrollbar:"fade",verticalScroll:true},this.props.children,this._getComponents(),this._getAddMorePhotosButton())))},_onAddMorePhotosClick:function m(){c("ReactComposerLoggingActions").mediaUploadInputClicked(this.context.composerID,c("ReactComposerLoggingName").MEDIA_UPLOADS_PLUS_BUTTON)},_onFilesSelected:function m(event){if(this.props.onFilesSelected){var n=this.props.onFilesSelected;n(event,this.refs.fileInput.getFileInput())}c("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput(),true)},_getAddMorePhotosButton:function m(){if(!this.props.canUploadMultiplePhotos&&this.props.uploads.size>0)return null;if(this.props.addMorePhotosConfig.maxPhotos&&this.props.uploads.size>=this.props.addMorePhotosConfig.maxPhotos)return null;return c("React").createElement("span",{ref:"addMore",className:"_kkr"},c("React").createElement(c("FileInput.react"),{accept:this.props.mediaAcceptParam,multiple:this.props.canUploadMultiplePhotos,name:"composer_photo",onChange:this._onFilesSelected,onClick:this._onAddMorePhotosClick,ref:"fileInput",title:i._("Choose a file to upload"),"data-testid":"add-more-photos"},this.props.photoUploadLink))},_getComponents:function m(){__p&&__p();var n=this.props.uploads.toSeq().filter(function(p,q){return q!==this.props.sourceIndex}.bind(this)).map(function(p,q){return this._getDraggablePhoto(p,q)}.bind(this));if(this.props.targetIndex!=null){var o=c("React").createElement("div",{key:"placeholder",className:"_kks"});n=n.splice(this.props.targetIndex,0,o)}if(this.props.sourceIndex!=null)n=n.splice(this.props.sourceIndex,0,this._getDraggablePhoto(this.props.uploads.get(this.props.sourceIndex)));return n.toArray()},_getDraggablePhoto:function m(n,o){return c("React").createElement(c("ReactComposerDraggableMedia.react"),{enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,disableRemovePhotos:this.props.disableRemovePhotos,key:n.id,upload:n,nuxConfig:this.props.nuxConfig,showSphericalSingletonNux:n===this.props.sphericalSingletonNuxUpload,draggingPhotos:this.props.sourceIndex!=null,enableMediaDragging:true,index:o,mediaConfig:this.props.mediaConfig,updateComponentPosition:this.props.updateComponentPosition,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop})},_getAddMoreDOM:function m(){return c("ReactDOM").findDOMNode(this.refs.addMore)}});f.exports=l}),null);
__d("ReactComposerMediaUploadsGridContainer.react",["Locale","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadsGrid.react","ReactDOM","Rect","Vector"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerMediaUploadsGridContainer",_componentsPosition:{},contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{photoUploadLink:h.element,enableFaceboxTagger:h.bool,productTaggerType:h.string,disablePhotoEditing:h.bool,showSellUploadLink:h.bool,disableRemovePhotos:h.bool},getInitialState:function j(){return{rtl:c("Locale").isRTL(),sourceIndex:null,targetIndex:null,uploads:this.props.uploads,sphericalSingletonNuxUpload:null}},componentWillReceiveProps:function j(k){if(this.state.uploads!==k.uploads){var l=k.uploads.toSeq().filter(function(m){return m.canShowSphericalSingletonNux}).first();this.setState({uploads:k.uploads,sphericalSingletonNuxUpload:l})}},render:function j(){return c("React").createElement(c("ReactComposerMediaUploadsGrid.react"),babelHelpers["extends"]({},this.props,{onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,sourceIndex:this.state.sourceIndex,targetIndex:this.state.targetIndex,updateComponentPosition:this._updateComponentPosition,uploads:this.state.uploads,sphericalSingletonNuxUpload:this.state.sphericalSingletonNuxUpload}))},_onGrab:function j(k,l){var m=this.state.uploads.findIndex(function(n){return n.id===k});this.setState({sourceIndex:m,targetIndex:m})},_onDrag:function j(k){var l=c("Vector").getElementPosition(c("ReactDOM").findDOMNode(this));k=k.sub(l);this.setState({targetIndex:this._getTargetID(k)})},_onDrop:function j(k,l){__p&&__p();this._onDrag(k);var m=this.state.sourceIndex,n=this.state.targetIndex;if(m==null||n==null)return;if(m!==n){var o=this.state.uploads;o=o.splice(m,1).splice(n,0,o.get(m));this.setState({uploads:o});l(this.context.composerID,m,n)}this._endDrag()},_endDrag:function j(){this.setState({sourceIndex:null,targetIndex:null})},_getTargetID:function j(k){var l=this.state.uploads,m=this.state.rtl?function(q,k){return q.right>=k.x}:function(q,k){return q.left<=k.x};for(var n=l.size-1;n>=0;n--){var o=l.get(n),p=o.id,q=this._componentsPosition[p];if(m(q,k))return n}return 0},_updateComponentPosition:function j(k,l,m){var n=new(c("Rect"))(c("ReactDOM").findDOMNode(this));this._componentsPosition[k]={left:l.x-n.l,right:l.x-n.l+m.x}}});f.exports=i}),null);
__d("ReactComposerVideoUploadPlaceholder.react",["cx","ix","Image.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","XUICloseButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=c("React").PropTypes,k=c("React").createClass({displayName:"ReactComposerVideoUploadPlaceholder",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactComposerStore"))],propTypes:{onRemoveClick:j.func},statics:{calculateState:function l(m,n){return{posting:c("ReactComposerStore").isPosting(m)}}},render:function l(){var m="_2oe _5ip5",n="_3ew _5iph",o=this.state.posting?null:c("React").createElement(c("XUICloseButton.react"),{className:"_5ipi",onClick:this.props.onRemoveClick,shade:"light",size:"medium"});return c("React").createElement("div",{className:m},o,c("React").createElement(c("Image.react"),{className:n,src:i("82359")}))}});f.exports=k}),null);
__d("ReactComposerVideoUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerVideoUploadActions","ReactComposerVideoUploadPlaceholder.react"],(function a(b,c,d,e,f,g){var h=c("React").createClass({displayName:"ReactComposerVideoUploadPlaceholderContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin")],render:function i(){return c("React").createElement(c("ReactComposerVideoUploadPlaceholder.react"),{onRemoveClick:this._onRemoveClick})},_onRemoveClick:function i(){c("ReactComposerVideoUploadActions").remove(this.context.composerID)}});f.exports=h}),null);
__d("ReactComposerVideoUploadProgressBar.react",["cx","DOMContainer.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:"_4340"},c("React").createElement(c("DOMContainer.react"),null,this.props.progressBar))};function l(){i.apply(this,arguments)}l.propTypes={progressBar:k.instanceOf(HTMLElement).isRequired};f.exports=l}),null);
__d("ReactComposerMediaAttachment.react",["cx","fbt","BootloadOnRender.react","ComposerEntryPointRef","immutable","JSResource","LazyComponent.react","MNPageComposerUtils","React","ReactComposerAttachmentType","ReactComposerAudienceSelectorContainer.react","ReactComposerSproutsDisplayState","ReactComposerCollageContainer.react","ReactComposerCollagePlusButton.react","ReactComposerContextTypes","ReactComposerCrossPostToInstagramRow.react","ReactComposerDragDropPromptContainer.react","ReactComposerFooterActions.react","ReactComposerFooterContainer.react","ReactComposerMediaAttachmentButtons.react","ReactComposerMediaUploadsGridContainer.react","ReactComposerPostButtonContainer.react","ReactComposerProfilePhotoBlock.react","ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react","ReactComposerStatusFooterContainer.react","ReactComposerStatusUtils","ComposerTargetData","ReactComposerTaggerSummaryContainer.react","ReactComposerTimelineAudienceSelectorNextButtonContainerGatedModule","ReactComposerVideoUploadPlaceholderContainer.react","ReactComposerVideoUploadProgressBar.react","ReactComposerFundraiserAttachmentContainerGated","ReactDOM"],(function a(b,c,aa,ba,d,ca,da,e){"use strict";__p&&__p();var f,g,h=c("ReactComposerTimelineAudienceSelectorNextButtonContainerGatedModule").module,i=c("ReactComposerFundraiserAttachmentContainerGated").module;f=babelHelpers.inherits(j,c("React").Component);g=f&&f.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=g.constructor).call.apply(k,[this].concat(n)),this.$ReactComposerMediaAttachment1=0,l}j.prototype.render=function(){var k=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],l=this.props.uploads.size>0&&!this.props.slideshowDialogOpen||!!this.props.video||k.canUploadPhoto&&!this.props.createAlbumLink||this.props.shouldShowCanvasSelector||this.props.shouldShowCarouselURLInputArea||this.props.shouldShowPreview||this.props.isCollectionSelected||this.props.isSlideshowSelected,m=null;if(k.PageComposerMediaAttachmentButtons){var n=k.PageComposerMediaAttachmentButtons;m=c("React").createElement(n,{canvasConfig:k.canvasConfig,carouselConfig:k.carouselConfig,collectionConfig:k.collectionConfig,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,showCanvasEntryPoint:k.showCanvasEntryPoint,showCollectionEntryPoint:k.showCollectionEntryPoint,showCarouselEntryPoint:k.showCarouselEntryPoint,showPhotoAlbumEntryPoint:k.showPhotoAlbumEntryPoint,showSlideshowEntryPoint:k.showSlideshowEntryPoint,showUploadPhotosButton:k.canUploadPhoto,slideshowConfig:k.slideshowConfig,targetData:this.props.config.targetData})}else m=c("React").createElement(c("ReactComposerMediaAttachmentButtons.react"),{showUploadPhotosButton:k.canUploadPhoto,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,targetData:this.props.config.targetData});return l?this.$ReactComposerMediaAttachment2():c("React").createElement("div",null,c("React").createElement(c("ReactComposerDragDropPromptContainer.react"),{root:this,config:this.props.config}),m)};j.prototype.componentDidMount=function(){var k=c("ReactDOM").findDOMNode(this);this.$ReactComposerMediaAttachment1=k?k.clientWidth:0;var l=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").STATUS];if(l)c("ReactComposerStatusUtils").handleMarkdownPreview(this.context.composerID,this.context.targetID,l.markdownPreviewAttachment)};j.prototype.$ReactComposerMediaAttachment3=function(){return h&&this.context.composerType===c("ComposerEntryPointRef").TIMELINE&&this.props.config.targetData.viewerIsTarget?h:this.props.postButtonModule};j.prototype.$ReactComposerMediaAttachment2=function(){__p&&__p();var k=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],l=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").STATUS],m=this.context.gks&&this.context.gks.isSproutsComposer,n=void 0;if(this.props.shouldShowPreview){var o=k.ComposerAttachmentPreviewContainer,p=c("React").createElement(o,null);if(this.props.shouldShowCanvasSelector){var q=k.canvasConfig.TypeaheadContainer;n=c("React").createElement("div",null,p,c("React").createElement(q,{config:k.canvasConfig}))}else n=p}else if(this.props.shouldShowCarouselURLInputArea){var r=k.carouselConfig.PhotoCarouselUtils;n=r.getPhotoCarouselMediaContent(k.carouselConfig,this.props.config.nuxConfig)}else if(this.props.shouldShowCanvasSelector){var s=k.canvasConfig,t=s.TypeaheadContainer;n=c("React").createElement(t,{config:s})}else if(this.props.isSlideshowSelected){var u=k.slideshowConfig.thumbnailViewContainer;n=c("React").createElement(u,{maxSelectedImages:k.slideshowConfig.maxPhotoNum,mediaAcceptParam:this.props.config.mediaAcceptParam&&this.props.config.mediaAcceptParam.photos,pageID:k.slideshowConfig.pageID,onFilesSelected:this.props.onFilesSelected})}else if(this.props.isCollectionSelected){var v=k.collectionConfig.previewContainer;n=c("React").createElement(v,{config:k.collectionConfig})}else if(this.props.video)n=c("React").createElement("div",null,c("React").createElement(c("ReactComposerVideoUploadPlaceholderContainer.react"),null),c("React").createElement(c("ReactComposerVideoUploadProgressBar.react"),{progressBar:this.props.videoProgressBar}));else if(this.props.customizedPreviewMediaContent)n=this.props.customizedPreviewMediaContent;else n=c("React").createElement(c("ReactComposerMediaUploadsGridContainer.react"),{enableFaceboxTagger:!k.disableFaceboxTagger,productTaggerType:k.productTaggerType,disablePhotoEditing:k.disablePhotoEditing,disableRemovePhotos:this.props.prefillConfig?this.props.prefillConfig.disableRemovePhotos:false,mediaConfig:k,mediaAcceptParam:this.props.config.mediaAcceptParam&&this.props.config.mediaAcceptParam.both,nuxConfig:this.props.config.nuxConfig,onFilesSelected:this.props.onFilesSelected,canUploadMultiplePhotos:this.props.config.targetData.targetSupportsMultiplePhotos,uploads:this.props.uploads});var w=this.props.sproutsDisplayState===c("ReactComposerSproutsDisplayState").INLINE,x=null,y=this.props.shouldShowCollageUploadLayout&&!w&&this.props.uploads.size<=5&&this.props.uploads.size>0?c("React").createElement(c("ReactComposerCollageContainer.react"),{containerWidth:this.$ReactComposerMediaAttachment1,scaleFactor:this.props.collageScaleFactor,mediaUploads:this.props.uploads,enableFaceboxTagger:!k.disableFaceboxTagger,enablePhotoEditing:!k.disablePhotoEditing,productTaggerType:k.productTaggerType}):null;if(y)x=c("React").createElement(c("ReactComposerCollagePlusButton.react"),{enableFaceboxTagger:this.props.enableFaceboxTagger,composerConfig:this.props.config});if(y||w)n=null;var z=c("React").createElement(c("ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react"),{config:this.props.config,handlePastedText:this.props.handlePastedText,onFocus:this.props.onMentionsInputFocus,onChange:this.props.onMentionsInputChange,onPasteFiles:k.disableUploadOnDragDropAndPaste?null:this.props.onPasteFiles,placeholder:this.$ReactComposerMediaAttachment4(),className:y?"_5b2v":""}),A=l.multilingualStatus,B=l.multilingualStatus?c("React").createElement(A,null):null,C=c("React").createElement("div",null,z,B);if(l.showProfilePic)C=c("React").createElement(c("ReactComposerProfilePhotoBlock.react"),{profilePhotoBadge:l.customProfilePhoto,profilePicSrc:l.profilePicSrc,profileURI:l.profileURI},C);var D=l?l.markdownPreviewAttachment:null,E=null;if(D){var F=D.container;E=c("React").createElement(F,{prettify:D.prettify,isMarkdownForInternalEmployee:D.isMarkdownForInternalEmployee})}var G=l.donateButtonConfig,H=null;if(G){var I=G.donateButtonContainer;H=c("React").createElement(I,{charityName:G.charityName,fundraiserCampaignId:G.fundraiserCampaignId})}var J=null;if(l.topicFeedsTagger){var K=l.topicFeedsTagger,L=K.container;J=c("React").createElement(L,{composerFeedID:K.composerFeedID,photoAutoTaggingDelay:K.photoAutoTaggingDelay,photoPollingDuration:K.photoPollingDuration,photoPollingInterval:K.photoPollingInterval,showNux:K.showNux,textAutoTaggingDelay:K.textAutoTaggingDelay,darkLaunch:K.darkLaunch})}var M=null;if(l.groupPostTagsTagger){var N=l.groupPostTagsTagger,O=N.container;M=c("React").createElement(O,{tagsLimit:N.tagsLimit,groupID:N.groupID})}var P=!this.props.shouldShowCarouselURLInputArea&&!this.props.isSlideshowSelected,Q=c("MNPageComposerUtils").shouldShowMessagingButton(this.props.photoUploadsCount,this.props.videoUploadsCount,this.props.isSlideshowSelected,this.props.isCanvasSelected,this.props.isCollectionSelected,this.props.isPhotoCarouselSelected,this.props.shouldShowMessagingCTA),R=null,S=l.aymtTipConfig;if(S&&S.isEligible)R=c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("ReactComposerAYMTTip.react").__setRef("ReactComposerMediaAttachment.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{pageID:S.pageID,minLength:S.minContentLength})});var T=null;if(this.props.config.instagramCrossPostingEnabled&&this.props.uploads.size==1&&!this.props.videoUploadsCount)T=c("React").createElement(c("ReactComposerCrossPostToInstagramRow.react"),{composerID:this.context.composerID});var U=null;if(i)U=c("React").createElement(i,null);var V=null;if(this.props.isOfferLikePost&&l&&l.offerLikePostUpsellInlineBanner){var W=[];for(var X=0;X<this.props.uploads.size;X++){var Y=this.props.uploads.get(X).photoID;if(Y)W.push(Y)}var Z=l.offerLikePostUpsellInlineBanner;V=c("React").createElement(Z,{actorID:this.context.actorID,composerID:this.context.composerID,pageID:l.pageID,photoIDs:W,text:this.props.offerLikePostText||""})}var $=k.disableUploadOnDragDropAndPaste?null:c("React").createElement(c("ReactComposerDragDropPromptContainer.react"),{root:this,config:this.props.config});return c("React").createElement("div",{className:"_2_lq","data-testid":"media-attachment"},$,this.$ReactComposerMediaAttachment5(),c("React").createElement("div",{className:"_4wbt"},c("React").createElement("div",{className:(this.props.shouldScrollComposerContent&&m?"_1w_g":"")+(y?" _3zko":"")},C,this.props.children,E,H,U,c("React").createElement(c("ReactComposerTaggerSummaryContainer.react"),null),n,y),x),J,M,R,T,V,c("React").createElement(c("ReactComposerStatusFooterContainer.react"),{additionalTaggers:this.props.additionalTaggers,additionalFooterActions:this.props.additionalFooterActions,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,config:this.props.config,isCameraIconEnabled:P,isMessagingButtonEnabled:Q,locationTaggerPlaceholder:this.$ReactComposerMediaAttachment6(),mediaAcceptParam:this.props.config.mediaAcceptParam,peopleTaggerPlaceholder:this.$ReactComposerMediaAttachment7(),postButtonLabel:this.props.postButtonLabel?this.props.postButtonLabel:undefined,postButtonModule:this.$ReactComposerMediaAttachment3(),taggersConfig:this.props.taggersConfig?this.props.taggersConfig:this.props.config.taggersConfig,targetData:this.props.targetData||this.props.config.targetData}))};j.prototype.$ReactComposerMediaAttachment6=function(){if(this.props.video)return e._("Where was this taken?");if(this.props.uploads.size>1)return e._("Where were these photos taken?");if(this.props.uploads.size===1)return e._("Where was this photo taken?");return null};j.prototype.$ReactComposerMediaAttachment7=function(){if(!!this.props.video||this.props.uploads.size>0)return e._("Who were you with?");return null};j.prototype.$ReactComposerMediaAttachment4=function(){__p&&__p();if(this.props.placeholder)return this.props.placeholder;var k=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA];if(this.props.video||this.props.uploads.size===1&&this.props.videoUploadsCount===1)return e._("Say something about this video...");else if(this.props.isSlideshowSelected)return e._("Say something about this slideshow...");else if(this.props.uploads.size>1)if(this.props.photoUploadsCount===0)return e._("Say something about these videos...");else if(this.props.videoUploadsCount===0)if(this.props.sphericalPhotoUploadsCount===this.props.photoUploadsCount)return e._("Say something about these 360 photos...");else return e._("Say something about these photos...");else return e._("Say something about these media...");else if(this.props.shouldShowCarouselURLInputArea||this.props.shouldShowPreview){var l=k.carouselConfig.PhotoCarouselUtils;return l.getInputPlaceHolder(k.carouselConfig,this.props.shouldShowPreview)}else if(this.props.sphericalPhotoUploadsCount)return e._("Say something about this 360 photo...");else return e._("Say something about this photo...")};j.prototype.$ReactComposerMediaAttachment5=function(){var k=this.context.gks&&this.context.gks.topPostButton,l=this.context.gks&&this.context.gks.isSproutsComposer;if(!(k&&l))return null;return c("React").createElement("div",{className:"_4y7p"},this.$ReactComposerMediaAttachment8())};j.prototype.$ReactComposerMediaAttachment8=function(){var k=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],l=k.footerBackground?k.footerBackground:this.props.config.showExpandedComposer?"white":"light-wash",m=c("React").createElement(c("ReactComposerFooterContainer.react"),{background:l},c("React").createElement("div",{className:"clearfix"},c("React").createElement("div",{className:"rfloat"},this.$ReactComposerMediaAttachment9())));return m};j.prototype.$ReactComposerMediaAttachment9=function(){var k=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").STATUS],l=this.props.config.audienceXHP?c("React").createElement(c("ReactComposerAudienceSelectorContainer.react"),{audienceXHP:this.props.config.audienceXHP,viewerIsTarget:this.props.config.targetData.viewerIsTarget}):null,m=this.props.postButtonModule||c("ReactComposerPostButtonContainer.react"),n=c("React").createElement(m,{config:this.props.config});return c("React").createElement(c("ReactComposerFooterActions.react"),null,this.props.additionalFooterActions,l,n)};j.defaultProps={collageScaleFactor:1};j.contextTypes=c("ReactComposerContextTypes");d.exports=j}),null);
__d("ReactComposerMediaAttachmentActions",["ReactComposerDispatcher","ReactComposerMediaAttachmentActionType","ReactComposerMediaAttachmentStore"],(function a(b,c,d,e,f,g){__p&&__p();c("ReactComposerMediaAttachmentStore");h.prototype.setConfig=function(i,j){"use strict";var k={composerID:i,type:c("ReactComposerMediaAttachmentActionType").SET_MEDIA_CONFIG,config:j};c("ReactComposerDispatcher").dispatch(k)};h.prototype.createAlbumSelectorClicked=function(i){"use strict";c("ReactComposerDispatcher").dispatch({composerID:i,type:c("ReactComposerMediaAttachmentActionType").CREATE_ALBUM_SELECTOR_CLICKED})};function h(){"use strict"}f.exports=new h()}),null);
__d("ReactComposerCanvasActionType",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({HIDE_CANVAS_SELECTOR:null,SHOW_CANVAS_SELECTOR:null},"ReactComposerCanvasActionType")}),null);
__d("ReactComposerCanvasStore",["ReactComposerCanvasActionType","ReactComposerStoreBase"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerStoreBase"));i=h&&h.prototype;function j(){"use strict";__p&&__p();var k=void 0;i.constructor.call(this,function(){return{shouldShowCanvasSelector:false,isCanvasSelected:false}},function(l){switch(l.type){case c("ReactComposerCanvasActionType").SHOW_CANVAS_SELECTOR:k&&k.$ReactComposerCanvasStore1(l);break;case c("ReactComposerCanvasActionType").HIDE_CANVAS_SELECTOR:k&&k.$ReactComposerCanvasStore2(l);break;default:break}});k=this}j.prototype.$ReactComposerCanvasStore1=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.shouldShowCanvasSelector=true;m.isCanvasSelected=true;this.emitChange(l)};j.prototype.$ReactComposerCanvasStore2=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.shouldShowCanvasSelector=false;m.isCanvasSelected=false;this.emitChange(l)};j.prototype.shouldShowCanvasSelector=function(k){"use strict";return this.getComposerData(k).shouldShowCanvasSelector};j.prototype.isCanvasSelected=function(k){"use strict";return this.getComposerData(k).isCanvasSelected};f.exports=new j()}),null);
__d("ReactComposerCollectionActionType",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({ATTACHMENT_SELECT_COLLECTION:null,ATTACHMENT_CANCEL_COLLECTION:null,SET_COLLECTION:null,SET_DEFAULT_CANVAS_AND_TEMPLATE_ID:null,SET_POST_TITLE:null,SET_PRODUCT_SET_ID:null,SET_FEATURED_PRODUCT_IDS:null,SHOW_FEATURED_PRODUCT_DIALOG:null,HIDE_FEATURED_PRODUCT_DIALOG:null,UPDATE_COLLECTION_DIALOG_VISIBILITY:null},"ReactComposerCollectionActionType")}),null);
__d("XReactComposerCollectionAttachmentBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/react_composer/collection/bootstrap/",{composer_id:{type:"String",required:true},canvas_id:{type:"FBID",required:true},target_id:{type:"FBID",required:true}})}),null);
__d("XReactComposerCollectionAttachmentPublishController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/react_composer/collection/publish/",{canvas_id:{type:"FBID",required:true},featured_retailer_ids:{type:"StringSet",required:true}})}),null);
__d("ReactComposerCollectionStore",["Bootloader","ActorURI","AsyncRequest","ReactComposerActionTypes","ReactComposerCollectionActionType","ReactComposerStoreBase","XReactComposerCollectionAttachmentBootstrapController","XReactComposerCollectionAttachmentPublishController","AdsCollectionsConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("AdsCollectionsConstants").EMPTY_COLLECTIONS_RETAIL_ID;h=babelHelpers.inherits(k,c("ReactComposerStoreBase"));i=h&&h.prototype;function k(){__p&&__p();var l=void 0;i.constructor.call(this,function(){return{actorID:null,attachmentConfig:{},canvasID:null,defaultCanvasID:null,featuredRetailerIDs:j,featuredRetailerImages:[],heroImage:null,heroVideo:null,isCollectionSelected:false,isLoading:false,itemIDs:[],itemImages:[],productCatalogVertical:null,productSetID:null,templateID:null}},function(m){__p&&__p();switch(m.type){case c("ReactComposerCollectionActionType").ATTACHMENT_SELECT_COLLECTION:l&&l.$ReactComposerCollectionStore1(m);break;case c("ReactComposerCollectionActionType").ATTACHMENT_CANCEL_COLLECTION:l&&l.$ReactComposerCollectionStore2(m);break;case c("ReactComposerCollectionActionType").SET_COLLECTION:l&&l.$ReactComposerCollectionStore3(m);break;case c("ReactComposerCollectionActionType").SET_POST_TITLE:l&&l.$ReactComposerCollectionStore4(m);break;case c("ReactComposerCollectionActionType").SET_PRODUCT_SET_ID:l&&l.$ReactComposerCollectionStore5(m);break;case c("ReactComposerCollectionActionType").SET_FEATURED_PRODUCT_IDS:l&&l.$ReactComposerCollectionStore6(m);break;case c("ReactComposerCollectionActionType").SHOW_FEATURED_PRODUCT_DIALOG:l&&l.$ReactComposerCollectionStore7(m,true);break;case c("ReactComposerCollectionActionType").HIDE_FEATURED_PRODUCT_DIALOG:l&&l.$ReactComposerCollectionStore7(m,false);break;case c("ReactComposerCollectionActionType").UPDATE_COLLECTION_DIALOG_VISIBILITY:l&&l.$ReactComposerCollectionStore8(m);break;case c("ReactComposerCollectionActionType").SET_DEFAULT_CANVAS_AND_TEMPLATE_ID:l&&l.$ReactComposerCollectionStore9(m);break;case c("ReactComposerActionTypes").POST_STARTED:l&&l.$ReactComposerCollectionStore10(m);break;case c("ReactComposerActionTypes").PUBLISH_STARTED:l&&l.$ReactComposerCollectionStore11(m);break;default:break}});l=this}k.prototype.$ReactComposerCollectionStore12=function(l,m){__p&&__p();var n=this.getComposerData(l),o=Object.entries(m).filter(function(w){var u=w[0],v=w[1];return n[u]!==v});if(o.length){for(var p=o,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s,u=t[0],v=t[1];n[u]=v}this.emitChange(l)}};k.prototype.$ReactComposerCollectionStore2=function(l){var m=this.validateAction(l,"composerID");this.clearComposerData(m);this.emitChange(m)};k.prototype.$ReactComposerCollectionStore1=function(l){var m=this.validateAction(l,["actorID","composerID","canvasID","targetID"]),n=m[0],o=m[1],p=m[2],q=m[3],r=c("XReactComposerCollectionAttachmentBootstrapController").getURIBuilder().setString("composer_id",o).setFBID("canvas_id",p).setFBID("target_id",q).getURI();r=c("ActorURI").create(r,n);new(c("AsyncRequest"))(r).send();this.$ReactComposerCollectionStore12(o,{attachmentConfig:{},canvasID:p,isCollectionSelected:!!p,isLoading:true})};k.prototype.$ReactComposerCollectionStore10=function(l){var m=this.validateAction(l,["actorID","composerID"]),n=m[0],o=m[1],p=this.getComposerData(o);if(!p.isCollectionSelected)return;p.actorID=n};k.prototype.$ReactComposerCollectionStore11=function(l){var m=this.validateAction(l,"composerID"),n=this.getComposerData(m);if(!n.actorID)return;var o=c("XReactComposerCollectionAttachmentPublishController").getURIBuilder().setFBID("canvas_id",n.canvasID).setStringSet("featured_retailer_ids",n.featuredRetailerIDs).getURI();o=c("ActorURI").create(o,n.actorID);new(c("AsyncRequest"))(o).send();n.actorID=null;this.$ReactComposerCollectionStore8({composerID:m,isVisible:false,canvasID:null})};k.prototype.$ReactComposerCollectionStore3=function(l){var m=l.composerID,n=l.postTitle,o=babelHelpers.objectWithoutProperties(l,["composerID","postTitle"]),p=o.attachmentConfig.params;p.title=n;if(o.heroImage)p.images.push(o.heroImage);else if(o.heroVideo)p.video.push(o.heroVideo);o.isLoading=false;this.$ReactComposerCollectionStore12(m,o)};k.prototype.$ReactComposerCollectionStore4=function(l){var m=this.validateAction(l,["composerID","postTitle"]),n=m[0],o=m[1],p=this.getComposerData(n);p.attachmentConfig.params.title=o;this.emitChange(n)};k.prototype.$ReactComposerCollectionStore5=function(l){var m=this.validateAction(l,["composerID","productSetID","productCatalogVertical"]),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n);q.productSetID=o;q.productCatalogVertical=p;this.emitChange(n)};k.prototype.$ReactComposerCollectionStore7=function(l,m){var n=this.validateAction(l,"composerID"),o=this.getComposerData(n);o.shouldShowFeaturedProductDialog=m;this.emitChange(n)};k.prototype.$ReactComposerCollectionStore6=function(l){var m=this.validateAction(l,["composerID","featuredRetailerIDs","featuredRetailerImages"]),n=m[0],o=m[1],p=m[2],q=this.getComposerData(n);q.featuredRetailerIDs=o;q.featuredRetailerImages=p;this.emitChange(n)};k.prototype.$ReactComposerCollectionStore8=function(l){c("Bootloader").loadModules(["AdsCanvasInlineBuilderActions"],function(m){var n=this.validateAction(l,["composerID","isVisible"]),o=n[0],p=n[1],q=l.canvasID,r=this.getComposerData(o),s=r.defaultCanvasID,t=r.templateID;m.setShowInlineModal(p,q||s,t)}.bind(this),"ReactComposerCollectionStore")};k.prototype.$ReactComposerCollectionStore9=function(l){var m=this.validateAction(l,["composerID","defaultCanvasID","templateID"]),n=m[0],o=m[1],p=m[2];this.$ReactComposerCollectionStore12(n,{defaultCanvasID:o,templateID:p})};k.prototype.shouldShowFeaturedProductDialog=function(l){return this.getComposerData(l).shouldShowFeaturedProductDialog};k.prototype.isCollectionSelected=function(l){return this.getComposerData(l).isCollectionSelected};k.prototype.isLoading=function(l){return this.getComposerData(l).isLoading};k.prototype.getAttachmentConfig=function(l){var m=this.getComposerData(l),n=m.attachmentConfig;return n.params?n:null};k.prototype.getCanvasID=function(l){return this.getComposerData(l).canvasID};k.prototype.getHeroImage=function(l){return this.getComposerData(l).heroImage};k.prototype.getHeroVideo=function(l){return this.getComposerData(l).heroVideo};k.prototype.getItemImages=function(l){var m=this.getComposerData(l),n=m.featuredRetailerIDs,o=m.featuredRetailerImages,p=m.itemIDs,q=m.itemImages,r=n.reduce(function(t,u){t[u]=true;return t},{}),s=q.filter(function(t,u){return!r[p[u]]});return o.concat(s).slice(0,4)};k.prototype.getPostTitle=function(l){var m=this.getComposerData(l),n=m.attachmentConfig.params;return n?n.title:""};k.prototype.getProductCatalogVertical=function(l){return this.getComposerData(l).productCatalogVertical};k.prototype.getProductSetID=function(l){return this.getComposerData(l).productSetID};f.exports=new k()}),null);
__d("CarouselPagesComposerSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CAROUSEL_CAMERA_ICON:"carousel_camera_icon"})}),null);
__d("ReactComposerPhotoCarouselActionType",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({SELECT_PHOTO_CAROUSEL:null,UNSELECT_PHOTO_CAROUSEL:null,PREVIEW_COMPLETED:null,PREVIEW_INCOMPLETED:null,HIDE_CAROUSEL_URL_INPUT_AREA:null,SHOW_CAROUSEL_URL_INPUT_AREA:null,SEEN_NUX:null},"ReactComposerPhotoCarouselActionType")}),null);
__d("ReactComposerPhotoCarouselStore",["CarouselPagesComposerSource","PagesComposerActionsLogger","PagesComposerPostActionsLoggerEvent","ReactComposerAttachmentActionType","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerPhotoCarouselActionType","ReactComposerScrapedAttachmentActionType","ReactComposerStoreBase"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerStoreBase"));i=h&&h.prototype;function j(){"use strict";__p&&__p();var k=void 0;i.constructor.call(this,function(){return{isPhotoCarouselSelected:false,isCarouselPreviewCompleted:true,shouldShowURLEditArea:false,seenNux:false}},function(l){__p&&__p();switch(l.type){case c("ReactComposerPhotoCarouselActionType").SELECT_PHOTO_CAROUSEL:k&&k.$ReactComposerPhotoCarouselStore1(l);break;case c("ReactComposerPhotoCarouselActionType").UNSELECT_PHOTO_CAROUSEL:k&&k.$ReactComposerPhotoCarouselStore2(l);break;case c("ReactComposerPhotoCarouselActionType").PREVIEW_COMPLETED:k&&k.$ReactComposerPhotoCarouselStore3(l);break;case c("ReactComposerPhotoCarouselActionType").PREVIEW_INCOMPLETED:k&&k.$ReactComposerPhotoCarouselStore4(l);break;case c("ReactComposerPhotoCarouselActionType").SHOW_CAROUSEL_URL_INPUT_AREA:k&&k.$ReactComposerPhotoCarouselStore5(l);break;case c("ReactComposerPhotoCarouselActionType").HIDE_CAROUSEL_URL_INPUT_AREA:k&&k.$ReactComposerPhotoCarouselStore6(l);break;case c("ReactComposerAttachmentActionType").SELECT_ATTACHMENT:k&&k.$ReactComposerPhotoCarouselStore7(l);break;case c("ReactComposerScrapedAttachmentActionType").ATTACHMENT_SCRAPED:k&&k.$ReactComposerPhotoCarouselStore6(l);break;case c("ReactComposerPhotoCarouselActionType").SEEN_NUX:k&&k.$ReactComposerPhotoCarouselStore8(l);break;default:}});k=this}j.prototype.$ReactComposerPhotoCarouselStore1=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.isPhotoCarouselSelected=true;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore2=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.isPhotoCarouselSelected=false;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore3=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.isCarouselPreviewCompleted=true;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore4=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.isCarouselPreviewCompleted=false;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore5=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.shouldShowURLEditArea=true;var n=k.source;if(n===c("CarouselPagesComposerSource").CAROUSEL_CAMERA_ICON)c("PagesComposerActionsLogger").log({event:c("PagesComposerPostActionsLoggerEvent").CLICK_CAROUSEL_CAMERA_ICON,target_id:k.targetID});this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore6=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.shouldShowURLEditArea=false;this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore7=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l),n=c("ReactComposerAttachmentStore").getSelectedAttachmentID(l);if(m.shouldShowURLEditArea&&n!==c("ReactComposerAttachmentType").MEDIA)m.shouldShowURLEditArea=false;if(m.isPhotoCarouselSelected&&n!==c("ReactComposerAttachmentType").MEDIA){m.isPhotoCarouselSelected=false;m.isCarouselPreviewCompleted=false}this.emitChange(l)};j.prototype.$ReactComposerPhotoCarouselStore8=function(k){"use strict";var l=k.composerID,m=this.getComposerData(l);m.seenNux=true;this.emitChange(l)};j.prototype.shouldShowURLEditArea=function(k){"use strict";return this.getComposerData(k).shouldShowURLEditArea};j.prototype.seenNux=function(k){"use strict";return this.getComposerData(k).seenNux};j.prototype.isPhotoCarouselSelected=function(k){"use strict";return this.getComposerData(k).isPhotoCarouselSelected};j.prototype.isCarouselPreviewCompleted=function(k){"use strict";return this.getComposerData(k).isCarouselPreviewCompleted};f.exports=new j()}),null);
__d("ReactComposerVideoUploader",["invariant","Arbiter","ComposerEntryPointRef","DOM","DOMClone","ErrorDialog","QE","React","ReactComposerActions","ReactComposerPostUtilsCore","ReactComposerVideoUploadActions","ReactComposerVideoUploadStore","ReactDOM","Run","SubscriptionsHandler","UserAgent","VideoUploadFile","VideoUploadProcessingDialog.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b.URL||b.webkitURL||{};function j(k){__p&&__p();this.$ReactComposerVideoUploader3=k;this.$ReactComposerVideoUploader2=new(c("SubscriptionsHandler"))();this.$ReactComposerVideoUploader3.composerID||h(0);this.$ReactComposerVideoUploader3.container||h(0);this.$ReactComposerVideoUploader3.progressBarInstance||h(0);this.$ReactComposerVideoUploader3.uploader||h(0);this.$ReactComposerVideoUploader5=k.uploader;this.$ReactComposerVideoUploader1=k.composerID;this.$ReactComposerVideoUploader2.addSubscriptions(this.$ReactComposerVideoUploader5.subscribe("post-failed",this.$ReactComposerVideoUploader6.bind(this)),this.$ReactComposerVideoUploader5.subscribe("post-finished",this.$ReactComposerVideoUploader7.bind(this)),this.$ReactComposerVideoUploader5.subscribe("upload-failed",this.$ReactComposerVideoUploader8.bind(this)),this.$ReactComposerVideoUploader5.subscribe("upload-finished",this.$ReactComposerVideoUploader9.bind(this)));c("Run").onLeave(function(){return this.$ReactComposerVideoUploader5.abandon()}.bind(this));c("Run").onUnload(function(){return this.$ReactComposerVideoUploader5.abandon()}.bind(this))}j.prototype.upload=function(k,l){this.$ReactComposerVideoUploader4=l;var m=c("VideoUploadFile").fromFileInput(k);this.$ReactComposerVideoUploader5.upload(m)};j.prototype.uploadFromFile=function(k,l){var m=k.getFile();if(m&&i.createObjectURL)l.fileURL=i.createObjectURL(m);this.$ReactComposerVideoUploader4=l;this.$ReactComposerVideoUploader5.upload(k)};j.prototype.destroy=function(){this.$ReactComposerVideoUploader2.release()};j.prototype.$ReactComposerVideoUploader10=function(k){if(k)c("ErrorDialog").show(k.error_summary,k.error_description);this.$ReactComposerVideoUploader3.progressBarInstance.reset();this.$ReactComposerVideoUploader5.abandon();c("ReactComposerActions").postError(this.$ReactComposerVideoUploader1,null)};j.prototype.$ReactComposerVideoUploader6=function(k,l){this.$ReactComposerVideoUploader10(l)};j.prototype.$ReactComposerVideoUploader7=function(k,l){c("ReactComposerPostUtilsCore").handlePostSucceeded(this.$ReactComposerVideoUploader1);if(this.$ReactComposerVideoUploader3.composerEntryPointRef===c("ComposerEntryPointRef").TIMELINE)c("QE").logExposure("www_optimistic_video_post");if(this.$ReactComposerVideoUploader3.shouldShowOptimisticVideoPost&&this.$ReactComposerVideoUploader3.composerEntryPointRef===c("ComposerEntryPointRef").TIMELINE)c("Arbiter").inform("videoUpload/complete",{videoID:l.video_id,isToUserProfile:true,videoFileURL:l.fileURL});else c("ReactDOM").render(c("React").createElement(c("VideoUploadProcessingDialog.react"),{videoID:l.video_id,show:true}),this.$ReactComposerVideoUploader3.container);this.$ReactComposerVideoUploader3.onPostSuccess&&this.$ReactComposerVideoUploader3.onPostSuccess()};j.prototype.$ReactComposerVideoUploader8=function(k,l){this.$ReactComposerVideoUploader10(l);var m=c("ReactComposerVideoUploadStore").getVideo(this.$ReactComposerVideoUploader1);if(c("UserAgent").isBrowser("IE")){var n=c("DOMClone").deepClone(m.input);c("DOM").replace(m.input,n)}else m.input.value="";c("ReactComposerVideoUploadActions").remove(this.$ReactComposerVideoUploader1)};j.prototype.$ReactComposerVideoUploader9=function(){this.$ReactComposerVideoUploader5.post(this.$ReactComposerVideoUploader4);this.$ReactComposerVideoUploader3.onUploadSuccess&&this.$ReactComposerVideoUploader3.onUploadSuccess()};f.exports=j}),null);
__d("ReactComposerMediaAttachmentContainer.react",["invariant","PUWMethods","React","Bootloader","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerCanvasStore","ReactComposerCollectionStore","ComposerEntryPointRef","ReactComposerLoggingName","ReactComposerMediaAttachment.react","ReactComposerMediaAttachmentStore","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUploadType","ReactComposerMediaUtils","ReactComposerPhotoCarouselStore","ReactComposerPhotoUploader","ReactComposerScrapedAttachmentStore","ReactComposerSlideshowActions","ReactComposerSlideshowStore","ReactComposerStatusStore","ReactComposerStatusUtils","ReactComposerStore","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerVideoUploadActions","ReactComposerVideoUploader","ReactComposerVideoUploadStore","FluxContainer","QE2Logger","ReactDOM","SubscriptionsHandler","URLScraper","getByPath","ifRequired","ReactComposerContextTypes"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l;"use strict";(l=j.constructor).call.apply(l,[this].concat(Array.prototype.slice.call(arguments)));this.$ComposerMediaAttachmentContainer1=function(event,m){var n=c("ReactComposerMediaUtils").handleSpecialMediaUpload(event,m,this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],this.context);if(n)return;var o=event.target?event.target:m.getInput();this.$ComposerMediaAttachmentContainer2||h(0);c("ReactComposerMediaUtils").uploadPhotosOrVideoFromTarget(this.context.composerID,o,this.$ComposerMediaAttachmentContainer2,this.props.config.targetData.targetSupportsMultiplePhotos,this.props.config.targetData.targetSupportsMultiMedia)}.bind(this);this.$ComposerMediaAttachmentContainer8=function(){if(this.state.selectedTagger!==null&&this.state.selectedTagger!==c("ReactComposerTaggerType").PEOPLE)c("ReactComposerTaggerActions").selectTaggerWithoutAutofocus(this.context.composerID,c("ReactComposerLoggingName").MENTIONS_INPUT_FOCUS,c("ReactComposerTaggerType").PEOPLE)}.bind(this);this.$ComposerMediaAttachmentContainer9=function(m){c("ReactComposerStatusUtils").uploadPastedFile(this.context.composerID,m[0],this.$ComposerMediaAttachmentContainer2);c("ReactComposerMediaUploadActions").photosSelect(this.context.composerID,1,c("PUWMethods").COPYPASTE)}.bind(this);this.$ComposerMediaAttachmentContainer10=function(m,n,o){var p=this.context.composerID,q=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],r=c("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(p);if(q.carouselConfig&&r&&q.carouselConfig.ComposerPhotoCarouselPlaceHolder)c("ReactComposerStatusUtils").scrapeLink(p,this.context.targetID,m,this.context.composerType,this.context.actorID,c("ReactComposerLoggingName").LINK_PASTED);if(this.props.hasMessagingLink){var s=o?o.getCurrentContent().getPlainText():"",t=c("URLScraper").match(m)||s.concat(m);this.$ComposerMediaAttachmentContainer11(p,t)}return false}.bind(this);this.$ComposerMediaAttachmentContainer7=function(m){__p&&__p();var n=this.context.composerID,o=m.getCurrentContent().getPlainText();this.$ComposerMediaAttachmentContainer5(o);if(!c("URLScraper").trigger(o)){if(this.props.hasMessagingLink)this.$ComposerMediaAttachmentContainer11(n,o);var p=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],q=c("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(n);if(!p.carouselConfig||!q)return;if(p.carouselConfig.ComposerPhotoCarouselPlaceHolder)c("ReactComposerStatusUtils").scrapeLink(n,this.context.targetID,o,this.context.composerType,this.context.actorID,c("ReactComposerLoggingName").INLINE_COMPOSER)}}.bind(this);this.$ComposerMediaAttachmentContainer1=this.$ComposerMediaAttachmentContainer1.bind(this)}k.getStores=function(){"use strict";return[c("ReactComposerCanvasStore"),c("ReactComposerCollectionStore"),c("ReactComposerMediaAttachmentStore"),c("ReactComposerPhotoCarouselStore"),c("ReactComposerMediaUploadStore"),c("ReactComposerScrapedAttachmentStore"),c("ReactComposerSlideshowStore"),c("ReactComposerTaggerStore"),c("ReactComposerVideoUploadStore"),c("ReactComposerStore")]};k.calculateState=function(l,m,n){"use strict";var o=n.composerID,p=c("ReactComposerMediaUploadStore").getUploadsOfType(o,c("ReactComposerMediaUploadType").PHOTO),q=c("ReactComposerMediaUploadStore").getUploadsOfType(o,c("ReactComposerMediaUploadType").VIDEO),r=c("ReactComposerMediaUploadStore").getUploads(o),s=m.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA],t=p.filter(function(u){return u.isSpherical===true}).size;return{createAlbumLink:c("ReactComposerMediaAttachmentStore").getCreateAlbumLink(o),shouldShowCanvasSelector:c("ReactComposerCanvasStore").shouldShowCanvasSelector(o),shouldShowCarouselURLInputArea:c("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(o),shouldShowPreview:c("ReactComposerScrapedAttachmentStore").getMarkup(o)!==null,shouldShowCollageUploadLayout:s.shouldShowCollageUploadLayout,shouldShowMessagingCTA:s.shouldShowMessagingCTA,shouldScrollComposerContent:s.shouldScrollComposerContent,collageScaleFactor:s.collageScaleFactor,slideshowDialogOpen:c("ReactComposerSlideshowStore").shouldShowSlideshowDialog(o),isCanvasSelected:c("ReactComposerCanvasStore").isCanvasSelected(o),isCollectionSelected:c("ReactComposerCollectionStore").isCollectionSelected(o),isPhotoCarouselSelected:c("ReactComposerPhotoCarouselStore").isPhotoCarouselSelected(o),isSlideshowSelected:c("ReactComposerSlideshowStore").isSlideshowSelected(o),selectedTagger:c("ReactComposerTaggerStore").getSelectedTagger(o),uploads:r,isOfferLikePost:l?l.isOfferLikePost:false,offerLikePostText:l?l.offerLikePostText:null,photoUploadsCount:p.size,sphericalPhotoUploadsCount:t,videoUploadsCount:q.size,video:c("ReactComposerVideoUploadStore").getVideo(o),videoProgressBar:c("ReactComposerMediaAttachmentStore").getVideoProgressBar(o),videoProgressBarInstance:c("ReactComposerMediaAttachmentStore").getVideoProgressBarInstance(o),videoUploader:c("ReactComposerMediaAttachmentStore").getVideoUploader(o),sproutsDisplayState:c("ReactComposerStore").getSproutsDisplayState(o)}};k.prototype.componentWillMount=function(){"use strict";this.$ComposerMediaAttachmentContainer4=new(c("SubscriptionsHandler"))();var l=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA];this.$ComposerMediaAttachmentContainer2=new(c("ReactComposerPhotoUploader"))(this.context,l.photoLimit,{disableFaceRecognition:l.disableFaceboxTagger});var m=c("ReactComposerMediaUtils").subscribeToImageEdit(this.context.composerID,this.$ComposerMediaAttachmentContainer2);this.$ComposerMediaAttachmentContainer4.addSubscriptions(m)};k.prototype.componentDidMount=function(){"use strict";var l=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA];this.$ComposerMediaAttachmentContainer3=new(c("ReactComposerVideoUploader"))({composerID:this.context.composerID,container:c("ReactDOM").findDOMNode(this.refs.videoContainer),progressBarInstance:this.state.videoProgressBarInstance,uploader:this.state.videoUploader,shouldShowOptimisticVideoPost:l.shouldShowOptimisticVideoPost,composerEntryPointRef:this.context.composerType});c("ReactComposerVideoUploadActions").setUploader(this.context.composerID,this.$ComposerMediaAttachmentContainer3);var m=c("ReactComposerStatusStore").getMessageText(this.context.composerID);this.$ComposerMediaAttachmentContainer5(m)};k.prototype.componentWillUnmount=function(){"use strict";this.$ComposerMediaAttachmentContainer3&&this.$ComposerMediaAttachmentContainer3.destroy();this.$ComposerMediaAttachmentContainer4&&this.$ComposerMediaAttachmentContainer4.release()};k.prototype.componentWillUpdate=function(l,m){"use strict";m=m||{};var n=this.state.uploads.size>0||!!this.state.video,o=m.uploads.size>0||!!m.video,p=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA];if(p.returnToStatusIfNoUploads&&n&&!o&&!this.state.slideshowDialogOpen){c("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,c("ReactComposerAttachmentType").STATUS,true);if(c("ReactComposerSlideshowStore").isSlideshowSelected(this.context.composerID))c("ReactComposerSlideshowActions").hideSlideshowEditField(this.context.composerID)}};k.prototype.render=function(){"use strict";return c("React").createElement("div",null,c("React").createElement(c("ReactComposerMediaAttachment.react"),babelHelpers["extends"]({},this.props,{createAlbumLink:this.state.createAlbumLink,isCanvasSelected:this.$ComposerMediaAttachmentContainer6()?true:this.state.isCanvasSelected,isCollectionSelected:this.state.isCollectionSelected,isPhotoCarouselSelected:this.state.isPhotoCarouselSelected,isSlideshowSelected:this.state.isSlideshowSelected,shouldShowCanvasSelector:this.$ComposerMediaAttachmentContainer6()?true:this.state.shouldShowCanvasSelector,shouldShowCarouselURLInputArea:this.state.shouldShowCarouselURLInputArea,shouldShowCollageUploadLayout:this.state.shouldShowCollageUploadLayout,sproutsDisplayState:this.state.sproutsDisplayState,shouldScrollComposerContent:this.state.shouldScrollComposerContent,collageScaleFactor:this.state.collageScaleFactor,shouldShowPreview:this.state.shouldShowPreview,slideshowDialogOpen:this.state.slideshowDialogOpen,shouldShowMessagingCTA:this.state.shouldShowMessagingCTA,isOfferLikePost:this.state.isOfferLikePost,offerLikePostText:this.state.offerLikePostText,onFilesSelected:this.$ComposerMediaAttachmentContainer1,onMentionsInputChange:this.$ComposerMediaAttachmentContainer7,onMentionsInputFocus:this.$ComposerMediaAttachmentContainer8,onPasteFiles:this.$ComposerMediaAttachmentContainer9,handlePastedText:this.$ComposerMediaAttachmentContainer10,postButtonModule:this.props.postButtonModule,uploads:this.state.uploads,videoUploadsCount:this.state.videoUploadsCount,photoUploadsCount:this.state.photoUploadsCount,sphericalPhotoUploadsCount:this.state.sphericalPhotoUploadsCount,video:this.state.video,videoProgressBar:this.state.videoProgressBar})),c("React").createElement("div",{ref:"videoContainer"}))};k.prototype.$ComposerMediaAttachmentContainer6=function(){"use strict";var l=false;c("ifRequired")("ReactObjectiveFirstPagesComposerViewMode",function(m){l=this.props.viewMode===m.CREATE_CANVAS_VIEW}.bind(this));return l};k.prototype.$ComposerMediaAttachmentContainer11=function(l,m){"use strict";var n=this.props.config.taggersConfig,o=c("getByPath")(n,[c("ReactComposerTaggerType").MESSAGING,"canDefaultCTAMessagingLink"]);if(this.props.hasMessagingLink&&this.props.hasMessagingLink(m)&&!c("ReactComposerTaggerStore").hasMessagingCTA(l)){c("QE2Logger").logExposureForUser("composer_default_cta_messaging_link_in_text_universe");if(o)c("ReactComposerTaggerActions").selectTaggerWithoutLogging(l,c("ReactComposerTaggerType").MESSAGING)}};k.prototype.$ComposerMediaAttachmentContainer5=function(l){"use strict";__p&&__p();var m=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").STATUS];if(this.context.composerType===c("ComposerEntryPointRef").PAGES_FEED)c("Bootloader").loadModules(["SalesPromoUtils.react"],function(n){if(n.checkIsOLP(l)){var o=m.offerLikePostUpsell,p=o.indexOf("inline")!==-1;if(p)this.setState({isOfferLikePost:true,offerLikePostText:l});if(o==="none"||p)c("QE2Logger").logExposureForPage("orgoff_offer_creation",m.pageID)}else this.setState({offerLikePostText:l})}.bind(this),"ReactComposerMediaAttachmentContainer.react")};k.contextTypes=c("ReactComposerContextTypes");f.exports=c("FluxContainer").create(k,{withContext:true,withProps:true})}),null);
__d("ReactComposerMediaEagerAttachment.react",["React","ReactComposerAttachmentActions","ReactComposerAttachmentBodyMixin","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerMediaAttachmentActions","ReactComposerMediaAttachmentContainer.react","ReactComposerStatusActions","ReactComposerTaggerActions"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerMediaEagerAttachment",mixins:[c("ReactComposerAttachmentBodyMixin")()],propTypes:{config:c("ReactComposerConfig").isRequired,postButtonModule:h.func.isRequired},statics:{attachmentID:c("ReactComposerAttachmentType").MEDIA},componentWillMount:function j(){var k=this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA].bootstrapData;c("ReactComposerStatusActions").setMentionsSource(this.context.composerID,k.mentionsSource);c("ReactComposerMediaAttachmentActions").setConfig(this.context.composerID,k);c("ReactComposerAttachmentActions").setInitialized(this.context.composerID,c("ReactComposerAttachmentType").MEDIA)},componentDidMount:function j(){c("ReactComposerTaggerActions").updateTaggersSource(this.context.composerID,this.props.config.attachmentsConfig[c("ReactComposerAttachmentType").MEDIA].bootstrapData.taggersSource)},renderX:function j(){return c("React").createElement(c("ReactComposerMediaAttachmentContainer.react"),this.props)}});f.exports=i}),null);