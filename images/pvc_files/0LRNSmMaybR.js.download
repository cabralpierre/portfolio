if (self.CavalryLogger) { CavalryLogger.start_js(["fD\/dW"]); }

__d("runAfterScrollingStops",["Arbiter","Event","Run","debounceAcrossTransitions","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(s,t,u){__p&&__p();if(t&&k[t])return;if(!j){c("Arbiter").subscribe("page_transition",r);j=true}if(!i){s();return}t&&(k[t]=1);l.push(s);if(!u){if(n){c("Run").onLeave(r);n=false}m.push(l.length-1)}}var i,j,k={},l=[],m=[],n=true,o=500,p=c("debounceAcrossTransitions")(function(){i=false;var s=l;l=[];m=[];k={};for(var t=0,u=s.length;t<u;++t)s[t]()},o);function q(){i=true;p()}function r(){var s=m;m=[];n=true;for(var t=0,u=s.length;t<u;++t)l[s[t]]=c("emptyFunction")}c("Event").listen(window,"scroll",q);f.exports=h}),null);
__d("LitestandOffscreenController",["csx","cx","Arbiter","CSS","DOMQuery","Event","NavigationMessage","Run","Scroll","Style","SubscriptionsHandler","Vector","getFullScreenElement","getOrCreateDOMID","queryThenMutateDOM","runAfterScrollingStops","throttle"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=1,k=9,l=10,m={},n=false,o=void 0,p=void 0,q=void 0,r=void 0,s=[];function t(){o&&o.release();o=null;n=false}function u(){m={};s=[]}function v(){if(document.body&&c("CSS").matchesSelector(document.body,"._5vb_"))return l;return k}function w(){__p&&__p();r=r||c("Vector").getViewportDimensions().y;p=c("Vector").getScrollPosition().y;q=p+r;if(j){p-=r*j;q+=r*j}for(var E in m){var F=m[E];F.position=c("Vector").getElementPosition(F.element).y;if(!F.hidden)F.height=F.element.offsetHeight}}function x(){__p&&__p();var E=[],F=c("getFullScreenElement")();for(var G in m){var H=m[G],I=H.position||0,J=I+H.height<p,K=I>q;if(!F&&!H.hidden&&(J||K))y(H);else if(!J&&!K){H.pendingHide=false;var L=z(H);if(H.hidden){if(H.dirty&&I<p){E.push(G);if(L)c("CSS").addClass(L,"_49nu")}else c("Style").apply(H.element,{height:"",marginBottom:""});if(L)c("CSS").show(L);H.dirty=false;H.hidden=false}}}if(!E.length)return;var M=0;c("queryThenMutateDOM")(function(){for(var N=0,O=E.length;N<O;N++){var P=m[E[N]],Q=z(P);M+=P.height+c("Style").getFloat(P.element,"marginBottom");if(Q)M-=Q.offsetHeight}},function(){for(var N=0,O=E.length;N<O;N++){var P=m[E[N]],Q=z(P);if(Q)c("CSS").removeClass(Q,"_49nu");c("Style").apply(P.element,{height:"",marginBottom:""})}M&&c("Scroll").setTop(document.body,c("Scroll").getTop(document.body)-M)})}function y(E){if(!E.pendingHide){s.push(E);E.pendingHide=true}}function z(E){__p&&__p();if(E.wrapperElement)return E.wrapperElement;var F=E.element,G=F.firstElementChild;if(G instanceof HTMLElement)return E.wrapperElement=G;for(var H=0;H<F.childNodes.length;H++){var I=F.childNodes[H];if(I.tagName&&I instanceof HTMLElement)return E.wrapperElement=I}return null}function A(){__p&&__p();var E=v()+"px";for(var F=0;F<s.length;F++){var G=s[F];if(c("DOMQuery").scry(G.element,"div[data-fullscreen]").length)G.pendingHide=false;if(G&&G.element&&G.pendingHide&&!G.hidden){c("Style").apply(G.element,{height:(G.height||0)+"px",marginBottom:E});var H=z(G);if(H)c("CSS").hide(H);G.hidden=true;G.pendingHide=false}}s=[]}function B(){c("runAfterScrollingStops")(A,"LitestandOffscreenController/hide");c("queryThenMutateDOM")(w,x,"LitestandOffscreenController")}function C(){c("Run").onLeave(t);o=new(c("SubscriptionsHandler"))();o.addSubscriptions(c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,u),c("Event").listen(window,"scroll",c("throttle")(B)),c("Event").listen(window,"resize",c("throttle")(function(){r=null;B()})));n=true}var D={attachSubstream:function E(F){n||C();m[c("getOrCreateDOMID")(F)]={element:F}}};f.exports=D}),null);
__d("coalesce",[],(function a(b,c,d,e,f,g){function h(){for(var i=0;i<arguments.length;++i)if(arguments[i]!=null)return arguments[i];return null}f.exports=h}),null);
__d("OnVisible",["Arbiter","DOM","Event","Parent","Run","Vector","ViewportBounds","coalesce","queryThenMutateDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[],i=void 0,j=0,k=[],l=void 0,m=void 0,n=void 0,o=void 0,p=void 0;function q(){__p&&__p();h.forEach(function(w){w.remove()});if(m){m.remove();l.remove();i.unsubscribe();m=l=i=null}j=0;h.length=0}function r(){__p&&__p();if(!h.length){q();return}k.length=0;n=c("Vector").getScrollPosition().y;o=c("Vector").getViewportDimensions().y;p=c("ViewportBounds").getTop();var w=h.length;for(var x=0;x<w;++x){var y=h[x];if(isNaN(y.elementHeight))k.push(x);y.elementHeight=c("Vector").getElementDimensions(y.element).y;y.elementPos=c("Vector").getElementPosition(y.element);y.hidden=c("Parent").byClass(y.element,"hidden_elem");if(y.scrollArea){y.scrollAreaHeight=c("Vector").getElementDimensions(y.scrollArea).y;y.scrollAreaY=c("Vector").getElementPosition(y.scrollArea).y}}j=w}function s(){__p&&__p();for(var w=Math.min(h.length,j)-1;w>=0;--w){var x=h[w];if(!x.elementPos||x.removed){h.splice(w,1);continue}if(x.hidden)continue;var y=x.buffer,z=false,A=n+o+y,B=x.elementPos.y;if(A>B){var C=n+p-y,D=B+x.elementHeight;z=!x.strict||C<B&&A>D;if(z&&x.scrollArea){var E=x.scrollAreaY+x.scrollAreaHeight+y;z=B>=x.scrollAreaY-y&&B<E}}if(x.inverse?!z:z){x.remove();x.handler(k.indexOf(w)!==-1)}}}function t(){u();if(h.length)return;m=c("Event").listen(window,"scroll",u);l=c("Event").listen(window,"resize",u);i=c("Arbiter").subscribe("dom-scroll",u)}function u(){c("queryThenMutateDOM")(r,s,"OnVisible/positionCheck")}function v(w,x,y,z,A,B){__p&&__p();this.element=w;this.handler=x;this.strict=y;this.buffer=c("coalesce")(z,300);this.inverse=c("coalesce")(A,false);this.scrollArea=B||null;if(this.scrollArea)this.scrollAreaListener=this.$OnVisible1();if(h.length===0)c("Run").onLeave(q);t();h.push(this)}v.prototype.remove=function(){if(this.removed)return;this.removed=true;if(this.scrollAreaListener)this.scrollAreaListener.remove()};v.prototype.reset=function(){this.elementHeight=null;this.removed=false;if(this.scrollArea)this.scrollAreaListener=this.$OnVisible1();h.indexOf(this)===-1&&h.push(this);t()};v.prototype.setBuffer=function(w){this.buffer=w;u()};v.prototype.checkBuffer=function(){u()};v.prototype.getElement=function(){return this.element};v.prototype.$OnVisible1=function(){return c("Event").listen(c("DOM").find(this.scrollArea,".uiScrollableAreaWrap"),"scroll",this.checkBuffer)};Object.assign(v,{checkBuffer:u});f.exports=v}),null);
__d("LitestandStreamTailLoader",["Arbiter","AsyncResponse","Bootloader","CSS","DOM","Event","FunnelLogger","JSReliabilityFixesGatingConfig","ListestandStreamTailStoryPlaceholderVisbilityTracker","LitestandMessages","LitestandOffscreenController","LitestandStream","NavigationMessage","NewsFeedDedupeStoryController","OnVisible","Run","SubscriptionsHandler","ge","getElementPosition","getOrCreateDOMID","getUnboundedScrollPosition","getViewportDimensions","throttle"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="WWW_NEWSFEED_TAILLOAD_FUNNEL",i=null,j=null,k=null,l=3e4,m={"streamload.tail.commence":true,"streamload.tail.success":true,"streamload_error.tail":true,"streamload_error.tail.transport":true,"streamload.tail.retry":true,"streamload_error.tail.retry":true,"streamload_error.tail.final":true,"streamload.tail.retry.success":true,"streamload_timeout.tail":true};function n(t){__p&&__p();this.$LitestandStreamTailPager5=function(v){if(v.error)this.log("streamload_error.tail.final");else{this.log("streamload.tail.success");this.numTailLoads++}}.bind(this);this.$LitestandStreamTailPager1=function(v){this.$LitestandStreamTailPager6(v)}.bind(this);this.$LitestandStreamTailPager2=function(v){this.log("streamload_error.tail.transport");this.$LitestandStreamTailPager6(v)}.bind(this);this.streamConfig=babelHelpers["extends"]({bufferPixels:1e3,firstPagerScrollBuffer:100,maxTailRetries:2,checkIfPagerIsCloseOnAttach:false},t.streamConfig);this.pagerConfig=t.pagerConfig;this.storiesContainer=t.storiesContainer;this.pagerElement=t.pagerElement;this.cursor=t.cursor;this.previousCursors={};this.retryCounter=0;this.numTailLoads=0;var u=c("DOM").find(this.pagerElement,"a");c("Event").listen(u,"click",this.$LitestandStreamTailPager3.bind(this))}n.prototype.$LitestandStreamTailPager3=function(event){this.$LitestandStreamTailPager4();event.preventDefault()};n.prototype.log=function(t){if(m[t])c("FunnelLogger").appendActionWithTag(h,this.numTailLoads,t,"try_"+this.retryCounter);c("Bootloader").loadModules(["BanzaiODS"],function(u){u&&u.bumpEntityKey("feed_load",t)},"LitestandStreamTailLoader")};n.prototype.$LitestandStreamTailPager6=function(t){__p&&__p();delete this.previousCursors[this.cursor];c("Arbiter").inform(c("LitestandMessages").STREAM_LOAD_ERROR,t);this.log("streamload_error.tail");if(this.lastRequestWasRetry)this.log("streamload_error.tail.retry");if(this.retryCounter<this.streamConfig.maxTailRetries){this.retryCounter++;this.$LitestandStreamTailPager4(true);this.log("streamload.tail.retry");c("Arbiter").inform(c("LitestandMessages").STREAM_LOAD_RETRY);return}c("CSS").removeClass(this.pagerElement,"async_saving")};n.prototype.$LitestandStreamTailPager4=function(){__p&&__p();var t=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(!t){c("FunnelLogger").startFunnel(h,this.numTailLoads);c("FunnelLogger").addFunnelTag(h,this.numTailLoads,"LitestandStreamTailLoader")}this.log("streamload.tail.commence");this.detach();c("CSS").addClass(this.pagerElement,"async_saving");var u=c("DOM").scry(c("LitestandStream").getStreamRoot(),c("LitestandStream").getStoriesSelector()).map(function(w){return w.getAttribute("data-cursor")}).filter(function(w){return w}),v=this.cursor;if(!v&&u.length>0)v=u[u.length-1];if(this.previousCursors[v]){this.log("duplicate_cursor");c("Arbiter").inform(c("LitestandMessages").DUPLICATE_CURSOR_ERROR,v)}this.previousCursors[v]=v;this.lastRequestWasRetry=t;c("Bootloader").loadModules(["UIPagelet"],function(w){w.loadFromEndpoint("LitestandTailLoadPagelet",c("getOrCreateDOMID")(this.storiesContainer),{client_stories_count:u.length,cursor:v,feed_stream_id:c("LitestandStream").getFeedStreamID(),pager_config:this.pagerConfig,scroll_count:this.numTailLoads+1,story_id:c("LitestandStream").getStoryID()},{append:true,automatic:true,constHeight:true,crossPage:true,errorHandler:this.$LitestandStreamTailPager1,finallyHandler:this.$LitestandStreamTailPager5,transportErrorHandler:this.$LitestandStreamTailPager2,usePipe:true});c("Arbiter").inform(c("LitestandMessages").STORIES_REQUESTED)}.bind(this),"LitestandStreamTailLoader")};n.prototype.$LitestandStreamTailPager7=function(t){var u=c("getUnboundedScrollPosition")(window).y;return u>t};n.prototype.$LitestandStreamTailPager8=function(){this.detach();this.onVisibleListener=new(c("OnVisible"))(c("DOM").find(this.pagerElement,"a"),function(){this.$LitestandStreamTailPager4()}.bind(this),false,this.streamConfig.bufferPixels)};n.prototype.attach=function(){__p&&__p();var t,u=this,v=arguments.length<=0||arguments[0]===undefined?false:arguments[0];this.detach();var w=c("getElementPosition")(this.pagerElement),x=c("getViewportDimensions")();c("CSS").removeClass(this.pagerElement,"async_saving");if(w.y<x.height||this.streamConfig.checkIfPagerIsCloseOnAttach&&!this.numTailLoads&&w.y-this.streamConfig.bufferPixels<x.height){this.$LitestandStreamTailPager4();return}if(v){var t=function(){__p&&__p();var y=Math.min(u.streamConfig.firstPagerScrollBuffer,w.y-x.height);if(!u.$LitestandStreamTailPager7(y)){u.onScrollListener=c("Event").listen(window,"scroll",c("throttle")(function(){if(this.$LitestandStreamTailPager7(y))this.$LitestandStreamTailPager8()}.bind(u)));u.onResizeListener=c("Event").listen(window,"resize",c("throttle")(function(){var z=c("getViewportDimensions")();if(w.y<z.height+y)this.$LitestandStreamTailPager4()}.bind(u)));return{v:void 0}}}();if(typeof t==="object")return t.v}this.$LitestandStreamTailPager8()};n.prototype.detach=function(){this.onResizeListener&&this.onResizeListener.remove();this.onScrollListener&&this.onScrollListener.remove();this.onVisibleListener&&this.onVisibleListener.remove();this.onResizeListener=null;this.onScrollListener=null;this.onVisibleListener=null};n.prototype.remove=function(){this.detach();if(this.pagerElement)c("DOM").remove(this.pagerElement)};n.prototype.handleError=function(){this.$LitestandStreamTailPager6()};function o(){r();k&&k.release();k=null;j&&j.remove();j=null;c("Arbiter").inform(c("LitestandMessages").LEAVE_HOME)}function p(){if(c("JSReliabilityFixesGatingConfig").should_get_fix)j&&j.log("streamload_timeout.tail");else this.log()}function q(){r();i=setTimeout(p,l)}function r(){clearTimeout(i)}var s={createPager:function t(u){__p&&__p();j&&j.remove();var v=new n(u);v.attach(true);c("ListestandStreamTailStoryPlaceholderVisbilityTracker").setPlaceholderElement(v.pagerElement);j=v;if(!k){k=new(c("SubscriptionsHandler"))();k.addSubscriptions(c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,o),c("Arbiter").subscribe(c("LitestandMessages").STORIES_REQUESTED,q),c("Arbiter").subscribe([c("LitestandMessages").STORIES_INSERTED,c("LitestandMessages").STREAM_LOAD_ERROR],r));c("Run").onLeave(o)}},updatePager:function t(u){var v=c("LitestandStream").getStreamRoot();if(v)c("NewsFeedDedupeStoryController").dedupe(v,c("LitestandStream").getStoriesSelector());if(j&&u&&u.cursor){j.cursor=u.cursor;j.attach()}else this.log("update_tail_cursor_error")},removePager:function t(){j&&j.remove();j=null},moreStoriesInserted:function t(u){__p&&__p();c("Arbiter").inform(c("LitestandMessages").STORIES_INSERTED,{substream_id:u});var v=c("ge")(u);if(v){c("LitestandOffscreenController").attachSubstream(v);if(j&&j.lastRequestWasRetry){j.lastRequestWasRetry=false;j.retryCounter=0;this.log("streamload.tail.retry.success")}}},handleError:function t(){j&&j.handleError()}};f.exports=s}),null);