if (self.CavalryLogger) { CavalryLogger.start_js(["EYFav"]); }

__d("PhotoMultiPhotosThumb",["Event","Style"],(function a(b,c,d,e,f,g){__p&&__p();var h=1200,i={init:function j(k,l){__p&&__p();var m=null,n=0;function o(q){n=q;l.forEach(function(r,s){c("Style").set(r,"opacity",s===q?1:0)})}function p(){o((n+1)%l.length);m=setTimeout(p,h)}c("Event").listen(k,"mouseenter",function(){if(m)return;n=0;p()});c("Event").listen(k,"mouseleave",function(){o(0);window.clearTimeout(m);m=null})}};f.exports=i}),null);
__d("BulkTagLoader",["AsyncRequest","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();var h=false;function i(){}Object.assign(i,{loadForSet:function j(k){if(!h){h=true;new(c("AsyncRequest"))("/ajax/photos/sets/tags_fetch.php").setHandler(c("emptyFunction")).setData({set:k}).send()}},loadForAlbum:function j(k){if(!h){h=true;new(c("AsyncRequest"))("/ajax/photos/album/tags_fetch.php").setHandler(c("emptyFunction")).setData({fbid:k}).send()}},reset:function j(){h=false}});f.exports=i}),null);
__d("FlexGrid",["csx","DOM","URI","PageTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={removePhoto:function j(k){var l=c("DOM").scry(document.body,'._vor[data-fbid="'+k+'"]')[0];if(l){c("DOM").remove(l);var m=c("URI").getMostRecentURI(),n=m.getQueryData();n.needsRefresh="true";m.setQueryData(n);c("PageTransitions").go(m)}}};f.exports=i}),null);
__d("PhotoCurationControl",["csx","Event","Parent","Toggler"],(function a(b,c,d,e,f,g,h){var i={init:function j(k){var l=c("Parent").bySelector(k,"._vor, .fbPhotoStarGridElement");c("Event").listen(l,"mouseleave",function(){c("Toggler").hide()})}};f.exports=i}),null);
__d("PhotoInlineActions",["csx","cx","Arbiter","AsyncRequest","CSS","Event","Nectar","Parent"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j={init:function k(l,m,n,o,p,q,r,s,t,u){__p&&__p();var v=false;c("Arbiter").subscribe(["UFI/CommentAddedActive","UFI/CommentDeletedActive","UFI/LikeActive"],function(w,x){if(parseInt(l.getAttribute("data-fbid"),10)!==x)return;if(w==="UFI/LikeActive")c("CSS").toggleClass(l,"_53a");new(c("AsyncRequest"))().setURI("/ajax/photos/photo/refresh.php").setData({fbid:l.getAttribute("data-fbid")}).setRelativeTo(l).send()});c("Event").listen(l,"click",function(event){__p&&__p();var w=event.getTarget();if(v||!c("Parent").bySelector(w,"._53b"))return;event.prevent();c("CSS").toggleClass(l,"_53a");var x={};c("Nectar").addModuleData(x,l);v=new(c("AsyncRequest"))().setURI("/ajax/photos/photo/like.php").setData(babelHelpers["extends"]({fbid:l.getAttribute("data-fbid"),relatedid:m,hovercardendpoint:n,includecommentlink:o,hovercardposition:p,includeleadingseparator:q,dialogClass:r,fetchOnHover:s,includeSocialContext:t,tagURI:u},x)).setRelativeTo(l).setErrorHandler(function(){c("CSS").toggleClass(l,"_53a")}).setFinallyHandler(function(){v=false}).send()})}};f.exports=j}),null);
__d("StarGridLayout",["Vector","removeFromArray"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";Object.assign(this,i)}h.prototype.getShortestColumn=function(i){"use strict";return i[0]<=i[1]?0:1};h.prototype.getDangling=function(i){"use strict";var j=i.filter(function(k){return!this.isStarred(k)}.bind(this));if(j.length%2===1)return j[j.length-1];return null};h.prototype.mangleOrder=function(i){"use strict";__p&&__p();if(i.length<3||!(this.isFixed(i[0])&&this.isStarred(i[1])))return i;var j=this.nextNonStarred(i,2);if(!j)return i;var k=i.concat();c("removeFromArray")(k,j);k.splice(1,0,j);return k};h.prototype.layout=function(i){"use strict";__p&&__p();var j=[0,0],k=0,l=this.getDangling(i),m=[];i=this.mangleOrder(i);for(var n=0;n<i.length;++n){var o=this.getShortestColumn(j),p=i[n];if(this.isStarred(p)){this.renderStarred(this._grid,j,o,p);j[o]+=2;k=Math.max(k,o*2+2)}else{m.push(p);if(m.length===2||p===l){this.renderNonStarred(this._grid,j,o,m);k=Math.max(k,o*2+m.length);m=[];j[o]+=1}}}return new(c("Vector"))(k,Math.max.apply(null,j))};h.prototype.inNonStarredBlock=function(i,j,k,l){"use strict";return j===k[l]&&Math.floor(i/2)===l};h.prototype.inStarredBlock=function(i,j,k,l){"use strict";return(j===k[l]||j===k[l]+1)&&Math.floor(i/2)===l};h.prototype.nextNonStarred=function(i,j){"use strict";for(;j<i.length;++j)if(!this.isStarred(i[j]))return i[j];return null};h.prototype.layoutReorder=function(i,j,k,l){"use strict";__p&&__p();i=i.concat();k=Math.max(0,Math.min(3,k));l=Math.max(0,l);c("removeFromArray")(i,j);i.push(j);var m=[0,0],n=this.getDangling(i),o=false,p=[];for(var q=0;q<i.length;++q){var r=this.getShortestColumn(m),s=i[q];if(this.isStarred(s)){if(s===j)o=true;if(!o&&this.isStarred(j)&&this.inStarredBlock(k,l,m,r)&&this.inNonStarredBlock(k,l,m,r)){c("removeFromArray")(i,j);this.renderStarred(this._grid,m,r,j);m[r]+=2;r=this.getShortestColumn(m);o=true}if(!o&&!this.isStarred(j)&&this.inStarredBlock(k,l,m,r)&&this.inNonStarredBlock(k,l,m,r)){c("removeFromArray")(i,j);if(p.length===1)p.splice(k%2,0,j);else{var t=this.nextNonStarred(i,q);if(t){c("removeFromArray")(i,t);p.push(t);p.splice(k%2,0,j)}else p.push(j)}this.renderNonStarred(this._grid,m,r,p);p=[];m[r]+=1;n=this.getDangling(i.slice(q+1));r=this.getShortestColumn(m);o=true}if(!o&&this.inStarredBlock(k,l,m,r)&&!this.inNonStarredBlock(k,l,m,r)){c("removeFromArray")(i,j);var t=this.nextNonStarred(i,q);i.push(j);if(t){c("removeFromArray")(i,t);i.splice(q,0,t);q--;continue}l-=1;q--;continue}this.renderStarred(this._grid,m,r,s);m[r]+=2}else{p.push(s);if(p.length===2||s===n){if(!o&&!this.isStarred(j)&&this.inNonStarredBlock(k,l,m,r)){c("removeFromArray")(p,j);c("removeFromArray")(i,j);p.splice(k%2,0,j);if(p.length===3){c("removeFromArray")(i,p[2]);i.splice(q,0,p[2]);q=i.indexOf(p[2])-1;p.pop()}n=this.getDangling(i.slice(q+1));o=true}if(!o&&this.isStarred(j)&&this.inNonStarredBlock(k,l,m,r)){c("removeFromArray")(i,j);this.renderStarred(this._grid,m,r,j);m[r]+=2;r=this.getShortestColumn(m);o=true}this.renderNonStarred(this._grid,m,r,p);p=[];m[r]+=1}}}};h.prototype.getStoringLayout=function(i){"use strict";return new h({grid:this._grid,isStarred:this.isStarred,isFixed:this.isFixed,renderStarred:function j(k,l,m,n){i.push(n)},renderNonStarred:function j(k,l,m,n){i.push(n[0]);if(n.length>1)i.push(n[1])}})};h.prototype.reorder=function(i,j,k,l){"use strict";var m=[];this.getStoringLayout(m).layoutReorder(i,j,k,l);return m};h.prototype.canonicalize=function(i){"use strict";var j=[];this.getStoringLayout(j).layout(i);return j};f.exports=h}),null);
__d("StarGrid",["Arbiter","CSS","DataStore","DOM","Locale","Parent","Style","StarGridLayout","removeFromArray"],(function a(b,c,d,e,f,g){__p&&__p();var h={MARGIN:5,isStarred:function i(j){return c("CSS").hasClass(j,"fbPhotoStarGridStarred")},isFixed:function i(j){return c("CSS").hasClass(j,"fbPhotoStarGridFixed")},setPosition:function i(j,k,l){var m=c("Locale").isRTL()?"margin-right":"margin-left";c("Style").set(j,"position","absolute");c("Style").set(j,"margin-top",k+"px");c("Style").set(j,m,l+"px")},renderNonStarred:function i(j,k,l,m){for(var n=0;n<m.length;++n){var o=k[l]*h.getSize(j),p=(l*2+n)*h.getSize(j);h.setPosition(m[n],o,p)}},renderStarred:function i(j,k,l,m){var n=k[l]*h.getSize(j),o=l*2*h.getSize(j);h.setPosition(m,n,o)},mergeWithPreviousGrid:function i(j){var k=j.previousSibling;if(k&&c("CSS").hasClass(k,"fbStarGrid")){c("CSS").addClass(k,"fbStarGridAppendedTo");while(j.firstChild)k.appendChild(j.firstChild);c("DOM").remove(j);j=k}return j},addPhotos:function i(j){var k=c("DOM").scry(document.body,".fbStarGrid")[0];if(!k)return;c("DOM").prependContent(k,j);var l=this.getSize(k);this.mergeAndLayoutGrid(k,l)},removeFromGrid:function i(j){var k=c("Parent").byClass(j,"fbStarGrid"),l=h.getElements(k);c("removeFromArray")(l,j);c("DOM").remove(j);h.layoutGrid(k,l);c("Arbiter").inform("StarGrid/UPDATE",k)},removePhoto:function i(j){var k=c("DOM").scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+j+'"]')[0];if(k)this.removeFromGrid(k)},removeUntaggedPhoto:function i(j){var k=c("DOM").scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+j+'"][data-in-photos-of="1"]');if(k.length>0)this.removeFromGrid(k[0])},removePhotos:function i(j){__p&&__p();var k,l;for(var m=0;m<j.length;m++){var n=j[m],o=c("DOM").scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+n+'"]')[0];k=c("Parent").byClass(o,"fbStarGrid");l=h.getElements(k);c("removeFromArray")(l,o);c("DOM").remove(o)}h.layoutGrid(k,l);c("Arbiter").inform("StarGrid/UPDATE",k)},layoutGrid:function i(j,k){var l=new(c("StarGridLayout"))({_grid:j,isStarred:h.isStarred,isFixed:h.isFixed,renderNonStarred:h.renderNonStarred,renderStarred:h.renderStarred});h.setElements(j,k);var m=l.layout(k);c("Style").set(j,"width",m.x*h.getSize(j)+"px");c("Style").set(j,"height",m.y*h.getSize(j)+"px")},mergeAndLayoutGrid:function i(j,k){var l=c("DOM").scry(j,".fbPhotoStarGridElement"),m=h.mergeWithPreviousGrid(j),n=l;if(j!==m)n=h.getElements(m).concat(l);h.setElements(j,n);c("DataStore").set(j,"size",k);h.layoutGrid(m,n);c("Arbiter").subscribe("PhotosBulkEditablePhoto.MOVED",function(o,p){h.removePhoto(p)}.bind(this));c("Arbiter").inform("StarGrid/UPDATE",j)},getSize:function i(j){return c("DataStore").get(j,"size")}};Object.assign(h,{getElements:function i(j){var k=c("DataStore").get(j,"elements");if(!k){k=c("DOM").scry(j,"div.fbPhotoStarGridElement");h.setElements(j,k)}return k},setElements:function i(j,k){c("DataStore").set(j,"elements",k)}});f.exports=h}),null);
__d("TagSuggestionsDrawer",["AsyncRequest","PhotosAppSection"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i={init:function j(){if(h)return;h=true;c("PhotosAppSection").subscribe("toggle_drawer",i._onToggle)},_onToggle:function j(k,l){if(l.button_clicked=="show")i._notify(false);else i._notify(true)},_notify:function j(k){new(c("AsyncRequest"))("/ajax/medley/tag_suggestions_drawer.php").setData({is_closed:k}).send()}};f.exports=i}),null);