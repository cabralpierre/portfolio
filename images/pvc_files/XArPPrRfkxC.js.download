if (self.CavalryLogger) { CavalryLogger.start_js(["RiB1f"]); }

__d("CollectionsAddNewHub",["AsyncRequest","AsyncResponse","Event","Form","Keys","ProfileOverviewSection"],(function a(b,c,d,e,f,g){__p&&__p();var h={init:function i(j,k,l,m,n){c("ProfileOverviewSection").callWithSection(m,function(o){this.initImpl(j,k,l,m,n,o.getNode())}.bind(this))},initImpl:function i(j,k,l,m,n,o){__p&&__p();if(!j)return;var p=j.getCore();j.subscribe("select",function(r,s){if(!s.selected.type.match("addnew"))return;this.createHub(j,s.selected.orig_text||s.selected.text,k,l,m,n,o)}.bind(this));var q=j.getView();c("Event").listen(p.getElement(),"keydown",function(event){if(c("Event").getKeyCode(event)==c("Keys").RETURN&&!q.getSelection()){this.createHub(j,p.getValue(),k,l,m,n,o);event.kill()}}.bind(this))},createHub:function i(j,k,l,m,n,o,p){var q=j.getCore();q.setEnabled(false);var r=function r(){q.reset();q.getElement().blur();q.setEnabled(true)},s=babelHelpers["extends"]({title:k,type:l,root_id:p.id,results:j.getData().buildQueryResults(k)},c("Form").serialize(o));new(c("AsyncRequest"))(m).setData(s).setHandler(r).setErrorHandler(function(t){r();c("AsyncResponse").defaultErrorHandler(t)}).send()}};f.exports=h}),null);
__d("TimelineCollectionUnlikeHandler",["Arbiter","AsyncRequest","CSS","PageLikeConstants","ProfileTabUtils","TimelineAppCollection"],(function a(b,c,d,e,f,g){__p&&__p();var h={},i={init:function j(k,l,m){h[k]={buttons:m,collectionToken:l};c("Arbiter").subscribe(c("PageLikeConstants").UNLIKED,this._showUndo);c("Arbiter").subscribe("Collection/removeProfileConnection",this._showUndo)},_showUndo:function j(k,l){var m=h[l.profile_id];if(m){c("CSS").hide(m.buttons);c("TimelineAppCollection").decrementCount(c("ProfileTabUtils").getIDForCollectionToken(m.collectionToken));new(c("AsyncRequest"))("/ajax/timeline/app_collection_item/unlike/fbpage/").setData({collection_token:m.collectionToken,profile_id:l.profile_id}).send();h[l.profile_id]=null}}};f.exports=i}),null);
__d("TimelineCollectionGrid",["DOM"],(function a(b,c,d,e,f,g){var h={mergeWithPrevious:function i(j){var k=j.previousSibling;if(k){while(j.firstChild)c("DOM").appendContent(k,j.firstChild);c("DOM").remove(j)}}};f.exports=h}),null);